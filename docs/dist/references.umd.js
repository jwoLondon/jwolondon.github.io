var RefsModule=(()=>{var _l=Object.create;var pr=Object.defineProperty;var xl=Object.getOwnPropertyDescriptor;var El=Object.getOwnPropertyNames;var wl=Object.getPrototypeOf,Al=Object.prototype.hasOwnProperty;var an=e=>{throw TypeError(e)};var _e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),me=(e,t)=>{for(var r in t)pr(e,r,{get:t[r],enumerable:!0})},on=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of El(t))!Al.call(e,s)&&s!==r&&pr(e,s,{get:()=>t[s],enumerable:!(i=xl(t,s))||i.enumerable});return e};var Oe=(e,t,r)=>(r=e!=null?_l(wl(e)):{},on(t||!e||!e.__esModule?pr(r,"default",{value:e,enumerable:!0}):r,e)),Tl=e=>on(pr({},"__esModule",{value:!0}),e);var Ol=(e,t,r)=>t.has(e)||an("Cannot "+r);var ln=(e,t,r)=>t.has(e)?an("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var cr=(e,t,r)=>(Ol(e,t,"access private method"),r);var bn=_e(ke=>{"use strict";Object.defineProperty(ke,"__esModule",{value:!0});ke.default=ke.parse=ke.types=ke.scope=void 0;function dn(e,t){return ql(e)||$l(e,t)||zl()}function zl(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function $l(e,t){var r=[],i=!0,s=!1,n=void 0;try{for(var o=e[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));i=!0);}catch(u){s=!0,n=u}finally{try{!i&&o.return!=null&&o.return()}finally{if(s)throw n}}return r}function ql(e){if(Array.isArray(e))return e}var gn=e=>e.replace(/$|( )|(?!^)(?=[A-Z])/g,"\\.?$1"),Ei=e=>`(?:${e.join("|")})\\b`,wi=(e,t)=>new RegExp(`(?:^| )(${e}$)`,t),Gl=["mr","mrs","ms","miss","dr","herr","monsieur","hr","frau","a v m","admiraal","admiral","air cdre","air commodore","air marshal","air vice marshal","alderman","alhaji","ambassador","baron","barones","brig","brig gen","brig general","brigadier","brigadier general","brother","canon","capt","captain","cardinal","cdr","chief","cik","cmdr","coach","col","col dr","colonel","commandant","commander","commissioner","commodore","comte","comtessa","congressman","conseiller","consul","conte","contessa","corporal","councillor","count","countess","crown prince","crown princess","dame","datin","dato","datuk","datuk seri","deacon","deaconess","dean","dhr","dipl ing","doctor","dott","dott sa","dr","dr ing","dra","drs","embajador","embajadora","en","encik","eng","eur ing","exma sra","exmo sr","f o","father","first lieutient","first officer","flt lieut","flying officer","fr","frau","fraulein","fru","gen","generaal","general","governor","graaf","gravin","group captain","grp capt","h e dr","h h","h m","h r h","hajah","haji","hajim","her highness","her majesty","herr","high chief","his highness","his holiness","his majesty","hon","hr","hra","ing","ir","jonkheer","judge","justice","khun ying","kolonel","lady","lcda","lic","lieut","lieut cdr","lieut col","lieut gen","lord","m","m l","m r","madame","mademoiselle","maj gen","major","master","mevrouw","miss","mlle","mme","monsieur","monsignor","mr","mrs","ms","mstr","nti","pastor","president","prince","princess","princesse","prinses","prof","prof dr","prof sir","professor","puan","puan sri","rabbi","rear admiral","rev","rev canon","rev dr","rev mother","reverend","rva","senator","sergeant","sheikh","sheikha","sig","sig na","sig ra","sir","sister","sqn ldr","sr","sr d","sra","srta","sultan","tan sri","tan sri dato","tengku","teuku","than puying","the hon dr","the hon justice","the hon miss","the hon mr","the hon mrs","the hon ms","the hon sir","the very rev","toh puan","tun","vice admiral","viscount","viscountess","wg cdr"],Xl=["I","II","III","IV","V","Senior","Junior","Jr","Sr","PhD","Ph\\.D","APR","RPh","PE","MD","MA","DMD","CME","BVM","CFRE","CLU","CPA","CSC","CSJ","DC","DD","DDS","DO","DVM","EdD","Esq","JD","LLD","OD","OSB","PC","Ret","RGS","RN","RNC","SHCJ","SJ","SNJM","SSMO","USA","USAF","USAFR","USAR","USCG","USMC","USMCR","USN","USNR"],Vl=["Vere","Von","Van","De","Del","Della","Di","Da","Pietro","Vanden","Du","St.","St","La","Lo","Ter","O","O'","Mac","Fitz"],Hl=Ei(Gl.map(gn)),xi=Ei(Xl.map(gn)),Wl=Ei(Vl),Jl=new RegExp(`^((?:${Hl} )*)(.*)$`,"i"),Kl=wi(`(?:${xi}, )*(?:${xi})`,"i"),Ql=wi(`${/(?:[A-Z\xC0-\xD6\xD8-\xDE\u0100\u0102\u0104\u0106\u0108\u010A\u010C\u010E\u0110\u0112\u0114\u0116\u0118\u011A\u011C\u011E\u0120\u0122\u0124\u0126\u0128\u012A\u012C\u012E\u0130\u0132\u0134\u0136\u0139\u013B\u013D\u013F\u0141\u0143\u0145\u0147\u014A\u014C\u014E\u0150\u0152\u0154\u0156\u0158\u015A\u015C\u015E\u0160\u0162\u0164\u0166\u0168\u016A\u016C\u016E\u0170\u0172\u0174\u0176\u0178\u0179\u017B\u017D\u0181\u0182\u0184\u0186\u0187\u0189-\u018B\u018E-\u0191\u0193\u0194\u0196-\u0198\u019C\u019D\u019F\u01A0\u01A2\u01A4\u01A6\u01A7\u01A9\u01AC\u01AE\u01AF\u01B1-\u01B3\u01B5\u01B7\u01B8\u01BC\u01C4\u01C7\u01CA\u01CD\u01CF\u01D1\u01D3\u01D5\u01D7\u01D9\u01DB\u01DE\u01E0\u01E2\u01E4\u01E6\u01E8\u01EA\u01EC\u01EE\u01F1\u01F4\u01F6-\u01F8\u01FA\u01FC\u01FE\u0200\u0202\u0204\u0206\u0208\u020A\u020C\u020E\u0210\u0212\u0214\u0216\u0218\u021A\u021C\u021E\u0220\u0222\u0224\u0226\u0228\u022A\u022C\u022E\u0230\u0232\u023A\u023B\u023D\u023E\u0241\u0243-\u0246\u0248\u024A\u024C\u024E\u0370\u0372\u0376\u037F\u0386\u0388-\u038A\u038C\u038E\u038F\u0391-\u03A1\u03A3-\u03AB\u03CF\u03D2-\u03D4\u03D8\u03DA\u03DC\u03DE\u03E0\u03E2\u03E4\u03E6\u03E8\u03EA\u03EC\u03EE\u03F4\u03F7\u03F9\u03FA\u03FD-\u042F\u0460\u0462\u0464\u0466\u0468\u046A\u046C\u046E\u0470\u0472\u0474\u0476\u0478\u047A\u047C\u047E\u0480\u048A\u048C\u048E\u0490\u0492\u0494\u0496\u0498\u049A\u049C\u049E\u04A0\u04A2\u04A4\u04A6\u04A8\u04AA\u04AC\u04AE\u04B0\u04B2\u04B4\u04B6\u04B8\u04BA\u04BC\u04BE\u04C0\u04C1\u04C3\u04C5\u04C7\u04C9\u04CB\u04CD\u04D0\u04D2\u04D4\u04D6\u04D8\u04DA\u04DC\u04DE\u04E0\u04E2\u04E4\u04E6\u04E8\u04EA\u04EC\u04EE\u04F0\u04F2\u04F4\u04F6\u04F8\u04FA\u04FC\u04FE\u0500\u0502\u0504\u0506\u0508\u050A\u050C\u050E\u0510\u0512\u0514\u0516\u0518\u051A\u051C\u051E\u0520\u0522\u0524\u0526\u0528\u052A\u052C\u052E\u0531-\u0556\u10A0-\u10C5\u10C7\u10CD\u13A0-\u13F5\u1C90-\u1CBA\u1CBD-\u1CBF\u1E00\u1E02\u1E04\u1E06\u1E08\u1E0A\u1E0C\u1E0E\u1E10\u1E12\u1E14\u1E16\u1E18\u1E1A\u1E1C\u1E1E\u1E20\u1E22\u1E24\u1E26\u1E28\u1E2A\u1E2C\u1E2E\u1E30\u1E32\u1E34\u1E36\u1E38\u1E3A\u1E3C\u1E3E\u1E40\u1E42\u1E44\u1E46\u1E48\u1E4A\u1E4C\u1E4E\u1E50\u1E52\u1E54\u1E56\u1E58\u1E5A\u1E5C\u1E5E\u1E60\u1E62\u1E64\u1E66\u1E68\u1E6A\u1E6C\u1E6E\u1E70\u1E72\u1E74\u1E76\u1E78\u1E7A\u1E7C\u1E7E\u1E80\u1E82\u1E84\u1E86\u1E88\u1E8A\u1E8C\u1E8E\u1E90\u1E92\u1E94\u1E9E\u1EA0\u1EA2\u1EA4\u1EA6\u1EA8\u1EAA\u1EAC\u1EAE\u1EB0\u1EB2\u1EB4\u1EB6\u1EB8\u1EBA\u1EBC\u1EBE\u1EC0\u1EC2\u1EC4\u1EC6\u1EC8\u1ECA\u1ECC\u1ECE\u1ED0\u1ED2\u1ED4\u1ED6\u1ED8\u1EDA\u1EDC\u1EDE\u1EE0\u1EE2\u1EE4\u1EE6\u1EE8\u1EEA\u1EEC\u1EEE\u1EF0\u1EF2\u1EF4\u1EF6\u1EF8\u1EFA\u1EFC\u1EFE\u1F08-\u1F0F\u1F18-\u1F1D\u1F28-\u1F2F\u1F38-\u1F3F\u1F48-\u1F4D\u1F59\u1F5B\u1F5D\u1F5F\u1F68-\u1F6F\u1FB8-\u1FBB\u1FC8-\u1FCB\u1FD8-\u1FDB\u1FE8-\u1FEC\u1FF8-\u1FFB\u2102\u2107\u210B-\u210D\u2110-\u2112\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u2130-\u2133\u213E\u213F\u2145\u2160-\u216F\u2183\u24B6-\u24CF\u2C00-\u2C2E\u2C60\u2C62-\u2C64\u2C67\u2C69\u2C6B\u2C6D-\u2C70\u2C72\u2C75\u2C7E-\u2C80\u2C82\u2C84\u2C86\u2C88\u2C8A\u2C8C\u2C8E\u2C90\u2C92\u2C94\u2C96\u2C98\u2C9A\u2C9C\u2C9E\u2CA0\u2CA2\u2CA4\u2CA6\u2CA8\u2CAA\u2CAC\u2CAE\u2CB0\u2CB2\u2CB4\u2CB6\u2CB8\u2CBA\u2CBC\u2CBE\u2CC0\u2CC2\u2CC4\u2CC6\u2CC8\u2CCA\u2CCC\u2CCE\u2CD0\u2CD2\u2CD4\u2CD6\u2CD8\u2CDA\u2CDC\u2CDE\u2CE0\u2CE2\u2CEB\u2CED\u2CF2\uA640\uA642\uA644\uA646\uA648\uA64A\uA64C\uA64E\uA650\uA652\uA654\uA656\uA658\uA65A\uA65C\uA65E\uA660\uA662\uA664\uA666\uA668\uA66A\uA66C\uA680\uA682\uA684\uA686\uA688\uA68A\uA68C\uA68E\uA690\uA692\uA694\uA696\uA698\uA69A\uA722\uA724\uA726\uA728\uA72A\uA72C\uA72E\uA732\uA734\uA736\uA738\uA73A\uA73C\uA73E\uA740\uA742\uA744\uA746\uA748\uA74A\uA74C\uA74E\uA750\uA752\uA754\uA756\uA758\uA75A\uA75C\uA75E\uA760\uA762\uA764\uA766\uA768\uA76A\uA76C\uA76E\uA779\uA77B\uA77D\uA77E\uA780\uA782\uA784\uA786\uA78B\uA78D\uA790\uA792\uA796\uA798\uA79A\uA79C\uA79E\uA7A0\uA7A2\uA7A4\uA7A6\uA7A8\uA7AA-\uA7AE\uA7B0-\uA7B4\uA7B6\uA7B8\uFF21-\uFF3A]|\uD801[\uDC00-\uDC27\uDCB0-\uDCD3]|\uD803[\uDC80-\uDCB2]|\uD806[\uDCA0-\uDCBF]|\uD81B[\uDE40-\uDE5F]|\uD835[\uDC00-\uDC19\uDC34-\uDC4D\uDC68-\uDC81\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB5\uDCD0-\uDCE9\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD38\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD6C-\uDD85\uDDA0-\uDDB9\uDDD4-\uDDED\uDE08-\uDE21\uDE3C-\uDE55\uDE70-\uDE89\uDEA8-\uDEC0\uDEE2-\uDEFA\uDF1C-\uDF34\uDF56-\uDF6E\uDF90-\uDFA8\uDFCA]|\uD83A[\uDD00-\uDD21]|\uD83C[\uDD30-\uDD49\uDD50-\uDD69\uDD70-\uDD89])/.source}.*`),Yl=wi(`(?:${/(?:[a-z\xAA\xB5\xBA\xDF-\xF6\xF8-\xFF\u0101\u0103\u0105\u0107\u0109\u010B\u010D\u010F\u0111\u0113\u0115\u0117\u0119\u011B\u011D\u011F\u0121\u0123\u0125\u0127\u0129\u012B\u012D\u012F\u0131\u0133\u0135\u0137\u0138\u013A\u013C\u013E\u0140\u0142\u0144\u0146\u0148\u0149\u014B\u014D\u014F\u0151\u0153\u0155\u0157\u0159\u015B\u015D\u015F\u0161\u0163\u0165\u0167\u0169\u016B\u016D\u016F\u0171\u0173\u0175\u0177\u017A\u017C\u017E-\u0180\u0183\u0185\u0188\u018C\u018D\u0192\u0195\u0199-\u019B\u019E\u01A1\u01A3\u01A5\u01A8\u01AA\u01AB\u01AD\u01B0\u01B4\u01B6\u01B9\u01BA\u01BD-\u01BF\u01C6\u01C9\u01CC\u01CE\u01D0\u01D2\u01D4\u01D6\u01D8\u01DA\u01DC\u01DD\u01DF\u01E1\u01E3\u01E5\u01E7\u01E9\u01EB\u01ED\u01EF\u01F0\u01F3\u01F5\u01F9\u01FB\u01FD\u01FF\u0201\u0203\u0205\u0207\u0209\u020B\u020D\u020F\u0211\u0213\u0215\u0217\u0219\u021B\u021D\u021F\u0221\u0223\u0225\u0227\u0229\u022B\u022D\u022F\u0231\u0233-\u0239\u023C\u023F\u0240\u0242\u0247\u0249\u024B\u024D\u024F-\u0293\u0295-\u02B8\u02C0\u02C1\u02E0-\u02E4\u0345\u0371\u0373\u0377\u037A-\u037D\u0390\u03AC-\u03CE\u03D0\u03D1\u03D5-\u03D7\u03D9\u03DB\u03DD\u03DF\u03E1\u03E3\u03E5\u03E7\u03E9\u03EB\u03ED\u03EF-\u03F3\u03F5\u03F8\u03FB\u03FC\u0430-\u045F\u0461\u0463\u0465\u0467\u0469\u046B\u046D\u046F\u0471\u0473\u0475\u0477\u0479\u047B\u047D\u047F\u0481\u048B\u048D\u048F\u0491\u0493\u0495\u0497\u0499\u049B\u049D\u049F\u04A1\u04A3\u04A5\u04A7\u04A9\u04AB\u04AD\u04AF\u04B1\u04B3\u04B5\u04B7\u04B9\u04BB\u04BD\u04BF\u04C2\u04C4\u04C6\u04C8\u04CA\u04CC\u04CE\u04CF\u04D1\u04D3\u04D5\u04D7\u04D9\u04DB\u04DD\u04DF\u04E1\u04E3\u04E5\u04E7\u04E9\u04EB\u04ED\u04EF\u04F1\u04F3\u04F5\u04F7\u04F9\u04FB\u04FD\u04FF\u0501\u0503\u0505\u0507\u0509\u050B\u050D\u050F\u0511\u0513\u0515\u0517\u0519\u051B\u051D\u051F\u0521\u0523\u0525\u0527\u0529\u052B\u052D\u052F\u0560-\u0588\u10D0-\u10FA\u10FD-\u10FF\u13F8-\u13FD\u1C80-\u1C88\u1D00-\u1DBF\u1E01\u1E03\u1E05\u1E07\u1E09\u1E0B\u1E0D\u1E0F\u1E11\u1E13\u1E15\u1E17\u1E19\u1E1B\u1E1D\u1E1F\u1E21\u1E23\u1E25\u1E27\u1E29\u1E2B\u1E2D\u1E2F\u1E31\u1E33\u1E35\u1E37\u1E39\u1E3B\u1E3D\u1E3F\u1E41\u1E43\u1E45\u1E47\u1E49\u1E4B\u1E4D\u1E4F\u1E51\u1E53\u1E55\u1E57\u1E59\u1E5B\u1E5D\u1E5F\u1E61\u1E63\u1E65\u1E67\u1E69\u1E6B\u1E6D\u1E6F\u1E71\u1E73\u1E75\u1E77\u1E79\u1E7B\u1E7D\u1E7F\u1E81\u1E83\u1E85\u1E87\u1E89\u1E8B\u1E8D\u1E8F\u1E91\u1E93\u1E95-\u1E9D\u1E9F\u1EA1\u1EA3\u1EA5\u1EA7\u1EA9\u1EAB\u1EAD\u1EAF\u1EB1\u1EB3\u1EB5\u1EB7\u1EB9\u1EBB\u1EBD\u1EBF\u1EC1\u1EC3\u1EC5\u1EC7\u1EC9\u1ECB\u1ECD\u1ECF\u1ED1\u1ED3\u1ED5\u1ED7\u1ED9\u1EDB\u1EDD\u1EDF\u1EE1\u1EE3\u1EE5\u1EE7\u1EE9\u1EEB\u1EED\u1EEF\u1EF1\u1EF3\u1EF5\u1EF7\u1EF9\u1EFB\u1EFD\u1EFF-\u1F07\u1F10-\u1F15\u1F20-\u1F27\u1F30-\u1F37\u1F40-\u1F45\u1F50-\u1F57\u1F60-\u1F67\u1F70-\u1F7D\u1F80-\u1F87\u1F90-\u1F97\u1FA0-\u1FA7\u1FB0-\u1FB4\u1FB6\u1FB7\u1FBE\u1FC2-\u1FC4\u1FC6\u1FC7\u1FD0-\u1FD3\u1FD6\u1FD7\u1FE0-\u1FE7\u1FF2-\u1FF4\u1FF6\u1FF7\u2071\u207F\u2090-\u209C\u210A\u210E\u210F\u2113\u212F\u2134\u2139\u213C\u213D\u2146-\u2149\u214E\u2170-\u217F\u2184\u24D0-\u24E9\u2C30-\u2C5E\u2C61\u2C65\u2C66\u2C68\u2C6A\u2C6C\u2C71\u2C73\u2C74\u2C76-\u2C7D\u2C81\u2C83\u2C85\u2C87\u2C89\u2C8B\u2C8D\u2C8F\u2C91\u2C93\u2C95\u2C97\u2C99\u2C9B\u2C9D\u2C9F\u2CA1\u2CA3\u2CA5\u2CA7\u2CA9\u2CAB\u2CAD\u2CAF\u2CB1\u2CB3\u2CB5\u2CB7\u2CB9\u2CBB\u2CBD\u2CBF\u2CC1\u2CC3\u2CC5\u2CC7\u2CC9\u2CCB\u2CCD\u2CCF\u2CD1\u2CD3\u2CD5\u2CD7\u2CD9\u2CDB\u2CDD\u2CDF\u2CE1\u2CE3\u2CE4\u2CEC\u2CEE\u2CF3\u2D00-\u2D25\u2D27\u2D2D\uA641\uA643\uA645\uA647\uA649\uA64B\uA64D\uA64F\uA651\uA653\uA655\uA657\uA659\uA65B\uA65D\uA65F\uA661\uA663\uA665\uA667\uA669\uA66B\uA66D\uA681\uA683\uA685\uA687\uA689\uA68B\uA68D\uA68F\uA691\uA693\uA695\uA697\uA699\uA69B-\uA69D\uA723\uA725\uA727\uA729\uA72B\uA72D\uA72F-\uA731\uA733\uA735\uA737\uA739\uA73B\uA73D\uA73F\uA741\uA743\uA745\uA747\uA749\uA74B\uA74D\uA74F\uA751\uA753\uA755\uA757\uA759\uA75B\uA75D\uA75F\uA761\uA763\uA765\uA767\uA769\uA76B\uA76D\uA76F-\uA778\uA77A\uA77C\uA77F\uA781\uA783\uA785\uA787\uA78C\uA78E\uA791\uA793-\uA795\uA797\uA799\uA79B\uA79D\uA79F\uA7A1\uA7A3\uA7A5\uA7A7\uA7A9\uA7AF\uA7B5\uA7B7\uA7B9\uA7F8-\uA7FA\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABBF\uFB00-\uFB06\uFB13-\uFB17\uFF41-\uFF5A]|\uD801[\uDC28-\uDC4F\uDCD8-\uDCFB]|\uD803[\uDCC0-\uDCF2]|\uD806[\uDCC0-\uDCDF]|\uD81B[\uDE60-\uDE7F]|\uD835[\uDC1A-\uDC33\uDC4E-\uDC54\uDC56-\uDC67\uDC82-\uDC9B\uDCB6-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDCEA-\uDD03\uDD1E-\uDD37\uDD52-\uDD6B\uDD86-\uDD9F\uDDBA-\uDDD3\uDDEE-\uDE07\uDE22-\uDE3B\uDE56-\uDE6F\uDE8A-\uDEA5\uDEC2-\uDEDA\uDEDC-\uDEE1\uDEFC-\uDF14\uDF16-\uDF1B\uDF36-\uDF4E\uDF50-\uDF55\uDF70-\uDF88\uDF8A-\uDF8F\uDFAA-\uDFC2\uDFC4-\uDFC9\uDFCB]|\uD83A[\uDD22-\uDD43])/.source}.*|${Wl}.*|\\S*)`),Zl=function(t=""){typeof t!="string"&&(t=t+"");let r="",i="",s="";if(/[^.], /.test(t)){let v=t.split(", ");s=v.shift();let f=RegExp(xi).exec(v.join(", "));r=v.splice(f&&f.index!==0?0:-1,1)[0],i=v.join(", ")}else{let v=t.split(Kl,2),f=v.shift().split(Yl,2);r=f[0],s=f[1],i=v.pop()}let n=r.match(Jl),o=dn(n,3),l=o[1],u=o[2],m=i,c=s.split(Ql,2).reverse(),h=dn(c,2),p=h[0],d=h[1];if(!u&&p)return p.includes(" ")?{literal:p}:{family:p};if(p){let v={"dropping-particle":l,given:u,suffix:m,"non-dropping-particle":d,family:p};return Object.keys(v).forEach(f=>{v[f]||delete v[f]}),v}else return{literal:t}};ke.default=ke.parse=Zl;var eu="@name";ke.scope=eu;var tu="@name";ke.types=tu});var yn=_e(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.default=void 0;var Ai=["dropping-particle","given"],Ti=["suffix"],vn=["non-dropping-particle","family"],ru=function(t,r=!1){let i=s=>s.map(n=>t[n]||"").filter(Boolean).join(" ");if(t.literal)return t.literal;if(r){let s=i(Ti)?`, ${i(Ti)}`:"",n=i(Ai)?`, ${i(Ai)}`:"";return i(vn)+s+n}else return`${i([...Ai,...Ti,...vn])}`},iu=ru;hr.default=iu});var Oi=_e(dr=>{"use strict";Object.defineProperty(dr,"__esModule",{value:!0});Object.defineProperty(dr,"parse",{enumerable:!0,get:function(){return su.default}});Object.defineProperty(dr,"format",{enumerable:!0,get:function(){return nu.default}});var su=_n(bn()),nu=_n(yn());function _n(e){return e&&e.__esModule?e:{default:e}}});var Rn=_e(vr=>{"use strict";vr.byteLength=xu;vr.toByteArray=wu;vr.fromByteArray=Ou;var Ne=[],we=[],_u=typeof Uint8Array<"u"?Uint8Array:Array,Pi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(it=0,Cn=Pi.length;it<Cn;++it)Ne[it]=Pi[it],we[Pi.charCodeAt(it)]=it;var it,Cn;we[45]=62;we[95]=63;function Dn(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var i=r===t?0:4-r%4;return[r,i]}function xu(e){var t=Dn(e),r=t[0],i=t[1];return(r+i)*3/4-i}function Eu(e,t,r){return(t+r)*3/4-r}function wu(e){var t,r=Dn(e),i=r[0],s=r[1],n=new _u(Eu(e,i,s)),o=0,l=s>0?i-4:i,u;for(u=0;u<l;u+=4)t=we[e.charCodeAt(u)]<<18|we[e.charCodeAt(u+1)]<<12|we[e.charCodeAt(u+2)]<<6|we[e.charCodeAt(u+3)],n[o++]=t>>16&255,n[o++]=t>>8&255,n[o++]=t&255;return s===2&&(t=we[e.charCodeAt(u)]<<2|we[e.charCodeAt(u+1)]>>4,n[o++]=t&255),s===1&&(t=we[e.charCodeAt(u)]<<10|we[e.charCodeAt(u+1)]<<4|we[e.charCodeAt(u+2)]>>2,n[o++]=t>>8&255,n[o++]=t&255),n}function Au(e){return Ne[e>>18&63]+Ne[e>>12&63]+Ne[e>>6&63]+Ne[e&63]}function Tu(e,t,r){for(var i,s=[],n=t;n<r;n+=3)i=(e[n]<<16&16711680)+(e[n+1]<<8&65280)+(e[n+2]&255),s.push(Au(i));return s.join("")}function Ou(e){for(var t,r=e.length,i=r%3,s=[],n=16383,o=0,l=r-i;o<l;o+=n)s.push(Tu(e,o,o+n>l?l:o+n));return i===1?(t=e[r-1],s.push(Ne[t>>2]+Ne[t<<4&63]+"==")):i===2&&(t=(e[r-2]<<8)+e[r-1],s.push(Ne[t>>10]+Ne[t>>4&63]+Ne[t<<2&63]+"=")),s.join("")}});var In=_e(Li=>{Li.read=function(e,t,r,i,s){var n,o,l=s*8-i-1,u=(1<<l)-1,m=u>>1,c=-7,h=r?s-1:0,p=r?-1:1,d=e[t+h];for(h+=p,n=d&(1<<-c)-1,d>>=-c,c+=l;c>0;n=n*256+e[t+h],h+=p,c-=8);for(o=n&(1<<-c)-1,n>>=-c,c+=i;c>0;o=o*256+e[t+h],h+=p,c-=8);if(n===0)n=1-m;else{if(n===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,i),n=n-m}return(d?-1:1)*o*Math.pow(2,n-i)};Li.write=function(e,t,r,i,s,n){var o,l,u,m=n*8-s-1,c=(1<<m)-1,h=c>>1,p=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:n-1,v=i?1:-1,f=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(l=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+h>=1?t+=p/u:t+=p*Math.pow(2,1-h),t*u>=2&&(o++,u/=2),o+h>=c?(l=0,o=c):o+h>=1?(l=(t*u-1)*Math.pow(2,s),o=o+h):(l=t*Math.pow(2,h-1)*Math.pow(2,s),o=0));s>=8;e[r+d]=l&255,d+=v,l/=256,s-=8);for(o=o<<s|l,m+=s;m>0;e[r+d]=o&255,d+=v,o/=256,m-=8);e[r+d-v]|=f*128}});var Vn=_e(Tt=>{"use strict";var ji=Rn(),At=In(),Bn=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Tt.Buffer=q;Tt.SlowBuffer=Ru;Tt.INSPECT_MAX_BYTES=50;var yr=2147483647;Tt.kMaxLength=yr;q.TYPED_ARRAY_SUPPORT=Su();!q.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function Su(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(q.prototype,"parent",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.buffer}});Object.defineProperty(q.prototype,"offset",{enumerable:!0,get:function(){if(q.isBuffer(this))return this.byteOffset}});function Fe(e){if(e>yr)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,q.prototype),t}function q(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return $i(e)}return Ln(e,t,r)}q.poolSize=8192;function Ln(e,t,r){if(typeof e=="string")return Nu(e,t);if(ArrayBuffer.isView(e))return Cu(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Ce(e,ArrayBuffer)||e&&Ce(e.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(e,SharedArrayBuffer)||e&&Ce(e.buffer,SharedArrayBuffer)))return Mi(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(i!=null&&i!==e)return q.from(i,t,r);var s=Du(e);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return q.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}q.from=function(e,t,r){return Ln(e,t,r)};Object.setPrototypeOf(q.prototype,Uint8Array.prototype);Object.setPrototypeOf(q,Uint8Array);function jn(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function ku(e,t,r){return jn(e),e<=0?Fe(e):t!==void 0?typeof r=="string"?Fe(e).fill(t,r):Fe(e).fill(t):Fe(e)}q.alloc=function(e,t,r){return ku(e,t,r)};function $i(e){return jn(e),Fe(e<0?0:qi(e)|0)}q.allocUnsafe=function(e){return $i(e)};q.allocUnsafeSlow=function(e){return $i(e)};function Nu(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!q.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=Un(e,t)|0,i=Fe(r),s=i.write(e,t);return s!==r&&(i=i.slice(0,s)),i}function Ui(e){for(var t=e.length<0?0:qi(e.length)|0,r=Fe(t),i=0;i<t;i+=1)r[i]=e[i]&255;return r}function Cu(e){if(Ce(e,Uint8Array)){var t=new Uint8Array(e);return Mi(t.buffer,t.byteOffset,t.byteLength)}return Ui(e)}function Mi(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;return t===void 0&&r===void 0?i=new Uint8Array(e):r===void 0?i=new Uint8Array(e,t):i=new Uint8Array(e,t,r),Object.setPrototypeOf(i,q.prototype),i}function Du(e){if(q.isBuffer(e)){var t=qi(e.length)|0,r=Fe(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||Gi(e.length)?Fe(0):Ui(e);if(e.type==="Buffer"&&Array.isArray(e.data))return Ui(e.data)}function qi(e){if(e>=yr)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yr.toString(16)+" bytes");return e|0}function Ru(e){return+e!=e&&(e=0),q.alloc(+e)}q.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==q.prototype};q.compare=function(t,r){if(Ce(t,Uint8Array)&&(t=q.from(t,t.offset,t.byteLength)),Ce(r,Uint8Array)&&(r=q.from(r,r.offset,r.byteLength)),!q.isBuffer(t)||!q.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var i=t.length,s=r.length,n=0,o=Math.min(i,s);n<o;++n)if(t[n]!==r[n]){i=t[n],s=r[n];break}return i<s?-1:s<i?1:0};q.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};q.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return q.alloc(0);var i;if(r===void 0)for(r=0,i=0;i<t.length;++i)r+=t[i].length;var s=q.allocUnsafe(r),n=0;for(i=0;i<t.length;++i){var o=t[i];if(Ce(o,Uint8Array))n+o.length>s.length?q.from(o).copy(s,n):Uint8Array.prototype.set.call(s,o,n);else if(q.isBuffer(o))o.copy(s,n);else throw new TypeError('"list" argument must be an Array of Buffers');n+=o.length}return s};function Un(e,t){if(q.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Ce(e,ArrayBuffer))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&arguments[2]===!0;if(!i&&r===0)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return zi(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Xn(e).length;default:if(s)return i?-1:zi(e).length;t=(""+t).toLowerCase(),s=!0}}q.byteLength=Un;function Iu(e,t,r){var i=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return qu(this,t,r);case"utf8":case"utf-8":return zn(this,t,r);case"ascii":return zu(this,t,r);case"latin1":case"binary":return $u(this,t,r);case"base64":return Uu(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Gu(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}q.prototype._isBuffer=!0;function st(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}q.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)st(this,r,r+1);return this};q.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)st(this,r,r+3),st(this,r+1,r+2);return this};q.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)st(this,r,r+7),st(this,r+1,r+6),st(this,r+2,r+5),st(this,r+3,r+4);return this};q.prototype.toString=function(){var t=this.length;return t===0?"":arguments.length===0?zn(this,0,t):Iu.apply(this,arguments)};q.prototype.toLocaleString=q.prototype.toString;q.prototype.equals=function(t){if(!q.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:q.compare(this,t)===0};q.prototype.inspect=function(){var t="",r=Tt.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"};Bn&&(q.prototype[Bn]=q.prototype.inspect);q.prototype.compare=function(t,r,i,s,n){if(Ce(t,Uint8Array)&&(t=q.from(t,t.offset,t.byteLength)),!q.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),i===void 0&&(i=t?t.length:0),s===void 0&&(s=0),n===void 0&&(n=this.length),r<0||i>t.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&r>=i)return 0;if(s>=n)return-1;if(r>=i)return 1;if(r>>>=0,i>>>=0,s>>>=0,n>>>=0,this===t)return 0;for(var o=n-s,l=i-r,u=Math.min(o,l),m=this.slice(s,n),c=t.slice(r,i),h=0;h<u;++h)if(m[h]!==c[h]){o=m[h],l=c[h];break}return o<l?-1:l<o?1:0};function Mn(e,t,r,i,s){if(e.length===0)return-1;if(typeof r=="string"?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,Gi(r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0)if(s)r=0;else return-1;if(typeof t=="string"&&(t=q.from(t,i)),q.isBuffer(t))return t.length===0?-1:Fn(e,t,r,i,s);if(typeof t=="number")return t=t&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):Fn(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function Fn(e,t,r,i,s){var n=1,o=e.length,l=t.length;if(i!==void 0&&(i=String(i).toLowerCase(),i==="ucs2"||i==="ucs-2"||i==="utf16le"||i==="utf-16le")){if(e.length<2||t.length<2)return-1;n=2,o/=2,l/=2,r/=2}function u(d,v){return n===1?d[v]:d.readUInt16BE(v*n)}var m;if(s){var c=-1;for(m=r;m<o;m++)if(u(e,m)===u(t,c===-1?0:m-c)){if(c===-1&&(c=m),m-c+1===l)return c*n}else c!==-1&&(m-=m-c),c=-1}else for(r+l>o&&(r=o-l),m=r;m>=0;m--){for(var h=!0,p=0;p<l;p++)if(u(e,m+p)!==u(t,p)){h=!1;break}if(h)return m}return-1}q.prototype.includes=function(t,r,i){return this.indexOf(t,r,i)!==-1};q.prototype.indexOf=function(t,r,i){return Mn(this,t,r,i,!0)};q.prototype.lastIndexOf=function(t,r,i){return Mn(this,t,r,i,!1)};function Bu(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i),i>s&&(i=s)):i=s;var n=t.length;i>n/2&&(i=n/2);for(var o=0;o<i;++o){var l=parseInt(t.substr(o*2,2),16);if(Gi(l))return o;e[r+o]=l}return o}function Fu(e,t,r,i){return _r(zi(t,e.length-r),e,r,i)}function Pu(e,t,r,i){return _r(Hu(t),e,r,i)}function Lu(e,t,r,i){return _r(Xn(t),e,r,i)}function ju(e,t,r,i){return _r(Wu(t,e.length-r),e,r,i)}q.prototype.write=function(t,r,i,s){if(r===void 0)s="utf8",i=this.length,r=0;else if(i===void 0&&typeof r=="string")s=r,i=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(i)?(i=i>>>0,s===void 0&&(s="utf8")):(s=i,i=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n=this.length-r;if((i===void 0||i>n)&&(i=n),t.length>0&&(i<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var o=!1;;)switch(s){case"hex":return Bu(this,t,r,i);case"utf8":case"utf-8":return Fu(this,t,r,i);case"ascii":case"latin1":case"binary":return Pu(this,t,r,i);case"base64":return Lu(this,t,r,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ju(this,t,r,i);default:if(o)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),o=!0}};q.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Uu(e,t,r){return t===0&&r===e.length?ji.fromByteArray(e):ji.fromByteArray(e.slice(t,r))}function zn(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n=e[s],o=null,l=n>239?4:n>223?3:n>191?2:1;if(s+l<=r){var u,m,c,h;switch(l){case 1:n<128&&(o=n);break;case 2:u=e[s+1],(u&192)===128&&(h=(n&31)<<6|u&63,h>127&&(o=h));break;case 3:u=e[s+1],m=e[s+2],(u&192)===128&&(m&192)===128&&(h=(n&15)<<12|(u&63)<<6|m&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:u=e[s+1],m=e[s+2],c=e[s+3],(u&192)===128&&(m&192)===128&&(c&192)===128&&(h=(n&15)<<18|(u&63)<<12|(m&63)<<6|c&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,l=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|o&1023),i.push(o),s+=l}return Mu(i)}var Pn=4096;function Mu(e){var t=e.length;if(t<=Pn)return String.fromCharCode.apply(String,e);for(var r="",i=0;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=Pn));return r}function zu(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]&127);return i}function $u(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}function qu(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=t;n<r;++n)s+=Ju[e[n]];return s}function Gu(e,t,r){for(var i=e.slice(t,r),s="",n=0;n<i.length-1;n+=2)s+=String.fromCharCode(i[n]+i[n+1]*256);return s}q.prototype.slice=function(t,r){var i=this.length;t=~~t,r=r===void 0?i:~~r,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),r<0?(r+=i,r<0&&(r=0)):r>i&&(r=i),r<t&&(r=t);var s=this.subarray(t,r);return Object.setPrototypeOf(s,q.prototype),s};function pe(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}q.prototype.readUintLE=q.prototype.readUIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||pe(t,r,this.length);for(var s=this[t],n=1,o=0;++o<r&&(n*=256);)s+=this[t+o]*n;return s};q.prototype.readUintBE=q.prototype.readUIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||pe(t,r,this.length);for(var s=this[t+--r],n=1;r>0&&(n*=256);)s+=this[t+--r]*n;return s};q.prototype.readUint8=q.prototype.readUInt8=function(t,r){return t=t>>>0,r||pe(t,1,this.length),this[t]};q.prototype.readUint16LE=q.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||pe(t,2,this.length),this[t]|this[t+1]<<8};q.prototype.readUint16BE=q.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||pe(t,2,this.length),this[t]<<8|this[t+1]};q.prototype.readUint32LE=q.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216};q.prototype.readUint32BE=q.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])};q.prototype.readIntLE=function(t,r,i){t=t>>>0,r=r>>>0,i||pe(t,r,this.length);for(var s=this[t],n=1,o=0;++o<r&&(n*=256);)s+=this[t+o]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*r)),s};q.prototype.readIntBE=function(t,r,i){t=t>>>0,r=r>>>0,i||pe(t,r,this.length);for(var s=r,n=1,o=this[t+--s];s>0&&(n*=256);)o+=this[t+--s]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*r)),o};q.prototype.readInt8=function(t,r){return t=t>>>0,r||pe(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]};q.prototype.readInt16LE=function(t,r){t=t>>>0,r||pe(t,2,this.length);var i=this[t]|this[t+1]<<8;return i&32768?i|4294901760:i};q.prototype.readInt16BE=function(t,r){t=t>>>0,r||pe(t,2,this.length);var i=this[t+1]|this[t]<<8;return i&32768?i|4294901760:i};q.prototype.readInt32LE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24};q.prototype.readInt32BE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]};q.prototype.readFloatLE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),At.read(this,t,!0,23,4)};q.prototype.readFloatBE=function(t,r){return t=t>>>0,r||pe(t,4,this.length),At.read(this,t,!1,23,4)};q.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||pe(t,8,this.length),At.read(this,t,!0,52,8)};q.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||pe(t,8,this.length),At.read(this,t,!1,52,8)};function ve(e,t,r,i,s,n){if(!q.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}q.prototype.writeUintLE=q.prototype.writeUIntLE=function(t,r,i,s){if(t=+t,r=r>>>0,i=i>>>0,!s){var n=Math.pow(2,8*i)-1;ve(this,t,r,i,n,0)}var o=1,l=0;for(this[r]=t&255;++l<i&&(o*=256);)this[r+l]=t/o&255;return r+i};q.prototype.writeUintBE=q.prototype.writeUIntBE=function(t,r,i,s){if(t=+t,r=r>>>0,i=i>>>0,!s){var n=Math.pow(2,8*i)-1;ve(this,t,r,i,n,0)}var o=i-1,l=1;for(this[r+o]=t&255;--o>=0&&(l*=256);)this[r+o]=t/l&255;return r+i};q.prototype.writeUint8=q.prototype.writeUInt8=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,1,255,0),this[r]=t&255,r+1};q.prototype.writeUint16LE=q.prototype.writeUInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2};q.prototype.writeUint16BE=q.prototype.writeUInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2};q.prototype.writeUint32LE=q.prototype.writeUInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4};q.prototype.writeUint32BE=q.prototype.writeUInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};q.prototype.writeIntLE=function(t,r,i,s){if(t=+t,r=r>>>0,!s){var n=Math.pow(2,8*i-1);ve(this,t,r,i,n-1,-n)}var o=0,l=1,u=0;for(this[r]=t&255;++o<i&&(l*=256);)t<0&&u===0&&this[r+o-1]!==0&&(u=1),this[r+o]=(t/l>>0)-u&255;return r+i};q.prototype.writeIntBE=function(t,r,i,s){if(t=+t,r=r>>>0,!s){var n=Math.pow(2,8*i-1);ve(this,t,r,i,n-1,-n)}var o=i-1,l=1,u=0;for(this[r+o]=t&255;--o>=0&&(l*=256);)t<0&&u===0&&this[r+o+1]!==0&&(u=1),this[r+o]=(t/l>>0)-u&255;return r+i};q.prototype.writeInt8=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1};q.prototype.writeInt16LE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2};q.prototype.writeInt16BE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2};q.prototype.writeInt32LE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4};q.prototype.writeInt32BE=function(t,r,i){return t=+t,r=r>>>0,i||ve(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function $n(e,t,r,i,s,n){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function qn(e,t,r,i,s){return t=+t,r=r>>>0,s||$n(e,t,r,4,34028234663852886e22,-34028234663852886e22),At.write(e,t,r,i,23,4),r+4}q.prototype.writeFloatLE=function(t,r,i){return qn(this,t,r,!0,i)};q.prototype.writeFloatBE=function(t,r,i){return qn(this,t,r,!1,i)};function Gn(e,t,r,i,s){return t=+t,r=r>>>0,s||$n(e,t,r,8,17976931348623157e292,-17976931348623157e292),At.write(e,t,r,i,52,8),r+8}q.prototype.writeDoubleLE=function(t,r,i){return Gn(this,t,r,!0,i)};q.prototype.writeDoubleBE=function(t,r,i){return Gn(this,t,r,!1,i)};q.prototype.copy=function(t,r,i,s){if(!q.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),!s&&s!==0&&(s=this.length),r>=t.length&&(r=t.length),r||(r=0),s>0&&s<i&&(s=i),s===i||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),t.length-r<s-i&&(s=t.length-r+i);var n=s-i;return this===t&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,i,s):Uint8Array.prototype.set.call(t,this.subarray(i,s),r),n};q.prototype.fill=function(t,r,i,s){if(typeof t=="string"){if(typeof r=="string"?(s=r,r=0,i=this.length):typeof i=="string"&&(s=i,i=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!q.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(t.length===1){var n=t.charCodeAt(0);(s==="utf8"&&n<128||s==="latin1")&&(t=n)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<i)throw new RangeError("Out of range index");if(i<=r)return this;r=r>>>0,i=i===void 0?this.length:i>>>0,t||(t=0);var o;if(typeof t=="number")for(o=r;o<i;++o)this[o]=t;else{var l=q.isBuffer(t)?t:q.from(t,s),u=l.length;if(u===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<i-r;++o)this[o+r]=l[o%u]}return this};var Xu=/[^+/0-9A-Za-z-_]/g;function Vu(e){if(e=e.split("=")[0],e=e.trim().replace(Xu,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function zi(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],o=0;o<i;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&n.push(239,191,189);continue}else if(o+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return n}function Hu(e){for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function Wu(e,t){for(var r,i,s,n=[],o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),i=r>>8,s=r%256,n.push(s),n.push(i);return n}function Xn(e){return ji.toByteArray(Vu(e))}function _r(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function Ce(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function Gi(e){return e!==e}var Ju=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var i=r*16,s=0;s<16;++s)t[i+s]=e[r]+e[s];return t}()});var Wn=_e((Cf,Hn)=>{var{Buffer:qt}=Vn();function Pe(...e){let t=new Pe.Request(...e),r=new XMLHttpRequest;r.withCredentials=t.credentials==="include",r.timeout=t[K].timeout,r.open(t.method,t.url,!1);let i=!1;try{r.responseType="arraybuffer"}catch{r.overrideMimeType("text/plain; charset=x-user-defined"),i=!0}for(let l of t.headers)r.setRequestHeader(...l);r.send(t.body||null);let s=r.getAllResponseHeaders();s=s&&s.split(`\r
`).filter(Boolean).map(l=>l.split(": ",2));let n=r.response;if(i){let l=qt.alloc(n.length);for(let u=0;u<n.length;u++)l[u]=n.charCodeAt(u)&255;n=l}let o=new Pe.Response(n,{headers:s,status:r.status,statusText:r.statusText});return o[K].url=r.responseURL,o[K].redirected=r.responseURL!==t.url,o}var K=Symbol("SyncFetch Internals"),Ku=["mode","cache","redirect","referrer","integrity"],Qu={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},xr=class e{constructor(t,r={}){for(let i of Ku)if(i in r)throw new TypeError(`option ${i} not supported`);if(r.credentials==="same-origin")throw new TypeError("option credentials with value 'same-origin' not supported");if(this[K]={method:r.method||"GET",headers:new Pe.Headers(r.headers),body:r.body?qt.from(r.body):null,credentials:r.credentials||"omit",timeout:r.timeout||0},typeof t=="string")this[K].url=t;else if(t instanceof e)this[K].url=t.url,r.method||(this[K].method=t.method),r.headers||(this[K].headers=t.headers),r.body||(this[K].body=t[K].body),r.credentials||(this[K].credentials=t.credentials);else throw new TypeError("Request input should be a URL string or a Request object")}get cache(){return"default"}get credentials(){return this[K].credentials}get destination(){return""}get headers(){return this[K].headers}get integrity(){return""}get method(){return this[K].method}get mode(){return"cors"}get priority(){return"auto"}get redirect(){return"follow"}get referrer(){return"about:client"}get referrerPolicy(){return""}get url(){return this[K].url}clone(){return Vi(this),new e(this.url,this[K])}},Er=class e{constructor(t,r={}){this[K]={body:t?qt.from(t):null,bodyUsed:!1,headers:new Pe.Headers(r.headers),status:r.status,statusText:r.statusText}}get headers(){return this[K].headers}get ok(){let t=this[K].status;return t>=200&&t<300}get redirected(){return this[K].redirected}get status(){return this[K].status}get statusText(){return this[K].statusText}get url(){return this[K].url}clone(){return this.redirect(this[K].url,this[K].status)}redirect(t,r){Vi(this);let i=new e(this[K].body,{headers:this[K].headers,status:r||this[K].status,statusText:Qu[r]||this[K].statusText});return i[K].url=t||this[K].url,i[K].redirected=this[K].redirected,i}},wr=class e{constructor(t){this[K]={body:qt.from(t),bodyUsed:!1}}get bodyUsed(){return this[K].bodyUsed}static mixin(t){for(let r of Object.getOwnPropertyNames(e.prototype)){if(r==="constructor")continue;let i=Object.getOwnPropertyDescriptor(e.prototype,r);Object.defineProperty(t,r,{...i,enumerable:!0})}}arrayBuffer(){let t=$t(this);return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}blob(){let t=this.headers&&this.headers.get("content-type");return new Blob([$t(this)],t&&{type:t})}text(){return $t(this).toString()}json(){try{return JSON.parse($t(this).toString())}catch(t){throw new TypeError(`invalid json response body at ${this.url} reason: ${t.message}`,"invalid-json")}}buffer(){return $t(this).clone()}};function Vi(e){if(e.bodyUsed)throw new TypeError(`body used already for: ${e.url}`)}function $t(e){return Vi(e),e[K].bodyUsed=!0,e[K].body||qt.alloc(0)}wr.mixin(xr.prototype);wr.mixin(Er.prototype);var Xi=class{constructor(t){if(t instanceof Pe.Headers)this[K]={...t[K]};else if(this[K]={},Array.isArray(t))for(let[r,i]of t)this.append(r,i);else if(typeof t=="object")for(let r in t)this.set(r,t[r])}append(t,r){t=t.toLowerCase(),this[K][t]||(this[K][t]=[]),this[K][t].push(r)}delete(t){delete this[K][t.toLowerCase()]}set(t,r){this[K][t.toLowerCase()]=[r]}entries(){let t=[];for(let r in this[K])for(let i of this[K][r])t.push([r,i]);return t}get(t){return t=t.toLowerCase(),t in this[K]?this[K][t].join(", "):null}keys(){return Object.keys(this[K])}has(t){return t.toLowerCase()in this[K]}values(){let t=[];for(let r in this[K])for(let i of this[K][r])t.push(i);return t}*[Symbol.iterator](){for(let t in this[K])for(let r of this[K][t])yield[t,r]}};Pe.Headers=Xi;Pe.Request=xr;Pe.Response=Er;Hn.exports=Pe});var Jn=_e((Gt,Hi)=>{(function(e){"use strict";function t(r){var i=r&&r.Promise||e.Promise,s=r&&r.XMLHttpRequest||e.XMLHttpRequest;return function(){var n=Object.create(e,{fetch:{value:void 0,writable:!0}});return function(o,l){typeof Gt=="object"&&typeof Hi<"u"?l(Gt):typeof define=="function"&&define.amd?define(["exports"],l):l(o.WHATWGFetch={})}(this,function(o){"use strict";var l=typeof n<"u"&&n||typeof self<"u"&&self||typeof l<"u"&&l,u={searchParams:"URLSearchParams"in l,iterable:"Symbol"in l&&"iterator"in Symbol,blob:"FileReader"in l&&"Blob"in l&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in l,arrayBuffer:"ArrayBuffer"in l};function m(T){return T&&DataView.prototype.isPrototypeOf(T)}if(u.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(T){return T&&c.indexOf(Object.prototype.toString.call(T))>-1};function p(T){if(typeof T!="string"&&(T=String(T)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(T)||T==="")throw new TypeError("Invalid character in header field name");return T.toLowerCase()}function d(T){return typeof T!="string"&&(T=String(T)),T}function v(T){var C={next:function(){var j=T.shift();return{done:j===void 0,value:j}}};return u.iterable&&(C[Symbol.iterator]=function(){return C}),C}function f(T){this.map={},T instanceof f?T.forEach(function(C,j){this.append(j,C)},this):Array.isArray(T)?T.forEach(function(C){this.append(C[0],C[1])},this):T&&Object.getOwnPropertyNames(T).forEach(function(C){this.append(C,T[C])},this)}f.prototype.append=function(T,C){T=p(T),C=d(C);var j=this.map[T];this.map[T]=j?j+", "+C:C},f.prototype.delete=function(T){delete this.map[p(T)]},f.prototype.get=function(T){return T=p(T),this.has(T)?this.map[T]:null},f.prototype.has=function(T){return this.map.hasOwnProperty(p(T))},f.prototype.set=function(T,C){this.map[p(T)]=d(C)},f.prototype.forEach=function(T,C){for(var j in this.map)this.map.hasOwnProperty(j)&&T.call(C,this.map[j],j,this)},f.prototype.keys=function(){var T=[];return this.forEach(function(C,j){T.push(j)}),v(T)},f.prototype.values=function(){var T=[];return this.forEach(function(C){T.push(C)}),v(T)},f.prototype.entries=function(){var T=[];return this.forEach(function(C,j){T.push([j,C])}),v(T)},u.iterable&&(f.prototype[Symbol.iterator]=f.prototype.entries);function y(T){if(T.bodyUsed)return i.reject(new TypeError("Already read"));T.bodyUsed=!0}function b(T){return new i(function(C,j){T.onload=function(){C(T.result)},T.onerror=function(){j(T.error)}})}function g(T){var C=new FileReader,j=b(C);return C.readAsArrayBuffer(T),j}function A(T){var C=new FileReader,j=b(C);return C.readAsText(T),j}function E(T){for(var C=new Uint8Array(T),j=new Array(C.length),F=0;F<C.length;F++)j[F]=String.fromCharCode(C[F]);return j.join("")}function S(T){if(T.slice)return T.slice(0);var C=new Uint8Array(T.byteLength);return C.set(new Uint8Array(T)),C.buffer}function w(){return this.bodyUsed=!1,this._initBody=function(T){this.bodyUsed=this.bodyUsed,this._bodyInit=T,T?typeof T=="string"?this._bodyText=T:u.blob&&Blob.prototype.isPrototypeOf(T)?this._bodyBlob=T:u.formData&&FormData.prototype.isPrototypeOf(T)?this._bodyFormData=T:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)?this._bodyText=T.toString():u.arrayBuffer&&u.blob&&m(T)?(this._bodyArrayBuffer=S(T.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(T)||h(T))?this._bodyArrayBuffer=S(T):this._bodyText=T=Object.prototype.toString.call(T):this._bodyText="",this.headers.get("content-type")||(typeof T=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(T)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return i.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return i.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var T=y(this);return T||(ArrayBuffer.isView(this._bodyArrayBuffer)?i.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):i.resolve(this._bodyArrayBuffer))}else return this.blob().then(g)}),this.text=function(){var T=y(this);if(T)return T;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return i.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return i.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function O(T){var C=T.toUpperCase();return I.indexOf(C)>-1?C:T}function D(T,C){if(!(this instanceof D))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');C=C||{};var j=C.body;if(T instanceof D){if(T.bodyUsed)throw new TypeError("Already read");this.url=T.url,this.credentials=T.credentials,C.headers||(this.headers=new f(T.headers)),this.method=T.method,this.mode=T.mode,this.signal=T.signal,!j&&T._bodyInit!=null&&(j=T._bodyInit,T.bodyUsed=!0)}else this.url=String(T);if(this.credentials=C.credentials||this.credentials||"same-origin",(C.headers||!this.headers)&&(this.headers=new f(C.headers)),this.method=O(C.method||this.method||"GET"),this.mode=C.mode||this.mode||null,this.signal=C.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&j)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(j),(this.method==="GET"||this.method==="HEAD")&&(C.cache==="no-store"||C.cache==="no-cache")){var F=/([?&])_=[^&]*/;if(F.test(this.url))this.url=this.url.replace(F,"$1_="+new Date().getTime());else{var M=/\?/;this.url+=(M.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}D.prototype.clone=function(){return new D(this,{body:this._bodyInit})};function _(T){var C=new FormData;return T.trim().split("&").forEach(function(j){if(j){var F=j.split("="),M=F.shift().replace(/\+/g," "),U=F.join("=").replace(/\+/g," ");C.append(decodeURIComponent(M),decodeURIComponent(U))}}),C}function x(T){var C=new f,j=T.replace(/\r?\n[\t ]+/g," ");return j.split("\r").map(function(F){return F.indexOf(`
`)===0?F.substr(1,F.length):F}).forEach(function(F){var M=F.split(":"),U=M.shift().trim();if(U){var B=M.join(":").trim();C.append(U,B)}}),C}w.call(D.prototype);function k(T,C){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');C||(C={}),this.type="default",this.status=C.status===void 0?200:C.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in C?C.statusText:"",this.headers=new f(C.headers),this.url=C.url||"",this._initBody(T)}w.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},k.error=function(){var T=new k(null,{status:0,statusText:""});return T.type="error",T};var R=[301,302,303,307,308];k.redirect=function(T,C){if(R.indexOf(C)===-1)throw new RangeError("Invalid status code");return new k(null,{status:C,headers:{location:T}})},o.DOMException=l.DOMException;try{new o.DOMException}catch{o.DOMException=function(C,j){this.message=C,this.name=j;var F=Error(C);this.stack=F.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function N(T,C){return new i(function(j,F){var M=new D(T,C);if(M.signal&&M.signal.aborted)return F(new o.DOMException("Aborted","AbortError"));var U=new s;function B(){U.abort()}U.onload=function(){var z={status:U.status,statusText:U.statusText,headers:x(U.getAllResponseHeaders()||"")};z.url="responseURL"in U?U.responseURL:z.headers.get("X-Request-URL");var H="response"in U?U.response:U.responseText;setTimeout(function(){j(new k(H,z))},0)},U.onerror=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){F(new TypeError("Network request failed"))},0)},U.onabort=function(){setTimeout(function(){F(new o.DOMException("Aborted","AbortError"))},0)};function L(z){try{return z===""&&l.location.href?l.location.href:z}catch{return z}}U.open(M.method,L(M.url),!0),M.credentials==="include"?U.withCredentials=!0:M.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(u.blob?U.responseType="blob":u.arrayBuffer&&M.headers.get("Content-Type")&&M.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(U.responseType="arraybuffer")),C&&typeof C.headers=="object"&&!(C.headers instanceof f)?Object.getOwnPropertyNames(C.headers).forEach(function(z){U.setRequestHeader(z,d(C.headers[z]))}):M.headers.forEach(function(z,H){U.setRequestHeader(H,z)}),M.signal&&(M.signal.addEventListener("abort",B),U.onreadystatechange=function(){U.readyState===4&&M.signal.removeEventListener("abort",B)}),U.send(typeof M._bodyInit>"u"?null:M._bodyInit)})}N.polyfill=!0,l.fetch||(l.fetch=N,l.Headers=f,l.Request=D,l.Response=k),o.Headers=f,o.Request=D,o.Response=k,o.fetch=N,Object.defineProperty(o,"__esModule",{value:!0})}),{fetch:n.fetch,Headers:n.Headers,Request:n.Request,Response:n.Response,DOMException:n.DOMException}}()}typeof define=="function"&&define.amd?define(function(){return t}):typeof Gt=="object"?Hi.exports=t:e.fetchPonyfill=t})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:Gt)});var ls=_e((_a,Rr)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Rr=="object"&&Rr.exports?Rr.exports=t():e.moo=t()})(_a,function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=typeof new RegExp().sticky=="boolean";function i(_){return _&&t.call(_)==="[object RegExp]"}function s(_){return _&&typeof _=="object"&&!i(_)&&!Array.isArray(_)}function n(_){return _.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function o(_){var x=new RegExp("|"+_);return x.exec("").length-1}function l(_){return"("+_+")"}function u(_){if(!_.length)return"(?!)";var x=_.map(function(k){return"(?:"+k+")"}).join("|");return"(?:"+x+")"}function m(_){if(typeof _=="string")return"(?:"+n(_)+")";if(i(_)){if(_.ignoreCase)throw new Error("RegExp /i flag not allowed");if(_.global)throw new Error("RegExp /g flag is implied");if(_.sticky)throw new Error("RegExp /y flag is implied");if(_.multiline)throw new Error("RegExp /m flag is implied");return _.source}else throw new Error("Not a pattern: "+_)}function c(_,x){return _.length>x?_:Array(x-_.length+1).join(" ")+_}function h(_,x){for(var k=_.length,R=0;;){var N=_.lastIndexOf(`
`,k-1);if(N===-1||(R++,k=N,R===x)||k===0)break}var T=R<x?0:k+1;return _.substring(T).split(`
`)}function p(_){for(var x=Object.getOwnPropertyNames(_),k=[],R=0;R<x.length;R++){var N=x[R],T=_[N],C=[].concat(T);if(N==="include"){for(var j=0;j<C.length;j++)k.push({include:C[j]});continue}var F=[];C.forEach(function(M){s(M)?(F.length&&k.push(v(N,F)),k.push(v(N,M)),F=[]):F.push(M)}),F.length&&k.push(v(N,F))}return k}function d(_){for(var x=[],k=0;k<_.length;k++){var R=_[k];if(R.include){for(var N=[].concat(R.include),T=0;T<N.length;T++)x.push({include:N[T]});continue}if(!R.type)throw new Error("Rule has no type: "+JSON.stringify(R));x.push(v(R.type,R))}return x}function v(_,x){if(s(x)||(x={match:x}),x.include)throw new Error("Matching rules cannot also include states");var k={defaultType:_,lineBreaks:!!x.error||!!x.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var R in x)e.call(x,R)&&(k[R]=x[R]);if(typeof k.type=="string"&&_!==k.type)throw new Error("Type transform cannot be a string (type '"+k.type+"' for token '"+_+"')");var N=k.match;return k.match=Array.isArray(N)?N:N?[N]:[],k.match.sort(function(T,C){return i(T)&&i(C)?0:i(C)?-1:i(T)?1:C.length-T.length}),k}function f(_){return Array.isArray(_)?d(_):p(_)}var y=v("error",{lineBreaks:!0,shouldThrow:!0});function b(_,x){for(var k=null,R=Object.create(null),N=!0,T=null,C=[],j=[],F=0;F<_.length;F++)_[F].fallback&&(N=!1);for(var F=0;F<_.length;F++){var M=_[F];if(M.include)throw new Error("Inheritance is not allowed in stateless lexers");if(M.error||M.fallback){if(k)throw!M.fallback==!k.fallback?new Error("Multiple "+(M.fallback?"fallback":"error")+" rules not allowed (for token '"+M.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+M.defaultType+"')");k=M}var U=M.match.slice();if(N)for(;U.length&&typeof U[0]=="string"&&U[0].length===1;){var B=U.shift();R[B.charCodeAt(0)]=M}if(M.pop||M.push||M.next){if(!x)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+M.defaultType+"')");if(M.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+M.defaultType+"')")}if(U.length!==0){N=!1,C.push(M);for(var L=0;L<U.length;L++){var z=U[L];if(i(z)){if(T===null)T=z.unicode;else if(T!==z.unicode&&M.fallback===!1)throw new Error("If one rule is /u then all must be")}}var H=u(U.map(m)),G=new RegExp(H);if(G.test(""))throw new Error("RegExp matches empty string: "+G);var X=o(H);if(X>0)throw new Error("RegExp has capture groups: "+G+`
Use (?: \u2026 ) instead`);if(!M.lineBreaks&&G.test(`
`))throw new Error("Rule should declare lineBreaks: "+G);j.push(l(H))}}var P=k&&k.fallback,$=r&&!P?"ym":"gm",V=r||P?"":"|";T===!0&&($+="u");var J=new RegExp(u(j)+V,$);return{regexp:J,groups:C,fast:R,error:k||y}}function g(_){var x=b(f(_));return new w({start:x},"start")}function A(_,x,k){var R=_&&(_.push||_.next);if(R&&!k[R])throw new Error("Missing state '"+R+"' (in token '"+_.defaultType+"' of state '"+x+"')");if(_&&_.pop&&+_.pop!=1)throw new Error("pop must be 1 (in token '"+_.defaultType+"' of state '"+x+"')")}function E(_,x){var k=_.$all?f(_.$all):[];delete _.$all;var R=Object.getOwnPropertyNames(_);x||(x=R[0]);for(var N=Object.create(null),T=0;T<R.length;T++){var C=R[T];N[C]=f(_[C]).concat(k)}for(var T=0;T<R.length;T++)for(var C=R[T],j=N[C],F=Object.create(null),M=0;M<j.length;M++){var U=j[M];if(U.include){var B=[M,1];if(U.include!==C&&!F[U.include]){F[U.include]=!0;var L=N[U.include];if(!L)throw new Error("Cannot include nonexistent state '"+U.include+"' (in state '"+C+"')");for(var z=0;z<L.length;z++){var H=L[z];j.indexOf(H)===-1&&B.push(H)}}j.splice.apply(j,B),M--}}for(var G=Object.create(null),T=0;T<R.length;T++){var C=R[T];G[C]=b(N[C],!0)}for(var T=0;T<R.length;T++){for(var X=R[T],P=G[X],$=P.groups,M=0;M<$.length;M++)A($[M],X,G);for(var V=Object.getOwnPropertyNames(P.fast),M=0;M<V.length;M++)A(P.fast[V[M]],X,G)}return new w(G,x)}function S(_){for(var x=typeof Map<"u",k=x?new Map:Object.create(null),R=Object.getOwnPropertyNames(_),N=0;N<R.length;N++){var T=R[N],C=_[T],j=Array.isArray(C)?C:[C];j.forEach(function(F){if(typeof F!="string")throw new Error("keyword must be string (in keyword '"+T+"')");x?k.set(F,T):k[F]=T})}return function(F){return x?k.get(F):k[F]}}var w=function(_,x){this.startState=x,this.states=_,this.buffer="",this.stack=[],this.reset()};w.prototype.reset=function(_,x){return this.buffer=_||"",this.index=0,this.line=x?x.line:1,this.col=x?x.col:1,this.queuedToken=x?x.queuedToken:null,this.queuedText=x?x.queuedText:"",this.queuedThrow=x?x.queuedThrow:null,this.setState(x?x.state:this.startState),this.stack=x&&x.stack?x.stack.slice():[],this},w.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},w.prototype.setState=function(_){if(!(!_||this.state===_)){this.state=_;var x=this.states[_];this.groups=x.groups,this.error=x.error,this.re=x.regexp,this.fast=x.fast}},w.prototype.popState=function(){this.setState(this.stack.pop())},w.prototype.pushState=function(_){this.stack.push(this.state),this.setState(_)};var I=r?function(_,x){return _.exec(x)}:function(_,x){var k=_.exec(x);return k[0].length===0?null:k};w.prototype._getGroup=function(_){for(var x=this.groups.length,k=0;k<x;k++)if(_[k+1]!==void 0)return this.groups[k];throw new Error("Cannot find token type for matched text")};function O(){return this.value}if(w.prototype.next=function(){var _=this.index;if(this.queuedGroup){var x=this._token(this.queuedGroup,this.queuedText,_);return this.queuedGroup=null,this.queuedText="",x}var k=this.buffer;if(_!==k.length){var C=this.fast[k.charCodeAt(_)];if(C)return this._token(C,k.charAt(_),_);var R=this.re;R.lastIndex=_;var N=I(R,k),T=this.error;if(N==null)return this._token(T,k.slice(_,k.length),_);var C=this._getGroup(N),j=N[0];return T.fallback&&N.index!==_?(this.queuedGroup=C,this.queuedText=j,this._token(T,k.slice(_,N.index),_)):this._token(C,j,_)}},w.prototype._token=function(_,x,k){var R=0;if(_.lineBreaks){var N=/\n/g,T=1;if(x===`
`)R=1;else for(;N.exec(x);)R++,T=N.lastIndex}var C={type:typeof _.type=="function"&&_.type(x)||_.defaultType,value:typeof _.value=="function"?_.value(x):x,text:x,toString:O,offset:k,lineBreaks:R,line:this.line,col:this.col},j=x.length;if(this.index+=j,this.line+=R,R!==0?this.col=j-T+1:this.col+=j,_.shouldThrow){var F=new Error(this.formatError(C,"invalid syntax"));throw F}return _.pop?this.popState():_.push?this.pushState(_.push):_.next&&this.setState(_.next),C},typeof Symbol<"u"&&Symbol.iterator){var D=function(_){this.lexer=_};D.prototype.next=function(){var _=this.lexer.next();return{value:_,done:!_}},D.prototype[Symbol.iterator]=function(){return this},w.prototype[Symbol.iterator]=function(){return new D(this)}}return w.prototype.formatError=function(_,x){if(_==null)var k=this.buffer.slice(this.index),_={text:k,offset:this.index,lineBreaks:k.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var R=2,N=Math.max(_.line-R,1),T=_.line+R,C=String(T).length,j=h(this.buffer,this.line-_.line+R+1).slice(0,5),F=[];F.push(x+" at line "+_.line+" col "+_.col+":"),F.push("");for(var M=0;M<j.length;M++){var U=j[M],B=N+M;F.push(c(String(B),C)+"  "+U),B===_.line&&F.push(c("",C+_.col+1)+"^")}return F.join(`
`)},w.prototype.clone=function(){return new w(this.states,this.state)},w.prototype.has=function(_){return!0},{compile:g,states:E,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:S}})});var Ra=_e($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.default=void 0;function Dt(e,t){return bp(e)||gp(e,t)||dp(e,t)||hp()}function hp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dp(e,t){if(e){if(typeof e=="string")return Ca(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ca(e,t)}}function Ca(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function gp(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i=[],s=!0,n=!1,o,l;try{for(r=r.call(e);!(s=(o=r.next()).done)&&(i.push(o.value),!(t&&i.length===t));s=!0);}catch(u){n=!0,l=u}finally{try{!s&&r.return!=null&&r.return()}finally{if(n)throw l}}return i}}function bp(e){if(Array.isArray(e))return e}var vp={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},yp=/ (?:to|[-/]) | ?(?:--|[]) ?/,Da=/^(\d{4}-\d{2}-\d{2})\/(\d{4}-\d{2}-\d{2})$/;function ct(e){return vp[e.toLowerCase().slice(0,3)]}function _p(e){let t=new Date(e);return typeof e=="number"&&!isNaN(t.valueOf())?[t.getFullYear(),t.getMonth()+1,t.getDate()]:null}var xp=function(t){let r=/^(\d{4}|[-+]\d{6,})-(\d{2})(?:-(\d{2}))?/;if(typeof t!="string"||!r.test(t))return null;let i=t.match(r),s=Dt(i,4),n=s[1],o=s[2],l=s[3];return+o?+l?[n,o,l]:[n,o]:[n]},Ep=function(t){let r=/^(?:[a-z]{3},\s*)?(\d{1,2}) ([a-z]{3}) (\d{4,})/i;if(typeof t!="string"||!r.test(t))return null;let i=t.match(r),s=Dt(i,4),n=s[1],o=s[2],l=s[3];return o=ct(o),o?[l,o,n]:null};function wp(e){let t=/^(\d{1,2})\/(\d{1,2})\/(\d{2}(?:\d{2})?)/;if(typeof e!="string"||!t.test(e))return null;let r=e.match(t),i=Dt(r,4),s=i[1],n=i[2],o=i[3];return new Date(o,s,n).getMonth()===parseInt(s)?[o,s,n]:null}function Ap(e){let t=/^(\d{1,2})[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](-?\d+)/i,r=/^(-?\d+)[ .\-/](\d{1,2}|[a-z]{3,10})[ .\-/](\d{1,2})/i,i,s,n;if(typeof e!="string")return null;if(t.test(e)){var o=e.match(t),l=Dt(o,4);n=l[1],s=l[2],i=l[3]}else if(r.test(e)){var u=e.match(r),m=Dt(u,4);i=m[1],s=m[2],n=m[3]}else return null;if(ct(s))s=ct(s);else if(isNaN(s))return null;return[i,s,n]}function Tp(e){let t=/^([a-z]{3,10}|-?\d+)[^\w-]+([a-z]{3,10}|-?\d+)$/i;if(typeof e=="string"&&t.test(e)){let r=e.match(t).slice(1,3),i;if(ct(r[1]))i=ct(r.pop());else if(ct(r[0]))i=ct(r.shift());else{if(r.some(isNaN)||r.every(n=>+n<0))return null;+r[0]<0||+r[0]>+r[1]&&+r[1]>0?i=r.pop():i=r.shift()}return[r.pop(),i]}else return null}function Op(e){if(typeof e!="string")return null;let t=e.match(/^(\d+) ?(a\.?d\.?|b\.?c\.?)$/i);if(t){let r=t.slice(1),i=Dt(r,2),s=i[0],n=i[1];return[s*(n.toLowerCase()[0]==="a"?1:-1)]}else return/^-?\d+$/.test(e)?[e]:null}function Sp(e){let t=_p(e)||xp(e)||Ep(e)||wp(e)||Ap(e)||Tp(e)||Op(e);return t&&t.map(r=>parseInt(r))}function kp(e){return Da.test(e)?e.match(Da).slice(1,3):e.split(yp)}function Np(e,t){let r=[],i=typeof e=="string"&&kp(e);t?r.push(e,t):i&&i.length===2?r.push(...i):r.push(e);let s=r.map(Sp);return s.filter(Boolean).length===r.length?{"date-parts":s}:{raw:t?r.join("/"):e}}var Cp=Np;$r.default=Cp});var Ia=_e(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.default=void 0;function hs(e,t,r){if(e.length>=t)return e;for(;e.length<t;)e=r+e;return e.slice(-t)}var Dp=function(t,r="-"){if(!t["date-parts"])return t.raw;let i=t["date-parts"][0].map(s=>s.toString());switch(i.length){case 3:i[2]=hs(i[2],2,"0");case 2:i[1]=hs(i[1],2,"0");case 1:i[0]=hs(i[0],4,"0");break}return i.join(r)},Rp=Dp;qr.default=Rp});var ds=_e(Gr=>{"use strict";Object.defineProperty(Gr,"__esModule",{value:!0});Object.defineProperty(Gr,"format",{enumerable:!0,get:function(){return Bp.default}});Object.defineProperty(Gr,"parse",{enumerable:!0,get:function(){return Ip.default}});var Ip=Ba(Ra()),Bp=Ba(Ia());function Ba(e){return e&&e.__esModule?e:{default:e}}});var Ns=_e((rg,Eo)=>{"use strict";var a={PROCESSOR_VERSION:"1.4.61",error:function(e){throw typeof Error>"u"?new Error("citeproc-js error: "+e):"citeproc-js error: "+e},debug:function(e){typeof console>"u"?dump("CSL: "+e+`
`):console.log("citeproc-js warning: "+e)},toLocaleUpperCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleUpperCase(t)}catch{e=e.toUpperCase()}return e},toLocaleLowerCase(e){var t=this.tmp.lang_array;try{e=e.toLocaleLowerCase(t)}catch{e=e.toLowerCase()}return e},LOCATOR_LABELS_REGEXP:new RegExp("^((vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\\.)\\s+(.*)"),STATUTE_SUBDIV_PLAIN_REGEX:/(?:(?:^| )(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_PLAIN_REGEX_FRONT:/(?:^\s*[.,;]*\s*(?:vrs|sv|subpara|op|subch|add|amend|annot|app|art|bibliog|bk|ch|cl|col|cmt|dec|dept|div|ex|fig|fld|fol|n|hypo|illus|intro|l|no|p|pp|para|pt|pmbl|princ|pub|r|rn|sched|sec|ser|subdiv|subsec|supp|tbl|tit|vol)\. *)/,STATUTE_SUBDIV_STRINGS:{"vrs.":"verse","sv.":"sub-verbo","subpara.":"subparagraph","op.":"opus","subch.":"subchapter","add.":"addendum","amend.":"amendment","annot.":"annotation","app.":"appendix","art.":"article","bibliog.":"bibliography","bk.":"book","ch.":"chapter","cl.":"clause","col.":"column","cmt.":"comment","dec.":"decision","dept.":"department","ex.":"example","fig.":"figure","fld.":"field","fol.":"folio","n.":"note","hypo.":"hypothetical","illus.":"illustration","intro.":"introduction","l.":"line","no.":"issue","p.":"page","pp.":"page","para.":"paragraph","pt.":"part","pmbl.":"preamble","princ.":"principle","pub.":"publication","r.":"rule","rn.":"randnummer","sched.":"schedule","sec.":"section","ser.":"series,","subdiv.":"subdivision","subsec.":"subsection","supp.":"supplement","tbl.":"table","tit.":"title","vol.":"volume"},STATUTE_SUBDIV_STRINGS_REVERSE:{verse:"vrs.","sub-verbo":"sv.","sub verbo":"sv.",subparagraph:"subpara.",opus:"op.",subchapter:"subch.",addendum:"add.",amendment:"amend.",annotation:"annot.",appendix:"app.",article:"art.",bibliography:"bibliog.",book:"bk.",chapter:"ch.",clause:"cl.",column:"col.",comment:"cmt.",decision:"dec.",department:"dept.",example:"ex.",figure:"fig.",field:"fld.",folio:"fol.",note:"n.",hypothetical:"hypo.",illustration:"illus.",introduction:"intro.",line:"l.",issue:"no.",page:"p.",paragraph:"para.",part:"pt.",preamble:"pmbl.",principle:"princ.",publication:"pub.",rule:"r.",randnummer:"rn.",schedule:"sched.",section:"sec.","series,":"ser.",subdivision:"subdiv.",subsection:"subsec.",supplement:"supp.",table:"tbl.",title:"tit.",volume:"vol."},LOCATOR_LABELS_MAP:{vrs:"verse",sv:"sub-verbo",subpara:"subparagraph",op:"opus",subch:"subchapter",add:"addendum",amend:"amendment",annot:"annotation",app:"appendix",art:"article",bibliog:"bibliography",bk:"book",ch:"chapter",cl:"clause",col:"column",cmt:"comment",dec:"decision",dept:"department",ex:"example",fig:"figure",fld:"field",fol:"folio",n:"note",hypo:"hypothetical",illus:"illustration",intro:"introduction",l:"line",no:"issue",p:"page",pp:"page",para:"paragraph",pt:"part",pmbl:"preamble",princ:"principle",pub:"publication",r:"rule",rn:"randnummer",sched:"schedule",sec:"section",ser:"series,",subdiv:"subdivision",subsec:"subsection",supp:"supplement",tbl:"table",tit:"title",vol:"volume"},MODULE_MACROS:{"juris-pretitle":!0,"juris-title":!0,"juris-pretitle-short":!0,"juris-title-short":!0,"juris-main":!0,"juris-main-short":!0,"juris-tail":!0,"juris-tail-short":!0,"juris-locator":!0},MODULE_TYPES:{legal_case:!0,legislation:!0,bill:!0,hearing:!0,gazette:!0,report:!0,regulation:!0,standard:!0,patent:!0,locator:!0},checkNestedBrace:function(e){e.opt.xclass==="note"?(this.depth=0,this.update=function(r){for(var r=r||"",i=r.split(/([\(\)])/),s=1,n=i.length;s<n;s+=2)i[s]==="("?(this.depth%2===1&&(i[s]="["),this.depth+=1):i[s]===")"&&(this.depth%2===0&&(i[s]="]"),this.depth-=1);var o=i.join("");return o}):this.update=function(t){return t}},MULTI_FIELDS:["event","publisher","publisher-place","event-place","title","container-title","collection-title","authority","genre","title-short","medium","country","jurisdiction","archive","archive-place"],LangPrefsMap:{title:"titles","title-short":"titles",event:"titles",genre:"titles",medium:"titles","container-title":"journals","collection-title":"titles",archive:"journals",publisher:"publishers",authority:"publishers","publisher-place":"places","event-place":"places","archive-place":"places",jurisdiction:"places",number:"places",edition:"places",issue:"places",volume:"places"},AbbreviationSegments:function(){this["container-title"]={},this["collection-title"]={},this["institution-entire"]={},this["institution-part"]={},this.nickname={},this.number={},this.title={},this.place={},this.hereinafter={},this.classic={},this["container-phrase"]={},this["title-phrase"]={}},getAbbrevsDomain:function(e,t,r){var i=null;if(e.opt.availableAbbrevDomains&&t&&t!=="default"){var s=e.locale[e.opt.lang].opts["jurisdiction-preference"],n=null;if(e.locale[r]&&(n=e.locale[r].opts["jurisdiction-preference"]),n){for(var o=n.length-1;o>-1;o--)if(e.opt.availableAbbrevDomains[t].indexOf(n[o])>-1){i=n[o];break}}if(!i&&s){for(var o=s.length-1;o>-1;o--)if(e.opt.availableAbbrevDomains[t].indexOf(s[o])>-1){i=s[o];break}}}return i},FIELD_CATEGORY_REMAP:{title:"title","container-title":"container-title","collection-title":"collection-title",country:"place",number:"number",place:"place",archive:"container-title","title-short":"title",genre:"title",event:"title",medium:"title","archive-place":"place","publisher-place":"place","event-place":"place",jurisdiction:"place","language-name":"place","language-name-original":"place","call-number":"number","chapter-number":"number","collection-number":"number",edition:"number",page:"number",issue:"number",locator:"number","locator-extra":"number","number-of-pages":"number","number-of-volumes":"number",volume:"number","citation-number":"number",publisher:"institution-part"},parseLocator:function(e){if(this.opt.development_extensions.locator_date_and_revision&&e.locator){e.locator=""+e.locator;var t=e.locator.indexOf("|");if(t>-1){var r=e.locator;e.locator=r.slice(0,t),r=r.slice(t+1);var i=r.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2}).*/);i&&(e["locator-date"]=this.fun.dateparser.parseDateToObject(i[1]),r=r.slice(i[1].length)),e["locator-extra"]=r.replace(/^\s+/,"").replace(/\s+$/,"")}}return e.locator&&(e.locator=(""+e.locator).replace(/\s+$/,"")),e},normalizeLocaleStr:function(e){if(e){var t=e.split("-");return t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),t.join("-")}},parseNoteFieldHacks:function(e,t,r){if(typeof e.note=="string"){for(var i=[],s=e.note.split(`
`),n=0,o=s.length;n<o;n++){var l=s[n],i=[],u=l.match(a.NOTE_FIELDS_REGEXP);if(u){for(var m=l.split(a.NOTE_FIELDS_REGEXP),c=0,h=m.length-1;c<h;c++)i.push(m[c]),i.push(u[c]);i.push(m[m.length-1]);for(var c=1,h=i.length;c<h&&!(i[c-1].trim()&&(n>0||c>1)&&!i[c-1].match(a.NOTE_FIELD_REGEXP));c+=2)i[c]=`
`+i[c].slice(2,-1).trim()+`
`;s[n]=i.join("")}}s=s.join(`
`).split(`
`);for(var p=0,d={},n=0,o=s.length;n<o;n++){var l=s[n],v=l.match(a.NOTE_FIELD_REGEXP);if(l.trim()){if(!v){if(n===0)continue;p=n;break}}else continue;var f=v[1],y=v[2].replace(/^\s+/,"").replace(/\s+$/,"");if(f==="type")e.type=y,s[n]="";else if(a.DATE_VARIABLES.indexOf(f.replace(/^alt-/,""))>-1)(!e[f]||r)&&(e[f]=a.DateParser.parseDateToArray(y),(!t||t[f]&&this.isDateString(y))&&(s[n]=""));else if(!e[f]){if(a.NAME_VARIABLES.indexOf(f.replace(/^alt-/,""))>-1){d[f]||(d[f]=[]);var b=y.split(/\s*\|\|\s*/);if(b.length===1)d[f].push({literal:b[0]});else if(b.length===2){var g={family:b[0],given:b[1]};a.parseParticles(g),d[f].push(g)}}else e[f]=y;(!t||t[f])&&(s[n]="")}}for(var f in d)e[f]=d[f];if(t){s[p].trim()&&(s[p]=`
`+s[p]);for(var n=p-1;n>-1;n--)s[n].trim()||(s=s.slice(0,n).concat(s.slice(n+1)))}e.note=s.join(`
`).trim()}},checkPrefixSpaceAppend:function(e,n){n||(n="");var r="",i=n.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=i.slice(-1);(i.match(a.ENDSWITH_ROMANESQUE_REGEXP)||a.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)>-1||s.match(/[\)\],0-9]/))&&(r=" ");var n=(n+r).replace(/\s+/g," ");return n},checkIgnorePredecessor:function(e,t){var r=!1,i=t.replace(/<[^>]+>/g,"").replace(/["'\u201d\u2019\u00bb\u202f\u00a0 ]+$/g,""),s=i.slice(-1);return a.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(s)>-1&&t.trim().indexOf(" ")>-1?(e.tmp.term_predecessor=!1,!0):!1},checkSuffixSpacePrepend:function(e,t){return t?((t.match(a.STARTSWITH_ROMANESQUE_REGEXP)||["[","("].indexOf(t.slice(0,1))>-1)&&(t=" "+t),t):""},GENDERS:["masculine","feminine"],ERROR_NO_RENDERED_FORM:1,PREVIEW:"Just for laughs.",ASSUME_ALL_ITEMS_REGISTERED:2,START:0,END:1,SINGLETON:2,SEEN:6,SUCCESSOR:3,SUCCESSOR_OF_SUCCESSOR:4,SUPPRESS:5,SINGULAR:0,PLURAL:1,LITERAL:!0,BEFORE:1,AFTER:2,DESCENDING:1,ASCENDING:2,PRIMARY:1,SECONDARY:2,POSITION_FIRST:0,POSITION_SUBSEQUENT:1,POSITION_IBID:2,POSITION_IBID_WITH_LOCATOR:3,POSITION_CONTAINER_SUBSEQUENT:4,POSITION_MAP:{0:0,4:1,1:2,2:3,3:4},POSITION_TEST_VARS:["position","first-reference-note-number","near-note"],AREAS:["citation","citation_sort","bibliography","bibliography_sort","intext"],CITE_FIELDS:["first-reference-note-number","first-container-reference-note-number","locator","locator-extra"],SWAPPING_PUNCTUATION:[".","!","?",":",","],TERMINAL_PUNCTUATION:[":",".",";","!","?"," "],NONE:0,NUMERIC:1,POSITION:2,TRIGRAPH:3,DATE_PARTS:["year","month","day"],DATE_PARTS_ALL:["year","month","day","season"],DATE_PARTS_INTERNAL:["year","month","day","year_end","month_end","day_end"],NAME_PARTS:["non-dropping-particle","family","given","dropping-particle","suffix","literal"],DISAMBIGUATE_OPTIONS:["disambiguate-add-names","disambiguate-add-givenname","disambiguate-add-year-suffix"],GIVENNAME_DISAMBIGUATION_RULES:["all-names","all-names-with-initials","primary-name","primary-name-with-initials","by-cite"],NAME_ATTRIBUTES:["and","delimiter-precedes-last","delimiter-precedes-et-al","initialize-with","initialize","name-as-sort-order","sort-separator","et-al-min","et-al-use-first","et-al-subsequent-min","et-al-subsequent-use-first","form","prefix","suffix","delimiter"],LOOSE:0,STRICT:1,TOLERANT:2,PREFIX_PUNCTUATION:/[.;:]\s*$/,SUFFIX_PUNCTUATION:/^\s*[.;:,\(\)]/,NUMBER_REGEXP:/(?:^\d+|\d+$)/,NAME_INITIAL_REGEXP:/^([A-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u042f\u0590-\u05d4\u05d6-\u05ff\u0600-\u06ff\u0370\u0372\u0376\u0386\u0388-\u03ab\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03fd-\u03ff])([a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0400-\u052f\u0600-\u06ff\u0370-\u03ff\u1f00-\u1fff]*|)(\.)*/,ROMANESQUE_REGEXP:/[-0-9a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ROMANESQUE_NOT_REGEXP:/[^a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/g,STARTSWITH_ROMANESQUE_REGEXP:/^[&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]/,ENDSWITH_ROMANESQUE_REGEXP:/[.;:&a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]$/,ALL_ROMANESQUE_REGEXP:/^[a-zA-Z\u0e01-\u0e5b\u00c0-\u017f\u0370-\u03ff\u0400-\u052f\u0590-\u05d4\u05d6-\u05ff\u1f00-\u1fff\u0600-\u06ff\u200c\u200d\u200e\u0218\u0219\u021a\u021b\u202a-\u202e]+$/,VIETNAMESE_SPECIALS:/[\u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]/,VIETNAMESE_NAMES:/^(?:(?:[.AaBbCcDdEeGgHhIiKkLlMmNnOoPpQqRrSsTtUuVvXxYy \u00c0-\u00c3\u00c8-\u00ca\u00cc\u00cd\u00d2-\u00d5\u00d9\u00da\u00dd\u00e0-\u00e3\u00e8-\u00ea\u00ec\u00ed\u00f2-\u00f5\u00f9\u00fa\u00fd\u0101\u0103\u0110\u0111\u0128\u0129\u0168\u0169\u01a0\u01a1\u01af\u01b0\u1ea0-\u1ef9]{2,6})(\s+|$))+$/,NOTE_FIELDS_REGEXP:/\{:(?:[\-_a-z]+|[A-Z]+):[^\}]+\}/g,NOTE_FIELD_REGEXP:/^([\-_a-z]+|[A-Z]+):\s*([^\}]+)$/,PARTICLE_GIVEN_REGEXP:/^([^ ]+(?:\u02bb |\u2019 | |\' ) *)(.+)$/,PARTICLE_FAMILY_REGEXP:/^([^ ]+(?:\-|\u02bb|\u2019| |\') *)(.+)$/,DISPLAY_CLASSES:["block","left-margin","right-inline","indent"],NAME_VARIABLES:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],CREATORS:["author","chair","collection-editor","compiler","composer","container-author","contributor","curator","director","editor","editor-translator","editorial-director","executive-producer","guest","host","illustrator","interviewer","narrator","organizer","original-author","performer","producer","recipient","reviewed-author","script-writer","series-creator","translator","commenter"],NUMERIC_VARIABLES:["call-number","chapter-number","collection-number","division","edition","page","issue","locator","locator-extra","number","number-of-pages","number-of-volumes","part-number","printing-number","section","supplement-number","version","volume","supplement","citation-number"],DATE_VARIABLES:["locator-date","issued","event-date","accessed","original-date","publication-date","available-date","submitted","alt-issued","alt-event"],VARIABLES_WITH_SHORT_FORM:["title","container-title"],TITLE_FIELD_SPLITS:function(e){for(var t=["title","short","main","sub","subjoin"],r={},i=0,s=t.length;i<s;i++)r[t[i]]=e+"title"+(t[i]==="title"?"":"-"+t[i]);return r},demoteNoiseWords:function(e,t,r){var i=e.locale[e.opt.lang].opts["leading-noise-words"];if(t&&r){t=t.split(/\s+/),t.reverse();for(var s=[],n=t.length-1;n>-1&&i.indexOf(t[n].toLowerCase())>-1;n+=-1)s.push(t.pop());t.reverse();var o=t.join(" "),l=s.join(" ");r==="drop"||!l?t=o:r==="demote"&&(t=[o,l].join(", "))}return t},extractTitleAndSubtitle:function(e,t){var r=t?"\u202F":"",i=[""];this.opt.development_extensions.split_container_title&&i.push("container-");for(var s=0,n=i.length;s<n;s++){var o=i[s],l=a.TITLE_FIELD_SPLITS(o),u=[!1];if(e.multi)for(var m in e.multi._keys[l.short])u.push(m);for(var c=0,h=u.length;c<h;c++){var m=u[c],p={};m?(e.multi._keys[l.title]&&(p[l.title]=e.multi._keys[l.title][m]),e.multi._keys[l.short]&&(p[l.short]=e.multi._keys[l.short][m])):(p[l.title]=e[l.title],p[l.short]=e[l.short]),p[l.main]=p[l.title],p[l.sub]=!1;var d=p[l.short];if(p[l.title]){if(d&&d.toLowerCase()===p[l.title].toLowerCase())p[l.main]=p[l.title],p[l.subjoin]="",p[l.sub]="";else if(d){var v=p[l.title].slice(d.replace(/[\?\!]+$/,"").length),f=p[l.title].replace(v.replace(/^[\?\!]+/,""),"").trim(),y=a.TITLE_SPLIT_REGEXP.matchfirst.exec(v);if(y&&f.toLowerCase()===d.toLowerCase())p[l.main]=f,p[l.subjoin]=y[1].replace(/[\?\!]+(\s*)$/,"$1"),p[l.sub]=v.replace(a.TITLE_SPLIT_REGEXP.matchfirst,""),this.opt.development_extensions.force_short_title_casing_alignment&&(p[l.short]=p[l.main]);else{var b=a.TITLE_SPLIT(p[l.title]);b.length==3?(p[l.main]=b[0],p[l.subjoin]=b[1],p[l.sub]=b[2]):(p[l.main]=p[l.title],p[l.subjoin]="",p[l.sub]="")}}else{var b=a.TITLE_SPLIT(p[l.title]);if(b.length==3){if(p[l.main]=b[0],p[l.subjoin]=b[1],p[l.sub]=b[2],this.opt.development_extensions.implicit_short_title&&e.type!=="legal_case"&&!e[l.short]&&!p[l.main].match(/^[\-\.[0-9]+$/)){var g=p[l.subjoin].trim();["?","!"].indexOf(g)===-1&&(g=""),p[l.short]=p[l.main]+g}}else p[l.main]=p[l.title],p[l.subjoin]="",p[l.sub]=""}if(p[l.subjoin]&&p[l.subjoin].match(/([\?\!])/)){var y=p[l.subjoin].match(/(\s*)$/);p[l.main]=p[l.main]+r+p[l.subjoin].trim(),p[l.subjoin]=y[1]}}if(p[l.subjoin]&&(p[l.subjoin].indexOf(":")>-1&&(p[l.subjoin]=r+": "),(p[l.subjoin].indexOf("-")>-1||p[l.subjoin].indexOf("\u2014")>-1)&&(p[l.subjoin]="\u2014")),m)for(var A in p)e.multi._keys[A]||(e.multi._keys[A]={}),e.multi._keys[A][m]=p[A];else for(var A in p)e[A]=p[A]}}},titlecaseSentenceOrNormal:function(e,t,r,i,s){var n=a.TITLE_FIELD_SPLITS(r),o={};if(i&&t.multi?(t.multi._keys[n.title]&&(o[n.title]=t.multi._keys[n.title][i]),t.multi._keys[n.main]&&(o[n.main]=t.multi._keys[n.main][i]),t.multi._keys[n.sub]&&(o[n.sub]=t.multi._keys[n.sub][i]),t.multi._keys[n.subjoin]&&(o[n.subjoin]=t.multi._keys[n.subjoin][i])):(o[n.title]=t[n.title],o[n.main]=t[n.main],o[n.sub]=t[n.sub],o[n.subjoin]=t[n.subjoin]),o[n.main]&&o[n.sub]){var l=o[n.main],u=o[n.subjoin],m=o[n.sub];return s?(l=a.Output.Formatters.sentence(e,l),m=a.Output.Formatters.sentence(e,m)):e.opt.development_extensions.uppercase_subtitles&&(m=a.Output.Formatters["capitalize-first"](e,m)),[l,u,m].join("")}else if(o[n.title]){if(s)return a.Output.Formatters.sentence(e,o[n.title]);if(e.opt.development_extensions.uppercase_subtitles){for(var c=a.TITLE_SPLIT(o[n.title]),h=0,p=c.length;h<p;h+=2)c[h]=a.Output.Formatters["capitalize-first"](e,c[h]);for(var h=1,p=c.length-1;h<p;h+=2){var d=c[h].match(/([:\?\!] )/);if(d){var v=e.opt["default-locale"][0].slice(0,2).toLowerCase()==="fr"?"\u202F":"";c[h]=v+d[1]}(c[h].indexOf("-")>-1||c[h].indexOf("\u2014")>-1)&&(c[h]="\u2014")}return o[n.title]=c.join(""),o[n.title]}else return o[n.title]}else return""},getSafeEscape:function(e){if(["bibliography","citation"].indexOf(e.tmp.area)>-1){var t=[];return e.opt.development_extensions.thin_non_breaking_space_html_hack&&e.opt.mode==="html"&&t.push(function(r){return r.replace(/\u202f/g,'<span style="white-space:nowrap">&thinsp;</span>')}),t.length?function(r){for(var i=0,s=t.length;i<s;i+=1)r=t[i](r);return a.Output.Formats[e.opt.mode].text_escape(r)}:a.Output.Formats[e.opt.mode].text_escape}else return function(r){return r}},SKIP_WORDS:["about","above","across","afore","after","against","al","along","alongside","amid","amidst","among","amongst","anenst","apropos","apud","around","as","aside","astride","at","athwart","atop","barring","before","behind","below","beneath","beside","besides","between","beyond","but","by","circa","despite","down","during","et","except","for","forenenst","from","given","in","inside","into","lest","like","modulo","near","next","notwithstanding","of","off","on","onto","out","over","per","plus","pro","qua","sans","since","than","through"," thru","throughout","thruout","till","to","toward","towards","under","underneath","until","unto","up","upon","versus","vs.","v.","vs","v","via","vis-\xE0-vis","with","within","without","according to","ahead of","apart from","as for","as of","as per","as regards","aside from","back to","because of","close to","due to","except for","far from","inside of","instead of","near to","next to","on to","out from","out of","outside of","prior to","pursuant to","rather than","regardless of","such as","that of","up to","where as","or","yet","so","for","and","nor","a","an","the","de","d'","von","van","c","ca"],FORMAT_KEY_SEQUENCE:["@strip-periods","@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align","@quotes"],INSTITUTION_KEYS:["font-style","font-variant","font-weight","text-decoration","text-case"],SUFFIX_CHARS:"a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z",ROMAN_NUMERALS:[["","i","ii","iii","iv","v","vi","vii","viii","ix"],["","x","xx","xxx","xl","l","lx","lxx","lxxx","xc"],["","c","cc","ccc","cd","d","dc","dcc","dccc","cm"],["","m","mm","mmm","mmmm","mmmmm"]],LANGS:{"af-ZA":"Afrikaans",ar:"Arabic","bg-BG":"Bulgarian","ca-AD":"Catalan","cs-CZ":"Czech","da-DK":"Danish","de-AT":"Austrian","de-CH":"German (CH)","de-DE":"German (DE)","el-GR":"Greek","en-GB":"English (GB)","en-US":"English (US)","es-ES":"Spanish","et-EE":"Estonian",eu:"European","fa-IR":"Persian","fi-FI":"Finnish","fr-CA":"French (CA)","fr-FR":"French (FR)","he-IL":"Hebrew","hr-HR":"Croatian","hu-HU":"Hungarian","is-IS":"Icelandic","it-IT":"Italian","ja-JP":"Japanese","km-KH":"Khmer","ko-KR":"Korean","lt-LT":"Lithuanian","lv-LV":"Latvian","mn-MN":"Mongolian","nb-NO":"Norwegian (Bokm\xE5l)","nl-NL":"Dutch","nn-NO":"Norwegian (Nynorsk)","pl-PL":"Polish","pt-BR":"Portuguese (BR)","pt-PT":"Portuguese (PT)","ro-RO":"Romanian","ru-RU":"Russian","sk-SK":"Slovak","sl-SI":"Slovenian","sr-RS":"Serbian","sv-SE":"Swedish","th-TH":"Thai","tr-TR":"Turkish","uk-UA":"Ukrainian","vi-VN":"Vietnamese","zh-CN":"Chinese (CN)","zh-TW":"Chinese (TW)"},LANG_BASES:{af:"af_ZA",ar:"ar",bg:"bg_BG",ca:"ca_AD",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_US",es:"es_ES",et:"et_EE",eu:"eu",fa:"fa_IR",fi:"fi_FI",fr:"fr_FR",he:"he_IL",hr:"hr-HR",hu:"hu_HU",is:"is_IS",it:"it_IT",ja:"ja_JP",km:"km_KH",ko:"ko_KR",lt:"lt_LT",lv:"lv-LV",mn:"mn_MN",nb:"nb_NO",nl:"nl_NL",nn:"nn-NO",pl:"pl_PL",pt:"pt_PT",ro:"ro_RO",ru:"ru_RU",sk:"sk_SK",sl:"sl_SI",sr:"sr_RS",sv:"sv_SE",th:"th_TH",tr:"tr_TR",uk:"uk_UA",vi:"vi_VN",zh:"zh_CN"},SUPERSCRIPTS:{\u00AA:"a","\xB2":"2","\xB3":"3","\xB9":"1",\u00BA:"o",\u02B0:"h",\u02B1:"\u0266",\u02B2:"j",\u02B3:"r",\u02B4:"\u0279",\u02B5:"\u027B",\u02B6:"\u0281",\u02B7:"w",\u02B8:"y",\u02E0:"\u0263",\u02E1:"l",\u02E2:"s",\u02E3:"x",\u02E4:"\u0295","\u1D2C":"A","\u1D2D":"\xC6","\u1D2E":"B","\u1D30":"D","\u1D31":"E","\u1D32":"\u018E","\u1D33":"G","\u1D34":"H","\u1D35":"I","\u1D36":"J","\u1D37":"K","\u1D38":"L","\u1D39":"M","\u1D3A":"N","\u1D3C":"O","\u1D3D":"\u0222","\u1D3E":"P","\u1D3F":"R","\u1D40":"T","\u1D41":"U","\u1D42":"W","\u1D43":"a","\u1D44":"\u0250","\u1D45":"\u0251","\u1D46":"\u1D02","\u1D47":"b","\u1D48":"d","\u1D49":"e","\u1D4A":"\u0259","\u1D4B":"\u025B","\u1D4C":"\u025C","\u1D4D":"g","\u1D4F":"k","\u1D50":"m","\u1D51":"\u014B","\u1D52":"o","\u1D53":"\u0254","\u1D54":"\u1D16","\u1D55":"\u1D17","\u1D56":"p","\u1D57":"t","\u1D58":"u","\u1D59":"\u1D1D","\u1D5A":"\u026F","\u1D5B":"v","\u1D5C":"\u1D25","\u1D5D":"\u03B2","\u1D5E":"\u03B3","\u1D5F":"\u03B4","\u1D60":"\u03C6","\u1D61":"\u03C7","\u2070":"0","\u2071":"i","\u2074":"4","\u2075":"5","\u2076":"6","\u2077":"7","\u2078":"8","\u2079":"9","\u207A":"+","\u207B":"\u2212","\u207C":"=","\u207D":"(","\u207E":")",\u207F:"n","\u2120":"SM","\u2122":"TM","\u3192":"\u4E00","\u3193":"\u4E8C","\u3194":"\u4E09","\u3195":"\u56DB","\u3196":"\u4E0A","\u3197":"\u4E2D","\u3198":"\u4E0B","\u3199":"\u7532","\u319A":"\u4E59","\u319B":"\u4E19","\u319C":"\u4E01","\u319D":"\u5929","\u319E":"\u5730","\u319F":"\u4EBA",\u02C0:"\u0294",\u02C1:"\u0295",\u06E5:"\u0648",\u06E6:"\u064A"},SUPERSCRIPTS_REGEXP:new RegExp("[\xAA\xB2\xB3\xB9\xBA\u02B0\u02B1\u02B2\u02B3\u02B4\u02B5\u02B6\u02B7\u02B8\u02E0\u02E1\u02E2\u02E3\u02E4\u1D2C\u1D2D\u1D2E\u1D30\u1D31\u1D32\u1D33\u1D34\u1D35\u1D36\u1D37\u1D38\u1D39\u1D3A\u1D3C\u1D3D\u1D3E\u1D3F\u1D40\u1D41\u1D42\u1D43\u1D44\u1D45\u1D46\u1D47\u1D48\u1D49\u1D4A\u1D4B\u1D4C\u1D4D\u1D4F\u1D50\u1D51\u1D52\u1D53\u1D54\u1D55\u1D56\u1D57\u1D58\u1D59\u1D5A\u1D5B\u1D5C\u1D5D\u1D5E\u1D5F\u1D60\u1D61\u2070\u2071\u2074\u2075\u2076\u2077\u2078\u2079\u207A\u207B\u207C\u207D\u207E\u207F\u2120\u2122\u3192\u3193\u3194\u3195\u3196\u3197\u3198\u3199\u319A\u319B\u319C\u319D\u319E\u319F\u02C0\u02C1\u06E5\u06E6]","g"),UPDATE_GROUP_CONTEXT_CONDITION:function(e,t,r,i,s){if(e.opt.use_context_condition){var n=e.tmp.group_context.tip;n.condition?(n.condition.termtxt||(n.condition.termtxt=t,n.condition.valueTerm=r),!n.value_seen&&n.condition.test==="comma-safe-numbers-only"&&s&&(n.value_seen=!0,s.match(/^[0-9]/)||(e.tmp.just_did_number=!1))):i&&i.decorations.filter(o=>o[0]==="@vertical-align").length>0||i&&i.strings.suffix?e.tmp.just_did_number=!1:t&&(t.match(/[0-9]$/)?e.tmp.just_did_number=!0:e.tmp.just_did_number=!1)}},EVALUATE_GROUP_CONDITION:function(e,t){if(e.opt.use_context_condition){var r,i=t.condition.test==="comma-safe-numbers-only";if(t.condition.test==="empty-label")r=!t.condition.termtxt;else if(t.condition.test==="empty-label-no-decor")r=!t.condition.termtxt||t.condition.termtxt.indexOf("%s")>-1;else if(["comma-safe","comma-safe-numbers-only"].indexOf(t.condition.test)>-1){var s=t.condition.termtxt,n=!1;t.condition.termtxt&&(n=t.condition.termtxt.slice(0,1).match(a.ALL_ROMANESQUE_REGEXP));var o=e.tmp.just_did_number;o?t.condition.valueTerm?r=!i:s?n?r=!i:["always","after-number"].indexOf(e.opt.require_comma_on_symbol)>-1?r=!0:r=!1:r=!0:t.condition.valueTerm?r=!1:s?n?r=!i:e.opt.require_comma_on_symbol==="always"?r=!0:r=!1:r=!1}if(r)var l=!1;else var l=!0;return t.condition.not&&(l=!l),l}},SYS_OPTIONS:["prioritize_disambiguate_condition","csl_reverse_lookup_support","main_title_from_short_title","uppercase_subtitles","force_short_title_casing_alignment","implicit_short_title","split_container_title"],TITLE_SPLIT_REGEXP:function(){var e=["\\.\\s+","\\!\\s+","\\?\\s+","\\s*::*\\s+","\\s*\u2014\\s*","\\s+\\-\\s+","\\s*\\-\\-\\-*\\s*"];return{match:new RegExp("("+e.join("|")+")","g"),matchfirst:new RegExp("^("+e.join("|")+")"),split:new RegExp("(?:"+e.join("|")+")")}}(),TITLE_SPLIT:function(e){if(!e)return e;for(var t=e.match(a.TITLE_SPLIT_REGEXP.match),r=e.split(a.TITLE_SPLIT_REGEXP.split),i=r.length-2;i>-1;i--)r[i]=r[i].trim(),r[i]&&r[i].slice(-1).toLowerCase()!==r[i].slice(-1)?(r[i]=r[i]+t[i]+r[i+1],r=r.slice(0,i+1).concat(r.slice(i+2))):r=r.slice(0,i+1).concat([t[i]]).concat(r.slice(i+1));return r},GET_COURT_CLASS:function(e,t,r){var i="",s=null,n=t.jurisdiction?t.jurisdiction.split(":")[0]:null,o="court_condition_classes";return r&&(o="court_key_classes"),n&&t.authority&&(typeof t.authority=="string"?s=t.authority:t.authority[0]&&t.authority[0].literal&&(s=t.authority[0].literal)),s&&(this.lang&&e.locale[this.lang].opts[o]&&e.locale[this.lang].opts[o][n]&&e.locale[this.lang].opts[o][n][s]?i=e.locale[this.lang].opts[o][n][s]:e.locale[e.opt["default-locale"][0]].opts[o]&&e.locale[e.opt["default-locale"][0]].opts[o][n]&&e.locale[e.opt["default-locale"][0]].opts[o][n][s]&&(i=e.locale[e.opt["default-locale"][0]].opts[o][n][s])),i},SET_COURT_CLASSES:function(e,t,r,i){for(var s=r.getNodesByName(i,"court-class"),n=0,o=r.numberofnodes(s);n<o;n+=1){var l=s[n],u=r.attributes(l),m=u["@name"],c=u["@country"],h=u["@courts"],p="court_key_classes";if(e.registry&&(p="court_condition_classes"),m&&c&&h){h=h.trim().split(/\s+/),e.locale[t].opts[p]||(e.locale[t].opts[p]={}),e.locale[t].opts[p][c]||(e.locale[t].opts[p][c]={});for(var d=0,v=h.length;d<v;d++)e.locale[t].opts[p][c][h[d]]=m}}},INIT_JURISDICTION_MACROS:function(e,t,r,i){if(t["best-jurisdiction"])return!0;if(!e.sys.retrieveStyleModule||!a.MODULE_MACROS[i]||!t.jurisdiction)return!1;var l=e.getJurisdictionList(t.jurisdiction);if(!e.opt.jurisdictions_seen[l[0]]){var s=e.retrieveAllStyleModules(l);for(var n in s){var o=e.loadStyleModule(n,s[n]);o&&(s[o]||(Object.assign(s,e.retrieveAllStyleModules([o])),e.loadStyleModule(o,s[o],!0)))}}var l=e.getJurisdictionList(t.jurisdiction);e.opt.parallel.enable&&(e.parallel||(e.parallel=new a.Parallel(e)));for(var u=0,m=l.length;u<m;u++){var n=l[u];if(r&&e.juris[n]&&!r["best-jurisdiction"]&&e.juris[n].types.locator&&(t["best-jurisdiction"]=n),e.juris[n]&&e.juris[n].types[t.type])return t["best-jurisdiction"]=n,!0}return!1}};a.XmlJSON=function(e){this.dataObj=e,this.institution={name:"institution",attrs:{"institution-parts":"long",delimiter:", "},children:[{name:"institution-part",attrs:{name:"long"},children:[]}]}};a.XmlJSON.prototype.clean=function(e){return e};a.XmlJSON.prototype.getStyleId=function(e,t){var r="id";t&&(r="title");for(var i="",s=e.children,n=0,o=s.length;n<o;n++)if(s[n].name==="info")for(var l=s[n].children,u=0,m=l.length;u<m;u++)l[u].name===r&&(i=l[u].children[0]);return i};a.XmlJSON.prototype.children=function(e){return e&&e.children.length?e.children.slice():!1};a.XmlJSON.prototype.nodename=function(e){return e?e.name:null};a.XmlJSON.prototype.attributes=function(e){var t={};for(var r in e.attrs)t["@"+r]=e.attrs[r];return t};a.XmlJSON.prototype.content=function(e){var t="";if(!e||!e.children)return t;for(var r=0,i=e.children.length;r<i;r+=1)typeof e.children[r]=="string"&&(t+=e.children[r]);return t};a.XmlJSON.prototype.namespace={};a.XmlJSON.prototype.numberofnodes=function(e){return e&&typeof e.length=="number"?e.length:0};a.XmlJSON.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),e&&e.attrs&&(e.attrs[t]?i=e.attrs[t]:i=""),i};a.XmlJSON.prototype.getNodeValue=function(e,t){var r="";if(t)for(var i=0,s=e.children.length;i<s;i+=1)e.children[i].name===t&&(e.children[i].children.length?r=e.children[i]:r="");else e&&(r=e);return r&&r.children&&r.children.length==1&&typeof r.children[0]=="string"&&(r=r.children[0]),r};a.XmlJSON.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,s){var n,o,l,u,m;i.slice(0,1)==="@"&&(i=i.slice(1));for(var c=0,h=e.children.length;c<h;c+=1)e.children[c].name===t&&e.children[c].attrs.name===r&&(e.children[c].attrs[i]=s)};a.XmlJSON.prototype.deleteNodeByNameAttribute=function(e,t){var r,i;for(r=0,i=e.children.length;r<i;r+=1)!e.children[r]||typeof e.children[r]=="string"||e.children[r].attrs.name==t&&(e.children=e.children.slice(0,r).concat(e.children.slice(r+1)))};a.XmlJSON.prototype.deleteAttribute=function(e,t){var r,i;typeof e.attrs[t]<"u"&&e.attrs.pop(t)};a.XmlJSON.prototype.setAttribute=function(e,t,r){return e.attrs[t]=r,!1};a.XmlJSON.prototype.nodeCopy=function(e,t){if(!t)var t={};if(typeof t=="object"&&typeof t.length>"u")for(var r in e)typeof e[r]=="string"?t[r]=e[r]:typeof e[r]=="object"&&(typeof e[r].length>"u"?t[r]=this.nodeCopy(e[r],{}):t[r]=this.nodeCopy(e[r],[]));else for(var i=0,s=e.length;i<s;i+=1)typeof e[i]=="string"?t[i]=e[i]:t[i]=this.nodeCopy(e[i],{});return t};a.XmlJSON.prototype.getNodesByName=function(e,t,r,i){var s,n,o,l;if(!i)var i=[];if(!e||!e.children)return i;t===e.name&&(r?r===e.attrs.name&&i.push(e):i.push(e));for(var u=0,m=e.children.length;u<m;u+=1)typeof e.children[u]=="object"&&this.getNodesByName(e.children[u],t,r,i);return i};a.XmlJSON.prototype.nodeNameIs=function(e,t){return typeof e>"u"?!1:t==e.name};a.XmlJSON.prototype.makeXml=function(e){return typeof e=="string"&&(e.slice(0,1)==="<"?e=this.jsonStringWalker.walkToObject(e):e=JSON.parse(e)),e};a.XmlJSON.prototype.insertChildNodeAfter=function(e,t,r,i){for(var s=0,n=e.children.length;s<n;s+=1)if(t===e.children[s]){e.children=e.children.slice(0,s).concat([i]).concat(e.children.slice(s+1));break}return e};a.XmlJSON.prototype.insertPublisherAndPlace=function(e){if(e.name==="group"){for(var t=!0,r=["publisher","publisher-place"],i=0,s=e.children.length;i<s;i+=1){var n=r.indexOf(e.children[i].attrs.variable),o=e.children[i].name==="text";if(o&&n>-1&&!e.children[i].attrs.prefix&&!e.children[i].attrs.suffix)r=r.slice(0,n).concat(r.slice(n+1));else{t=!1;break}}t&&!r.length&&(e.attrs["has-publisher-and-publisher-place"]=!0)}for(var i=0,s=e.children.length;i<s;i+=1)typeof e.children[i]=="object"&&this.insertPublisherAndPlace(e.children[i])};a.XmlJSON.prototype.isChildOfSubstitute=function(e){if(e.length>0){var t=e.slice(),r=t.pop();return r==="substitute"?!0:this.isChildOfSubstitute(t)}return!1};a.XmlJSON.prototype.addMissingNameNodes=function(e,t){if(t||(t=[]),e.name==="names"&&!this.isChildOfSubstitute(t)){for(var r=!0,i=0,s=e.children.length;i<s;i++)if(e.children[i].name==="name"){r=!1;break}r&&(e.children=[{name:"name",attrs:{},children:[]}].concat(e.children))}t.push(e.name);for(var i=0,s=e.children.length;i<s;i+=1)typeof e.children[i]=="object"&&this.addMissingNameNodes(e.children[i],t);t.pop()};a.XmlJSON.prototype.addInstitutionNodes=function(e){var t,r,i,s,n,o,l,u,m;if(e.name==="names"){for(var c={},h=-1,p=0,d=e.children.length;p<d;p+=1){if(e.children[p].name=="name"){for(var v in e.children[p].attrs)c[v]=e.children[p].attrs[v];c.delimiter=e.children[p].attrs.delimiter,c.and=e.children[p].attrs.and,h=p;for(var f=0,y=e.children[p].children.length;f<y;f+=1)if(e.children[p].children[f].attrs.name==="family")for(var v in e.children[p].children[f].attrs)c[v]=e.children[p].children[f].attrs[v]}if(e.children[p].name=="institution"){h=-1;break}}if(h>-1){for(var i=this.nodeCopy(this.institution),p=0,d=a.INSTITUTION_KEYS.length;p<d;p+=1){var b=a.INSTITUTION_KEYS[p];typeof c[b]<"u"&&(i.children[0].attrs[b]=c[b]),c.delimiter&&(i.attrs.delimiter=c.delimiter),c.and&&(i.attrs.and=c.and)}e.children=e.children.slice(0,h+1).concat([i]).concat(e.children.slice(h+1))}}for(var p=0,d=e.children.length;p<d;p+=1)typeof e.children[p]!="string"&&this.addInstitutionNodes(e.children[p])};a.XmlJSON.prototype.flagDateMacros=function(e){for(var t=0,r=e.children.length;t<r;t+=1)e.children[t].name==="macro"&&this.inspectDateMacros(e.children[t])&&(e.children[t].attrs["macro-has-date"]="true")};a.XmlJSON.prototype.inspectDateMacros=function(e){if(!e||!e.children)return!1;if(e.name==="date")return!0;for(var t=0,r=e.children.length;t<r;t+=1)if(this.inspectDateMacros(e.children[t]))return!0;return!1};a.stripXmlProcessingInstruction=function(e){return e&&(e=e.replace(/^<\?[^?]+\?>/,""),e=e.replace(/<!--[^>]+-->/g,""),e=e.replace(/^\s+/g,""),e=e.replace(/\s+$/g,""),e)};a.parseXml=function(e){var t=0,r={children:[]},i=[r.children];function s(g){g=g.split(/(?:\r\n|\n|\r)/).join(" ").replace(/>[	 ]+</g,"><").replace(/<\!--.*?-->/g,"");for(var A=g.split("><"),E=null,S=0,w=A.length;S<w;S++)S>0&&(A[S]="<"+A[S]),S<A.length-1&&(A[S]=A[S]+">"),typeof E!="number"&&(A[S].slice(0,7)==="<style "||A[S].slice(0,8)=="<locale ")&&(E=S);A=A.slice(E);for(var S=A.length-2;S>-1;S--)if(A[S].slice(1).indexOf("<")===-1){var I=A[S].slice(0,5);A[S].slice(-2)!=="/>"&&(I==="<term"?A[S+1].slice(0,6)==="</term"&&(A[S]=A[S]+A[S+1],A=A.slice(0,S+1).concat(A.slice(S+2))):["<sing","<mult"].indexOf(I)>-1&&A[S].slice(-2)!=="/>"&&A[S+1].slice(0,1)==="<"&&(A[S]=A[S]+A[S+1],A=A.slice(0,S+1).concat(A.slice(S+2))))}return A}function n(g){return g.split("&amp;").join("&").split("&quot;").join('"').split("&gt;").join(">").split("&lt;").join("<").replace(/&#([0-9]{1,6});/gi,function(A,E){var S=parseInt(E,10);return String.fromCharCode(S)}).replace(/&#x([a-f0-9]{1,6});/gi,function(A,E){var S=parseInt(E,16);return String.fromCharCode(S)})}function o(g){var A=g.match(/([^\'\"=	 ]+)=(?:\"[^\"]*\"|\'[^\']*\')/g);if(A)for(var E=0,S=A.length;E<S;E++)A[E]=A[E].replace(/=.*/,"");return A}function l(g,A){var E=RegExp("^.*[	 ]+"+A+`=("(?:[^"]*)"|'(?:[^']*)').*$`),S=g.match(E);return S?S[1].slice(1,-1):null}function u(g){var A=RegExp("^<([^	 />]+)"),E=g.match(A);return E?E[1]:null}function m(g){var A={};A.name=u(g),A.attrs={};var E=o(g);if(E)for(var S=0,w=E.length;S<w;S++){var I={name:E[S],value:l(g,E[S])};A.attrs[I.name]=n(I.value)}return A.children=[],A}function c(g){var A=g.match(/^.*>([^<]*)<.*$/);return n(A[1])}function h(g){i.slice(-1)[0].push(g)}function p(g){i.push(g.children)}function d(g){var A;if(g.slice(1).indexOf("<")>-1){var E=g.slice(0,g.indexOf(">")+1);A=m(E),A.children=[c(g)],h(A)}else g.slice(-2)==="/>"?(A=m(g),u(g)==="term"&&A.children.push(""),h(A)):g.slice(0,2)==="</"?i.pop():(A=m(g),h(A),p(A))}for(var v=s(e),f=0,y=v.length;f<y;f++){var b=v[f];d(b)}return r.children[0]};a.XmlDOM=function(e){this.dataObj=e,typeof DOMParser>"u"?(DOMParser=function(){},DOMParser.prototype.parseFromString=function(n,o){if(typeof ActiveXObject<"u"){var l=new ActiveXObject("MSXML.DomDocument");return l.async=!1,l.loadXML(n),l}else if(typeof XMLHttpRequest<"u"){var l=new XMLHttpRequest;return o||(o="text/xml"),l.open("GET","data:"+o+";charset=utf-8,"+encodeURIComponent(n),!1),l.overrideMimeType&&l.overrideMimeType(o),l.send(null),l.responseXML}else if(typeof marknote<"u"){var u=new marknote.Parser;return u.parse(n)}},this.hasAttributes=function(n){var o;return n.attributes&&n.attributes.length?o=!0:o=!1,o}):this.hasAttributes=function(n){var o;return n.attributes&&n.attributes.length?o=!0:o=!1,o},this.importNode=function(n,o){var l;return typeof n.importNode>"u"?l=this._importNode(n,o,!0):l=n.importNode(o,!0),l},this._importNode=function(n,o,l){switch(o.nodeType){case 1:var u=n.createElement(o.nodeName);if(o.attributes&&o.attributes.length>0)for(var m=0,c=o.attributes.length;m<c;)u.setAttribute(o.attributes[m].nodeName,o.getAttribute(o.attributes[m++].nodeName));if(l&&o.childNodes&&o.childNodes.length>0)for(var m=0,c=o.childNodes.length;m<c;)u.appendChild(this._importNode(n,o.childNodes[m++],l));return u;case 3:case 4:case 8:}},this.parser=new DOMParser;var t='<docco><institution institution-parts="long" delimiter=", " substitute-use-first="1" use-last="1"><institution-part name="long"/></institution></docco>',r=this.parser.parseFromString(t,"text/xml"),i=r.getElementsByTagName("institution");this.institution=i.item(0);var s=r.getElementsByTagName("institution-part");this.institutionpart=s.item(0),this.ns="http://purl.org/net/xbiblio/csl"};a.XmlDOM.prototype.clean=function(e){return e=e.replace(/<\?[^?]+\?>/g,""),e=e.replace(/<![^>]+>/g,""),e=e.replace(/^\s+/,""),e=e.replace(/\s+$/,""),e=e.replace(/^\n*/,""),e};a.XmlDOM.prototype.getStyleId=function(e,t){var r="",i="id";t&&(i="title");var s=e.getElementsByTagName(i);return s&&s.length&&(s=s.item(0)),s&&(r=s.textContent),r||(r=s.innerText),r||(r=s.innerHTML),r};a.XmlDOM.prototype.children=function(e){var t,r,i,s;if(e){for(s=[],t=e.childNodes,r=0,i=t.length;r<i;r+=1)t[r].nodeName!="#text"&&s.push(t[r]);return s}else return[]};a.XmlDOM.prototype.nodename=function(e){var t=e.nodeName;return t};a.XmlDOM.prototype.attributes=function(e){var t,r,i,s,n,o,l;if(t=new Object,e&&this.hasAttributes(e))for(r=e.attributes,o=0,l=r.length;o<l;o+=1)i=r[o],t["@"+i.name]=i.value;return t};a.XmlDOM.prototype.content=function(e){var t;return typeof e.textContent<"u"?t=e.textContent:typeof e.innerText<"u"?t=e.innerText:t=e.txt,t};a.XmlDOM.prototype.namespace={xml:"http://www.w3.org/XML/1998/namespace"};a.XmlDOM.prototype.numberofnodes=function(e){return e?e.length:0};a.XmlDOM.prototype.getAttributeName=function(e){var t=e.name;return t};a.XmlDOM.prototype.getAttributeValue=function(e,t,r){var i="";return r&&(t=r+":"+t),e&&this.hasAttributes(e)&&e.getAttribute(t)&&(i=e.getAttribute(t)),i};a.XmlDOM.prototype.getNodeValue=function(e,t){var r=null;if(t){var i=e.getElementsByTagName(t);i.length>0&&(typeof i[0].textContent<"u"?r=i[0].textContent:typeof i[0].innerText<"u"?r=i[0].innerText:r=i[0].text)}return r===null&&e&&e.childNodes&&(e.childNodes.length==0||e.childNodes.length==1&&e.firstChild.nodeName=="#text")&&(typeof e.textContent<"u"?r=e.textContent:typeof e.innerText<"u"?r=e.innerText:r=e.text),r===null&&(r=e),r};a.XmlDOM.prototype.setAttributeOnNodeIdentifiedByNameAttribute=function(e,t,r,i,s){var n,o,l,u,m;for(i.slice(0,1)==="@"&&(i=i.slice(1)),u=e.getElementsByTagName(t),n=0,o=u.length;n<o;n+=1)m=u[n],m.getAttribute("name")==r&&m.setAttribute(i,s)};a.XmlDOM.prototype.deleteNodeByNameAttribute=function(e,t){var r,i,s,n;for(n=e.childNodes,r=0,i=n.length;r<i;r+=1)s=n[r],!(!s||s.nodeType==s.TEXT_NODE)&&this.hasAttributes(s)&&s.getAttribute("name")==t&&e.removeChild(n[r])};a.XmlDOM.prototype.deleteAttribute=function(e,t){e.removeAttribute(t)};a.XmlDOM.prototype.setAttribute=function(e,t,r){return e.ownerDocument||(e=e.firstChild),["function","unknown"].indexOf(typeof e.setAttribute)>-1&&e.setAttribute(t,r),!1};a.XmlDOM.prototype.nodeCopy=function(e){var t=e.cloneNode(!0);return t};a.XmlDOM.prototype.getNodesByName=function(e,t,r){var i,s,n,o,l;for(i=[],s=e.getElementsByTagName(t),o=0,l=s.length;o<l;o+=1)n=s.item(o),!(r&&!(this.hasAttributes(n)&&n.getAttribute("name")==r))&&i.push(n);return i};a.XmlDOM.prototype.nodeNameIs=function(e,t){return t==e.nodeName};a.XmlDOM.prototype.makeXml=function(e){var t,r;e||(e="<docco><bogus/></docco>"),e=e.replace(/\s*<\?[^>]*\?>\s*\n*/g,"");var i=this.parser.parseFromString(e,"application/xml");return i.firstChild};a.XmlDOM.prototype.insertChildNodeAfter=function(e,t,r,i){var s,n;return s=this.importNode(t.ownerDocument,i),e.replaceChild(s,t),e};a.XmlDOM.prototype.insertPublisherAndPlace=function(e){for(var t=e.getElementsByTagName("group"),r=0,i=t.length;r<i;r+=1){for(var s=t.item(r),n=[],o=0,l=s.childNodes.length;o<l;o+=1)s.childNodes.item(o).nodeType!==1&&n.push(o);if(s.childNodes.length-n.length===2){for(var u=[],o=0,l=2;o<l;o+=1)if(!(n.indexOf(o)>-1)){for(var m=s.childNodes.item(o),c=[],h=0,p=m.childNodes.length;h<p;h+=1)m.childNodes.item(h).nodeType!==1&&c.push(h);if(m.childNodes.length-c.length===0&&(u.push(m.getAttribute("variable")),m.getAttribute("suffix")||m.getAttribute("prefix"))){u=[];break}}u.indexOf("publisher")>-1&&u.indexOf("publisher-place")>-1&&s.setAttribute("has-publisher-and-publisher-place",!0)}}};a.XmlDOM.prototype.isChildOfSubstitute=function(e){return e.parentNode?e.parentNode.tagName.toLowerCase()==="substitute"?!0:this.isChildOfSubstitute(e.parentNode):!1};a.XmlDOM.prototype.addMissingNameNodes=function(e){for(var t=e.getElementsByTagName("names"),r=0,i=t.length;r<i;r+=1){var s=t.item(r),n=s.getElementsByTagName("name");if((!n||n.length===0)&&!this.isChildOfSubstitute(s)){var o=s.ownerDocument,l=o.createElement("name");s.appendChild(l)}}};a.XmlDOM.prototype.addInstitutionNodes=function(e){var t,r,i,s,n,o,l,u,m,c;for(t=e.getElementsByTagName("names"),m=0,c=t.length;m<c;m+=1)if(r=t.item(m),o=r.getElementsByTagName("name"),o.length!=0&&(i=r.getElementsByTagName("institution"),i.length==0)){s=this.importNode(e.ownerDocument,this.institution),n=s.getElementsByTagName("institution-part").item(0),l=o.item(0),r.insertBefore(s,l.nextSibling);for(var h=0,p=a.INSTITUTION_KEYS.length;h<p;h+=1){var d=a.INSTITUTION_KEYS[h],v=l.getAttribute(d);v&&n.setAttribute(d,v)}for(var f=l.getElementsByTagName("name-part"),h=0,p=f.length;h<p;h+=1)if(f[h].getAttribute("name")==="family")for(var y=0,b=a.INSTITUTION_KEYS.length;y<b;y+=1){var d=a.INSTITUTION_KEYS[y],v=f[h].getAttribute(d);v&&n.setAttribute(d,v)}}};a.XmlDOM.prototype.flagDateMacros=function(e){var t,r,i,s,n=e.getElementsByTagName("macro");for(t=0,r=n.length;t<r;t+=1)i=n.item(t),s=i.getElementsByTagName("date"),s.length&&i.setAttribute("macro-has-date","true")};a.setupXml=function(e){var t={},r=null;return typeof e<"u"?typeof e=="string"?(e=e.replace("^\uFEFF","").replace(/^\s+/,""),e.slice(0,1)==="<"?t=a.parseXml(e):t=JSON.parse(e),r=new a.XmlJSON(t)):typeof e.getAttribute<"u"?r=new a.XmlDOM(e):typeof e.toXMLString<"u"?r=new a.XmlE4X(e):r=new a.XmlJSON(e):a.error("unable to parse XML input"),r||a.error("citeproc-js error: unable to parse CSL style or locale object"),r};a.getSortCompare=function(e){if(a.stringCompare)return a.stringCompare;var t=this,r,i={sensitivity:"base",ignorePunctuation:!0,numeric:!0};e||(e="en-US"),r=function(u,m){return a.toLocaleLowerCase.call(t,u).localeCompare(a.toLocaleLowerCase.call(t,m),e,i)};var s=function(u){return u.replace(/^[\[\]\'\"]*/g,"")},n=function(){return r("[x","x")?function(u,m){return r(s(u),s(m))}:!1},o=n(),l=function(u,m){return o?o(u,m):r(u,m)};return l};a.ambigConfigDiff=function(e,t){var r,i,s,n;if(e.names.length!==t.names.length)return 1;for(r=0,i=e.names.length;r<i;r+=1){if(e.names[r]!==t.names[r])return 1;for(s=0,n=e.givens[r];s<n;s+=1)if(e.givens[r][s]!==t.givens[r][s])return 1}return e.disambiguate!=t.disambiguate||e.year_suffix!==t.year_suffix?1:0};a.cloneAmbigConfig=function(e,t){var r,i,s,n,o,l={};for(l.names=[],l.givens=[],l.year_suffix=!1,l.disambiguate=!1,r=0,i=e.names.length;r<i;r+=1)o=e.names[r],l.names[r]=o;for(r=0,i=e.givens.length;r<i;r+=1){for(o=[],s=0,n=e.givens[r].length;s<n;s+=1)o.push(e.givens[r][s]);l.givens.push(o)}return t?(l.year_suffix=t.year_suffix,l.disambiguate=t.disambiguate):(l.year_suffix=e.year_suffix,l.disambiguate=e.disambiguate),l};a.getAmbigConfig=function(){var e,t;e=this.tmp.disambig_request,e||(e=this.tmp.disambig_settings);var t=a.cloneAmbigConfig(e);return t};a.getMaxVals=function(){return this.tmp.names_max.mystack.slice()};a.getMinVal=function(){return this.tmp["et-al-min"]};a.tokenExec=function(e,t,r){var i,s,n,o;o=!1,i=e.next,s=!1;var l=function(c){return c?(this.tmp.jump.replace("succeed"),e.succeed):(this.tmp.jump.replace("fail"),e.fail)};e.test&&(i=l.call(this,e.test(t,r)));for(var u=0,m=e.execs.length;u<m;u++)n=e.execs[u],s=n.call(e,this,t,r),s&&(i=s);return o&&a.debug(e.name+" ("+e.tokentype+") ---> done"),i};a.expandMacro=function(e,t){var r,i,s,n;r=e.postponed_macro;var o=e.strings.sort_direction;e=new a.Token("group",a.START);var l=!1,u=!1;i=this.cslXml.getNodesByName(this.cslXml.dataObj,"macro",r),i.length&&(u=this.cslXml.getAttributeValue(i[0],"cslid"),l=this.cslXml.getAttributeValue(i[0],"macro-has-date")),l&&(r=r+"@"+this.build.current_default_locale,n=function(h){h.tmp.extension&&(h.tmp["doing-macro-with-date"]=!0)},e.execs.push(n)),this.build.macro_stack.indexOf(r)>-1?a.error('CSL processor error: call to macro "'+r+'" would cause an infinite loop'):this.build.macro_stack.push(r),e.cslid=u,a.MODULE_MACROS[r]&&(e.juris=r,this.opt.update_mode=a.POSITION),a.Node.group.build.call(e,this,t,!0),this.cslXml.getNodeValue(i)||a.error('CSL style error: undefined macro "'+r+'"');var m=a.getMacroTarget.call(this,r);if(m&&(a.buildMacro.call(this,m,i),a.configureMacro.call(this,m)),!this.build.extension){var n=function(p){return function(d,v,f){for(var y=0;y<d.macros[p].length;)y=a.tokenExec.call(d,d.macros[p][y],v,f)}}(r),c=new a.Token("text",a.SINGLETON);c.execs.push(n),t.push(c)}s=new a.Token("group",a.END),s.strings.sort_direction=o,l&&(n=function(h){h.tmp.extension&&(h.tmp["doing-macro-with-date"]=!1)},s.execs.push(n)),e.juris&&(s.juris=r),a.Node.group.build.call(s,this,t,!0),this.build.macro_stack.pop()};a.getMacroTarget=function(e){var t=!1;return this.build.extension?t=this[this.build.root+this.build.extension].tokens:this.macros[e]||(t=[],this.macros[e]=t),t};a.buildMacro=function(e,t){var r=a.makeBuilder(this,e),i;typeof t.length>"u"?i=t:i=t[0],r(i)};a.configureMacro=function(e){this.build.extension||this.configureTokenList(e)};a.XmlToToken=function(e,t,r,i){var s,n,o,l,u,m,c,h;if(s=e.cslXml.nodename(this),!(e.build.skip&&e.build.skip!==s)){if(!s){n=e.cslXml.content(this),n&&(e.build.text=n);return}if(a.Node[e.cslXml.nodename(this)]||a.error('Undefined node name "'+s+'".'),o=[],l=e.cslXml.attributes(this),u=a.setDecorations.call(this,e,l),m=new a.Token(s,t),t!==a.END||s==="if"||s==="else-if"||s==="layout"){for(var c in l)if(l.hasOwnProperty(c)){if(t===a.END&&c!=="@language"&&c!=="@locale")continue;if(l.hasOwnProperty(c))if(a.Attributes[c])try{a.Attributes[c].call(m,e,""+l[c])}catch(d){a.error(c+" attribute: "+d)}else a.debug('warning: undefined attribute "'+c+'" in style')}m.decorations=u,a.DATE_VARIABLES.indexOf(l["@variable"])>-1&&i.push(m.variables)}else t===a.END&&l["@variable"]&&(m.hasVariable=!0,a.DATE_VARIABLES.indexOf(l["@variable"])>-1&&(m.variables=i.pop()));r?h=r:h=e[e.build.area].tokens,a.Node[s].build.call(m,e,h,!0)}};a.DateParser=function(){for(var e=[["\u660E\u6CBB",1867],["\u5927\u6B63",1911],["\u662D\u548C",1925],["\u5E73\u6210",1988]],t={},r=0,i=e.length;r<i;r++){var s=e[r][0],n=e[r][1];t[s]=n}for(var o=[],l={},r=0,i=e.length;r<i;r++){var u=e[r],n=u[0];o.push(n),l[u[0]]=u[1]}var m=o.join("|"),c=new RegExp("(?:"+m+")(?:[0-9]+)"),h=new RegExp("(?:"+m+")(?:[0-9]+)","g"),p=/(\u6708|\u5E74)/g,d=/\u65E5/g,v=/\u301c/g,f="(?:[?0-9]{1,2}%%NUMD%%){0,2}[?0-9]{4}(?![0-9])",y="[?0-9]{4}(?:%%NUMD%%[?0-9]{1,2}){0,2}(?![0-9])",b="[?0-9]{1,3}",g="[%%DATED%%]",A="[?~]",E="[^-/~?0-9]+",S="("+y+"|"+f+"|"+b+"|"+g+"|"+A+"|"+E+")",w=new RegExp(S.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"-")),I=new RegExp(S.replace(/%%NUMD%%/g,"-").replace(/%%DATED%%/g,"/")),O=new RegExp(S.replace(/%%NUMD%%/g,"/").replace(/%%DATED%%/g,"-")),D="january february march april may june july august september october november december spring summer fall winter spring summer";this.monthStrings=D.split(" "),this.setOrderDayMonth=function(){this.monthGuess=1,this.dayGuess=0},this.setOrderMonthDay=function(){this.monthGuess=0,this.dayGuess=1},this.resetDateParserMonths=function(){this.monthSets=[];for(var _=0,x=this.monthStrings.length;_<x;_++)this.monthSets.push([this.monthStrings[_]]);this.monthAbbrevs=[];for(var _=0,x=this.monthSets.length;_<x;_++){this.monthAbbrevs.push([]);for(var k=0,R=this.monthSets[_].length;k<R;k++)this.monthAbbrevs[_].push(this.monthSets[_][0].slice(0,3))}this.monthRexes=[];for(var _=0,x=this.monthAbbrevs.length;_<x;_++)this.monthRexes.push(new RegExp("(?:"+this.monthAbbrevs[_].join("|")+")"))},this.addDateParserMonths=function(_){if(typeof _=="string"&&(_=_.split(/\s+/)),_.length!==12&&_.length!==16){a.debug("month [+season] list of "+_.length+", expected 12 or 16. Ignoring.");return}for(var x=0,k=_.length;x<k;x++){for(var R=null,N=!1,T=3,C={},j=0,F=this.monthAbbrevs.length;j<F;j++){if(C[j]={},j===x){for(var M=0,U=this.monthAbbrevs[x].length;M<U;M++)if(this.monthAbbrevs[x][M]===_[x].slice(0,this.monthAbbrevs[x][M].length)){N=!0;break}}else for(var M=0,U=this.monthAbbrevs[j].length;M<U;M++)if(R=this.monthAbbrevs[j][M].length,this.monthAbbrevs[j][M]===_[x].slice(0,R)){for(;this.monthSets[j][M].slice(0,R)===_[x].slice(0,R);)if(R>_[x].length||R>this.monthSets[j][M].length){a.debug("unable to disambiguate month string in date parser: "+_[x]);break}else R+=1;T=R,C[j][M]=R}for(var B in C)for(var L in C[B])R=C[B][L],B=parseInt(B,10),L=parseInt(L,10),this.monthAbbrevs[B][L]=this.monthSets[B][L].slice(0,R)}N||(this.monthSets[x].push(_[x]),this.monthAbbrevs[x].push(_[x].slice(0,T)))}this.monthRexes=[],this.monthRexStrs=[];for(var x=0,k=this.monthAbbrevs.length;x<k;x++)this.monthRexes.push(new RegExp("^(?:"+this.monthAbbrevs[x].join("|")+")")),this.monthRexStrs.push("^(?:"+this.monthAbbrevs[x].join("|")+")");if(this.monthAbbrevs.length===18)for(var x=12,k=14;x<k;x++)this.monthRexes[x+4]=new RegExp("^(?:"+this.monthAbbrevs[x].join("|")+")"),this.monthRexStrs[x+4]="^(?:"+this.monthAbbrevs[x].join("|")+")"},this.convertDateObjectToArray=function(_){_["date-parts"]=[],_["date-parts"].push([]);for(var x=0,k,R=0,N=3;R<N&&(k=["year","month","day"][R],!!_[k]);R++)x+=1,_["date-parts"][0].push(_[k]),delete _[k];_["date-parts"].push([]);for(var R=0,N=x;R<N&&(k=["year_end","month_end","day_end"][R],!!_[k]);R++)_["date-parts"][1].push(_[k]),delete _[k];return _["date-parts"][0].length!==_["date-parts"][1].length&&_["date-parts"].pop(),_},this.convertDateObjectToString=function(_){for(var x=[],k=0,R=3;k<R&&_[a.DATE_PARTS_ALL[k]];k+=1)x.push(_[a.DATE_PARTS_ALL[k]]);return x.join("-")},this._parseNumericDate=function(_,x,k,R){k||(k="");for(var N=R.split(x),T=0,C=N.length;T<C;T++)if(N[T].length===4){_["year"+k]=N[T].replace(/^0*/,""),T?N=N.slice(0,T):N=N.slice(1);break}for(var T=0,C=N.length;T<C;T++)N[T]=parseInt(N[T],10);if(N.length===1||N.length===2&&!N[1]){var j=N[0];j&&(_["month"+k]=""+N[0])}else if(N.length===2)if(N[this.monthGuess]>12){var j=N[this.dayGuess],F=N[this.monthGuess];j&&(_["month"+k]=""+j,F&&(_["day"+k]=""+F))}else{var j=N[this.monthGuess],F=N[this.dayGuess];j&&(_["month"+k]=""+j,F&&(_["day"+k]=""+F))}},this.parseDateToObject=function(_){var x=_,k=-1,R=-1,N=!1,T;if(_){if(_=_.replace(/^(.*[0-9])T[0-9].*/,"$1"),_.slice(0,1)==="-"&&(N=!0,_=_.slice(1)),_.match(/^[0-9]{1,3}$/))for(;_.length<4;)_="0"+_;_=""+_,_=_.replace(/\s*[0-9]{2}:[0-9]{2}(?::[0-9]+)/,"");var C=_.match(p);if(C){_=_.replace(/\s+/g,""),_=_.replace(d,""),_=_.replace(p,"-"),_=_.replace(v,"/"),_=_.replace(/\-\//g,"/"),_=_.replace(/-$/g,"");var j=_.split(c);T=[];var F=_.match(h);if(F){for(var M=[],U=0,B=F.length;U<B;U++)M=M.concat(F[U].match(/([^0-9]+)([0-9]+)/).slice(1));for(var U=0,B=j.length;U<B;U++)if(T.push(j[U]),U!==B-1){var L=U*2;T.push(M[L]),T.push(M[L+1])}}else T=j;for(var U=1,B=T.length;U<B;U+=3)T[U+1]=l[T[U]]+parseInt(T[U+1],10),T[U]="";_=T.join(""),_=_.replace(/\s*-\s*$/,"").replace(/\s*-\s*\//,"/"),_=_.replace(/\.\s*$/,""),_=_.replace(/\.(?! )/,""),k=_.indexOf("/"),R=_.indexOf("-")}}_=_.replace(/([A-Za-z])\./g,"$1");var z="",H="",G={},X,P;if(_.slice(0,1)==='"'&&_.slice(-1)==='"')return G.literal=_.slice(1,-1),G;if(k>-1&&R>-1){var $=_.split("/");$.length>3?(X="-",_=_.replace(/\_/g,"-"),P="/",T=_.split(O)):(X="/",_=_.replace(/\_/g,"/"),P="-",T=_.split(I))}else _=_.replace(/\//g,"-"),_=_.replace(/\_/g,"-"),X="-",P="-",T=_.split(w);for(var V=[],U=0,B=T.length;U<B;U++){var C=T[U].match(/^\s*([\-\/]|[^\-\/\~\?0-9]+|[\-~?0-9]+)\s*$/);C&&V.push(C[1])}var J=V.indexOf(X),ee=[],Q=!1;J>-1?(ee.push([0,J]),ee.push([J+1,V.length]),Q=!0):ee.push([0,V.length]);for(var W="",U=0,B=ee.length;U<B;U++){var ne=ee[U],Z=V.slice(ne[0],ne[1]);e:for(var le=0,ye=Z.length;le<ye;le++){var te=Z[le];if(te.indexOf(P)>-1){this._parseNumericDate(G,P,W,te);continue}if(te.match(/[0-9]{4}/)){G["year"+W]=te.replace(/^0*/,"");continue}(te==="~"||te==="?"||te==="c"||te.match(/^cir/))&&(G.circa=!0);for(var ue=0,Ft=this.monthRexes.length;ue<Ft;ue++)if(te.toLocaleLowerCase().match(this.monthRexes[ue])){G["month"+W]=""+(parseInt(ue,10)+1);continue e}if(te.match(/^[0-9]+$/)&&(z=te),te.toLocaleLowerCase().match(/^bc/)&&z){G["year"+W]=""+z*-1,z="";continue}if(te.toLocaleLowerCase().match(/^ad/)&&z){G["year"+W]=""+z,z="";continue}if(te.toLocaleLowerCase().match(/(?:mic|tri|hil|eas)/)&&!G["season"+W]){H=te;continue}}z&&(G["day"+W]=z,z=""),H&&!G["season"+W]&&(G["season"+W]=H.trim(),H=""),W="_end"}if(Q)for(var le=0,ye=a.DATE_PARTS_ALL.length;le<ye;le++){var se=a.DATE_PARTS_ALL[le];G[se]&&!G[se+"_end"]?G[se+"_end"]=G[se]:!G[se]&&G[se+"_end"]&&(G[se]=G[se+"_end"])}(!G.year||G.year&&G.day&&!G.month)&&(G={literal:x});for(var ze=["year","month","day","year_end","month_end","day_end"],U=0,B=ze.length;U<B;U++){var Ze=ze[U];typeof G[Ze]=="string"&&G[Ze].match(/^[0-9]+$/)&&(G[Ze]=parseInt(G[Ze],10))}return N&&Object.keys(G).indexOf("year")>-1&&(G.year=G.year*-1),G},this.parseDateToArray=function(_){return this.convertDateObjectToArray(this.parseDateToObject(_))},this.parseDateToString=function(_){return this.convertDateObjectToString(this.parseDateToObject(_))},this.parse=function(_){return this.parseDateToObject(_)},this.setOrderMonthDay(),this.resetDateParserMonths()};a.DateParser=new a.DateParser;a.Engine=function(e,t,r,i){var s,n;this.processor_version=a.PROCESSOR_VERSION,this.csl_version="1.0",this.sys=e,typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(h){"use strict";if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var p=Object(h),d=1;d<arguments.length;d++){var v=arguments[d];if(v!=null)for(var f in v)Object.prototype.hasOwnProperty.call(v,f)&&(p[f]=v[f])}return p},writable:!0,configurable:!0}),e.variableWrapper&&(a.VARIABLE_WRAPPER_PREPUNCT_REX=new RegExp("^(["+[" "].concat(a.SWAPPING_PUNCTUATION).join("")+"]*)(.*)")),a.retrieveStyleModule&&(this.sys.retrieveStyleModule=a.retrieveStyleModule),a.getAbbreviation&&(this.sys.getAbbreviation=a.getAbbreviation),this.sys.stringCompare&&(a.stringCompare=this.sys.stringCompare),this.sys.AbbreviationSegments=a.AbbreviationSegments,this.transform=new a.Transform(this),this.setParseNames=function(c){this.opt["parse-names"]=c},this.opt=new a.Engine.Opt,this.tmp=new a.Engine.Tmp,this.build=new a.Engine.Build,this.fun=new a.Engine.Fun(this),this.configure=new a.Engine.Configure,this.citation_sort=new a.Engine.CitationSort,this.bibliography_sort=new a.Engine.BibliographySort,this.citation=new a.Engine.Citation(this),this.bibliography=new a.Engine.Bibliography,this.intext=new a.Engine.InText,this.output=new a.Output.Queue(this),this.dateput=new a.Output.Queue(this),this.cslXml=a.setupXml(t);for(var o in a.SYS_OPTIONS){var l=a.SYS_OPTIONS[o];typeof this.sys[l]=="boolean"&&(this.opt.development_extensions[l]=this.sys[l])}(this.opt.development_extensions.uppercase_subtitles||this.opt.development_extensions.implicit_short_title)&&(this.opt.development_extensions.main_title_from_short_title=!0),this.opt.development_extensions.csl_reverse_lookup_support&&(this.build.cslNodeId=0,this.setCslNodeIds=function(c,h){var p=this.cslXml.children(c);this.cslXml.setAttribute(c,"cslid",this.build.cslNodeId),this.opt.nodenames.push(h),this.build.cslNodeId+=1;for(var d=0,v=this.cslXml.numberofnodes(p);d<v;d+=1)h=this.cslXml.nodename(p[d]),h&&this.setCslNodeIds(p[d],h)},this.setCslNodeIds(this.cslXml.dataObj,"style")),this.cslXml.addMissingNameNodes(this.cslXml.dataObj),this.cslXml.addInstitutionNodes(this.cslXml.dataObj),this.cslXml.insertPublisherAndPlace(this.cslXml.dataObj),this.cslXml.flagDateMacros(this.cslXml.dataObj),s=this.cslXml.attributes(this.cslXml.dataObj),typeof s["@sort-separator"]>"u"&&this.cslXml.setAttribute(this.cslXml.dataObj,"sort-separator",", "),this.opt["initialize-with-hyphen"]=!0,this.setStyleAttributes(),this.opt.xclass=this.cslXml.getAttributeValue(this.cslXml.dataObj,"class"),this.opt.class=this.opt.xclass,this.opt.styleID=this.cslXml.getStyleId(this.cslXml.dataObj),this.opt.styleName=this.cslXml.getStyleId(this.cslXml.dataObj,!0),this.opt.version.slice(0,4)==="1.1m"&&(this.opt.development_extensions.consolidate_legal_items=!0,this.opt.development_extensions.consolidate_container_items=!0,this.opt.development_extensions.main_title_from_short_title=!0,this.opt.development_extensions.expect_and_symbol_form=!0,this.opt.development_extensions.require_explicit_legal_case_title_short=!0,this.opt.development_extensions.force_jurisdiction=!0,this.opt.development_extensions.force_title_abbrev_fallback=!0),r&&(r=r.replace("_","-"),r=a.normalizeLocaleStr(r)),this.opt["default-locale"][0]&&(this.opt["default-locale"][0]=this.opt["default-locale"][0].replace("_","-"),this.opt["default-locale"][0]=a.normalizeLocaleStr(this.opt["default-locale"][0])),r&&i&&(this.opt["default-locale"]=[r]),r&&!i&&this.opt["default-locale"][0]&&(r=this.opt["default-locale"][0]),this.opt["default-locale"].length===0&&(r||(r="en-US"),this.opt["default-locale"].push("en-US")),r||(r=this.opt["default-locale"][0]),n=a.localeResolve(r),this.opt.lang=n.best,this.opt["default-locale"][0]=n.best,this.locale={},this.opt["default-locale-sort"]||(this.opt["default-locale-sort"]=this.opt["default-locale"][0]),"dale|".localeCompare("daleb",this.opt["default-locale-sort"])>-1?this.opt.sort_sep="@":this.opt.sort_sep="|",this.localeConfigure(n);function u(h){var h=h.slice(),p=new RegExp("(?:(?:[?!:]*\\s+|-|^)(?:"+h.join("|")+")(?=[!?:]*\\s+|-|$))","g");return p}this.locale[this.opt.lang].opts["skip-words-regexp"]=u(this.locale[this.opt.lang].opts["skip-words"]),this.output.adjust=new a.Output.Queue.adjust(this.getOpt("punctuation-in-quote")),this.registry=new a.Registry(this),this.macros={},this.build.area="citation";var m=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(m,this[this.build.area].tokens),this.build.area="bibliography";var m=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(m,this[this.build.area].tokens),this.build.area="intext";var m=this.cslXml.getNodesByName(this.cslXml.dataObj,this.build.area);this.buildTokenLists(m,this[this.build.area].tokens),this.opt.parallel.enable&&(this.parallel=new a.Parallel(this)),this.juris={},this.configureTokenLists(),this.disambiguate=new a.Disambiguation(this),this.splice_delimiter=!1,this.fun.dateparser=a.DateParser,this.fun.flipflopper=new a.Util.FlipFlopper(this),this.setCloseQuotesArray(),this.fun.ordinalizer.init(this),this.fun.long_ordinalizer.init(this),this.fun.page_mangler=a.Util.PageRangeMangler.getFunction(this,"page"),this.fun.year_mangler=a.Util.PageRangeMangler.getFunction(this,"year"),this.setOutputFormat("html")};a.Engine.prototype.setCloseQuotesArray=function(){var e;e=[],e.push(this.getTerm("close-quote")),e.push(this.getTerm("close-inner-quote")),e.push('"'),e.push("'"),this.opt.close_quotes_array=e};a.makeBuilder=function(e,t){var r=[],i=[];function s(u){i.push(u),a.XmlToToken.call(u,e,a.START,t,r)}function n(){var u=i.pop();a.XmlToToken.call(u,e,a.END,t,r)}function o(u){a.XmlToToken.call(u,e,a.SINGLETON,t,r)}function l(u,m,c){c||(c=[]),u||(u=[]),typeof u.length>"u"&&(u=[u]);for(var h=0;h<u.length;h++){var p=u[h];e.cslXml.nodename(p)!==null&&(m&&e.cslXml.nodename(p)==="date"&&(a.Util.fixDateNode.call(e,m,h,p),p=e.cslXml.children(m)[h]),e.cslXml.numberofnodes(e.cslXml.children(p))?(s(p),l(e.cslXml.children(p),p,c),n()):o(p))}}return l};a.Engine.prototype.buildTokenLists=function(e,t){if(this.cslXml.getNodeValue(e)){var r=a.makeBuilder(this,t),i;typeof e.length>"u"?i=e:i=e[0],r(i)}};a.Engine.prototype.setStyleAttributes=function(){var r,e,t,r={};r.name=this.cslXml.nodename(this.cslXml.dataObj),e=this.cslXml.attributes(this.cslXml.dataObj);for(t in e)e.hasOwnProperty(t)&&a.Attributes[t].call(r,this,e[t])};a.Engine.prototype.getTerm=function(e,t,r,i,s,n){e&&e.match(/[A-Z]/)&&e===e.toUpperCase()&&(a.debug("Warning: term key is in uppercase form: "+e),e=e.toLowerCase());var o;n?o=this.opt["default-locale"][0]:o=this.opt.lang;var l=a.Engine.getField(a.LOOSE,this.locale[o].terms,e,t,r,i);return!l&&e==="range-delimiter"&&(l="\u2013"),typeof l>"u"&&(s===a.STRICT?a.error('Error in getTerm: term "'+e+'" does not exist.'):s===a.TOLERANT&&(l="")),l&&(this.tmp.cite_renders_content=!0),l};a.Engine.prototype.getDate=function(e,t){var r;return t?r=this.opt["default-locale"]:r=this.opt.lang,this.locale[r].dates[e]?this.locale[r].dates[e]:!1};a.Engine.prototype.getOpt=function(e){return typeof this.locale[this.opt.lang].opts[e]<"u"?this.locale[this.opt.lang].opts[e]:!1};a.Engine.prototype.getVariable=function(e,t,r,i){return a.Engine.getField(a.LOOSE,e,t,r,i)};a.Engine.prototype.getDateNum=function(e,t){return typeof e>"u"?0:e[t]};a.Engine.getField=function(e,t,r,i,s,n){var o,l,u,m,c,h;if(o="",typeof t[r]>"u")if(e===a.STRICT)a.error('Error in getField: term "'+r+'" does not exist.');else return;for(n&&t[r][n]?h=t[r][n]:h=t[r],l=[],i==="symbol"?l=["symbol","short"]:i==="verb-short"?l=["verb-short","verb"]:i!=="long"&&(l=[i]),l=l.concat(["long"]),c=l.length,m=0;m<c;m+=1)if(u=l[m],typeof h=="string"||typeof h=="number")o=h;else if(typeof h[u]<"u"){typeof h[u]=="string"||typeof h[u]=="number"?o=h[u]:typeof s=="number"?o=h[u][s]:o=h[u][0];break}return o};a.Engine.prototype.configureTokenLists=function(){var e,t,r;for(r=a.AREAS.length,t=0;t<r;t+=1){e=a.AREAS[t];var i=this[e].tokens;this.configureTokenList(i)}return this.version=a.version,this.state};a.Engine.prototype.configureTokenList=function(e){var t,r,i,s,n,o,l,u;for(t=["year","month","day"],l=e.length-1,n=l;n>-1;n+=-1){if(r=e[n],r.name==="date"&&a.END===r.tokentype&&(i=[]),r.name==="date-part"&&r.strings.name)for(u=t.length,o=0;o<u;o+=1)s=t[o],s===r.strings.name&&i.push(r.strings.name);r.name==="date"&&a.START===r.tokentype&&(i.reverse(),r.dateparts=i),r.next=n+1,r.name&&a.Node[r.name].configure&&a.Node[r.name].configure.call(r,this,n)}};a.Engine.prototype.refetchItems=function(e){for(var t=[],r=0,i=e.length;r<i;r+=1)t.push(this.refetchItem(""+e[r]));return t};a.ITERATION=0;a.Engine.prototype.retrieveItem=function(e){var t,r,i;if(!this.tmp.loadedItemIDs[e])this.tmp.loadedItemIDs[e]=!0;else return this.registry.refhash[e];if(this.opt.development_extensions.normalize_lang_keys_to_lowercase&&typeof this.opt.development_extensions.normalize_lang_keys_to_lowercase=="boolean"){for(var i=0,s=this.opt["default-locale"].length;i<s;i+=1)this.opt["default-locale"][i]=this.opt["default-locale"][i].toLowerCase();for(var i=0,s=this.opt["locale-translit"].length;i<s;i+=1)this.opt["locale-translit"][i]=this.opt["locale-translit"][i].toLowerCase();for(var i=0,s=this.opt["locale-translat"].length;i<s;i+=1)this.opt["locale-translat"][i]=this.opt["locale-translat"][i].toLowerCase();this.opt.development_extensions.normalize_lang_keys_to_lowercase=100}if(a.ITERATION+=1,t=JSON.parse(JSON.stringify(this.sys.retrieveItem(""+e))),this.opt.development_extensions.normalize_lang_keys_to_lowercase){if(t.multi){if(t.multi._keys)for(var n in t.multi._keys)for(var o in t.multi._keys[n])o!==o.toLowerCase()&&(t.multi._keys[n][o.toLowerCase()]=t.multi._keys[n][o],delete t.multi._keys[n][o]);if(t.multi.main)for(var n in t.multi.main)t.multi.main[n]=t.multi.main[n].toLowerCase()}for(var i=0,s=a.NAME_VARIABLES.length;i>s;i+=1){var l=a.NAME_VARIABLES[i];if(t[l]&&t[l].multi)for(var u=0,m=t[l].length;u<m;u+=1){var c=t[l][u];if(c.multi){if(c.multi._key)for(var o in c.multi._key)o!==o.toLowerCase()&&(c.multi._key[o.toLowerCase()]=c.multi._key[o],delete c.multi._key[o]);c.multi.main&&(c.multi.main=c.multi.main.toLowerCase())}}}}if(t.language&&t.language.match(/[><]/)){var r=t.language.match(/(.*?)([<>])(.*)/);r[2]==="<"?(t["language-name"]=r[1],t["language-name-original"]=r[3]):(t["language-name"]=r[3],t["language-name-original"]=r[1]),this.opt.multi_layout?t["language-name-original"]&&(t.language=t["language-name-original"]):t["language-name"]&&(t.language=t["language-name"])}if(t.page){t["page-first"]=t.page;var h=""+t.page,r=h.split(/\s*(?:&|, |-|\u2013)\s*/);r[0].slice(-1)!=="\\"&&(t["page-first"]=r[0])}this.opt.development_extensions.field_hack&&t.note&&a.parseNoteFieldHacks(t,!1,this.opt.development_extensions.allow_field_hack_date_override);for(var o in t)if(a.DATE_VARIABLES.indexOf(o.replace(/^alt-/,""))>-1){var p=t[o];p&&(this.opt.development_extensions.raw_date_parsing&&p.raw&&(!p["date-parts"]||p["date-parts"].length===0)&&(p=this.fun.dateparser.parseDateToObject(p.raw)),t[o]=this.dateParseArray(p))}if(this.opt.development_extensions.consolidate_legal_items&&t.type&&["bill","gazette","legislation","regulation","treaty"].indexOf(t.type)>-1){for(var d,v=["type","title","jurisdiction","genre","volume","container-title"],f=[],i=0,s=v.length;i<s;i+=1)d=v[i],t[d]&&f.push(t[d]);v=["original-date","issued"];for(var i=0,s=v.length;i<s;i+=1)if(d=v[i],t[d]&&t[d].year){var y=t[d].year;f.push(y);break}t.legislation_id=f.join("::")}if(this.bibliography.opt.track_container_items&&this.bibliography.opt.track_container_items.indexOf(t.type)>-1){for(var d,v=["type","container-title","publisher","edition"],b=[],i=0,s=v.length;i<s;i+=1)d=v[i],t[d]&&b.push(t[d]);t.container_id=b.join("::")}if(this.opt.development_extensions.force_jurisdiction&&typeof t.authority=="string"&&(t.authority=[{literal:t.authority,multi:{_key:{}}}],t.multi&&t.multi._keys&&t.multi._keys.authority)){t.authority[0].multi._key={};for(var o in t.multi._keys.authority)t.authority[0].multi._key[o]={literal:t.multi._keys.authority[o]}}if(t["title-short"]||(t["title-short"]=t.shortTitle),this.opt.development_extensions.main_title_from_short_title){var g=this.opt["default-locale"][0].slice(0,2).toLowerCase()==="fr";a.extractTitleAndSubtitle.call(this,t,g)}var A=["bill","legal_case","legislation","gazette","regulation"].indexOf(t.type)>-1;this.opt.development_extensions.force_jurisdiction&&A&&(t.jurisdiction||(t.jurisdiction="us"));var E;if(!A&&t.title&&this.sys.getAbbreviation){var S=!1;t.jurisdiction||(S=!0),this.sys.normalizeAbbrevsKey?E=this.sys.normalizeAbbrevsKey("title",t.title):E=t.title;var w=this.transform.loadAbbreviation(t.jurisdiction,"title",E,t.language);this.transform.abbrevs[w].title&&this.transform.abbrevs[w].title[E]&&(t["title-short"]=this.transform.abbrevs[w].title[E])}if(t["container-title-short"]||(t["container-title-short"]=t.journalAbbreviation),t["container-title"]&&this.sys.getAbbreviation){this.sys.normalizeAbbrevsKey?E=this.sys.normalizeAbbrevsKey(t["container-title"]):E=t["container-title"];var w=this.transform.loadAbbreviation(t.jurisdiction,"container-title",E,t.language);this.transform.abbrevs[w]["container-title"]&&this.transform.abbrevs[w]["container-title"][E]&&(t["container-title-short"]=this.transform.abbrevs[w]["container-title"][E])}if(t.jurisdiction&&(t.country=t.jurisdiction.split(":")[0]),this.registry.refhash[e]){if(JSON.stringify(this.registry.refhash[e])!=JSON.stringify(t)){for(var o in this.registry.refhash[e])delete this.registry.refhash[e][o];this.tmp.taintedItemIDs[t.id]=!0,Object.assign(this.registry.refhash[e],t)}}else this.registry.refhash[e]=t;return this.registry.refhash[e]};a.Engine.prototype.refetchItem=function(e){return this.registry.refhash[e]};a.Engine.prototype.setOpt=function(e,t,r){e.name==="style"||e.name==="cslstyle"?(this.opt.inheritedAttributes[t]=r,this.citation.opt.inheritedAttributes[t]=r,this.bibliography.opt.inheritedAttributes[t]=r):["citation","bibliography"].indexOf(e.name)>-1?this[e.name].opt.inheritedAttributes[t]=r:e.strings[t]=r};a.Engine.prototype.inheritOpt=function(e,t,r,i){if(typeof e.strings[t]<"u")return e.strings[t];var s=this[this.tmp.root].opt.inheritedAttributes[r||t];return typeof s<"u"?s:i};a.Engine.prototype.remapSectionVariable=function(e){for(var t=0,r=e.length;t<r;t+=1){var i=e[t][0],s=e[t][1];if(["bill","gazette","legislation","regulation","treaty"].indexOf(i.type)>-1){if(s.locator){s.locator=s.locator.trim();var n=s.locator.match(a.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n||(s.label?s.locator=a.STATUTE_SUBDIV_STRINGS_REVERSE[s.label]+" "+s.locator:s.locator="p. "+s.locator)}var o=null;if(i.section){i.section=i.section.trim();var n=i.section.match(a.STATUTE_SUBDIV_PLAIN_REGEX_FRONT);n?o=n[0].trim():(i.section="sec. "+i.section,o="sec.")}if(i.section)if(!s.locator)s.locator=i.section;else{var n=s.locator.match(/^([^ ]*)\s*(.*)/),l=" ";n?(n[1]==="p."&&o!=="p."&&(s.locator=n[2]),["[","(",".",",",";",":","?"].indexOf(s.locator.slice(0,1))>-1&&(l="")):l="",s.locator=i.section+l+s.locator}s.label=""}}};a.Engine.prototype.setNumberLabels=function(e){if(e.number&&["bill","gazette","legislation","regulation","treaty"].indexOf(e.type)>-1&&this.opt.development_extensions.consolidate_legal_items&&!this.tmp.shadow_numbers.number){this.tmp.shadow_numbers.number={},this.tmp.shadow_numbers.number.values=[],this.tmp.shadow_numbers.number.plural=0,this.tmp.shadow_numbers.number.numeric=!1,this.tmp.shadow_numbers.number.label=!1;var t=""+e.number;t=t.split("\\").join("");var r=t.split(/\s+/)[0],i=a.STATUTE_SUBDIV_STRINGS[r];if(i){var s=t.split(a.STATUTE_SUBDIV_PLAIN_REGEX);if(s.length>1){for(var n=[],o=1,l=s.length;o<l;o+=1)n.push(s[o].replace(/\s*$/,"").replace(/^\s*/,""));t=n.join(" ")}else t=s[0];this.tmp.shadow_numbers.number.label=i,this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!1}else this.tmp.shadow_numbers.number.values.push(["Blob",t,!1]),this.tmp.shadow_numbers.number.numeric=!0}};a.substituteOne=function(e){return function(t,r){return r?e.replace("%%STRING%%",r):""}};a.substituteTwo=function(e){return function(t){var r=e.replace("%%PARAM%%",t);return function(i,s){return s?r.replace("%%STRING%%",s):""}}};a.Mode=function(e){var t,r,i,s,n,o;t={},r=a.Output.Formats[e];for(i in r){if(i.slice(0,1)!=="@"){t[i]=r[i];continue}s=!1,n=r[i],o=i.split("/"),typeof n=="string"&&n.indexOf("%%STRING%%")>-1?n.indexOf("%%PARAM%%")>-1?s=a.substituteTwo(n):s=a.substituteOne(n):typeof n=="boolean"&&!n?s=a.Output.Formatters.passthrough:typeof n=="function"?s=n:a.error("Bad "+e+" config entry for "+i+": "+n),o.length===1?t[o[0]]=s:o.length===2&&(t[o[0]]||(t[o[0]]={}),t[o[0]][o[1]]=s)}return t};a.setDecorations=function(e,t){var r,i,s;r=[];for(s in a.FORMAT_KEY_SEQUENCE){var i=a.FORMAT_KEY_SEQUENCE[s];t[i]&&(r.push([i,t[i]]),delete t[i])}return r};a.Doppeler=function(e,t){var r=new RegExp("("+e+")","g"),i=new RegExp(e,"g");this.split=function(s){t&&(s=t(s));var n=s.match(r);if(!n)return{tags:[],strings:[s]};for(var o=s.split(i),l=n.length-1;l>-1;l--){typeof n[l]=="number"&&(n[l]="");var u=n[l];u==="'"&&o[l+1].length>0&&(o[l+1]=n[l]+o[l+1],n[l]="")}return{tags:n,strings:o,origStrings:o.slice()}},this.join=function(s){for(var n=s.strings.slice(-1),o=s.tags.length-1;o>-1;o--)n.push(s.tags[o]),n.push(s.strings[o]);return n.reverse(),n.join("")}};a.Engine.prototype.normalDecorIsOrphan=function(e,t){if(t[1]==="normal"){var r=!1,i;this.tmp.area==="citation"?i=[this.citation.opt.layout_decorations].concat(e.alldecor):i=e.alldecor;for(var s=i.length-1;s>-1;s+=-1)for(var n=i[s].length-1;n>-1;n+=-1)i[s][n][0]===t[0]&&i[s][n][1]!=="normal"&&(r=!0);if(!r)return!0}return!1};a.Engine.prototype.getCitationLabel=function(e){var t="",r=this.getTrigraphParams(),i=r[0],s=this.getTerm("reference","short",0);typeof s>"u"&&(s="reference"),s=s.replace(".",""),s=s.slice(0,1).toUpperCase()+s.slice(1);for(var n=0,o=a.NAME_VARIABLES.length;n<o;n+=1){var l=a.NAME_VARIABLES[n];if(e[l]){var u=e[l];u.length>r.length?i=r[r.length-1]:i=r[u.length-1];for(var m=0,c=u.length;m<c&&m!==i.authors.length;m+=1){var h=this.nameOutput.getName(u[m],"locale-translit",!0),p=h.name;p&&p.family?(s=p.family,s=s.replace(/^([ \'\u2019a-z]+\s+)/,"")):p&&p.literal&&(s=p.literal);var d=s.toLowerCase().match(/^(a\s+|the\s+|an\s+)/);if(d&&(s=s.slice(d[1].length)),s=s.replace(a.ROMANESQUE_NOT_REGEXP,""),!s)break;s=s.slice(0,i.authors[m]),s.length>1?s=s.slice(0,1).toUpperCase()+s.slice(1).toLowerCase():s.length===1&&(s=s.toUpperCase()),t+=s}break}}if(!t&&e.title){for(var v=this.locale[this.opt.lang].opts["skip-words"],f=e.title.split(/\s+/),n=f.length-1;n>-1;n--)v.indexOf(f[n])>-1&&(f=f.slice(0,n).concat(f.slice(n+1)));var y=f.join("");y=y.slice(0,r[0].authors[0]),y.length>1?y=y.slice(0,1).toUpperCase()+y.slice(1).toLowerCase():y.length===1&&(y=y.toUpperCase()),t=y}var b="0000";return e.issued&&e.issued.year&&(b=""+e.issued.year),b=b.slice(i.year*-1),t=t+b,t};a.Engine.prototype.getTrigraphParams=function(){var e=[],t=this.opt.trigraph.split(":");(!this.opt.trigraph||this.opt.trigraph.slice(0,1)!=="A")&&a.error("Bad trigraph definition: "+this.opt.trigraph);for(var r=0,i=t.length;r<i;r+=1){for(var s=t[r],n={authors:[],year:0},o=0,l=s.length;o<l;o+=1)switch(s.slice(o,o+1)){case"A":n.authors.push(1);break;case"a":n.authors[n.authors.length-1]+=1;break;case"0":n.year+=1;break;default:a.error("Invalid character in trigraph definition: "+this.opt.trigraph)}e.push(n)}return e};a.Engine.prototype.setOutputFormat=function(e){this.opt.mode=e,this.fun.decorate=a.Mode(e),this.output[e]||(this.output[e]={},this.output[e].tmp={})};a.Engine.prototype.getSortFunc=function(){return function(e,t){return e=e.split("-"),t=t.split("-"),e.length<t.length?1:e.length>t.length?-1:(e=e.slice(-1)[0],t=t.slice(-1)[0],e.length<t.length?1:e.length>t.length?-1:0)}};a.Engine.prototype.setLangTagsForCslSort=function(e){var t,r;if(e)for(this.opt["locale-sort"]=[],t=0,r=e.length;t<r;t+=1)this.opt["locale-sort"].push(e[t]);this.opt["locale-sort"].sort(this.getSortFunc())};a.Engine.prototype.setLangTagsForCslTransliteration=function(e){var t,r;if(this.opt["locale-translit"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translit"].push(e[t]);this.opt["locale-translit"].sort(this.getSortFunc())};a.Engine.prototype.setLangTagsForCslTranslation=function(e){var t,r;if(this.opt["locale-translat"]=[],e)for(t=0,r=e.length;t<r;t+=1)this.opt["locale-translat"].push(e[t]);this.opt["locale-translat"].sort(this.getSortFunc())};a.Engine.prototype.setLangPrefsForCites=function(e,t){var r=this.opt["cite-lang-prefs"];t||(t=function(d){return d.toLowerCase()});for(var i=["Persons","Institutions","Titles","Journals","Publishers","Places"],s=0,n=i.length;s<n;s+=1){var o=t(i[s]),l=i[s].toLowerCase();if(e[o]){for(var u=[];e[o].length>1;)u.push(e[o].pop());var m={orig:1,translit:2,translat:3};for(u.length===2&&m[u[0]]<m[u[1]]&&u.reverse();u.length;)e[o].push(u.pop());for(var c=r[l];c.length;)c.pop();for(var h=0,p=e[o].length;h<p;h+=1)c.push(e[o][h])}}};a.Engine.prototype.setLangPrefsForCiteAffixes=function(e){if(e&&e.length===48){for(var t=this.opt.citeAffixes,r=0,i=["persons","institutions","titles","journals","publishers","places"],s=["translit","orig","translit","translat"],n,o=0,l=i.length;o<l;o+=1)for(var u=0,m=s.length;u<m;u+=1)n="",r%8===4?!t[i[o]]["locale-"+s[u]].prefix&&!t[i[o]]["locale-"+s[u]].suffix&&(n=e[r]?e[r]:"",t[i[o]]["locale-"+s[u]].prefix=n,n=e[r]?e[r+1]:"",t[i[o]]["locale-"+s[u]].suffix=n):(n=e[r]?e[r]:"",t[i[o]]["locale-"+s[u]].prefix=n,n=e[r]?e[r+1]:"",t[i[o]]["locale-"+s[u]].suffix=n),r+=2;this.opt.citeAffixes=t}};a.Engine.prototype.setAutoVietnameseNamesOption=function(e){e?this.opt["auto-vietnamese-names"]=!0:this.opt["auto-vietnamese-names"]=!1};a.Engine.prototype.setAbbreviations=function(e){this.sys.setAbbreviations&&this.sys.setAbbreviations(e)};a.Engine.prototype.setSuppressTrailingPunctuation=function(e){this.citation.opt.suppressTrailingPunctuation=!!e};a.Output={};a.Output.Queue=function(e){this.levelname=["top"],this.state=e,this.queue=[],this.empty=new a.Token("empty");var t={};t.empty=this.empty,this.formats=new a.Stack(t),this.current=new a.Stack(this.queue)};a.Output.Queue.prototype.pop=function(){var e=this.current.value();return e.length?e.pop():e.blobs.pop()};a.Output.Queue.prototype.getToken=function(e){var t=this.formats.value()[e];return t};a.Output.Queue.prototype.mergeTokenStrings=function(e,t){var r,i,s,n;if(r=this.formats.value()[e],i=this.formats.value()[t],s=r,i){r||(r=new a.Token(e,a.SINGLETON),r.decorations=[]),s=new a.Token(e,a.SINGLETON);var n="";for(var n in r.strings)r.strings.hasOwnProperty(n)&&(s.strings[n]=r.strings[n]);for(var n in i.strings)i.strings.hasOwnProperty(n)&&(s.strings[n]=i.strings[n]);s.decorations=r.decorations.concat(i.decorations)}return s};a.Output.Queue.prototype.addToken=function(e,t,r){var i,s;if(i=new a.Token("output"),typeof r=="string"&&(r=this.formats.value()[r]),r&&r.strings){for(s in r.strings)r.strings.hasOwnProperty(s)&&(i.strings[s]=r.strings[s]);i.decorations=r.decorations}typeof t=="string"&&(i.strings.delimiter=t),this.formats.value()[e]=i};a.Output.Queue.prototype.pushFormats=function(e){e||(e={}),e.empty=this.empty,this.formats.push(e)};a.Output.Queue.prototype.popFormats=function(){this.formats.pop()};a.Output.Queue.prototype.startTag=function(e,t){var r={};this.state.tmp["doing-macro-with-date"]&&this.state.tmp.extension&&(t=this.empty,e="empty"),r[e]=t,this.pushFormats(r),this.openLevel(e)};a.Output.Queue.prototype.endTag=function(e){this.closeLevel(e),this.popFormats()};a.Output.Queue.prototype.openLevel=function(e){var t,r;typeof e=="object"?t=new a.Blob(void 0,e):typeof e>"u"?t=new a.Blob(void 0,this.formats.value().empty,"empty"):((!this.formats.value()||!this.formats.value()[e])&&a.error('CSL processor error: call to nonexistent format token "'+e+'"'),t=new a.Blob(void 0,this.formats.value()[e],e)),r=this.current.value(),!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.prefix=this.checkNestedBrace.update(t.strings.prefix)),r.push(t),this.current.push(t)};a.Output.Queue.prototype.closeLevel=function(e){e&&e!==this.current.value().levelname&&a.error("Level mismatch error:  wanted "+e+" but found "+this.current.value().levelname);var t=this.current.pop();!this.state.tmp.just_looking&&this.checkNestedBrace&&(t.strings.suffix=this.checkNestedBrace.update(t.strings.suffix))};a.Output.Queue.prototype.append=function(e,t,r,i,s){var n,o,l,u=!0;if(r&&(i=!0),this.state.tmp["doing-macro-with-date"]&&!r){if(t!=="macro-with-date")return!1;t==="macro-with-date"&&(t="empty")}if(typeof e>"u"||(typeof e=="number"&&(e=""+e),!r&&this.state.tmp.element_trace&&this.state.tmp.element_trace.value()==="suppress-me"))return!1;if(o=!1,t?t==="literal"?(n=!0,u=!1):typeof t=="string"?n=this.formats.value()[t]:n=t:n=this.formats.value().empty,n||a.error("CSL processor error: unknown format token name: "+t),n.strings&&typeof n.strings.delimiter>"u"&&(n.strings.delimiter=""),typeof e=="string"&&e.length&&(e=e.replace(/ ([:;?!\u00bb])/g,"\u202F$1").replace(/\u00ab /g,"\xAB\u202F"),this.last_char_rendered=e.slice(-1),e=e.replace(/\s+'/g," '"),r||(e=e.replace(/^'/g," '")),i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),o=new a.Blob(e,n),l=this.current.value(),typeof l>"u"&&this.current.mystack.length===0&&(this.current.mystack.push([]),l=this.current.value()),typeof o.blobs=="string"&&(i?r&&(this.state.tmp.term_predecessor_name=!0):(this.state.tmp.term_predecessor=!0,this.state.tmp.in_cite_predecessor=!0)),typeof e=="string"){if(typeof o.blobs=="string"&&o.blobs.slice(0,1)!==" "){for(var m="",c=o.blobs;a.TERMINAL_PUNCTUATION.indexOf(c.slice(0,1))>-1;)m=m+c.slice(0,1),c=c.slice(1);c&&m&&(o.strings.prefix=o.strings.prefix+m,o.blobs=c)}o.strings["text-case"]&&(o.blobs=a.Output.Formatters[o.strings["text-case"]](this.state,e)),this.state.tmp.strip_periods&&!s&&(o.blobs=o.blobs.replace(/\.([^a-z]|$)/g,"$1"));for(var h=o.decorations.length-1;h>-1;h+=-1)o.decorations[h][0]==="@quotes"&&o.decorations[h][1]!=="false"&&(o.punctuation_in_quote=this.state.getOpt("punctuation-in-quote")),o.blobs.match(a.ROMANESQUE_REGEXP)||o.decorations[h][0]==="@font-style"&&(o.decorations=o.decorations.slice(0,h).concat(o.decorations.slice(h+1)));l.push(o),this.state.fun.flipflopper.processTags(o)}else u?l.push(o):l.push(e);return!0};a.Output.Queue.prototype.string=function(e,t,r){var i,s,n,o,l,u=a.getSafeEscape(this.state),m=t.slice(),c=[];if(m.length===0)return c;var h="";r?h=r.strings.delimiter:(e.tmp.count_offset_characters=!1,e.tmp.offset_characters=0),r&&r.new_locale&&(r.old_locale=e.opt.lang,e.opt.lang=r.new_locale);for(var p,d,v,f,i=0,s=m.length;i<s;i+=1){if(p=m[i],p.strings.first_blob&&(e.tmp.count_offset_characters=p.strings.first_blob),typeof p.blobs=="string"){if(typeof p.num=="number")c.push(p);else if(p.blobs){p.particle&&(p.blobs=p.particle+p.blobs,p.particle=""),l=u(p.blobs);var y=l.length;if(!e.tmp.suppress_decorations)for(n=0,o=p.decorations.length;n<o;n+=1)f=p.decorations[n],f[0]!=="@showid"&&(e.normalDecorIsOrphan(p,f)||(l=e.fun.decorate[f[0]][f[1]].call(p,e,l,f[2])));if(l&&l.length){if(l=u(p.strings.prefix)+l+u(p.strings.suffix),e.opt.development_extensions.csl_reverse_lookup_support&&!e.tmp.suppress_decorations)for(n=0,o=p.decorations.length;n<o;n+=1)f=p.decorations[n],f[0]==="@showid"&&(l=e.fun.decorate[f[0]][f[1]].call(p,e,l,f[2]));c.push(l),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=y+p.strings.suffix.length+p.strings.prefix.length)}}}else if(p.blobs.length){var b=e.output.string(e,p.blobs,p);if(r&&b!=="string"&&b.length>1&&p.strings.delimiter)for(var g=!1,n=0,o=b.length;n<o;n++)typeof b[n]!="string"?g=!0:g&&(b[n]=p.strings.delimiter+b[n]);c=c.concat(b)}p.strings.first_blob&&e.registry.registry[p.strings.first_blob]&&(e.registry.registry[p.strings.first_blob].offset=e.tmp.offset_characters,e.tmp.count_offset_characters=!1)}for(i=0,s=c.length-1;i<s;i+=1)typeof c[i].num=="number"&&typeof c[i+1].num=="number"&&!c[i+1].UGLY_DELIMITER_SUPPRESS_HACK&&(c[i].strings.suffix=c[i].strings.suffix+(h||""),c[i+1].successor_prefix="",c[i+1].UGLY_DELIMITER_SUPPRESS_HACK=!0);for(var A=0,i=0,s=c.length;i<s;i+=1)typeof c[i]=="string"&&(A=parseInt(i,10)+1,i<c.length-1&&typeof c[i+1]=="object"&&(h&&!c[i+1].UGLY_DELIMITER_SUPPRESS_HACK&&(c[i]+=u(h)),c[i+1].UGLY_DELIMITER_SUPPRESS_HACK=!0));if(r&&(r.decorations.length||r.strings.suffix))A=c.length;else if(r&&r.strings.prefix){for(var i=0,s=c.length;i<s;i++)if(typeof c[i].num<"u"){A=i,i===0&&(c[i].strings.prefix=r.strings.prefix+c[i].strings.prefix);break}}var E=e.output.renderBlobs(c.slice(0,A),h,!1,r);if(E&&r&&(r.decorations.length||r.strings.suffix||r.strings.prefix)){if(!e.tmp.suppress_decorations)for(var i=0,s=r.decorations.length;i<s;i+=1)f=r.decorations[i],!(["@cite","@bibliography","@display","@showid"].indexOf(f[0])>-1)&&(e.normalDecorIsOrphan(p,f)||f[0]&&typeof E=="string"&&(E=e.fun.decorate[f[0]][f[1]].call(r,e,E,f[2])));if(l=E,d=r.strings.suffix,l&&l.length&&(v=r.strings.prefix,l=u(v)+l+u(d),e.tmp.count_offset_characters&&(e.tmp.offset_characters+=v.length+d.length)),E=l,!e.tmp.suppress_decorations)for(var i=0,s=r.decorations.length;i<s;i+=1)f=r.decorations[i],["@cite","@bibliography","@display","@showid"].indexOf(f[0])!==-1&&typeof E=="string"&&(E=e.fun.decorate[f[0]][f[1]].call(r,e,E,f[2]))}var S=c.slice(A,c.length);return!S.length&&E?c=[E]:S.length&&!E?c=S:E&&S.length&&(c=[E].concat(S)),typeof r>"u"?(this.queue=[],this.current.mystack=[],this.current.mystack.push(this.queue),e.tmp.suppress_decorations&&(c=e.output.renderBlobs(c,void 0,!1))):typeof r=="boolean"&&(c=e.output.renderBlobs(c,void 0,!0)),r&&r.new_locale&&(e.opt.lang=r.old_locale),c};a.Output.Queue.prototype.clearlevel=function(){var e,t,r;for(e=this.current.value(),r=e.blobs.length,t=0;t<r;t+=1)e.blobs.pop()};a.Output.Queue.prototype.renderBlobs=function(e,t,r,i){var s,n,o,l,u,m,c,h,p,d,v,f;if(f=a.getSafeEscape(this.state),t||(t=""),s=this.state,n="",o=[],l="",c=e.length,this.state.tmp.area==="citation"&&!this.state.tmp.just_looking&&c===1&&typeof e[0]=="object"&&i)return e[0].strings.prefix=i.strings.prefix+e[0].strings.prefix,e[0].strings.suffix=e[0].strings.suffix+i.strings.suffix,e[0].decorations=e[0].decorations.concat(i.decorations),e[0].params=i.params,e[0];var y=!0;for(m=0;m<c;m+=1)e[m].checkNext?(e[m].checkNext(e[m+1],y),y=!1):e[m+1]&&e[m+1].splice_prefix?y=!1:y=!0;var b=!0;for(m=e.length-1;m>0;m+=-1)e[m].checkLast?b&&e[m].checkLast(e[m-1])&&(b=!1):b=!0;for(c=e.length,m=0;m<c;m+=1)if(u=e[m],n&&(l=t),typeof u=="string")n+=f(l),n+=u,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=l.length);else if(r)n?n=[n,u]:n=[u];else if(u.status!==a.SUPPRESS){u.particle?d=u.particle+u.num:d=u.formatter.format(u.num,u.gender);var g=d.replace(/<[^>]*>/g,"").length;this.append(d,"empty",!0);var A=this.pop(),E=s.tmp.count_offset_characters;if(d=this.string(s,[A],!1),s.tmp.count_offset_characters=E,u.strings["text-case"]&&(d=a.Output.Formatters[u.strings["text-case"]](this.state,d)),d&&this.state.tmp.strip_periods&&(d=d.replace(/\.([^a-z]|$)/g,"$1")),!s.tmp.suppress_decorations)for(p=u.decorations.length,h=0;h<p;h+=1)v=u.decorations[h],!s.normalDecorIsOrphan(u,v)&&(d=s.fun.decorate[v[0]][v[1]].call(u,s,d,v[2]));d=f(u.strings.prefix)+d+f(u.strings.suffix);var S="";u.status===a.END?S=f(u.range_prefix):u.status===a.SUCCESSOR?S=f(u.successor_prefix):u.status===a.START?m>0&&!u.suppress_splice_prefix?S=f(u.splice_prefix):S="":u.status===a.SEEN&&(S=f(u.splice_prefix)),n+=S,n+=d,s.tmp.count_offset_characters&&(s.tmp.offset_characters+=S.length+u.strings.prefix.length+g+u.strings.suffix.length)}return n};a.Output.Queue.purgeEmptyBlobs=function(e){if(!(typeof e!="object"||typeof e.blobs!="object"||!e.blobs.length))for(var t=e.blobs.length-1;t>-1;t--){a.Output.Queue.purgeEmptyBlobs(e.blobs[t]);var r=e.blobs[t];if(!r||!r.blobs||!r.blobs.length){for(var i=[];e.blobs.length-1>t;)i.push(e.blobs.pop());for(e.blobs.pop();i.length;)e.blobs.push(i.pop())}}};a.Output.Queue.adjust=function(e){var t={";":!0,":":!0},r={".":!0,"!":!0,"?":!0},i={"!":{".":"!","?":"!?",":":"!",",":"!,",";":"!;"},"?":{"!":"?!",".":"?",":":"?",",":"?,",";":"?;"},".":{"!":".!","?":".?",":":".:",",":".,",";":".;"},":":{"!":"!","?":"?",".":":",",":":,",";":":;"},",":{"!":",!","?":",?",":":",:",".":",.",";":",;"},";":{"!":"!","?":"?",":":";",",":";,",".":";"}},s={},n={},o={},l={};for(var u in i)o[u]=!0,l[u]=!0,t[u]||(s[u]=!0),r[u]||(n[u]=!0);l[" "]=!0,l["\xA0"]=!0;var m={};for(var u in i)for(var c in i[u])m[c]||(m[c]={}),m[c][u]=i[u][c];function h(O){return typeof O.num=="number"||O.blobs&&O.blobs.length===1&&typeof O.blobs[0].num=="number"}function p(O){if(typeof O.num=="number")return!0;if(!O.blobs||typeof O.blobs!="object")return!1;if(p(O.blobs[O.blobs.length-1]))return!0}function d(O,D){var _=!1,x=["@font-style","@font-variant","@font-weight","@text-decoration","@vertical-align"];if(D&&x.push("@quotes"),O.decorations){for(var k=0,R=O.decorations.length;k<R;k++)if(x.indexOf(O.decorations[k][0])>-1){_=!0;break}}return _}function v(O){if(O.decorations){for(var D=0,_=O.decorations.length;D<_;D++)if(O.decorations[D][0]==="@quotes"&&O.decorations[D][1]!=="false")return!0}return typeof O.blobs!="object"?!1:v(O.blobs[O.blobs.length-1])}function f(O,D){var _=D.strings.suffix.slice(-1);!_&&typeof D.blobs=="string"&&(_=D.blobs.slice(-1));var x=m[O][_];return x&&x.length===1?!0:typeof D.blobs!="object"?!1:!!f(O,D.blobs[D.blobs.length-1])}function y(O,D){if(!o[D])return!1;if(typeof O.blobs=="string")return O.blobs.slice(-1)===D;var _=O.blobs[O.blobs.length-1];if(_){var x=_.strings.suffix.slice(-1);return x?_.strings.suffix.slice(-1)==D:y(_,D)}else return!1}function b(O,D,_,x,k){var R=D==="blobs"?O:O.strings,N=x==="blobs"?_:_.strings,T=R[D].slice(-1),C=N[x].slice(0,1);function j(){N[x]=N[x].slice(1)}function F(){R[D]=R[D].slice(0,-1)}function M(V){N[x]=V+N[x]}function U(V){R[D]+=V}var B=k?F:j;function L(){return m[C]}function z(){return i[T]}var H=k?z:L;function G(){var V=i[T][C];typeof V=="string"?(F(),j(),M(V)):(M(T),F())}function X(){var V=m[C][T];typeof V=="string"?(F(),j(),U(V)):(U(C),j())}var P=k?G:X,$=T===C;$?B():H()&&P()}function g(O){if(O.blobs&&typeof O.blobs=="string"){o[O.strings.suffix.slice(0,1)]&&O.strings.suffix.slice(0,1)===O.blobs.slice(-1)&&(O.strings.suffix=O.strings.suffix.slice(1));return}else if(typeof O!="object"||typeof O.blobs!="object"||!O.blobs.length)return;for(var D=d(O,!0),_=O.blobs.length-1;_>-1;_--){this.upward(O.blobs[_]);var x=O.strings,k=O.blobs[_].strings;if(_===0){x.prefix.slice(-1)===" "&&k.prefix.slice(0,1)===" "&&(k.prefix=k.prefix.slice(1));var R=k.prefix.slice(0,1);!D&&l[R]&&!x.prefix&&(x.prefix+=R,k.prefix=k.prefix.slice(1))}if(_===O.blobs.length-1){var R=k.suffix.slice(-1);!D&&[" "].indexOf(R)>-1&&(x.suffix.slice(0,1)!==R&&(x.suffix=R+x.suffix),k.suffix=k.suffix.slice(0,-1))}x.delimiter&&_>0&&l[x.delimiter.slice(-1)]&&x.delimiter.slice(-1)===k.prefix.slice(0,1)&&(k.prefix=k.prefix.slice(1))}}function A(O){if(!(typeof O!="object"||typeof O.blobs!="object"||!O.blobs.length)){for(var D=O.blobs.length-1;D>-1;D--)if(this.leftward(O.blobs[D]),D<O.blobs.length-1&&!O.strings.delimiter){var _=O.blobs[D],x=_.strings.suffix.slice(-1),k=O.blobs[D+1],R=k.strings.prefix.slice(0,1),N=d(_)||d(k),T=typeof x=="number"||typeof R=="number";if(!N&&!T&&o[R]&&!T){var C=R===_.strings.suffix.slice(-1),j=!_.strings.suffix&&typeof _.blobs=="string"&&_.blobs.slice(-1)===R;!C&&!j?b(_,"suffix",k,"prefix"):k.strings.prefix=k.strings.prefix.slice(1)}}}}function E(O){if(O.blobs&&typeof O.blobs=="string"){o[O.strings.suffix.slice(0,1)]&&O.strings.suffix.slice(0,1)===O.blobs.slice(-1)&&(O.strings.suffix=O.strings.suffix.slice(1));return}else if(typeof O!="object"||typeof O.blobs!="object"||!O.blobs.length)return;for(var D=O.strings,_=!1,x=0,k=O.blobs.length;x<k;x++)if(h(O.blobs[x])){_=!0;break}if(D.delimiter&&o[D.delimiter.slice(0,1)]){for(var R=D.delimiter.slice(0,1),x=O.blobs.length-2;x>-1;x--){var N=O.blobs[x].strings;N.suffix.slice(-1)!==R&&(N.suffix+=R)}D.delimiter=D.delimiter.slice(1)}for(var x=O.blobs.length-1;x>-1;x--){var T=O.blobs[x],N=O.blobs[x].strings,C=d(T,!0),j=h(T);if(x===O.blobs.length-1){var F=D.suffix.slice(0,1),M=!1;o[F]&&(M=f(F,T),!M&&e&&(M=v(T))),M&&o[F]&&(p(T)||(typeof T.blobs=="string"?b(T,"blobs",O,"suffix"):b(T,"suffix",O,"suffix"),D.suffix.slice(0,1)==="."&&(N.suffix+=D.suffix.slice(0,1),D.suffix=D.suffix.slice(1)))),N.suffix.slice(-1)==="\xA0"&&D.suffix.slice(0,1)===" "&&(D.suffix=D.suffix.slice(1)),l[N.suffix.slice(0,1)]&&(typeof T.blobs=="string"&&T.blobs.slice(-1)===N.suffix.slice(0,1)&&(N.suffix=N.suffix.slice(1)),N.suffix.slice(-1)===D.suffix.slice(0,1)&&(D.suffix=D.suffix.slice(0,-1))),y(O,O.strings.suffix.slice(0,1))&&(O.strings.suffix=O.strings.suffix.slice(1))}else if(D.delimiter)l[D.delimiter.slice(0,1)]&&D.delimiter.slice(0,1)===N.suffix.slice(-1)&&(O.blobs[x].strings.suffix=O.blobs[x].strings.suffix.slice(0,-1));else{var U=O.blobs[x+1].strings;!h(T)&&!C&&l[N.suffix.slice(-1)]&&N.suffix.slice(-1)===U.prefix.slice(0,1)&&(U.prefix=U.prefix.slice(1))}!j&&!C&&o[N.suffix.slice(0,1)]&&typeof T.blobs=="string"&&b(T,"blobs",T,"suffix"),this.downward(O.blobs[x])}}function S(O){var D=O.strings.suffix.slice(0,1);if(typeof O.blobs=="string")for(;s[D];)b(O,"blobs",O,"suffix"),D=O.strings.suffix.slice(0,1);else for(;s[D];)b(O.blobs[O.blobs.length-1],"suffix",O,"suffix"),D=O.strings.suffix.slice(0,1)}function w(O){if(typeof O.blobs=="string")for(var D=O.blobs.slice(-1);n[D];)b(O,"blobs",O,"suffix",!0),D=O.blobs.slice(-1);else for(var D=O.blobs[O.blobs.length-1].strings.suffix.slice(-1);n[D];)b(O.blobs[O.blobs.length-1],"suffix",O,"suffix",!0),D=O.blobs[O.blobs.length-1].strings.suffix.slice(-1)}function I(O){if(!(typeof O!="object"||typeof O.blobs!="object"||!O.blobs.length)){for(var D,_=0,x=O.blobs.length;_<x;_++){for(var k=O.blobs[_],R=!1,N=0,T=k.decorations.length;N<T;N++){var C=k.decorations[N];C[0]==="@quotes"&&C[1]!=="false"&&(R=!0)}R&&(e?S(k):w(k)),D=this.fix(O.blobs[_]),k.blobs&&typeof k.blobs=="string"&&(D=k.blobs.slice(-1))}return D}}this.upward=g,this.leftward=A,this.downward=E,this.fix=I};a.Engine.Opt=function(){this.parallel={enable:!1},this.has_disambiguate=!1,this.mode="html",this.dates={},this.jurisdictions_seen={},this.suppressedJurisdictions={},this.inheritedAttributes={},this["locale-sort"]=[],this["locale-translit"]=[],this["locale-translat"]=[],this.citeAffixes={persons:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},institutions:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},titles:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},journals:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},publishers:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}},places:{"locale-orig":{prefix:"",suffix:""},"locale-translit":{prefix:"",suffix:""},"locale-translat":{prefix:"",suffix:""}}},this["default-locale"]=[],this.update_mode=a.NONE,this.bib_mode=a.NONE,this.sort_citations=!1,this["et-al-min"]=0,this["et-al-use-first"]=1,this["et-al-use-last"]=!1,this["et-al-subsequent-min"]=!1,this["et-al-subsequent-use-first"]=!1,this["demote-non-dropping-particle"]="display-and-sort",this["parse-names"]=!0,this.citation_number_slug=!1,this.trigraph="Aaaa00:AaAa00:AaAA00:AAAA00",this.nodenames=[],this.gender={},this["cite-lang-prefs"]={persons:["orig"],institutions:["orig"],titles:["orig"],journals:["orig"],publishers:["orig"],places:["orig"],number:["orig"]},this.has_layout_locale=!1,this.disable_duplicate_year_suppression=[],this.use_context_condition=!1,this.jurisdiction_fallbacks={},this.development_extensions={},this.development_extensions.field_hack=!0,this.development_extensions.allow_field_hack_date_override=!0,this.development_extensions.locator_date_and_revision=!0,this.development_extensions.locator_label_parse=!0,this.development_extensions.raw_date_parsing=!0,this.development_extensions.clean_up_csl_flaws=!0,this.development_extensions.consolidate_legal_items=!1,this.development_extensions.csl_reverse_lookup_support=!1,this.development_extensions.wrap_url_and_doi=!1,this.development_extensions.thin_non_breaking_space_html_hack=!1,this.development_extensions.apply_citation_wrapper=!1,this.development_extensions.main_title_from_short_title=!1,this.development_extensions.uppercase_subtitles=!1,this.development_extensions.normalize_lang_keys_to_lowercase=!1,this.development_extensions.strict_text_case_locales=!1,this.development_extensions.expect_and_symbol_form=!1,this.development_extensions.require_explicit_legal_case_title_short=!1,this.development_extensions.spoof_institutional_affiliations=!1,this.development_extensions.force_jurisdiction=!1,this.development_extensions.parse_names=!0,this.development_extensions.hanging_indent_legacy_number=!1,this.development_extensions.throw_on_empty=!1,this.development_extensions.strict_inputs=!0,this.development_extensions.prioritize_disambiguate_condition=!1,this.development_extensions.force_short_title_casing_alignment=!0,this.development_extensions.implicit_short_title=!1,this.development_extensions.force_title_abbrev_fallback=!1,this.development_extensions.split_container_title=!1,this.development_extensions.legacy_institution_name_ordering=!1,this.development_extensions.etal_min_etal_usefirst_hack=!1};a.Engine.Tmp=function(){this.names_max=new a.Stack,this.names_base=new a.Stack,this.givens_base=new a.Stack,this.value=[],this.namepart_decorations={},this.namepart_type=!1,this.area="citation",this.root="citation",this.extension="",this.can_substitute=new a.Stack(0,a.LITERAL),this.element_rendered_ok=!1,this.element_trace=new a.Stack("style"),this.nameset_counter=0,this.group_context=new a.Stack({term_intended:!1,variable_attempt:!1,variable_success:!1,output_tip:void 0,label_form:void 0,parallel_first:void 0,parallel_last:void 0,parallel_delimiter_override:void 0,condition:!1,force_suppress:!1,done_vars:[]}),this.term_predecessor=!1,this.in_cite_predecessor=!1,this.jump=new a.Stack(0,a.LITERAL),this.decorations=new a.Stack,this.tokenstore_stack=new a.Stack,this.last_suffix_used="",this.last_names_used=[],this.last_years_used=[],this.years_used=[],this.names_used=[],this.taintedItemIDs={},this.taintedCitationIDs={},this.initialize_with=new a.Stack,this.disambig_request=!1,this["name-as-sort-order"]=!1,this.suppress_decorations=!1,this.disambig_settings=new a.AmbigConfig,this.bib_sort_keys=[],this.prefix=new a.Stack("",a.LITERAL),this.suffix=new a.Stack("",a.LITERAL),this.delimiter=new a.Stack("",a.LITERAL),this.cite_locales=[],this.cite_affixes={citation:!1,bibliography:!1,citation_sort:!1,bibliography_sort:!1},this.strip_periods=0,this.shadow_numbers={},this.authority_stop_last=0,this.loadedItemIDs={},this.condition_counter=0,this.condition_lang_val_arr=[],this.condition_lang_counter_arr=[]};a.Engine.Fun=function(e){this.match=new a.Util.Match,this.suffixator=new a.Util.Suffixator(a.SUFFIX_CHARS),this.romanizer=new a.Util.Romanizer,this.ordinalizer=new a.Util.Ordinalizer(e),this.long_ordinalizer=new a.Util.LongOrdinalizer};a.Engine.Build=function(){this["alternate-term"]=!1,this.in_bibliography=!1,this.in_style=!1,this.skip=!1,this.postponed_macro=!1,this.layout_flag=!1,this.name=!1,this.names_variables=[[]],this.name_label=[{}],this.form=!1,this.term=!1,this.macro={},this.macro_stack=[],this.text=!1,this.lang=!1,this.area="citation",this.root="citation",this.extension="",this.substitute_level=new a.Stack(0,a.LITERAL),this.names_level=0,this.render_nesting_level=0,this.render_seen=!1,this.bibliography_key_pos=0};a.Engine.Configure=function(){this.tests=[],this.fail=[],this.succeed=[]};a.Engine.Citation=function(e){this.opt={inheritedAttributes:{}},this.tokens=[],this.srt=new a.Registry.Comparifier(e,"citation_sort"),this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="citation"};a.Engine.Bibliography=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt["line-spacing"]=1,this.opt["entry-spacing"]=1,this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="bibliography"};a.Engine.BibliographySort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.opt.topdecor=[],this.opt.citation_number_sort_direction=a.ASCENDING,this.opt.citation_number_secondary=!1,this.tmp={},this.keys=[],this.root="bibliography"};a.Engine.CitationSort=function(){this.tokens=[],this.opt={},this.opt.sort_directions=[],this.keys=[],this.opt.topdecor=[],this.root="citation"};a.Engine.InText=function(){this.opt={inheritedAttributes:{}},this.tokens=[],this.opt.collapse=[],this.opt["disambiguate-add-names"]=!1,this.opt["disambiguate-add-givenname"]=!1,this.opt["disambiguate-add-year-suffix"]=!1,this.opt["givenname-disambiguation-rule"]="by-cite",this.opt["near-note-distance"]=5,this.opt.topdecor=[],this.opt.layout_decorations=[],this.opt.layout_prefix="",this.opt.layout_suffix="",this.opt.layout_delimiter="",this.opt.sort_locales=[],this.opt.max_number_of_names=0,this.root="intext"};a.Engine.prototype.previewCitationCluster=function(e,t,r,i){var s=this.opt.mode;this.setOutputFormat(i),e.citationID&&delete e.citationID;var n=this.processCitationCluster(e,t,r,a.PREVIEW);return this.setOutputFormat(s),n[1]};a.Engine.prototype.appendCitationCluster=function(e){for(var t=[],r=this.registry.citationreg.citationByIndex.length,i=0;i<r;i+=1){var s=this.registry.citationreg.citationByIndex[i];t.push([""+s.citationID,s.properties.noteIndex])}return this.processCitationCluster(e,t,[])[1]};a.Engine.prototype.processCitationCluster=function(e,t,r,i){var s,n,o,l,u,m,c,h,p,d,v,f,y,b,g,A,E,S;this.debug=!1,this.tmp.loadedItemIDs={},this.tmp.citation_errors=[],this.registry.return_data={bibchange:!1},this.setCitationId(e);var w,I,O;if(i===a.PREVIEW){this.debug&&a.debug("****** start state save *********"),w=this.registry.citationreg.citationByIndex.slice(),I=this.registry.reflist.slice();for(var D=t.concat(r),_={},x=[],l=0,u=D.length;l<u;l+=1)for(s=this.registry.citationreg.citationById[D[l][0]],m=0,c=s.citationItems.length;m<c;m+=1)_[s.citationItems[m].id]=!0,x.push(""+s.citationItems[m].id);for(m=0,c=e.citationItems.length;m<c;m+=1)_[e.citationItems[m].id]=!0,x.push(""+e.citationItems[m].id);O={};for(var l=0,u=I.length;l<u;l+=1)if(!_[I[l].id]){var k=this.registry.registry[I[l].id].ambig,R=this.registry.ambigcites[k];if(R)for(m=0,c=R.length;m<c;m+=1)O[R[m]]=a.cloneAmbigConfig(this.registry.registry[R[m]].disambig)}this.debug&&a.debug("****** end state save *********")}this.tmp.taintedCitationIDs={};for(var N=[],T={},l=0,u=e.citationItems.length;l<u;l+=1){b={};for(var f in e.citationItems[l])b[f]=e.citationItems[l][f];if(y=this.retrieveItem(""+b.id),y.id&&this.transform.loadAbbreviation("default","hereinafter",y.id,y.language),b=a.parseLocator.call(this,b),this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable([[y,b]]),this.opt.development_extensions.locator_label_parse&&b.locator&&["bill","gazette","legislation","regulation","treaty"].indexOf(y.type)===-1&&(!b.label||b.label==="page")){var E=a.LOCATOR_LABELS_REGEXP.exec(b.locator);if(E){var C=a.LOCATOR_LABELS_MAP[E[2]];this.getTerm(C)&&(b.label=C,b.locator=E[3])}}var j=[y,b];N.push(j),e.citationItems[l].item=y}e.sortedItems=N;var F=[],M={},U;for(l=0,u=t.length;l<u;l+=1)n=t[l],this.opt.development_extensions.strict_inputs&&(M[n[0]]&&a.error("Previously referenced citationID "+n[0]+" encountered in citationsPre"),n[1]&&(U>n[1]&&a.debug("Note index sequence is not sane at citationsPre["+l+"]"),U=n[1])),this.registry.citationreg.citationById[n[0]].properties.noteIndex=n[1],F.push(this.registry.citationreg.citationById[n[0]]),M[n[0]]=this.registry.citationreg.citationById[n[0]];for(e.properties||(e.properties={noteIndex:0}),this.opt.development_extensions.strict_inputs&&(M[e.citationID]&&a.error("Citation with previously referenced citationID "+e.citationID),e.properties.noteIndex&&(U>e.properties.noteIndex&&a.debug("Note index sequence is not sane for citation "+e.citationID),U=e.properties.noteIndex)),F.push(e),M[e.citationID]=e,l=0,u=r.length;l<u;l+=1)o=r[l],this.opt.development_extensions.strict_inputs&&(M[o[0]]&&a.error("Previously referenced citationID "+o[0]+" encountered in citationsPost"),o[1]&&(U>o[1]&&a.debug("Note index sequence is not sane at postCitation["+l+"]"),U=o[1])),this.registry.citationreg.citationById[o[0]].properties.noteIndex=o[1],F.push(this.registry.citationreg.citationById[o[0]]),M[o[0]]=this.registry.citationreg.citationById[o[0]];this.registry.citationreg.citationByIndex=F,this.registry.citationreg.citationById=M,this.registry.citationreg.citationsByItemId={},this.opt.update_mode===a.POSITION&&(A=[],g=[],S={});for(var B=[],l=0,u=F.length;l<u;l+=1){for(F[l].properties.index=l,m=0,c=F[l].sortedItems.length;m<c;m+=1)b=F[l].sortedItems[m],this.registry.citationreg.citationsByItemId[b[1].id]||(this.registry.citationreg.citationsByItemId[b[1].id]=[],B.push(""+b[1].id)),this.registry.citationreg.citationsByItemId[b[1].id].indexOf(F[l])===-1&&this.registry.citationreg.citationsByItemId[b[1].id].push(F[l]);this.opt.update_mode===a.POSITION&&(F[l].properties.noteIndex?g.push(F[l]):(F[l].properties.noteIndex=0,A.push(F[l])))}if(i!==a.ASSUME_ALL_ITEMS_REGISTERED&&(this.debug&&a.debug("****** start update items *********"),this.updateItems(B,null,null,!0),this.debug&&a.debug("****** endo update items *********")),!this.opt.citation_number_sort&&N&&N.length>1&&this.citation_sort.tokens.length>0){for(var l=0,u=N.length;l<u;l+=1)N[l][1].sortkeys=a.getSortKeys.call(this,N[l][0],"citation_sort");if(this.opt.grouped_sort&&!e.properties.unsorted){for(var l=0,u=N.length;l<u;l+=1){var L=N[l][1].sortkeys;this.tmp.authorstring_request=!0;var z=this.registry.registry[N[l][0].id].disambig;this.tmp.authorstring_request=!0,a.getAmbiguousCite.call(this,N[l][0],z);var H=this.registry.authorstrings[N[l][0].id];this.tmp.authorstring_request=!1,N[l][1].sortkeys=[H].concat(L)}N.sort(this.citation.srt.compareCompositeKeys);for(var G=!1,X=!1,P=!1,l=0,u=N.length;l<u;l+=1)N[l][1].sortkeys[0]!==G&&(P=N[l][1].sortkeys[0],X=N[l][1].sortkeys[1]),N[l][1].sortkeys[0]=""+X+l,G=P}e.properties.unsorted||N.sort(this.citation.srt.compareCompositeKeys)}this.opt.parallel.enable&&this.parallel.StartCitation(e.sortedItems);var $;if(this.opt.update_mode===a.POSITION)for(var l=0;l<2;l+=1){var V={},J={},ee={};for($=[A,g][l],m=0,c=$.length;m<c;m+=1){var Q=$[m];for($[m].properties.noteIndex||($[m].properties.noteIndex=0),$[m].properties.noteIndex=parseInt($[m].properties.noteIndex,10),m>0&&Q.properties.noteIndex&&$[m-1].properties.noteIndex>Q.properties.noteIndex&&(S={},V={},J={},ee={}),h=0,p=Q.sortedItems.length;h<p;h+=1)Q.sortedItems[h][1].parallel&&Q.sortedItems[h][1].parallel!=="first"||(S[Q.properties.noteIndex]?S[Q.properties.noteIndex]+=1:S[Q.properties.noteIndex]=1);for(h=0,p=$[m].sortedItems.length;h<p;h+=1){b=$[m].sortedItems[h];var W=b[0].id,ne=b[0].legislation_id?b[0].legislation_id:b[0].id,Z=b[0].legislation_id?b[0].legislation_id:b[0].container_id?b[0].container_id:b[0].id,le=b[1]["locator-extra"],ye=b[1].locator,te=b[1].label,ue,Ft;if(h>0)if(Q.sortedItems[h-1][0].legislation_id)ue=Q.sortedItems[h-1][0].legislation_id;else{ue=Q.sortedItems[h-1][1].id,Ft=Q.sortedItems[h-1][1]["locator-extra"];for(var se=h-2;se>-1;se--)Q.sortedItems[se][1].parallel==="first"&&(ue=Q.sortedItems[se][1].id,Ft=Q.sortedItems[se][1]["locator-extra"])}if(i===a.PREVIEW&&Q.citationID!=e.citationID){typeof V[b[1].id]>"u"&&(V[ne]=Q.properties.noteIndex),J[Z]=Q.properties.noteIndex;continue}var ze={};if(ze.position=b[1].position,ze["first-reference-note-number"]=b[1]["first-reference-note-number"],ze["first-container-reference-note-number"]=b[1]["first-container-reference-note-number"],ze["near-note"]=b[1]["near-note"],b[1]["first-reference-note-number"]=0,b[1]["first-container-reference-note-number"]=0,b[1]["near-note"]=!1,this.registry.citationreg.citationsByItemId[W]&&this.opt.xclass==="note"&&this.opt.has_disambiguate){var Ze=this.registry.registry[b[0].id]["citation-count"],fl=this.registry.citationreg.citationsByItemId[W].length;if(this.registry.registry[b[0].id]["citation-count"]=this.registry.citationreg.citationsByItemId[W].length,typeof Ze=="number"){var hl=Ze<2,dl=fl<2;if(hl!==dl)for(var se=0,ii=this.registry.citationreg.citationsByItemId[W].length;se<ii;se++)T[this.registry.registry[b[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[W][se].citationID]=!0}else for(var se=0,ii=this.registry.citationreg.citationsByItemId[W].length;se<ii;se++)T[this.registry.registry[b[0].id].ambig]=!0,this.tmp.taintedCitationIDs[this.registry.citationreg.citationsByItemId[W][se].citationID]=!0}var si,Zs;if(typeof J[Z]>"u"&&Q.properties.mode!=="author-only")V[ne]=Q.properties.noteIndex,J[Z]=Q.properties.noteIndex,ee[Z]=Q.properties.noteIndex,b[1].position=a.POSITION_FIRST;else{var Ie=!1,gt=!1,de=null;if(m>0)var de=$[m-1];var ur=$[m];if(m>0){var ni=1;de.properties.mode==="author-only"&&m>1&&(ni=2);var en=m-ni;$[en].sortedItems.length&&(si=$[en].sortedItems.slice(-1)[0][1].id,Zs=$[m-ni].sortedItems.slice(-1)[0][1]["locator-extra"]),de.sortedItems.length&&de.sortedItems[0].slice(-1)[0].legislation_id&&(si=de.sortedItems[0].slice(-1)[0].legislation_id)}if(m>0&&h===0&&de.properties.noteIndex!==ur.properties.noteIndex){var tn=!1,rn=de.sortedItems[0][0].id;if(de.sortedItems[0][0].legislation_id&&(rn=de.sortedItems[0][0].legislation_id),rn==ne&&de.properties.noteIndex>=ur.properties.noteIndex-1){var gl=de.sortedItems[0][1]["locator-extra"],bl=ur.sortedItems[0][1]["locator-extra"];(S[de.properties.noteIndex]===1||de.properties.noteIndex===0)&&gl===bl&&(tn=!0)}tn?Ie=!0:gt=!0}else h>0&&ue==ne&&Ft==le||h===0&&m>0&&de.properties.noteIndex==ur.properties.noteIndex&&de.sortedItems.length&&si==ne&&Zs==le?Ie=!0:gt=!0;var et,Be,ai,$e,oi;Ie&&(h>0?et=Q.sortedItems[h-1][1]:et=$[m-1].sortedItems[0][1],et.locator?(et.label?ai=et.label:ai="",Be=""+et.locator+ai):Be=et.locator,ye?(te?oi=te:oi="",$e=""+ye+oi):$e=ye),Ie&&Be&&!$e&&(Ie=!1,gt=!0),Ie&&(!Be&&$e?b[1].position=a.POSITION_IBID_WITH_LOCATOR:!Be&&!$e||Be&&$e===Be?b[1].position=a.POSITION_IBID:Be&&$e&&$e!==Be?b[1].position=a.POSITION_IBID_WITH_LOCATOR:(Ie=!1,gt=!0)),gt&&(b[1].position=a.POSITION_CONTAINER_SUBSEQUENT,typeof V[ne]>"u"?V[ne]=Q.properties.noteIndex:b[1].position=a.POSITION_SUBSEQUENT),(gt||Ie)&&(Q.properties.mode==="author-only"&&(b[1].position=a.POSITION_FIRST),ee[Z]!=Q.properties.noteIndex&&(b[1]["first-container-reference-note-number"]=ee[Z],this.registry.registry[b[0].id]&&(this.registry.registry[b[0].id]["first-container-reference-note-number"]=ee[Z])),V[ne]!=Q.properties.noteIndex&&(b[1]["first-reference-note-number"]=V[ne],this.registry.registry[b[0].id]&&(this.registry.registry[b[0].id]["first-reference-note-number"]=V[ne])))}if(Q.properties.noteIndex){var vl=parseInt(Q.properties.noteIndex,10)-parseInt(J[Z],10);b[1].position!==a.POSITION_FIRST&&vl<=this.citation.opt["near-note-distance"]&&(b[1]["near-note"]=!0),J[Z]=Q.properties.noteIndex}else b[1].position!==a.POSITION_FIRST&&(b[1]["near-note"]=!0);if(Q.citationID!=e.citationID)for(d=0,v=a.POSITION_TEST_VARS.length;d<v;d+=1){var li=a.POSITION_TEST_VARS[d];b[1][li]!==ze[li]&&(this.registry.registry[b[0].id]&&li==="first-reference-note-number"&&(T[this.registry.registry[b[0].id].ambig]=!0,this.tmp.taintedItemIDs[b[0].id]=!0),this.tmp.taintedCitationIDs[Q.citationID]=!0)}this.sys.variableWrapper&&(b[1].index=Q.properties.index,b[1].noteIndex=Q.properties.noteIndex)}}}if(this.opt.citation_number_sort&&N&&N.length>1&&this.citation_sort.tokens.length>0&&!e.properties.unsorted){for(var l=0,u=N.length;l<u;l+=1)N[l][1].sortkeys=a.getSortKeys.call(this,N[l][0],"citation_sort");N.sort(this.citation.srt.compareCompositeKeys)}for(var f in this.tmp.taintedItemIDs)if(this.tmp.taintedItemIDs.hasOwnProperty(f)&&($=this.registry.citationreg.citationsByItemId[f],$))for(var l=0,u=$.length;l<u;l+=1)this.tmp.taintedCitationIDs[$[l].citationID]=!0;var Pt=[];if(i===a.PREVIEW){this.debug&&a.debug("****** start run processor *********");try{Pt=this.process_CitationCluster.call(this,e.sortedItems,e)}catch(mr){a.error("Error running CSL processor for preview: "+mr)}this.debug&&(a.debug("****** end run processor *********"),a.debug("****** start state restore *********")),this.registry.citationreg.citationByIndex=w,this.registry.citationreg.citationById={};for(var l=0,u=w.length;l<u;l+=1)this.registry.citationreg.citationById[w[l].citationID]=w[l];this.debug&&a.debug("****** start final update *********");for(var sn=[],l=0,u=I.length;l<u;l+=1)sn.push(""+I[l].id);this.updateItems(sn,null,null,!0),this.debug&&a.debug("****** end final update *********");for(var f in O)O.hasOwnProperty(f)&&(this.registry.registry[f].disambig=O[f]);this.debug&&a.debug("****** end state restore *********")}else{for(var yl in T)this.disambiguate.run(yl,e);var Te;for(var f in this.tmp.taintedCitationIDs)if(f!=e.citationID){var xe=this.registry.citationreg.citationById[f];if(!xe.properties.unsorted){for(var l=0,u=xe.sortedItems.length;l<u;l+=1)xe.sortedItems[l][1].sortkeys=a.getSortKeys.call(this,xe.sortedItems[l][0],"citation_sort");xe.sortedItems.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_pos=xe.properties.index,this.tmp.citation_note_index=xe.properties.noteIndex,this.tmp.citation_id=""+xe.citationID,Te=[],Te.push(xe.properties.index),Te.push(this.process_CitationCluster.call(this,xe.sortedItems,xe)),Te.push(xe.citationID),Pt.push(Te)}this.tmp.taintedItemIDs={},this.tmp.taintedCitationIDs={},this.tmp.citation_pos=e.properties.index,this.tmp.citation_note_index=e.properties.noteIndex,this.tmp.citation_id=""+e.citationID,Te=[],Te.push(t.length),Te.push(this.process_CitationCluster.call(this,N,e)),Te.push(e.citationID),Pt.push(Te),Pt.sort(function(mr,nn){return mr[0]>nn[0]?1:mr[0]<nn[0]?-1:0})}return this.registry.return_data.citation_errors=this.tmp.citation_errors.slice(),[this.registry.return_data,Pt]};a.Engine.prototype.process_CitationCluster=function(e,t){var r="";if(t&&t.properties&&t.properties.mode==="composite"){t.properties.mode="author-only";var i=a.getCitationCluster.call(this,e,t);t.properties.mode="suppress-author";var s="";t.properties.infix&&(this.output.append(t.properties.infix),s=this.output.string(this,this.output.queue),typeof s=="object"&&(s=s.join("")));var n=a.getCitationCluster.call(this,e,t);t.properties.mode="composite",i&&s&&a.SWAPPING_PUNCTUATION.concat(["\u2019","'"]).indexOf(s[0])>-1&&(i+=s,s=!1),r=[i,s,n].filter(function(o){return o}).join(" ")}else r=a.getCitationCluster.call(this,e,t);return r};a.Engine.prototype.makeCitationCluster=function(e){var t,r,c,i,s,n,o;for(t=[],s=e.length,i=0;i<s;i+=1){n={};for(var l in e[i])n[l]=e[i][l];if(o=this.retrieveItem(""+n.id),this.opt.development_extensions.locator_label_parse&&n.locator&&["bill","gazette","legislation","regulation","treaty"].indexOf(o.type)===-1&&(!n.label||n.label==="page")){var u=a.LOCATOR_LABELS_REGEXP.exec(n.locator);if(u){var m=a.LOCATOR_LABELS_MAP[u[2]];this.getTerm(m)&&(n.label=m,n.locator=u[3])}}n.locator&&(n.locator=(""+n.locator).replace(/\s+$/,"")),r=[o,n],t.push(r)}if(this.opt.development_extensions.consolidate_legal_items&&this.remapSectionVariable(t),t&&t.length>1&&this.citation_sort.tokens.length>0){for(s=t.length,i=0;i<s;i+=1)t[i][1].sortkeys=a.getSortKeys.call(this,t[i][0],"citation_sort");t.sort(this.citation.srt.compareCompositeKeys)}this.tmp.citation_errors=[];var c=a.getCitationCluster.call(this,t);return c};a.getAmbiguousCite=function(e,t,r,i){var p,s=this.tmp.group_context.tip,n={term_intended:s.term_intended,variable_attempt:s.variable_attempt,variable_success:s.variable_success,output_tip:s.output_tip,label_form:s.label_form,non_parallel:s.non_parallel,parallel_last:s.parallel_last,parallel_first:s.parallel_first,parallel_last_override:s.parallel_last_override,parallel_delimiter_override:s.parallel_delimiter_override,parallel_delimiter_override_on_suppress:s.parallel_delimiter_override_on_suppress,condition:s.condition,force_suppress:s.force_suppress,done_vars:s.done_vars.slice()};t?this.tmp.disambig_request=t:this.tmp.disambig_request=!1;var o={position:a.POSITION_SUBSEQUENT,"near-note":!0};i&&(o.locator=i.locator,o.label=i.label),this.registry.registry[e.id]&&this.registry.citationreg.citationsByItemId&&this.registry.citationreg.citationsByItemId[e.id]&&this.registry.citationreg.citationsByItemId[e.id].length&&r&&this.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(o["first-reference-note-number"]=this.registry.registry[e.id]["first-reference-note-number"]),this.tmp.area="citation",this.tmp.root="citation";var l=this.tmp.suppress_decorations;this.tmp.suppress_decorations=!0,this.tmp.just_looking=!0,a.getCite.call(this,e,o,null,!1);for(var u=0,m=this.output.queue.length;u<m;u+=1)a.Output.Queue.purgeEmptyBlobs(this.output.queue[u]);if(this.opt.development_extensions.clean_up_csl_flaws)for(var c=0,h=this.output.queue.length;c<h;c+=1)this.output.adjust.upward(this.output.queue[c]),this.output.adjust.leftward(this.output.queue[c]),this.output.adjust.downward(this.output.queue[c]),this.output.adjust.fix(this.output.queue[c]);var p=this.output.string(this,this.output.queue);return this.tmp.just_looking=!1,this.tmp.suppress_decorations=l,this.tmp.group_context.replace(n),p};a.getSpliceDelimiter=function(e,t,r){if(this.citation.opt["after-collapse-delimiter"]!==void 0)e?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:t&&!this.tmp.have_collapsed?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:!t&&!this.tmp.have_collapsed&&this.citation.opt.collapse!=="year-suffix"?this.tmp.splice_delimiter=this.citation.opt["after-collapse-delimiter"]:this.tmp.splice_delimiter=this.citation.opt.layout_delimiter;else if(this.tmp.use_cite_group_delimiter)this.tmp.splice_delimiter=this.citation.opt.cite_group_delimiter;else if(this.tmp.have_collapsed&&this.opt.xclass==="in-text"&&this.opt.update_mode!==a.NUMERIC)this.tmp.splice_delimiter=", ";else if(this.tmp.cite_locales[r-1]){var i=this.tmp.cite_affixes[this.tmp.area][this.tmp.cite_locales[r-1]];i&&i.delimiter&&(this.tmp.splice_delimiter=i.delimiter)}else this.tmp.splice_delimiter||(this.tmp.splice_delimiter="");return this.tmp.splice_delimiter};a.getCitationCluster=function(e,t){var r,i,s,n,o,l,u,m,c,h,p,d,v,f,y,b,g,A,E,S,w,I,O="";this.output.checkNestedBrace=new a.checkNestedBrace(this),t&&(S=t.citationID,w=t.properties.mode==="author-only"?!!t.properties.mode:!1,this.opt.xclass!=="note"&&(I=t.properties.mode==="suppress-author"?!!t.properties.mode:!1),t.properties.prefix&&(O=a.checkPrefixSpaceAppend(this,t.properties.prefix))),e=e||[],this.tmp.last_primary_names_string=!1,A=a.getSafeEscape(this),this.tmp.area="citation",this.tmp.root="citation",r="",i=[],this.tmp.last_suffix_used="",this.tmp.last_names_used=[],this.tmp.last_years_used=[],this.tmp.backref_index=[],this.tmp.cite_locales=[],this.tmp.just_looking||(this.tmp.abbrev_trimmer={QUASHES:{}});var D=this.output.checkNestedBrace.update(this.citation.opt.layout_prefix+O),_=!1;if(this.citation.opt.suppressTrailingPunctuation&&(_=!0),S&&this.registry.citationreg.citationById[S].properties["suppress-trailing-punctuation"]&&(_=!0),this.opt.xclass==="note"){for(var x=[],k=!1,R=!1,N=!1,T=[],C=0,j=e.length;C<j;C+=1){var F=e[C][0].type,M=e[C][0].title,U=e[C][1].position,B=e[C][0].id;M&&F==="legal_case"&&B!==N&&U&&((M!==k||x.length===0)&&(T=[],x.push(T)),T.push(e[C][1])),k=M,R=U,N=B}for(C=0,j=x.length;C<j;C+=1)if(T=x[C],!(T.length<2)){var L=T.slice(-1)[0].locator;if(L)for(var z=0,H=T.length-1;z<H;z+=1)T[z].locator&&(L=!1);L&&(T[0].locator=L,delete T.slice(-1)[0].locator,T[0].label=T.slice(-1)[0].label,T.slice(-1)[0].label&&delete T.slice(-1)[0].label)}}for(s=[],n=e.length,e[0]&&e[0][1]&&(w?(delete e[0][1]["suppress-author"],e[0][1]["author-only"]=!0):I&&(delete e[0][1]["author-only"],e[0][1]["suppress-author"]=!0)),this.opt.parallel.enable&&this.parallel.StartCitation(e),o=0;o<n;o+=1){this.tmp.cite_index=o,v=e[o][0],l=e[o][1],l=a.parseLocator.call(this,l),u=this.tmp.have_collapsed;var G=!1;if(o>0&&e[o-1][1]&&(G=!!e[o-1][1].locator),m={},this.tmp.shadow_numbers={},!this.tmp.just_looking&&this.opt.hasPlaceholderTerm){var X=this.output;this.output=new a.Output.Queue(this),this.output.adjust=new a.Output.Queue.adjust,a.getAmbiguousCite.call(this,v,null,!1,l),this.output=X}if(this.tmp.in_cite_predecessor=!1,o>0?a.getCite.call(this,v,l,""+e[o-1][0].id,!0):(this.tmp.term_predecessor=!1,a.getCite.call(this,v,l,null,!0)),this.tmp.cite_renders_content||(E={citationID:""+this.tmp.citation_id,index:this.tmp.citation_pos,noteIndex:this.tmp.citation_note_index,itemID:""+v.id,citationItems_pos:o,error_code:a.ERROR_NO_RENDERED_FORM},this.tmp.citation_errors.push(E)),m.splice_delimiter=a.getSpliceDelimiter.call(this,G,u,o),l&&l["author-only"]&&(this.tmp.suppress_decorations=!0),o>0){g=e[o-1][1];var P=g.suffix&&[";",".",","].indexOf(g.suffix.slice(-1))>-1,$=!g.suffix&&l.prefix&&[";",".",","].indexOf(l.prefix.slice(0,1))>-1;if(P||$){var V=m.splice_delimiter.indexOf(" ");V>-1&&!$?m.splice_delimiter=m.splice_delimiter.slice(V):m.splice_delimiter=""}}if(m.suppress_decorations=this.tmp.suppress_decorations,m.have_collapsed=this.tmp.have_collapsed,s.push(m),l["author-only"])break}c=0,d=this.output.queue.slice();var J="";t&&(J=a.checkSuffixSpacePrepend(this,t.properties.suffix));var ee=this.citation.opt.layout_suffix,Q=this.tmp.cite_locales[this.tmp.cite_locales.length-1];Q&&this.tmp.cite_affixes[this.tmp.area][Q]&&this.tmp.cite_affixes[this.tmp.area][Q].suffix&&(ee=this.tmp.cite_affixes[this.tmp.area][Q].suffix),a.TERMINAL_PUNCTUATION.slice(0,-1).indexOf(ee.slice(0,1))>-1&&(ee=ee.slice(0,1)),ee=this.output.checkNestedBrace.update(J+ee);for(var C=0,j=this.output.queue.length;C<j;C+=1)a.Output.Queue.purgeEmptyBlobs(this.output.queue[C]);if(!this.tmp.suppress_decorations&&this.output.queue.length&&(this.opt.development_extensions.apply_citation_wrapper&&this.sys.wrapCitationEntry&&!this.tmp.just_looking&&this.tmp.area==="citation"||(_||(this.output.queue[this.output.queue.length-1].strings.suffix=ee),this.output.queue[0].strings.prefix=D)),this.opt.development_extensions.clean_up_csl_flaws)for(var z=0,H=this.output.queue.length;z<H;z+=1)this.output.adjust.upward(this.output.queue[z]),this.output.adjust.leftward(this.output.queue[z]),this.output.adjust.downward(this.output.queue[z]),this.tmp.last_chr=this.output.adjust.fix(this.output.queue[z]);for(o=0,n=d.length;o<n;o+=1){var W=[];if(this.output.queue=[d[o]],this.tmp.suppress_decorations=s[o].suppress_decorations,this.tmp.splice_delimiter=s[o].splice_delimiter,d[o].parallel_delimiter&&(this.tmp.splice_delimiter=d[o].parallel_delimiter),this.tmp.have_collapsed=s[o].have_collapsed,h=this.output.string(this,this.output.queue),this.tmp.suppress_decorations=!1,typeof h=="string")return this.tmp.suppress_decorations=!1,h||(this.opt.development_extensions.throw_on_empty?a.error("Citation would render no content"):h="[NO_PRINTED_FORM]"),h;if(typeof h=="object"&&h.length===0&&!l["suppress-author"]){if(o===0){var ne="[CSL STYLE ERROR: reference with no printed form.]",Z=o===0?A(this.citation.opt.layout_prefix):"",le=o===d.length-1?A(this.citation.opt.layout_suffix):"";h.push(Z+ne+le)}else if(o===d.length-1){var ye=i[i.length-1];typeof ye=="string"?i[i.length-1]+=A(this.citation.opt.layout_suffix):typeof ye=="object"&&(ye.strings.suffix+=A(this.citation.opt.layout_suffix))}}if(W.length&&typeof h[0]=="string"){h.reverse();var te=h.pop();te&&te.slice(0,1)===","?W.push(te):typeof W.slice(-1)[0]=="string"&&W.slice(-1)[0].slice(-1)===","?W.push(" "+te):te&&W.push(A(this.tmp.splice_delimiter)+te)}else h.reverse(),p=h.pop(),typeof p<"u"&&(W.length&&typeof W[W.length-1]=="string"&&(W[W.length-1]+=p.successor_prefix),W.push(p));for(f=h.length,y=0;y<f;y+=1){if(b=h[y],typeof b=="string"){W.push(A(this.tmp.splice_delimiter)+b);continue}p=h.pop(),typeof p<"u"&&W.push(p)}W.length===0&&!e[o][1]["suppress-author"]&&(c+=1),W.length>1&&typeof W[0]!="string"&&(W=[this.output.renderBlobs(W)]),W.length&&(typeof W[0]=="string"?o>0&&(W[0]=A(this.tmp.splice_delimiter)+W[0]):o>0?W[0].splice_prefix=this.tmp.splice_delimiter:W[0].splice_prefix=""),i=i.concat(W)}if(r+=this.output.renderBlobs(i),r&&!this.tmp.suppress_decorations)for(n=this.citation.opt.layout_decorations.length,o=0;o<n;o+=1)m=this.citation.opt.layout_decorations[o],m[1]!=="normal"&&(!l||!l["author-only"])&&(r=this.fun.decorate[m[0]][m[1]](this,r));return this.tmp.suppress_decorations=!1,r||(this.opt.development_extensions.throw_on_empty?a.error("Citation would render no content"):r="[NO_PRINTED_FORM]"),r};a.getCite=function(e,t,r,i){var s,n,o=this.tmp.area;for(t&&t["author-only"]&&this.intext&&this.intext.tokens.length>0&&(this.tmp.area="intext"),this.tmp.cite_renders_content=!1,this.tmp.probably_rendered_something=!1,this.tmp.prevItemID=r,a.citeStart.call(this,e,t,i),s=0,this.tmp.name_node={},this.nameOutput=new a.NameOutput(this,e,t);s<this[this.tmp.area].tokens.length;)s=a.tokenExec.call(this,this[this.tmp.area].tokens[s],e,t);return a.citeEnd.call(this,e,t),!this.tmp.cite_renders_content&&!this.tmp.just_looking&&this.tmp.area==="bibliography"&&(n={index:this.tmp.bibliography_pos,itemID:""+e.id,error_code:a.ERROR_NO_RENDERED_FORM},this.tmp.bibliography_errors.push(n)),this.tmp.area=o,""+e.id};a.citeStart=function(e,t,r){if(this.tmp.lang_array=[],e.language){var i=e.language.match(/^([a-zA-Z]+).*/);i&&this.tmp.lang_array.push(i[1].toLowerCase())}if(this.tmp.lang_array.push(this.opt.lang),r||(this.tmp.shadow_numbers={}),this.tmp.disambiguate_count=0,this.tmp.disambiguate_maxMax=0,this.tmp.same_author_as_previous_cite=!1,this.tmp.suppress_decorations?this.tmp.subsequent_author_substitute_ok=!1:this.tmp.subsequent_author_substitute_ok=!0,this.tmp.lastchr="",this.tmp.area==="citation"&&this.citation.opt.collapse&&this.citation.opt.collapse.length?this.tmp.have_collapsed=!0:this.tmp.have_collapsed=!1,this.tmp.render_seen=!1,this.tmp.disambig_request&&!this.tmp.disambig_override?this.tmp.disambig_settings=this.tmp.disambig_request:this.registry.registry[e.id]&&!this.tmp.disambig_override?(this.tmp.disambig_request=this.registry.registry[e.id].disambig,this.tmp.disambig_settings=this.registry.registry[e.id].disambig):this.tmp.disambig_settings=new a.AmbigConfig,this.tmp.area!=="citation"){if(!this.registry.registry[e.id])this.tmp.disambig_restore=new a.AmbigConfig;else if(this.tmp.disambig_restore=a.cloneAmbigConfig(this.registry.registry[e.id].disambig),this.tmp.area==="bibliography"&&this.tmp.disambig_settings&&this.tmp.disambig_override&&(this.opt["disambiguate-add-names"]&&(this.tmp.disambig_settings.names=this.registry.registry[e.id].disambig.names.slice(),this.tmp.disambig_request&&(this.tmp.disambig_request.names=this.registry.registry[e.id].disambig.names.slice())),this.opt["disambiguate-add-givenname"])){this.tmp.disambig_request=this.tmp.disambig_settings,this.tmp.disambig_settings.givens=this.registry.registry[e.id].disambig.givens.slice(),this.tmp.disambig_request.givens=this.registry.registry[e.id].disambig.givens.slice();for(var s=0,n=this.tmp.disambig_settings.givens.length;s<n;s+=1)this.tmp.disambig_settings.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice();for(var s=0,n=this.tmp.disambig_request.givens.length;s<n;s+=1)this.tmp.disambig_request.givens[s]=this.registry.registry[e.id].disambig.givens[s].slice()}}this.tmp.names_used=[],this.tmp.nameset_counter=0,this.tmp.years_used=[],this.tmp.names_max.clear(),this.tmp.just_looking||(!t||t.parallel==="first"||!t.parallel)&&(this.tmp.abbrev_trimmer={QUASHES:{}}),this.tmp.splice_delimiter=this[this.tmp.area].opt.layout_delimiter,this.bibliography_sort.keys=[],this.citation_sort.keys=[],this.tmp.has_done_year_suffix=!1,this.tmp.last_cite_locale=!1,!this.tmp.just_looking&&t&&!t.position&&this.registry.registry[e.id]&&(this.tmp.disambig_restore=a.cloneAmbigConfig(this.registry.registry[e.id].disambig)),this.tmp.first_name_string=!1,this.tmp.authority_stop_last=0};a.citeEnd=function(e,t){if(this.tmp.disambig_restore&&this.registry.registry[e.id]){this.registry.registry[e.id].disambig.names=this.tmp.disambig_restore.names.slice(),this.registry.registry[e.id].disambig.givens=this.tmp.disambig_restore.givens.slice();for(var r=0,i=this.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.registry.registry[e.id].disambig.givens[r]=this.tmp.disambig_restore.givens[r].slice()}if(this.tmp.disambig_restore=!1,t&&t.suffix?this.tmp.last_suffix_used=t.suffix:this.tmp.last_suffix_used="",this.tmp.last_years_used=this.tmp.years_used.slice(),this.tmp.last_names_used=this.tmp.names_used.slice(),this.tmp.cut_var=!1,this.tmp.disambig_request=!1,this.tmp.cite_locales.push(this.tmp.last_cite_locale),this.tmp.issued_date&&this.tmp.renders_collection_number){for(var s=[],r=this.tmp.issued_date.list.length-1;r>this.tmp.issued_date.pos;r+=-1)s.push(this.tmp.issued_date.list.pop());for(this.tmp.issued_date.list.pop(),r=s.length-1;r>-1;r+=-1)this.tmp.issued_date.list.push(s.pop())}this.tmp.issued_date=!1,this.tmp.renders_collection_number=!1};a.Engine.prototype.makeBibliography=function(e){var t,r,i,s,n,o,l,u,m,c,h,p;if(t=!1,!e&&(this.bibliography.opt.exclude_types||this.bibliography.opt.exclude_with_fields)){if(e={exclude:[]},this.bibliography.opt.exclude_types)for(var d in this.bibliography.opt.exclude_types){var v=this.bibliography.opt.exclude_types[d];e.exclude.push({field:"type",value:v})}if(this.bibliography.opt.exclude_with_fields)for(var d in this.bibliography.opt.exclude_with_fields){var f=this.bibliography.opt.exclude_with_fields[d];e.exclude.push({field:f,value:!0})}}if(!this.bibliography.tokens.length)return!1;if(typeof e=="string"&&(this.opt.citation_number_slug=e,e=!1),t){for(o=this.bibliography.tokens.length,l=0;l<o;l+=1)u=this.bibliography.tokens[l],a.debug("bibtok: "+u.name);for(a.debug("---"),o=this.citation.tokens.length,l=0;l<o;l+=1)m=this.citation.tokens[l],a.debug("cittok: "+u.name);for(a.debug("---"),o=this.bibliography_sort.tokens.length,l=0;l<o;l+=1)c=this.bibliography_sort.tokens[l],a.debug("bibsorttok: "+u.name)}r=a.getBibliographyEntries.call(this,e),h=r[0],p=r[1];var y=r[2];for(i={maxoffset:0,entryspacing:this.bibliography.opt["entry-spacing"],linespacing:this.bibliography.opt["line-spacing"],"second-field-align":!1,entry_ids:h,bibliography_errors:this.tmp.bibliography_errors.slice(),done:y},this.bibliography.opt["second-field-align"]&&(i["second-field-align"]=this.bibliography.opt["second-field-align"]),s=0,o=this.registry.reflist.length,l=0;l<o;l+=1)n=this.registry.reflist[l],n.offset>i.maxoffset&&(i.maxoffset=n.offset);return this.bibliography.opt.hangingindent&&(i.hangingindent=this.bibliography.opt.hangingindent),i.bibstart=this.fun.decorate.bibstart,i.bibend=this.fun.decorate.bibend,this.opt.citation_number_slug=!1,[i,p]};a.getBibliographyEntries=function(e){var t,r,i,s,n,o,l,u,m,c,h,p,d,v,f,y,b,g,A,E,S,w,I;t=[],S=[],this.tmp.area="bibliography",this.tmp.root="bibliography",this.tmp.last_rendered_name=!1,this.tmp.bibliography_errors=[],this.tmp.bibliography_pos=0,e&&e.page_start&&e.page_length?r=this.registry.getSortedIds():r=this.refetchItems(this.registry.getSortedIds()),this.tmp.disambig_override=!0;function O(F,M){return F===M}function D(F,M){for(c=M.length,h=0;h<c;h+=1)if(O(F,M[h]))return!0;return!1}function _(F,M){return typeof F=="boolean"||!F?F?!!M:!M:typeof M=="string"?O(F,M):M?D(F,M):!1}g={};var x;if(e&&e.page_start&&e.page_length&&(x=0,e.page_start!==!0))for(f=0,y=r.length;f<y&&(g[r[f]]=!0,e.page_start!=r[f]);f+=1);var k=[],R={};for(this.tmp.container_item_count={},r=r.filter(F=>{var M=F;return F.legislation_id?R[F.legislation_id]?M=!1:R[F.legislation_id]=!0:F.container_id&&(this.tmp.container_item_count[F.container_id]||(this.tmp.container_item_count[F.container_id]=0),this.tmp.container_item_count[F.container_id]++,this.bibliography.opt.consolidate_containers.indexOf(F.type)>-1&&(R[F.container_id]?M=!1:R[F.container_id]=!0)),M}),this.tmp.container_item_pos={},f=0,y=r.length;f<y;f+=1){if(e&&e.page_start&&e.page_length){if(g[r[f]])continue;if(u=this.refetchItem(r[f]),x===e.page_length)break}else if(u=r[f],g[u.id])continue;if(e){if(i=!0,e.include){for(i=!1,w=0,I=e.include.length;w<I;w+=1)if(m=e.include[w],_(m.value,u[m.field])){i=!0;break}}else if(e.exclude){for(s=!1,w=0,I=e.exclude.length;w<I;w+=1)if(m=e.exclude[w],_(m.value,u[m.field])){s=!0;break}s&&(i=!1)}else if(e.select){for(i=!1,n=!0,w=0,I=e.select.length;w<I;w+=1)m=e.select[w],_(m.value,u[m.field])||(n=!1);n&&(i=!0)}if(e.quash){for(n=!0,w=0,I=e.quash.length;w<I;w+=1)m=e.quash[w],_(m.value,u[m.field])||(n=!1);n&&(i=!1)}if(!i)continue}if(v&&a.debug("BIB: "+u.id),u.container_id&&(this.tmp.container_item_pos[u.container_id]||(this.tmp.container_item_pos[u.container_id]=0),this.tmp.container_item_pos[u.container_id]++),o=new a.Token("group",a.START),o.decorations=[["@bibliography","entry"]].concat(this.bibliography.opt.layout_decorations),this.output.startTag("bib_entry",o),u.system_id&&this.sys.embedBibliographyEntry?this.output.current.value().item_id=u.system_id:this.output.current.value().system_id=u.id,d=[],this.registry.registry[u.id].master&&!(e&&e.page_start&&e.page_length)){A=[[u,{id:u.id}]],b=this.registry.registry[u.id].siblings;for(var w=0,I=b.length;w<I;w++)A.push([this.refetchItem(b[w]),{id:b[w]}]);for(this.parallel.StartCitation(A),this.registry.registry[u.id].parallel_delimiter_override?this.output.queue[0].strings.delimiter=this.registry.registry[u.id].parallel_delimiter_override:this.output.queue[0].strings.delimiter=", ",this.tmp.term_predecessor=!1,this.tmp.cite_index=0,w=0,I=A.length;w<I;w+=1)w<A.length-1?this.tmp.parallel_and_not_last=!0:delete this.tmp.parallel_and_not_last,d.push(""+a.getCite.call(this,A[w][0],A[w][1])),this.tmp.cite_index++,g[A[w][0].id]=!0}else this.registry.registry[u.id].siblings||(this.tmp.term_predecessor=!1,this.tmp.cite_index=0,d.push(""+a.getCite.call(this,u)),e&&e.page_start&&e.page_length&&(x+=1));for(S.push(""),this.tmp.bibliography_pos+=1,k.push(d),this.output.endTag("bib_entry"),this.output.queue[0].blobs.length&&this.output.queue[0].blobs[0].blobs.length&&(this.output.queue[0].blobs[0].blobs[0].strings?p=this.output.queue[0].blobs[0].blobs:p=this.output.queue[0].blobs,p[0].strings.prefix=this.bibliography.opt.layout_prefix+p[0].strings.prefix),w=0,I=this.output.queue.length;w<I;w+=1)a.Output.Queue.purgeEmptyBlobs(this.output.queue[w]);for(w=0,I=this.output.queue.length;w<I;w+=1)this.output.adjust.upward(this.output.queue[w]),this.output.adjust.leftward(this.output.queue[w]),this.output.adjust.downward(this.output.queue[w],!0),this.output.adjust.fix(this.output.queue[w]);if(l=this.output.string(this,this.output.queue)[0],!l&&this.opt.update_mode===a.NUMERIC){var N=t.length+1+". [CSL STYLE ERROR: reference with no printed form.]";l=a.Output.Formats[this.opt.mode]["@bibliography/entry"](this,N)}l&&t.push(l)}var T=!1;if(e&&e.page_start&&e.page_length){var C=r.slice(-1)[0],j=k.slice(-1)[0];(!C||!j||C==j)&&(T=!0)}return this.tmp.disambig_override=!1,[k,t,T]};a.Engine.prototype.setCitationId=function(e,t){var r,i,s;if(r=!1,!e.citationID||t){for(i=Math.floor(Math.random()*1e14);;){if(s=0,this.registry.citationreg.citationById[i])!s&&i<5e13?s=1:s=-1;else{e.citationID="a"+i.toString(32);break}s===1?i+=1:i+=-1}r=""+i}return this.registry.citationreg.citationById[e.citationID]=e,r};a.Engine.prototype.rebuildProcessorState=function(e,t,r){e||(e=[]),t||(t="html");for(var i={},s=[],n=0,o=e.length;n<o;n+=1)for(var l=0,u=e[n].citationItems.length;l<u;l+=1){var m=""+e[n].citationItems[l].id;i[m]||s.push(m),i[m]=!0}this.updateItems(s);var c=[],h=[],p=[],d=this.opt.mode;this.setOutputFormat(t);for(var n=0,o=e.length;n<o;n+=1){var v=this.processCitationCluster(e[n],c,h,a.ASSUME_ALL_ITEMS_REGISTERED);c.push([e[n].citationID,e[n].properties.noteIndex]);for(var l=0,u=v[1].length;l<u;l+=1){var f=v[1][l][0];p[f]=[c[f][0],c[f][1],v[1][l][1]]}}return this.updateUncitedItems(r),this.setOutputFormat(d),p};a.Engine.prototype.restoreProcessorState=function(e){var t,r,i,s,n,o,l,u,m,c;u=[],m=[],e||(e=[]);var h=[],p={};for(t=0,r=e.length;t<r;t+=1)p[e[t].citationID]&&this.setCitationId(e[t],!0),p[e[t].citationID]=!0,h.push(e[t].properties.index);var d=e.slice();for(d.sort(function(f,y){return f.properties.index<y.properties.index?-1:f.properties.index>y.properties.index?1:0}),t=0,r=d.length;t<r;t+=1)d[t].properties.index=t;for(t=0,r=d.length;t<r;t+=1){for(c=[],i=0,s=d[t].citationItems.length;i<s;i+=1)n=d[t].citationItems[i],typeof n.sortkeys>"u"&&(n.sortkeys=[]),o=this.retrieveItem(""+n.id),l=[o,n],c.push(l),d[t].citationItems[i].item=o,m.push(""+n.id);d[t].properties.unsorted||c.sort(this.citation.srt.compareCompositeKeys),d[t].sortedItems=c,this.registry.citationreg.citationById[d[t].citationID]=d[t]}for(this.updateItems(m),t=0,r=e.length;t<r;t+=1)u.push([""+e[t].citationID,e[t].properties.noteIndex]);var v=[];return e&&e.length?v=this.processCitationCluster(e[0],[],u.slice(1)):(this.registry=new a.Registry(this),this.tmp=new a.Engine.Tmp,this.disambiguate=new a.Disambiguation(this)),v};a.Engine.prototype.updateItems=function(e,t,r,i){var s=!1,n=this.tmp.area,o=this.tmp.root,l=this.tmp.extension;if(this.bibliography_sort.tokens.length===0&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",i||(this.tmp.loadedItemIDs={}),s&&a.debug("--> init <--"),this.registry.init(e),r)for(var u in this.registry.ambigcites)this.registry.ambigsTouched[u]=!0;return this.registry.dodeletes(this.registry.myhash),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=l,this.tmp.area=n,this.tmp.root=o,this.registry.getSortedIds()};a.Engine.prototype.updateUncitedItems=function(e,t){var r,i=this.tmp.area,s=this.tmp.root,n=this.tmp.extension;if(this.bibliography_sort.tokens.length===0&&(t=!0),this.tmp.area="citation",this.tmp.root="citation",this.tmp.extension="",this.tmp.loadedItemIDs={},e||(e=[]),typeof e=="object"){if(typeof e.length>"u"){r=e,e=[];for(var o in r)e.push(o)}else if(typeof e.length=="number"){r={};for(var l=0,u=e.length;l<u;l+=1)r[e[l]]=!0}}return this.registry.init(e,!0),this.registry.dopurge(r),this.registry.doinserts(this.registry.mylist),this.registry.dorefreshes(),this.registry.rebuildlist(t),this.registry.setsortkeys(),this.registry.setdisambigs(),this.registry.sorttokens(t),this.registry.renumber(),this.tmp.extension=n,this.tmp.area=i,this.tmp.root=s,this.registry.getSortedIds()};a.localeResolve=function(e,t){var r,i;return t||(t="en-US"),e||(e=t),r={},i=e.split(/[\-_]/),r.base=a.LANG_BASES[i[0]],typeof r.base>"u"?{base:t,best:e,bare:i[0]}:(i.length===1&&(r.generic=!0),i.length===1||i[1]==="x"?r.best=r.base.replace("_","-"):r.best=i.slice(0,2).join("-"),r.base=r.base.replace("_","-"),r.bare=i[0],r)};a.Engine.prototype.localeConfigure=function(e,t){var r;if(!(t&&this.locale[e.best])&&(e.best==="en-US"?(r=a.setupXml(this.sys.retrieveLocale("en-US")),this.localeSet(r,"en-US",e.best)):e.best!=="en-US"&&(e.base!==e.best&&(r=a.setupXml(this.sys.retrieveLocale(e.base)),this.localeSet(r,e.base,e.best)),r=a.setupXml(this.sys.retrieveLocale(e.best)),this.localeSet(r,e.best,e.best)),this.localeSet(this.cslXml,"",e.best),this.localeSet(this.cslXml,e.bare,e.best),e.base!==e.best&&this.localeSet(this.cslXml,e.base,e.best),this.localeSet(this.cslXml,e.best,e.best),typeof this.locale[e.best].terms["page-range-delimiter"]>"u"&&(["fr","pt"].indexOf(e.best.slice(0,2).toLowerCase())>-1?this.locale[e.best].terms["page-range-delimiter"]="-":this.locale[e.best].terms["page-range-delimiter"]="\u2013"),typeof this.locale[e.best].terms["year-range-delimiter"]>"u"&&(this.locale[e.best].terms["year-range-delimiter"]="\u2013"),typeof this.locale[e.best].terms["citation-range-delimiter"]>"u"&&(this.locale[e.best].terms["citation-range-delimiter"]="\u2013"),this.opt.development_extensions.normalize_lang_keys_to_lowercase)){for(var i=["default-locale","locale-sort","locale-translit","locale-translat"],s=0,n=i.length;s<n;s+=1)for(var o=0,l=this.opt[i[s]].length;o<l;o+=1)this.opt[i[s]][o]=this.opt[i[s]][o].toLowerCase();this.opt.lang=this.opt.lang.toLowerCase()}};a.Engine.prototype.localeSet=function(e,t,r){var i,s,n,o,l,u,m,c,h,p,d,v,f,y,b,g;if(t=t.replace("_","-"),r=r.replace("_","-"),this.opt.development_extensions.normalize_lang_keys_to_lowercase&&(t=t.toLowerCase(),r=r.toLowerCase()),this.locale[r]||(this.locale[r]={},this.locale[r].terms={},this.locale[r].opts={},this.locale[r].opts["skip-words"]=a.SKIP_WORDS,this.locale[r].opts["leading-noise-words"]||(this.locale[r].opts["leading-noise-words"]=[]),this.locale[r].dates={},this.locale[r].ord={"1.0.1":!1,keys:{}},this.locale[r]["noun-genders"]={}),s=e.makeXml(),e.nodeNameIs(e.dataObj,"locale"))s=e.dataObj;else{n=e.getNodesByName(e.dataObj,"locale");var A=!1;for(l=0,v=e.numberofnodes(n);l<v;l+=1)if(i=n[l],!A&&e.getAttributeValue(i,"lang","xml")===t)s=i,A=!0;else{var E=e.getAttributeValue(i,"lang","xml"),S=e.getNodesByName(i,"style-options");if(E&&S&&S.length){var w=e.getAttributeValue(S[0],"jurisdiction-preference");w&&(this.locale[E]||(this.locale[E]={opts:{}}),this.locale[E].opts["jurisdiction-preference"]=w.split(/\s+/))}}}for(n=e.getNodesByName(s,"type"),b=0,g=e.numberofnodes(n);b<g;b+=1){var I=n[b],O=e.getAttributeValue(I,"name"),D=e.getAttributeValue(I,"gender");this.opt.gender[O]=D}var _=e.getNodesByName(s,"term","ordinal").length;if(_){for(var x in this.locale[r].ord.keys)delete this.locale[r].terms[x];this.locale[r].ord={"1.0.1":!1,keys:{}}}n=e.getNodesByName(s,"term");var k={"last-digit":{},"last-two-digits":{},"whole-number":{}},R=!1,N={};for(l=0,v=e.numberofnodes(n);l<v;l+=1){if(u=n[l],c=e.getAttributeValue(u,"name"),c==="sub verbo"&&(c="sub-verbo"),c.slice(0,7)==="ordinal"){if(c==="ordinal")R=!0;else{var T=e.getAttributeValue(u,"match"),C=c.slice(8),f=e.getAttributeValue(u,"gender-form");f||(f="neuter"),T||(T="last-two-digits",C.slice(0,1)==="0"&&(T="last-digit")),C.slice(0,1)==="0"&&(C=C.slice(1)),k[T][C]||(k[T][C]={}),k[T][C][f]=c}this.locale[r].ord.keys[c]=!0}typeof this.locale[r].terms[c]>"u"&&(this.locale[r].terms[c]={}),m="long",f=!1,e.getAttributeValue(u,"form")&&(m=e.getAttributeValue(u,"form")),e.getAttributeValue(u,"gender-form")&&(f=e.getAttributeValue(u,"gender-form")),e.getAttributeValue(u,"gender")&&(this.locale[r]["noun-genders"][c]=e.getAttributeValue(u,"gender")),f?(this.locale[r].terms[c][f]={},this.locale[r].terms[c][f][m]=[],y=this.locale[r].terms[c][f],N[c]=!0):(this.locale[r].terms[c][m]=[],y=this.locale[r].terms[c]),e.numberofnodes(e.getNodesByName(u,"multiple"))?(y[m][0]=e.getNodeValue(u,"single"),y[m][0].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0),y[m][1]=e.getNodeValue(u,"multiple"),y[m][1].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0)):(y[m]=e.getNodeValue(u),y[m].indexOf("%s")>-1&&(this.opt.hasPlaceholderTerm=!0))}if(this.locale[r].terms.supplement||(this.locale[r].terms.supplement={}),this.locale[r].terms.supplement.long||(this.locale[r].terms.supplement.long=["supplement","supplements"]),R){for(var j in N){var F={},M=0;for(var U in this.locale[r].terms[j])["masculine","feminine"].indexOf(U)>-1?F[U]=this.locale[r].terms[j][U]:M+=1;if(!M){if(F.feminine)for(var U in F.feminine)this.locale[r].terms[j][U]=F.feminine[U];else if(F.masculine)for(var U in F.masculine)this.locale[r].terms[j][U]=F.masculine[U]}}this.locale[r].ord["1.0.1"]=k}for(c in this.locale[r].terms)for(b=0,g=2;b<g;b+=1)if(f=a.GENDERS[b],this.locale[r].terms[c][f])for(m in this.locale[r].terms[c])this.locale[r].terms[c][f][m]||(this.locale[r].terms[c][f][m]=this.locale[r].terms[c][m]);for(n=e.getNodesByName(s,"style-options"),l=0,v=e.numberofnodes(n);l<v;l+=1){h=n[l],o=e.attributes(h);for(d in o)if(o.hasOwnProperty(d)){if(d==="@punctuation-in-quote"||d==="@limit-day-ordinals-to-day-1")o[d]==="true"?this.locale[r].opts[d.slice(1)]=!0:this.locale[r].opts[d.slice(1)]=!1;else if(d==="@jurisdiction-preference"){var B=o[d].split(/\s+/);this.locale[r].opts[d.slice(1)]=B}else if(d==="@skip-words"){var L=o[d].split(/\s*,\s*/);this.locale[r].opts[d.slice(1)]=L}else if(d==="@leading-noise-words"){var z=o[d].split(/\s*,\s*/);this.locale[r].opts["leading-noise-words"]=z}else if(d==="@name-as-sort-order"){this.locale[r].opts["name-as-sort-order"]={};for(var H=o[d].split(/\s+/),b=0,g=H.length;b<g;b+=1)this.locale[r].opts["name-as-sort-order"][H[b]]=!0}else if(d==="@name-as-reverse-order"){this.locale[r].opts["name-as-reverse-order"]={};for(var H=o[d].split(/\s+/),b=0,g=H.length;b<g;b+=1)this.locale[r].opts["name-as-reverse-order"][H[b]]=!0}else if(d==="@name-never-short"){this.locale[r].opts["name-never-short"]={};for(var H=o[d].split(/\s+/),b=0,g=H.length;b<g;b+=1)this.locale[r].opts["name-never-short"][H[b]]=!0}}}for(n=e.getNodesByName(s,"date"),l=0,v=e.numberofnodes(n);l<v;l+=1){var p=n[l];this.locale[r].dates[e.getAttributeValue(p,"form")]=p}a.SET_COURT_CLASSES(this,r,e,s)};a.getLocaleNames=function(e,t){var r=a.setupXml(e);function i(h,p){var d=["base","best"];if(p)for(var v=a.localeResolve(p),f=0,y=d.length;f<y;f++)v[d[f]]&&h.indexOf(v[d[f]])===-1&&h.push(v[d[f]])}var s=["en-US"];function n(h){for(var p=r.getNodesByName(r.dataObj,h),d=0,v=p.length;d<v;d++){var f=r.getAttributeValue(p[d],"locale");if(f){f=f.split(/ +/);for(var y=0,b=f.length;y<b;y++)this.extendLocaleList(s,f[y])}}}i(s,t);var o=r.getNodesByName(r.dataObj,"style")[0],l=r.getAttributeValue(o,"default-locale");i(s,l);for(var u=["layout","if","else-if","condition"],m=0,c=u.length;m<c;m++)n(r,s,u[m]);return s};a.Node={};a.Node.bibliography={build:function(e,t){if(this.tokentype===a.START){e.build.area="bibliography",e.build.root="bibliography",e.build.extension="";var r=function(i){i.tmp.area="bibliography",i.tmp.root="bibliography",i.tmp.extension=""};this.execs.push(r)}t.push(this)}};a.Node.choose={build:function(e,t){var r;this.tokentype===a.START&&(r=function(i){i.tmp.jump.push(void 0,a.LITERAL)}),this.tokentype===a.END&&(r=function(i){i.tmp.jump.pop()}),this.execs.push(r),t.push(this)},configure:function(e,t){this.tokentype===a.END?(e.configure.fail.push(t),e.configure.succeed.push(t)):(e.configure.fail.pop(),e.configure.succeed.pop())}};a.Node.citation={build:function(e,t){if(this.tokentype===a.START){e.build.area="citation",e.build.root="citation",e.build.extension="";var r=function(s){s.tmp.area="citation",s.tmp.root="citation",s.tmp.extension=""};this.execs.push(r)}if(this.tokentype===a.END){if(e.opt.grouped_sort=e.opt.xclass==="in-text"&&e.citation.opt.collapse&&e.citation.opt.collapse.length||e.citation.opt.cite_group_delimiter&&e.citation.opt.cite_group_delimiter.length&&e.opt.update_mode!==a.POSITION&&e.opt.update_mode!==a.NUMERIC,e.opt.grouped_sort&&e.citation_sort.opt.sort_directions.length){var i=e.citation_sort.opt.sort_directions[0].slice();e.citation_sort.opt.sort_directions=[i].concat(e.citation_sort.opt.sort_directions)}e.citation.srt=new a.Registry.Comparifier(e,"citation_sort")}t.push(this)}};a.Node["#comment"]={build:function(){}};a.Node.date={build:function(e,t){var r,i,s,n,o,l,u,m,c,h;(this.tokentype===a.START||this.tokentype===a.SINGLETON)&&(e.dateput.string(e,e.dateput.queue),e.tmp.date_token=a.Util.cloneToken(this),e.tmp.date_token.strings.prefix="",e.tmp.date_token.strings.suffix="",e.dateput.openLevel(this),e.build.date_parts=[],e.build.date_variables=this.variables,e.build.extension||a.Util.substituteStart.call(this,e,t),e.build.extension?r=a.dateMacroAsSortKey:r=function(p,d,v){var f;if(p.tmp.element_rendered_ok=!1,p.tmp.donesies=[],p.tmp.dateparts=[],f=[],this.variables.length&&!(p.tmp.just_looking&&this.variables[0]==="accessed")){for(i=d[this.variables[0]],typeof i>"u"&&(i={"date-parts":[[0]]},p.opt.development_extensions.locator_date_and_revision&&v&&this.variables[0]==="locator-date"&&v["locator-date"]&&(i=v["locator-date"])),p.tmp.date_object=i,s=this.dateparts.length,n=0;n<s;n+=1)o=this.dateparts[n],(typeof p.tmp.date_object[o+"_end"]<"u"||o==="month"&&typeof p.tmp.date_object.season_end<"u")&&f.push(o);for(l=[],u=["year","month","day"],s=u.length,n=0;n<s;n+=1)f.indexOf(u[n])>-1&&l.push(u[n]);for(f=l.slice(),m=2,s=f.length,n=0;n<s;n+=1)if(o=f[n],c=p.tmp.date_object[o],h=p.tmp.date_object[o+"_end"],c!==h){m=n;break}p.tmp.date_collapse_at=f.slice(m)}else p.tmp.date_object=!1},this.execs.push(r),r=function(p,d){if(d[this.variables[0]]&&(p.output.startTag("date",this),this.variables[0]==="issued"&&(d.type==="legal_case"||d.type==="legislation")&&p.opt.disable_duplicate_year_suppression.indexOf(d.country)===-1&&!p.tmp.extension&&""+d["collection-number"]==""+p.tmp.date_object.year&&this.dateparts.length===1&&this.dateparts[0]==="year")){for(var v in p.tmp.date_object)if(p.tmp.date_object.hasOwnProperty(v)&&v.slice(0,4)==="year"){p.tmp.issued_date={};var f=p.output.current.mystack.slice(-2)[0].blobs;p.tmp.issued_date.list=f,p.tmp.issued_date.pos=f.length-1}}},this.execs.push(r)),!e.build.extension&&(this.tokentype===a.END||this.tokentype===a.SINGLETON)&&(r=function(p,d){d[this.variables[0]]&&p.output.endTag()},this.execs.push(r)),t.push(this),(this.tokentype===a.END||this.tokentype===a.SINGLETON)&&(e.build.extension||a.Util.substituteEnd.call(this,e,t))}};a.Node["date-part"]={build:function(e,t){var r,i,s,n,o,l,u,m,c,h,p,d,v,f,y,b,g,A,E,S,w,I,O;this.strings.form||(this.strings.form="long"),e.build.date_parts.push(this.strings.name);var D=e.build.date_variables[0];function _(x,k,R){if(!R)return R;if(R=""+a.Util.Dates[this.strings.name][x](e,R,k,this.default_locale),this.strings.name==="month"){if(e.tmp.strip_periods)R=R.replace(/\./g,"");else for(var N=0,T=this.decorations.length;N<T;N+=1)if(this.decorations[N][0]==="@strip-periods"&&this.decorations[N][1]==="true"){R=R.replace(/\./g,"");break}}return R}r=function(x,k){if(x.tmp.date_object)x.tmp.probably_rendered_something=!0;else return;var R="";if(n=!0,o="",l="",x.tmp.donesies.push(this.strings.name),x.tmp.date_object.literal&&this.strings.name==="year"&&(R=x.tmp.date_object.literal,x.output.append(x.tmp.date_object.literal,this)),x.tmp.date_object&&(o=x.tmp.date_object[this.strings.name],l=x.tmp.date_object[this.strings.name+"_end"]),this.strings.name==="year"&&o===0&&!x.tmp.suppress_decorations&&(o=!1),u=!x.tmp.suppress_decorations,m=x.tmp.have_collapsed,c=x[x.tmp.area].opt.collapse==="year-suffix"||x[x.tmp.area].opt.collapse==="year-suffix-ranged",h=x.opt["disambiguate-add-year-suffix"],u&&h&&c&&(x.tmp.years_used.push(o),p=x.tmp.last_years_used.length>=x.tmp.years_used.length,p&&m&&x.tmp.last_years_used[x.tmp.years_used.length-1]===o&&(o=!1)),typeof o<"u"){d=!1,v=!1,f=!1,y=!1,this.strings.name==="year"&&(parseInt(o,10)<500&&parseInt(o,10)>0&&(v=x.getTerm("ad")),parseInt(o,10)<0&&(d=x.getTerm("bc"),o=parseInt(o,10)*-1),l&&(parseInt(l,10)<500&&parseInt(l,10)>0&&(y=x.getTerm("ad")),parseInt(l,10)<0&&(f=x.getTerm("bc"),l=parseInt(l,10)*-1)));for(var N=""+x.tmp.date_object.month;N.length<2;)N="0"+N;N="month-"+N;var T=x.locale[x.opt.lang]["noun-genders"][N];if(this.strings.form){var C=this.strings.form,j=this.strings.form;this.strings.name==="day"&&C==="ordinal"&&x.locale[x.opt.lang].opts["limit-day-ordinals-to-day-1"]&&(o!=1&&(C="numeric"),l!=1&&(j="numeric")),o=_.call(this,C,T,o),l=_.call(this,j,T,l)}if(x.output.openLevel("empty"),x.tmp.date_collapse_at.length){for(b=!0,s=x.tmp.date_collapse_at.length,i=0;i<s;i+=1)if(I=x.tmp.date_collapse_at[i],x.tmp.donesies.indexOf(I)===-1){b=!1;break}if(b){if(""+l!="0"){if(x.dateput.queue.length===0&&(n=!0),x.opt["year-range-format"]&&x.opt["year-range-format"]!=="expanded"&&!x.tmp.date_object.day&&!x.tmp.date_object.month&&!x.tmp.date_object.season&&this.strings.name==="year"&&o&&l){l=x.fun.year_mangler(o+"-"+l,!0);var F=x.getTerm("year-range-delimiter");l=l.slice(l.indexOf(F)+1)}R=l,x.dateput.append(l,this),n&&(O=x.dateput.current.value().blobs[0],O&&(O.strings.prefix=""))}R=o,x.output.append(o,this),g=x.output.current.value(),O=g.blobs[g.blobs.length-1],O&&(O.strings.suffix=""),this.strings["range-delimiter"]?x.output.append(this.strings["range-delimiter"]):x.output.append(x.getTerm("year-range-delimiter"),"empty"),x.dateput.closeLevel(),A=x.dateput.current.value(),g.blobs=g.blobs.concat(A),x.dateput.string(x,x.dateput.queue),x.dateput.openLevel(x.tmp.date_token),x.tmp.date_collapse_at=[]}else R=o,x.output.append(o,this),x.tmp.date_collapse_at.indexOf(this.strings.name)>-1&&""+l!="0"&&(x.dateput.queue.length===0&&(n=!0),x.dateput.openLevel("empty"),R=l,x.dateput.append(l,this),n&&(O=x.dateput.current.value().blobs[0],O&&(O.strings.prefix="")),d&&(R=d,x.dateput.append(d)),v&&(R=v,x.dateput.append(v)),x.dateput.closeLevel())}else R=o,x.output.append(o,this);d&&(R=d,x.output.append(d)),v&&(R=v,x.output.append(v)),x.output.closeLevel()}else this.strings.name==="month"&&x.tmp.date_object.season&&(o=""+x.tmp.date_object.season,o&&o.match(/^[1-4]$/)?(x.tmp.group_context.tip.variable_success=!0,R="winter",x.output.append(x.getTerm("season-0"+o),this)):o&&(R=o,x.output.append(o,this)));x.tmp.value=[],k[D]&&(o||x.tmp.have_collapsed)&&!x.opt.has_year_suffix&&this.strings.name==="year"&&!x.tmp.just_looking&&x.registry.registry[k.id]&&x.registry.registry[k.id].disambig.year_suffix!==!1&&!x.tmp.has_done_year_suffix&&(x.tmp.has_done_year_suffix=!0,R="x",S=parseInt(x.registry.registry[k.id].disambig.year_suffix,10),E=new a.NumericBlob(x,!1,S,this,k.id),this.successor_prefix=x[x.build.area].opt.layout_delimiter,this.splice_prefix=x[x.build.area].opt.layout_delimiter,w=new a.Util.Suffixator(a.SUFFIX_CHARS),E.setFormatter(w),x[x.tmp.area].opt.collapse==="year-suffix-ranged"&&(E.range_prefix=x.getTerm("citation-range-delimiter")),x[x.tmp.area].opt.cite_group_delimiter?E.successor_prefix=x[x.tmp.area].opt.cite_group_delimiter:x[x.tmp.area].opt["year-suffix-delimiter"]?E.successor_prefix=x[x.tmp.area].opt["year-suffix-delimiter"]:E.successor_prefix=x[x.tmp.area].opt.layout_delimiter,E.UGLY_DELIMITER_SUPPRESS_HACK=!0,x.output.append(E,"literal")),R&&!x.tmp.group_context.tip.condition&&(x.tmp.just_did_number=R.match(/[0-9]$/),x.output.current.tip.strings.suffix&&(x.tmp.just_did_number=!1))},this.execs.push(r),t.push(this)}};a.Node["else-if"]={build:function(e,t){a.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){a.Conditions.Configure.call(this,e,t)}};a.Node.else={build:function(e,t){t.push(this)},configure:function(e,t){this.tokentype===a.START&&(e.configure.fail[e.configure.fail.length-1]=t)}};a.Node["et-al"]={build:function(e,t){if(e.build.area==="citation"||e.build.area==="bibliography"){var r=function(i){i.tmp.etal_node=this,typeof this.strings.term=="string"&&(i.tmp.etal_term=this.strings.term)};this.execs.push(r)}t.push(this)}};a.Node.group={build:function(e,t,r){var i,s;if(this.realGroup=r,this.tokentype===a.START&&(a.Util.substituteStart.call(this,e,t),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()+1),this.juris||t.push(this),i=function(p){if(p.output.startTag("group",this),this.strings.label_form_override&&(p.tmp.group_context.tip.label_form||(p.tmp.group_context.tip.label_form=this.strings.label_form_override)),this.strings.label_capitalize_if_first_override&&(p.tmp.group_context.tip.label_capitalize_if_first||(p.tmp.group_context.tip.label_capitalize_if_first=this.strings.label_capitalize_if_first_override)),this.realGroup){p.tmp.group_context.tip.condition&&a.UPDATE_GROUP_CONTEXT_CONDITION(p,this.strings.prefix,null,this);var d=!1,v=!1;p.tmp.group_context.mystack.length&&(p.output.current.value().parent=p.tmp.group_context.tip.output_tip);var f=p.tmp.group_context.tip.label_form;f||(f=this.strings.label_form_override);var y=p.tmp.group_context.tip.label_capitalize_if_first;y||(y=this.strings.label_capitalize_if_first),p.tmp.group_context.tip.condition?(d=p.tmp.group_context.tip.condition,v=p.tmp.group_context.tip.force_suppress):this.strings.reject?d={test:this.strings.reject,not:!0}:this.strings.require&&(d={test:this.strings.require,not:!1});var b={old_term_predecessor:p.tmp.term_predecessor,term_intended:!1,variable_attempt:!1,variable_success:!1,variable_success_parent:p.tmp.group_context.tip.variable_success,output_tip:p.output.current.tip,label_form:f,label_static:p.tmp.group_context.tip.label_static,label_capitalize_if_first:y,parallel_delimiter_override:this.strings.set_parallel_delimiter_override,parallel_delimiter_override_on_suppress:this.strings.set_parallel_delimiter_override_on_suppress,condition:d,force_suppress:v,done_vars:p.tmp.group_context.tip.done_vars.slice()};if(this.non_parallel){var g=p.tmp.group_context.tip.non_parallel;g||(g={}),Object.assign(g,this.non_parallel),b.non_parallel=g}if(this.parallel_first){var A=p.tmp.group_context.tip.parallel_first;A||(A={}),Object.assign(A,this.parallel_first),b.parallel_first=A}if(this.parallel_last){var E=p.tmp.group_context.tip.parallel_last;E||(E={}),Object.assign(E,this.parallel_last),b.parallel_last=E}if(p.tmp.abbrev_trimmer&&p.tmp.abbrev_trimmer.LAST_TO_FIRST&&b.parallel_last){b.parallel_first||(b.parallel_first={});for(var S in p.tmp.abbrev_trimmer.LAST_TO_FIRST)b.parallel_last[S]&&(b.parallel_first[S]=!0,delete b.parallel_last[S])}if(p.tmp.group_context.push(b),p.tmp.abbrev_trimmer&&this.parallel_last_to_first){p.tmp.abbrev_trimmer.LAST_TO_FIRST||(p.tmp.abbrev_trimmer.LAST_TO_FIRST={});for(var S in this.parallel_last_to_first)p.tmp.abbrev_trimmer.LAST_TO_FIRST[S]=!0}}},s=[],s.push(i),this.execs=s.concat(this.execs),this.strings["has-publisher-and-publisher-place"]&&(e.build["publisher-special"]=!0,this.strings["subgroup-delimiter"]&&(i=function(p,d){if(d.publisher&&d["publisher-place"]){var v=d.publisher.split(/;\s*/),f=d["publisher-place"].split(/;\s*/);v.length>1&&v.length===f.length&&(p.publisherOutput=new a.PublisherOutput(p,this),p.publisherOutput["publisher-list"]=v,p.publisherOutput["publisher-place-list"]=f)}},this.execs.push(i))),this.juris)){var n=new a.Token("choose",a.START);a.Node.choose.build.call(n,e,t);var o=new a.Token("if",a.START);i=function(p){return function(d,v){return a.INIT_JURISDICTION_MACROS(e,d,v,p)}}(this.juris),o.tests||(o.tests=[]),o.tests.push(i),o.test=e.fun.match.any(o,e,o.tests),t.push(o);var l=new a.Token("text",a.SINGLETON);i=function(p,d,v){var f=d;v&&v["best-jurisdiction"]&&this.juris==="juris-locator"&&(f=v);var y=0;if(p.juris[f["best-jurisdiction"]][this.juris])for(;y<p.juris[f["best-jurisdiction"]][this.juris].length;)y=a.tokenExec.call(p,p.juris[f["best-jurisdiction"]][this.juris][y],d,v)},l.juris=this.juris,l.execs.push(i),t.push(l);var u=new a.Token("if",a.END);a.Node.if.build.call(u,e,t);var m=new a.Token("else",a.START);a.Node.else.build.call(m,e,t)}if(this.tokentype===a.END&&(e.build["publisher-special"]&&(e.build["publisher-special"]=!1,i=function(p){p.publisherOutput&&(p.publisherOutput.render(),p.publisherOutput=!1)},this.execs.push(i)),i=function(p,d,v){if(p.tmp.group_context.tip.condition||p.output.current.tip.strings.suffix&&(p.tmp.just_did_number=!1),p.output.endTag(),this.realGroup){var f=p.tmp.group_context.pop();if(f.parallel_delimiter_override&&(p.tmp.group_context.tip.parallel_delimiter_override=f.parallel_delimiter_override,!p.tmp.just_looking&&p.registry.registry[d.id].master&&(p.registry.registry[d.id].parallel_delimiter_override=f.parallel_delimiter_override)),f.parallel_delimiter_override_on_suppress&&(p.tmp.group_context.tip.parallel_delimiter_override_on_suppress=f.parallel_delimiter_override_on_suppress),p.tmp.area==="bibliography_sort"){var y=f.done_vars.indexOf("citation-number");this.strings.sort_direction&&y>-1&&p.tmp.group_context.length()==1&&(this.strings.sort_direction===a.DESCENDING?p.bibliography_sort.opt.citation_number_sort_direction=a.DESCENDING:p.bibliography_sort.opt.citation_number_sort_direction=a.ASCENDING,f.done_vars=f.done_vars.slice(0,y).concat(f.done_vars.slice(y+1)))}if(f.condition&&(f.force_suppress=a.EVALUATE_GROUP_CONDITION(p,f)),p.tmp.group_context.tip.condition&&(p.tmp.group_context.tip.force_suppress=f.force_suppress),!f.force_suppress&&(f.variable_success||f.term_intended&&!f.variable_attempt)){this.isJurisLocatorLabel||(p.tmp.group_context.tip.variable_success=!0);var b=p.output.current.value().blobs,g=p.output.current.value().blobs.length-1;if(!p.tmp.just_looking&&(f.non_parallel||f.parallel_last||f.parallel_first||f.parallel_delimiter_override||f.parallel_delimiter_override_on_suppress)){var A=p.parallel.checkRepeats(f);if(A&&b&&b.pop(),p.tmp.cite_index>0&&(A||!f.parallel_first&&!f.parallel_last&&!f.non_parallel)){var E=p.tmp.suppress_repeats[p.tmp.cite_index-1];A&&f.parallel_delimiter_override_on_suppress&&(E.SIBLING||E.ORPHAN)?p.output.queue.slice(-1)[0].parallel_delimiter=f.parallel_delimiter_override_on_suppress:f.parallel_delimiter_override&&E.SIBLING&&(p.output.queue.slice(-1)[0].parallel_delimiter=f.parallel_delimiter_override)}}}else{if(p.tmp.term_predecessor=f.old_term_predecessor,p.tmp.group_context.tip.variable_attempt=f.variable_attempt,f.force_suppress&&!p.tmp.group_context.tip.condition&&(p.tmp.group_context.tip.variable_attempt=!0,p.tmp.group_context.tip.variable_success=f.variable_success_parent),f.force_suppress)for(var S=0,w=f.done_vars.length;S<w;S++)for(var I=f.done_vars[S],O=0,D=p.tmp.done_vars.length;O<D;O++)p.tmp.done_vars[O]===I&&(p.tmp.done_vars=p.tmp.done_vars.slice(0,O).concat(p.tmp.done_vars.slice(O+1)));p.output.current.value().blobs&&p.output.current.value().blobs.pop()}}},this.execs.push(i),this.juris)){var c=new a.Token("else",a.END);a.Node.else.build.call(c,e,t);var h=new a.Token("choose",a.END);a.Node.choose.build.call(h,e,t)}this.tokentype===a.END&&(this.juris||t.push(this),e.build.substitute_level.value()&&e.build.substitute_level.replace(e.build.substitute_level.value()-1),a.Util.substituteEnd.call(this,e,t))}};a.Node.if={build:function(e,t){a.Conditions.TopNode.call(this,e,t),t.push(this)},configure:function(e,t){a.Conditions.Configure.call(this,e,t)}};a.Node.conditions={build:function(e){this.tokentype===a.START&&e.tmp.conditions.addMatch(this.match),this.tokentype===a.END&&e.tmp.conditions.matchCombine()}};a.Node.condition={build:function(e){if(this.tokentype===a.SINGLETON){var t=e.fun.match[this.match](this,e,this.tests);e.tmp.conditions.addTest(t)}}};a.Conditions={};a.Conditions.TopNode=function(e){var t;(this.tokentype===a.START||this.tokentype===a.SINGLETON)&&(this.locale&&(e.opt.lang=this.locale),!this.tests||!this.tests.length?e.tmp.conditions=new a.Conditions.Engine(e,this):this.test=e.fun.match[this.match](this,e,this.tests),e.build.substitute_level.value()===0&&(t=function(r){r.tmp.condition_counter++},this.execs.push(t))),(this.tokentype===a.END||this.tokentype===a.SINGLETON)&&(e.build.substitute_level.value()===0&&(t=function(r){if(r.tmp.condition_counter--,r.tmp.condition_lang_counter_arr.length>0){var i=r.tmp.condition_lang_counter_arr.slice(-1)[0];i===r.tmp.condition_counter&&(r.opt.lang=r.tmp.condition_lang_val_arr.pop(),r.tmp.condition_lang_counter_arr.pop())}this.locale_default&&(r.output.current.value().old_locale=this.locale_default,r.output.closeLevel("empty"),r.opt.lang=this.locale_default)},this.execs.push(t)),t=function(r){var i=this[r.tmp.jump.value()];return i},this.execs.push(t),this.locale_default&&(e.opt.lang=this.locale_default))};a.Conditions.Configure=function(e,t){this.tokentype===a.START?(this.fail=e.configure.fail.slice(-1)[0],this.succeed=this.next,e.configure.fail[e.configure.fail.length-1]=t):this.tokentype===a.SINGLETON?(this.fail=this.next,this.succeed=e.configure.succeed.slice(-1)[0],e.configure.fail[e.configure.fail.length-1]=t):(this.succeed=e.configure.succeed.slice(-1)[0],this.fail=this.next)};a.Conditions.Engine=function(e,t){this.token=t,this.state=e};a.Conditions.Engine.prototype.addTest=function(e){this.token.tests||(this.token.tests=[]),this.token.tests.push(e)};a.Conditions.Engine.prototype.addMatch=function(e){this.token.match=e};a.Conditions.Engine.prototype.matchCombine=function(){this.token.test=this.state.fun.match[this.token.match](this.token,this.state,this.token.tests)};a.Node.info={build:function(e){this.tokentype===a.START?e.build.skip="info":e.build.skip=!1}};a.Node.institution={build:function(e,t){if([a.SINGLETON,a.START].indexOf(this.tokentype)>-1){var r=function(i){typeof this.strings.delimiter=="string"?i.tmp.institution_delimiter=this.strings.delimiter:i.tmp.institution_delimiter=i.tmp.name_delimiter,i.inheritOpt(this,"and")==="text"?this.and_term=i.getTerm("and","long",0):i.inheritOpt(this,"and")==="symbol"?i.opt.development_extensions.expect_and_symbol_form?this.and_term=i.getTerm("and","symbol",0):this.and_term="&":i.inheritOpt(this,"and")==="none"&&(this.and_term=i.tmp.institution_delimiter),typeof this.and_term>"u"&&i.tmp.and_term&&(this.and_term=i.tmp.and_term),a.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ",typeof i.tmp.institution_delimiter=="string"&&(this.and_prefix_multiple=i.tmp.institution_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),i.inheritOpt(this,"delimiter-precedes-last")==="always"?this.and_prefix_single=i.tmp.institution_delimiter:i.inheritOpt(this,"delimiter-precedes-last")==="never"&&this.and_prefix_multiple&&(this.and_prefix_multiple=" "),this.and={},typeof this.and_term<"u"?(i.output.append(this.and_term,"empty",!0),this.and.single=i.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,i.output.append(this.and_term,"empty",!0),this.and.multiple=i.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):this.strings.delimiter!=="undefined"&&(this.and.single=new a.Blob(i.tmp.institution_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new a.Blob(i.tmp.institution_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),i.nameOutput.institution=this};this.execs.push(r)}t.push(this)},configure:function(e){[a.SINGLETON,a.START].indexOf(this.tokentype)>-1&&(e.build.has_institution=!0)}};a.Node["institution-part"]={build:function(e,t){var r;this.strings.name==="long"?this.strings["if-short"]?r=function(i){i.nameOutput.institutionpart["long-with-short"]=this}:r=function(i){i.nameOutput.institutionpart.long=this}:this.strings.name==="short"&&(r=function(i){i.nameOutput.institutionpart.short=this}),this.execs.push(r),t.push(this)}};a.Node.key={build:function(e,t){t=e[e.build.root+"_sort"].tokens;var r,i=!1,s=new a.Token("key",a.START);e.tmp.root=e.build.root,s.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),s.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),s.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),r=function(g){g.tmp.done_vars=[]},s.execs.push(r),r=function(g){g.output.openLevel("empty")},s.execs.push(r);var n=[];if(this.strings.sort_direction===a.DESCENDING?(n.push(1),n.push(-1)):(n.push(-1),n.push(1)),e[e.build.area].opt.sort_directions.push(n),a.DATE_VARIABLES.indexOf(this.variables[0])>-1&&(e.build.date_key=!0),r=function(g){g.tmp.sort_key_flag=!0,g.inheritOpt(this,"et-al-min")&&(g.tmp["et-al-min"]=g.inheritOpt(this,"et-al-min")),g.inheritOpt(this,"et-al-use-first")&&(g.tmp["et-al-use-first"]=g.inheritOpt(this,"et-al-use-first")),typeof g.inheritOpt(this,"et-al-use-last")=="boolean"&&(g.tmp["et-al-use-last"]=g.inheritOpt(this,"et-al-use-last"))},s.execs.push(r),t.push(s),this.variables.length){var o=this.variables[0];if(a.NAME_VARIABLES.indexOf(o)>-1){var l=new a.Token("names",a.START);l.tokentype=a.START,l.variables=this.variables,a.Node.names.build.call(l,e,t);var u=new a.Token("name",a.SINGLETON);u.tokentype=a.SINGLETON,u.strings["name-as-sort-order"]="all",u.strings["sort-separator"]=" ",u.strings["et-al-use-last"]=e.inheritOpt(this,"et-al-use-last"),u.strings["et-al-min"]=e.inheritOpt(this,"et-al-min"),u.strings["et-al-use-first"]=e.inheritOpt(this,"et-al-use-first"),a.Node.name.build.call(u,e,t);var m=new a.Token("institution",a.SINGLETON);m.tokentype=a.SINGLETON,a.Node.institution.build.call(m,e,t);var c=new a.Token("names",a.END);c.tokentype=a.END,a.Node.names.build.call(c,e,t)}else{var h=new a.Token("text",a.SINGLETON);if(h.strings.sort_direction=this.strings.sort_direction,h.dateparts=this.dateparts,a.NUMERIC_VARIABLES.indexOf(o)>-1)o==="citation-number"?r=function(g,A){if(g.tmp.area==="bibliography_sort"&&(this.strings.sort_direction===a.DESCENDING?g.bibliography_sort.opt.citation_number_sort_direction=a.DESCENDING:g.bibliography_sort.opt.citation_number_sort_direction=a.ASCENDING),g.tmp.area==="citation_sort"&&g.bibliography_sort.tmp.citation_number_map)var E=g.bibliography_sort.tmp.citation_number_map[g.registry.registry[A.id].seq];else var E=g.registry.registry[A.id].seq;E&&(E=a.Util.padding(""+E)),g.output.append(E,this)}:r=function(g,A){var E=!1;E=A[o],E&&(E=a.Util.padding(E)),g.output.append(E,this)};else if(o==="citation-label")r=function(g,A){var E=g.getCitationLabel(A);g.output.append(E,this)};else if(a.DATE_VARIABLES.indexOf(o)>-1)r=a.dateAsSortKey,h.variables=this.variables;else if(o==="title"){var p="title",d=!1,v=!1,f=!0;r=e.transform.getOutputFunction(this.variables,p,d,v,f)}else o==="court-class"?r=function(g,A,E){a.INIT_JURISDICTION_MACROS(g,A,E,"juris-main");var S=a.GET_COURT_CLASS(g,A,!0);g.output.append(S,"empty")}:r=function(g,A){var E=A[o];g.output.append(E,"empty")};h.execs.push(r),t.push(h)}}else{var y=new a.Token("text",a.SINGLETON);y.strings.sort_direction=this.strings.sort_direction,y.postponed_macro=this.postponed_macro,a.expandMacro.call(e,y,t)}var b=new a.Token("key",a.END);r=function(g){var A=g.output.string(g,g.output.queue);g.sys.normalizeUnicode&&(A=g.sys.normalizeUnicode(A)),A=A?A.split(" ").join(g.opt.sort_sep)+g.opt.sort_sep:"",i&&a.debug("keystring: "+A+" "+typeof A),A===""&&(A=void 0),typeof A!="string"&&(A=void 0),g[g[g.tmp.area].root+"_sort"].keys.push(A),g.tmp.value=[]},b.execs.push(r),e.build.date_key&&(e.build.area==="citation"&&e.build.extension==="_sort"&&(e[e.build.area].opt.sort_directions.push([-1,1]),r=function(g,A){var E=g.registry.registry[A.id].disambig.year_suffix;E||(E=0);var S=a.Util.padding(""+E);g[g.tmp.area].keys.push(S)},b.execs.push(r)),e.build.date_key=!1),r=function(g){g.tmp["et-al-min"]=void 0,g.tmp["et-al-use-first"]=void 0,g.tmp["et-al-use-last"]=void 0,g.tmp.sort_key_flag=!1},b.execs.push(r),t.push(b)}};a.Node.label={build:function(e,t){if(this.strings.term){var r=function(l,u,m){var c=a.evaluateLabel(this,l,u,m);m&&this.strings.term==="locator"&&(m.section_form_override=this.strings.form),c&&(l.tmp.group_context.tip.term_intended=!0),a.UPDATE_GROUP_CONTEXT_CONDITION(l,c,null,this),c.indexOf("%s")===-1&&(this.strings.capitalize_if_first&&!l.tmp.term_predecessor&&!(l.opt.class==="in-text"&&l.tmp.area==="citation")&&(c=a.Output.Formatters["capitalize-first"](l,c)),l.output.append(c,this))};this.execs.push(r)}else{this.strings.form||(this.strings.form="long");for(var i=e.build.names_variables[e.build.names_variables.length-1],s=e.build.name_label[e.build.name_label.length-1],n=0,o=i.length;n<o;n+=1)s[i[n]]||(s[i[n]]={});if(e.build.name_flag)for(var n=0,o=i.length;n<o;n+=1)s[i[n]].after=this;else for(var n=0,o=i.length;n<o;n+=1)s[i[n]].before=this}t.push(this)}};a.Node.layout={build:function(e,t){var r,i,s,n;function o(){e.build.area==="bibliography"&&(s=new a.Token("text",a.SINGLETON),r=function(m){if(!m.tmp.parallel_and_not_last){var c;m.tmp.cite_affixes[m.tmp.area][m.tmp.last_cite_locale]?c=m.tmp.cite_affixes[m.tmp.area][m.tmp.last_cite_locale].suffix:c=m.bibliography.opt.layout_suffix;var h=m.output.current.value();m.opt.using_display?h.blobs[h.blobs.length-1].strings.suffix=c:h.strings.suffix=c}m.bibliography.opt["second-field-align"]&&m.output.endTag("bib_other")},s.execs.push(r),t.push(s))}this.tokentype===a.START&&(this.locale_raw?e.build.current_default_locale=this.locale_raw:e.build.current_default_locale=e.opt["default-locale"],r=function(m,c,h){if(m.opt.development_extensions.apply_citation_wrapper&&m.sys.wrapCitationEntry&&!m.tmp.just_looking&&c.system_id&&m.tmp.area==="citation"){var p=new a.Token("group",a.START);p.decorations=[["@cite","entry"]],m.output.startTag("cite_entry",p),m.output.current.value().item_id=c.system_id,h&&(m.output.current.value().locator_txt=h.locator_txt,m.output.current.value().suffix_txt=h.suffix_txt)}},this.execs.push(r)),this.tokentype===a.START&&!e.tmp.cite_affixes[e.build.area]&&(r=function(m,c,h){if(m.tmp.done_vars=[],h&&h["author-only"]&&m.tmp.done_vars.push("locator"),m.opt.suppressedJurisdictions[c.country]&&c.country&&["treaty","patent"].indexOf(c.type)===-1&&m.tmp.done_vars.push("country"),!m.tmp.just_looking&&m.registry.registry[c.id]&&m.registry.registry[c.id].parallel&&m.tmp.done_vars.push("first-reference-note-number"),!m.tmp.just_looking&&m.tmp.abbrev_trimmer&&c.jurisdiction)for(var p in m.tmp.abbrev_trimmer.QUASHES[c.jurisdiction])m.tmp.done_vars.push(p);m.tmp.rendered_name=!1},this.execs.push(r),r=function(m){m.tmp.sort_key_flag=!1},this.execs.push(r),r=function(m){m.tmp.nameset_counter=0},this.execs.push(r),r=function(m,c){var h=new a.Token;m.output.openLevel(h)},this.execs.push(r),t.push(this),e.build.area==="citation"&&(i=new a.Token("text",a.SINGLETON),r=function(m,c,h){if(h&&h.prefix){var p=a.checkPrefixSpaceAppend(m,h.prefix);m.tmp.just_looking||(p=m.output.checkNestedBrace.update(p));var d=a.checkIgnorePredecessor(m,p);m.output.append(p,this,!1,d)}},i.execs.push(r),t.push(i)));var l;if(this.locale_raw&&(l=new a.Token("dummy",a.START),l.locale=this.locale_raw,l.strings.delimiter=this.strings.delimiter,l.strings.suffix=this.strings.suffix,e.tmp.cite_affixes[e.build.area]||(e.tmp.cite_affixes[e.build.area]={})),this.tokentype===a.START&&(e.build.layout_flag=!0,this.locale_raw||(e[e.tmp.area].opt.topdecor=[this.decorations],e[e.tmp.area+"_sort"].opt.topdecor=[this.decorations],e[e.build.area].opt.layout_prefix=this.strings.prefix,e[e.build.area].opt.layout_suffix=this.strings.suffix,e[e.build.area].opt.layout_delimiter=this.strings.delimiter,e[e.build.area].opt.layout_decorations=this.decorations,e.tmp.cite_affixes[e.build.area]&&(n=new a.Token("else",a.START),a.Node.else.build.call(n,e,t))),this.locale_raw)){if(e.build.layout_locale_flag)l.name="else-if",a.Attributes["@locale-internal"].call(l,e,this.locale_raw),a.Node["else-if"].build.call(l,e,t);else{var u=new a.Token("choose",a.START);a.Node.choose.build.call(u,e,t),l.name="if",a.Attributes["@locale-internal"].call(l,e,this.locale_raw),a.Node.if.build.call(l,e,t)}e.tmp.cite_affixes[e.build.area][l.locale]={},e.tmp.cite_affixes[e.build.area][l.locale].delimiter=this.strings.delimiter,e.tmp.cite_affixes[e.build.area][l.locale].suffix=this.strings.suffix}this.tokentype===a.END&&(this.locale_raw&&(o(),e.build.layout_locale_flag?(l.name="else-if",l.tokentype=a.END,a.Attributes["@locale-internal"].call(l,e,this.locale_raw),a.Node["else-if"].build.call(l,e,t)):(l.name="if",l.tokentype=a.END,a.Attributes["@locale-internal"].call(l,e,this.locale_raw),a.Node.if.build.call(l,e,t),e.build.layout_locale_flag=!0)),this.locale_raw||(o(),e.tmp.cite_affixes[e.build.area]&&e.build.layout_locale_flag&&(n=new a.Token("else",a.END),a.Node.else.build.call(n,e,t),n=new a.Token("choose",a.END),a.Node.choose.build.call(n,e,t)),e.build_layout_locale_flag=!0,e.build.area==="citation"&&(s=new a.Token("text",a.SINGLETON),r=function(m,c,h){var p;if(h&&h.suffix){var d=a.checkSuffixSpacePrepend(m,h.suffix);m.tmp.just_looking||(d=m.output.checkNestedBrace.update(d)),m.output.append(d,this)}},s.execs.push(r),t.push(s)),r=function(m){m.output.closeLevel()},this.execs.push(r),r=function(m,c){m.opt.development_extensions.apply_citation_wrapper&&m.sys.wrapCitationEntry&&!m.tmp.just_looking&&c.system_id&&m.tmp.area==="citation"&&m.output.endTag()},this.execs.push(r),t.push(this),e.build.layout_flag=!1,e.build.layout_locale_flag=!1))}};a.Node.macro={build:function(){}};a.Node.alternative={build:function(e,t){if(this.tokentype===a.START){var r=new a.Token("choose",a.START);a.Node.choose.build.call(r,e,t);var i=new a.Token("if",a.START);a.Attributes["@alternative-node-internal"].call(i,e),a.Node.if.build.call(i,e,t);var s=function(n,o){if(n.tmp.oldItem=o,n.tmp.oldLang=n.opt.lang,n.tmp.abort_alternative=!0,o["language-name"]&&o["language-name-original"]){var l=JSON.parse(JSON.stringify(o));l.language=l["language-name"];var u=a.localeResolve(l.language,n.opt["default-locale"][0]);if(n.opt.multi_layout)for(var m in n.opt.multi_layout){var c=n.opt.multi_layout[m],h=!1;for(var p in c){var d=c[p];if(u.best===d.best||u.base===d.base||u.bare===d.bare){h=c[0].best;break}}h||(h=n.opt["default-locale"][0]),n.opt.lang=h}for(var v in l)if(["id","type","language","multi"].indexOf(v)===-1&&v.slice(0,4)!=="alt-")if(l.multi&&l.multi._keys[v]){var f=!0;for(var y in l.multi._keys[v])if(u.bare===y.replace(/^([a-zA-Z]+).*/,"$1")){f=!1;break}f&&delete l[v]}else delete l[v];for(var v in l)v.slice(0,4)==="alt-"?(l[v.slice(4)]=l[v],n.tmp.abort_alternative=!1):l.multi&&l.multi._keys&&!l["alt-"+v]&&l.multi._keys[v]&&(l.multi._keys[v][u.best]?(l[v]=l.multi._keys[v][u.best],n.tmp.abort_alternative=!1):l.multi._keys[v][u.base]?(l[v]=l.multi._keys[v][u.base],n.tmp.abort_alternative=!1):l.multi._keys[v][u.bare]&&(l[v]=l.multi._keys[v][u.bare],n.tmp.abort_alternative=!1))}n.output.openLevel(this),n.registry.refhash[o.id]=l,n.nameOutput=new a.NameOutput(n,l)};this.execs.push(s),t.push(this);var r=new a.Token("choose",a.START);a.Node.choose.build.call(r,e,t);var i=new a.Token("if",a.START);a.Attributes["@alternative-node-internal"].call(i,e);var s=function(n){n.tmp.abort_alternative=!0};i.execs.push(s),a.Node.if.build.call(i,e,t)}else if(this.tokentype===a.END){var i=new a.Token("if",a.END);a.Node.if.build.call(i,e,t);var r=new a.Token("choose",a.END);a.Node.choose.build.call(r,e,t);var s=function(u,m){u.output.closeLevel(),u.registry.refhash[m.id]=u.tmp.oldItem,u.opt.lang=u.tmp.oldLang,u.nameOutput=new a.NameOutput(u,u.tmp.oldItem),u.tmp.abort_alternative=!1};this.execs.push(s),t.push(this);var i=new a.Token("if",a.END);a.Node.if.build.call(i,e,t);var r=new a.Token("choose",a.END);a.Node.choose.build.call(r,e,t)}}};a.Node["alternative-text"]={build:function(e,t){if(this.tokentype===a.SINGLETON){var r=function(i,n){var n=i.refetchItem(n.id);a.getCite.call(i,n)};this.execs.push(r)}t.push(this)}};a.NameOutput=function(e,t,r){this.debug=!1,this.state=e,this.debug&&this.state.sys.print("(1)"),this.Item=t,this.item=r,this.nameset_base=0,this.etal_spec={},this._first_creator_variable=!1,this._please_chop=!1};a.NameOutput.prototype.init=function(e){this.requireMatch=e.requireMatch,this.state.tmp.term_predecessor&&(this.state.tmp.subsequent_author_substitute_ok=!1),this.nameset_offset&&(this.nameset_base=this.nameset_base+this.nameset_offset),this.nameset_offset=0,this.names=e,this.variables=e.variables,this.state.tmp.value=[],this.state.tmp.rendered_name=[],this.state.tmp.label_blob=!1,this.state.tmp.etal_node=!1,this.state.tmp.etal_term=!1;for(var t=0,r=this.variables.length;t<r;t+=1)this.Item[this.variables[t]]&&this.Item[this.variables[t]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[t]]));if(this["et-al"]=void 0,this.with=void 0,this.name=void 0,this.institutionpart={},this.state.tmp.group_context.tip.variable_attempt=!0,this.labelVariable=this.variables[0],!!this.state.tmp.value.length){var i=this.checkCommonAuthor(this.requireMatch);if(i){this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0);for(var t in this.variables){var s=this.state.tmp.done_vars.indexOf(this.variables[t]);s>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,s).concat(this.state.tmp.done_vars.slice(t+1)))}this.state.tmp.common_term_match_fail=!0,this.variables=[]}}};a.NameOutput.prototype.reinit=function(e,t){if(this.requireMatch=e.requireMatch,this.labelVariable=t,this.state.tmp.can_substitute.value()){this.nameset_offset=0,this.variables=e.variables;var r=this.state.tmp.value.slice();this.state.tmp.value=[];for(var i=0,s=this.variables.length;i<s;i+=1)this.Item[this.variables[i]]&&this.Item[this.variables[i]].length&&(this.state.tmp.value=this.state.tmp.value.concat(this.Item[this.variables[i]]));this.state.tmp.value.length&&this.state.tmp.can_substitute.replace(!1,a.LITERAL),this.state.tmp.value=r}var n=this.checkCommonAuthor(this.requireMatch);if(n){this.state.tmp.can_substitute.pop(),this.state.tmp.can_substitute.push(!0);for(var i in this.variables){var o=this.state.tmp.done_vars.indexOf(this.variables[i]);o>-1&&(this.state.tmp.done_vars=this.state.tmp.done_vars.slice(0,o).concat(this.state.tmp.done_vars.slice(i+1)))}this.variables=[]}};a.NameOutput.prototype.outputNames=function(){var e,t,r=this.variables;if(this.institution.and&&((!this.institution.and.single.blobs||!this.institution.and.single.blobs.length)&&(this.institution.and.single.blobs=this.name.and.single.blobs),(!this.institution.and.multiple.blobs||!this.institution.and.multiple.blobs.length)&&(this.institution.and.multiple.blobs=this.name.and.multiple.blobs)),this.variable_offset={},this.family)for(this.family_decor=a.Util.cloneToken(this.family),this.family_decor.strings.prefix="",this.family_decor.strings.suffix="",e=0,t=this.family.execs.length;e<t;e+=1)this.family.execs[e].call(this.family_decor,this.state,this.Item);else this.family_decor=!1;if(this.given)for(this.given_decor=a.Util.cloneToken(this.given),this.given_decor.strings.prefix="",this.given_decor.strings.suffix="",e=0,t=this.given.execs.length;e<t;e+=1)this.given.execs[e].call(this.given_decor,this.state,this.Item);else this.given_decor=!1;if(this.debug&&this.state.sys.print("(2)"),this.getEtAlConfig(),this.debug&&this.state.sys.print("(3)"),this.divideAndTransliterateNames(),this.debug&&this.state.sys.print("(4)"),this.truncatePersonalNameLists(),this.debug&&this.state.sys.print("(5)"),this.debug&&this.state.sys.print("(6)"),this.disambigNames(),this.constrainNames(),this.debug&&this.state.sys.print("(7)"),this.name.strings.form==="count"){(this.state.tmp.extension||this.names_count!=0)&&(this.state.output.append(this.names_count,"empty"),this.state.tmp.group_context.tip.variable_success=!0);return}this.debug&&this.state.sys.print("(8)"),this.setEtAlParameters(),this.debug&&this.state.sys.print("(9)"),this.setCommonTerm(this.requireMatch),this.debug&&this.state.sys.print("(10)"),this.renderAllNames(),this.debug&&this.state.sys.print("(11)");var i=[];for(e=0,t=r.length;e<t;e+=1){var s=r[e],n=[],o=!1,l=null;if(!this.state.opt.development_extensions.spoof_institutional_affiliations)l=this._join([this.freeters[s]],"");else{this.debug&&this.state.sys.print("(11a)");for(var u=0,m=this.institutions[s].length;u<m;u+=1)n.push(this.joinPersonsAndInstitutions([this.persons[s][u],this.institutions[s][u]]));if(this.debug&&this.state.sys.print("(11b)"),this.institutions[s].length){var c=this.nameset_base+this.variable_offset[s];this.freeters[s].length&&(c+=1),o=this.joinInstitutionSets(n,c)}this.debug&&this.state.sys.print("(11c)");var l=this.joinFreetersAndInstitutionSets([this.freeters[s],o]);this.debug&&this.state.sys.print("(11d)")}if(l&&(this.state.tmp.extension||(l=this._applyLabels(l,s)),i.push(l)),this.debug&&this.state.sys.print("(11e)"),this.common_term)break}for(this.debug&&this.state.sys.print("(12)"),this.state.output.openLevel("empty"),this.state.output.current.value().strings.delimiter=this.state.inheritOpt(this.names,"delimiter","names-delimiter"),this.debug&&this.state.sys.print("(13)"),e=0,t=i.length;e<t;e+=1)this.state.output.append(i[e],"literal",!0);!this.state.tmp.just_looking&&i.length>0&&(this.state.tmp.probably_rendered_something=!0),this.debug&&this.state.sys.print("(14)"),this.state.output.closeLevel("empty"),this.debug&&this.state.sys.print("(15)");var h=this.state.output.pop();this.state.tmp.name_node.top=h,this.debug&&this.state.sys.print("(16)");var p=a.Util.cloneToken(this.names);if(this.state.tmp.group_context.tip.condition&&a.UPDATE_GROUP_CONTEXT_CONDITION(this.state,this.names.strings.prefix,null,this.names),this.state.output.append(h,p),this.state.tmp.term_predecessor_name&&(this.state.tmp.term_predecessor=!0),this.debug&&this.state.sys.print("(17)"),this.debug&&this.state.sys.print("(18)"),r[0]!=="authority"){var d=[],v=this.Item[r[0]];if(v)for(var e=0,t=v.length;e<t;e+=1){var f=a.Util.Names.getRawName(v[e]);f&&d.push(f)}d=d.join(", "),d&&(this.state.tmp.name_node.string=d)}if(this.state.tmp.name_node.string&&!this.state.tmp.first_name_string&&(this.state.tmp.first_name_string=this.state.tmp.name_node.string),this.Item.type==="classic"&&this.state.tmp.first_name_string){var y=[];y.push(this.state.tmp.first_name_string),this.Item.title&&y.push(this.Item.title),y=y.join(", "),y&&this.state.sys.getAbbreviation&&(this.state.sys.normalizeAbbrevsKey&&(y=this.state.sys.normalizeAbbrevsKey("classic",y)),this.state.transform.loadAbbreviation("default","classic",y,this.Item.language),this.state.transform.abbrevs.default.classic[y]&&(this.state.tmp.done_vars.push("title"),this.state.output.append(this.state.transform.abbrevs.default.classic[y],"empty",!0),h=this.state.output.pop(),this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.top.blobs.push(h)))}this._collapseAuthor(),this.variables=[],this.state.tmp.authority_stop_last=0,this.debug&&this.state.sys.print("(19)")};a.NameOutput.prototype._applyLabels=function(e,t){var r;if(!this.label||!this.label[this.labelVariable])return e;var i=0,s=this.freeters_count[t]+this.institutions_count[t];if(s>1)i=1;else{for(var n=0,o=this.persons[t].length;n<o;n+=1)s+=this.persons_count[t][n];s>1&&(i=1)}return this.label[this.labelVariable].before?(typeof this.label[this.labelVariable].before.strings.plural=="number"&&(i=this.label[this.labelVariable].before.strings.plural),r=this._buildLabel(t,i,"before",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(r,this.label[this.labelVariable].before,!0),this.state.output.append(e,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()):this.label[this.labelVariable].after&&(typeof this.label[this.labelVariable].after.strings.plural=="number"&&(i=this.label[this.labelVariable].after.strings.plural),r=this._buildLabel(t,i,"after",this.labelVariable),this.state.output.openLevel("empty"),this.state.output.append(e,"literal",!0),this.state.output.append(r,this.label[this.labelVariable].after,!0),this.state.tmp.label_blob=this.state.output.pop(),this.state.output.append(this.state.tmp.label_blob,"literal",!0),this.state.output.closeLevel("empty"),e=this.state.output.pop()),e};a.NameOutput.prototype._buildLabel=function(e,t,r,i){this.common_term&&(e=this.common_term);var s=!1,n=this.label[i][r];return n&&(s=a.castLabel(this.state,n,e,t,a.TOLERANT)),s};a.NameOutput.prototype._collapseAuthor=function(){var e,t,r;this.state.tmp.name_node.top.blobs.length!==0&&(this.nameset_base===0&&this.Item[this.variables[0]]&&!this._first_creator_variable&&(this._first_creator_variable=this.variables[0]),(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter.length)&&(this.state.tmp.authorstring_request?(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),this.state.tmp.offset_characters=r,this.state.registry.authorstrings[this.Item.id]=t):!this.state.tmp.just_looking&&!this.state.tmp.suppress_decorations&&(this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length||this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter)&&(t="",e=this.state.tmp.name_node.top.blobs.slice(-1)[0].blobs,r=this.state.tmp.offset_characters,e&&(t=this.state.output.string(this.state,e,!1)),t===this.state.tmp.last_primary_names_string?((this.item["suppress-author"]||this.state[this.state.tmp.area].opt.collapse&&this.state[this.state.tmp.area].opt.collapse.length)&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r),this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!0)):(this.state.tmp.last_primary_names_string=t,this.variables.indexOf(this._first_creator_variable)>-1&&this.item&&this.item["suppress-author"]&&this.Item.type!=="legal_case"&&(this.state.tmp.name_node.top.blobs.pop(),this.state.tmp.name_node.children=[],this.state.tmp.offset_characters=r,this.state.tmp.term_predecessor=!1),this.state.tmp.have_collapsed=!1,this.state[this.state.tmp.area].opt.cite_group_delimiter&&this.state[this.state.tmp.area].opt.cite_group_delimiter&&(this.state.tmp.use_cite_group_delimiter=!1)))))};a.NameOutput.prototype.isPerson=function(e){return!(e.literal||!e.given&&e.family&&e.isInstitution)};a.NameOutput.prototype.truncatePersonalNameLists=function(){var e,t,r,i,s,n,o;this.freeters_count={},this.persons_count={},this.institutions_count={};for(e in this.freeters)this.freeters.hasOwnProperty(e)&&(this.freeters_count[e]=this.freeters[e].length,this.freeters[e]=this._truncateNameList(this.freeters,e));for(e in this.persons)if(this.persons.hasOwnProperty(e))for(this.institutions_count[e]=this.institutions[e].length,this._truncateNameList(this.institutions,e),this.persons[e]=this.persons[e].slice(0,this.institutions[e].length),this.persons_count[e]=[],i=0,s=this.persons[e].length;i<s;i+=1)this.persons_count[e][i]=this.persons[e][i].length,this.persons[e][i]=this._truncateNameList(this.persons,e,i);if(this.state.opt.development_extensions.etal_min_etal_usefirst_hack&&this.etal_min===1&&this.etal_use_first===1&&!(this.state.tmp.extension||this.state.tmp.just_looking)?n=e:n=!1,n||this._please_chop)for(t=0,r=this.variables.length;t<r;t+=1){e=this.variables[t],this.freeters[e].length&&(this._please_chop===e?(this.freeters[e]=this.freeters[e].slice(1),this.freeters_count[e]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.freeters[e]=this.freeters[e].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],this._please_chop=n));for(var i=0,s=this.persons[e].length;i<s;i++)if(this.persons[e][i].length){if(this._please_chop===e){this.persons[e][i]=this.persons[e][i].slice(1),this.persons_count[e][i]+=-1,this._please_chop=!1;break}else if(n&&!this._please_chop){this.freeters[e]=this.persons[e][i].slice(0,1),this.freeters_count[e]=1,this.institutions[e]=[],this.persons[e]=[],o=[],this._please_chop=n;break}}this.institutions[e].length&&(this._please_chop===e?(this.institutions[e]=this.institutions[e].slice(1),this.institutions_count[e]+=-1,this._please_chop=!1):n&&!this._please_chop&&(this.institutions[e]=this.institutions[e].slice(0,1),this.institutions_count[e]=1,o=[],this._please_chop=n))}for(t=0,r=this.variables.length;t<r;t+=1){this.institutions[e].length&&(this.nameset_offset+=1);for(var i=0,s=this.persons[e].length;i<s;i++)this.persons[e][i].length&&(this.nameset_offset+=1)}};a.NameOutput.prototype._truncateNameList=function(e,t,r){var i;if(typeof r>"u"?i=e[t]:i=e[t][r],this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names&&i.length>50&&i.length>this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names+2){var s=this.state[this.state[this.state.tmp.area].root].opt.max_number_of_names;i=i.slice(0,s+1).concat(i.slice(-1))}return i};a.NameOutput.prototype.divideAndTransliterateNames=function(){var e,t,r,i,s=this.Item,n=this.variables;for(this.varnames=n.slice(),this.freeters={},this.persons={},this.institutions={},e=0,t=n.length;e<t;e+=1){var o=n[e];this.variable_offset[o]=this.nameset_offset;var l=this._normalizeVariableValue(s,o);if(this.name.strings["suppress-min"]&&l.length>=this.name.strings["suppress-min"]&&(l=[]),this.name.strings["suppress-max"]&&l.length<=this.name.strings["suppress-max"]&&(l=[]),this._getFreeters(o,l),this._getPersonsAndInstitutions(o,l),this.state.opt.development_extensions.spoof_institutional_affiliations){if(this.name.strings["suppress-min"]===0)for(this.freeters[o]=[],r=0,i=this.persons[o].length;r<i;r+=1)this.persons[o][r]=[];else if(this.institution.strings["suppress-min"]===0){for(this.institutions[o]=[],this.freeters[o]=this.freeters[o].concat(this.persons[o]),r=0,i=this.persons[o].length;r<i;r+=1)for(var u=0,m=this.persons[o][r].length;u<m;u+=1)this.freeters[o].push(this.persons[o][r][u]);this.persons[o]=[]}}}};a.NameOutput.prototype._normalizeVariableValue=function(e,t){var r;return typeof e[t]=="string"||typeof e[t]=="number"?(a.debug('name variable "'+t+'" is string or number, not array. Attempting to fix.'),r=[{literal:e[t]+""}]):e[t]?(typeof e[t].length!="number"&&(a.debug('name variable "'+t+'" is object, not array. Attempting to fix.'),e[t]=[e[t]]),r=e[t].slice()):r=[],r};a.NameOutput.prototype._getFreeters=function(e,t){if(this.freeters[e]=[],this.state.opt.development_extensions.spoof_institutional_affiliations)for(var r=t.length-1;r>-1&&this.isPerson(t[r]);r--){var i=this._checkNickname(t.pop());i&&this.freeters[e].push(i)}else for(var r=t.length-1;r>-1;r--){var i=t.pop();if(this.isPerson(i))var i=this._checkNickname(i);this.freeters[e].push(i)}this.freeters[e].reverse(),this.freeters[e].length&&(this.nameset_offset+=1)};a.NameOutput.prototype._getPersonsAndInstitutions=function(e,t){if(this.persons[e]=[],this.institutions[e]=[],!!this.state.opt.development_extensions.spoof_institutional_affiliations){for(var r=[],i=!1,s=!0,n=t.length-1;n>-1;n+=-1)if(this.isPerson(t[n])){var o=this._checkNickname(t[n]);o&&r.push(o)}else i=!0,this.institutions[e].push(t[n]),s||(r.reverse(),this.persons[e].push(r),r=[]),s=!1;i&&(r.reverse(),this.persons[e].push(r),this.persons[e].reverse(),this.institutions[e].reverse())}};a.NameOutput.prototype._clearValues=function(e){for(var t=e.length-1;t>-1;t+=-1)e.pop()};a.NameOutput.prototype._checkNickname=function(e){if(["interview","personal_communication"].indexOf(this.Item.type)>-1){var t="";if(t=a.Util.Names.getRawName(e),t&&this.state.sys.getAbbreviation&&!(this.item&&this.item["suppress-author"])){var r=t;this.state.sys.normalizeAbbrevsKey&&(r=this.state.sys.normalizeAbbrevsKey("author",t)),this.state.transform.loadAbbreviation("default","nickname",r,this.Item.language);var i=this.state.transform.abbrevs.default.nickname[r];i&&(i==="!here>>>"?e=!1:e={family:i,given:""})}}return e};a.NameOutput.prototype._purgeEmptyBlobs=function(e){for(var t=e.length-1;t>-1;t+=-1)(!e[t]||e[t].length===0||!e[t].blobs.length)&&(e=e.slice(0,t).concat(e.slice(t+1)));return e};a.NameOutput.prototype.joinPersons=function(e,t,r,i){var s;return e=this._purgeEmptyBlobs(e),i||(i="name"),typeof r>"u"?this.etal_spec[t].freeters===1?s=this._joinEtAl(e):this.etal_spec[t].freeters===2?s=this._joinEllipsis(e):this.state.tmp.sort_key_flag?s=this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):s=this._joinAnd(e):this.etal_spec[t].persons[r]===1?s=this._joinEtAl(e):this.etal_spec[t].persons[r]===2?s=this._joinEllipsis(e):this.state.tmp.sort_key_flag?s=this._join(e,this.state.inheritOpt(this.name,"delimiter","name-delimiter",", ")):s=this._joinAnd(e),s};a.NameOutput.prototype.joinInstitutionSets=function(e,t){var r;return e=this._purgeEmptyBlobs(e),this.etal_spec[t].institutions===1?r=this._joinEtAl(e,"institution"):this.etal_spec[t].institutions===2?r=this._joinEllipsis(e,"institution"):r=this._joinAnd(e),r};a.NameOutput.prototype.joinPersonsAndInstitutions=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,this.state.tmp.name_delimiter);return t.isInstitution=!0,t};a.NameOutput.prototype.joinFreetersAndInstitutionSets=function(e){e=this._purgeEmptyBlobs(e);var t=this._join(e,"[never here]",this.with.single,this.with.multiple);return t};a.NameOutput.prototype._getAfterInvertedName=function(e,t,r){if(r&&e.length>1&&this.state.inheritOpt(this.name,"delimiter-precedes-last")==="after-inverted-name"){var i=e[e.length-2];i.blobs.length>0&&i.blobs[0].isInverted&&(r.strings.prefix=t)}return r};a.NameOutput.prototype._getAndJoin=function(e,t){var r=!1;if(e.length>1){var i="single";e.length>2&&(i="multiple"),e[e.length-1].isInstitution?r=this.institution.and[i]:r=this.name.and[i],r=JSON.parse(JSON.stringify(r)),r=this._getAfterInvertedName(e,t,r)}return r};a.NameOutput.prototype._joinEtAl=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=this._join(e,t);return this.state.output.openLevel(this._getToken("name")),this.state.output.current.value().strings.delimiter="",this.state.output.append(r,"literal",!0),e.length>1?this.state.output.append(this["et-al"].multiple,"literal",!0):e.length===1&&this.state.output.append(this["et-al"].single,"literal",!0),this.state.output.closeLevel(),this.state.output.pop()};a.NameOutput.prototype._joinEllipsis=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=!1;if(e.length>1){var i="single";e.length>2&&(i="multiple"),r=JSON.parse(JSON.stringify(this.name.ellipsis[i])),r=this._getAfterInvertedName(e,t,r)}return this._join(e,t,r)};a.NameOutput.prototype._joinAnd=function(e){var t=this.state.inheritOpt(this.name,"delimiter","name-delimiter",", "),r=this._getAndJoin(e,t);return this._join(e,t,r)};a.NameOutput.prototype._join=function(e,t,r){var i,s;if(!e||(e=this._purgeEmptyBlobs(e),!e.length))return!1;if(e.length>1)if(e.length===2)r?e=[e[0],r,e[1]]:e[0].strings.suffix+=t;else{var n;r?n=1:n=0;for(var o=e.pop(),i=0,s=e.length-n;i<s;i++)e[i].strings.suffix+=t;e.push(r),e.push(o)}for(this.state.output.openLevel(),i=0,s=e.length;i<s;i+=1)this.state.output.append(e[i],!1,!0);return this.state.output.closeLevel(),this.state.output.pop()};a.NameOutput.prototype._getToken=function(e){var t=this[e];if(e==="institution"){var r=new a.Token;return r}return t};a.NameOutput.prototype.checkCommonAuthor=function(e){if(!e)return!1;var t=!1;if(this.variables.length===2){var r=this.variables,i=r.slice();i.sort(),t=i.join("")}if(!t)return!1;var s=!1;if(this.state.locale[this.state.opt.lang].terms[t]&&(s=!0),!s)return this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1]),!1;var n=this.Item[this.variables[0]],o=this.Item[this.variables[1]],l=this._compareNamesets(n,o);return l===!0&&(this.state.tmp.done_vars.push(this.variables[0]),this.state.tmp.done_vars.push(this.variables[1])),!l};a.NameOutput.prototype.setCommonTerm=function(){var e=this.variables,t=e.slice();if(t.sort(),this.common_term=t.join(""),!!this.common_term){var r=!1;if(this.label&&this.label[this.variables[0]]&&(this.label[this.variables[0]].before?r=this.state.getTerm(this.common_term,this.label[this.variables[0]].before.strings.form,0):this.label[this.variables[0]].after&&(r=this.state.getTerm(this.common_term,this.label[this.variables[0]].after.strings.form,0))),!this.state.locale[this.state.opt.lang].terms[this.common_term]||!r||this.variables.length<2){this.common_term=!1;return}for(var i=0,s=0,n=this.variables.length-1;s<n;s+=1){var o=this.variables[s],l=this.variables[s+1];if(this.freeters[o].length||this.freeters[l].length){if(this.etal_spec[o].freeters!==this.etal_spec[l].freeters||!this._compareNamesets(this.freeters[o],this.freeters[l])){this.common_term=!1;return}i+=1}if(this.persons[o].length!==this.persons[l].length){this.common_term=!1;return}for(var u=0,m=this.persons[o].length;u<m;u+=1)if(this.etal_spec[o].persons[u]!==this.etal_spec[l].persons[u]||!this._compareNamesets(this.persons[o][u],this.persons[l][u])){this.common_term=!1;return}}}};a.NameOutput.prototype._compareNamesets=function(e,t){if(!e||!t||e.length!==t.length)return!1;for(var r=0,i=t.length;r<i;r+=1)for(var s=0,n=a.NAME_PARTS.length;s<n;s+=1){var o=a.NAME_PARTS[s];if(!e[r]||e[r][o]!=t[r][o])return!1}return!0};a.NameOutput.prototype.constrainNames=function(){this.names_count=0;for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];e=this.nameset_base+t,this.freeters[i].length&&(this.state.tmp.names_max.push(this.freeters[i].length,"literal"),this._imposeNameConstraints(this.freeters,this.freeters_count,i,e),this.names_count+=this.freeters[i].length),this.institutions[i].length&&(this.state.tmp.names_max.push(this.institutions[i].length,"literal"),this._imposeNameConstraints(this.institutions,this.institutions_count,i,e),this.persons[i]=this.persons[i].slice(0,this.institutions[i].length),this.names_count+=this.institutions[i].length);for(var s=0,n=this.persons[i].length;s<n;s+=1)this.persons[i][s].length&&(this.state.tmp.names_max.push(this.persons[i][s].length,"literal"),this._imposeNameConstraints(this.persons[i],this.persons_count[i],s,e),this.names_count+=this.persons[i][s].length)}};a.NameOutput.prototype._imposeNameConstraints=function(e,t,r,i){var s=e[r],n=this.state.tmp["et-al-min"];this.state.tmp.suppress_decorations?this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]?n=this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(n=this.etal_use_first):(this.state.tmp.disambig_request&&this.state.tmp.disambig_request.names[i]>this.etal_use_first?t[r]<this.etal_min?n=t[r]:n=this.state.tmp.disambig_request.names[i]:t[r]>=this.etal_min&&(n=this.etal_use_first),this.etal_use_last&&n>this.etal_min-2&&(n=this.etal_min-2));var o=this.etal_min>=this.etal_use_first,l=t[r]>n;n>t[r]&&(n=s.length),o&&l&&(this.etal_use_last?e[r]=s.slice(0,n).concat(s.slice(-1)):e[r]=s.slice(0,n)),this.state.tmp.disambig_settings.names[i]=e[r].length,this.state.disambiguate.padBase(this.state.tmp.disambig_settings)};a.NameOutput.prototype.disambigNames=function(){for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];if(e=this.nameset_base+t,this.freeters[i].length&&this._runDisambigNames(this.freeters[i],e),this.institutions[i].length){typeof this.state.tmp.disambig_settings.givens[e]>"u"&&(this.state.tmp.disambig_settings.givens[e]=[]);for(var s=0,n=this.institutions[i].length;s<n;s+=1)typeof this.state.tmp.disambig_settings.givens[e][s]>"u"&&this.state.tmp.disambig_settings.givens[e].push(2)}for(var s=0,n=this.persons[i].length;s<n;s+=1)this.persons[i][s].length&&this._runDisambigNames(this.persons[i][s],e)}};a.NameOutput.prototype._runDisambigNames=function(e,t){var r,i,s,n,o,l,u;for(o=0,l=e.length;o<l;o+=1)if(!(!e[o].given&&!e[o].family)){if(s=this.state.inheritOpt(this.name,"initialize-with"),this.state.registry.namereg.addname(""+this.Item.id,e[o],o),r=this.state.tmp.disambig_settings.givens[t],typeof r>"u")for(var m=0,c=t+1;m<c;m+=1)this.state.tmp.disambig_settings.givens[m]||(this.state.tmp.disambig_settings.givens[m]=[]);if(r=this.state.tmp.disambig_settings.givens[t][o],typeof r>"u"&&(i=this.state.inheritOpt(this.name,"form","name-form","long"),n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,i,s),this.state.tmp.disambig_settings.givens[t].push(n)),i=this.state.inheritOpt(this.name,"form","name-form","long"),u=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,0,i,s),this.state.tmp.disambig_request){var h=this.state.tmp.disambig_settings.givens[t][o];h===1&&this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(typeof this.state.inheritOpt(this.name,"initialize-with")>"u"||typeof e[o].given>"u")&&(h=2),n=h,this.state.opt["disambiguate-add-givenname"]&&e[o].given&&(n=this.state.registry.namereg.evalname(""+this.Item.id,e[o],o,n,this.state.inheritOpt(this.name,"form","name-form","long"),this.state.inheritOpt(this.name,"initialize-with")))}else n=u;!this.state.tmp.just_looking&&this.item&&this.item.position===a.POSITION_FIRST&&u>n&&(n=u),this.state.tmp.sort_key_flag||(this.state.tmp.disambig_settings.givens[t][o]=n,typeof s=="string"&&(typeof this.name.strings.initialize>"u"||this.name.strings.initialize===!0)&&(this.state.tmp.disambig_settings.use_initials=!0))}};a.NameOutput.prototype.getEtAlConfig=function(){var e=this.item;this["et-al"]={},this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].single=this.state.output.pop(),this["et-al"].single.strings.suffix=this.etal_suffix,this["et-al"].single.strings.prefix=this.etal_prefix_single,this.state.output.append(this.etal_term,this.etal_style,!0),this["et-al"].multiple=this.state.output.pop(),this["et-al"].multiple.strings.suffix=this.etal_suffix,this["et-al"].multiple.strings.prefix=this.etal_prefix_multiple,typeof e>"u"&&(e={}),e.position?(this.state.inheritOpt(this.name,"et-al-subsequent-min")?this.etal_min=this.state.inheritOpt(this.name,"et-al-subsequent-min"):this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.inheritOpt(this.name,"et-al-subsequent-use-first")?this.etal_use_first=this.state.inheritOpt(this.name,"et-al-subsequent-use-first"):this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first")):(this.state.tmp["et-al-min"]?this.etal_min=this.state.tmp["et-al-min"]:this.etal_min=this.state.inheritOpt(this.name,"et-al-min"),this.state.tmp["et-al-use-first"]?this.etal_use_first=this.state.tmp["et-al-use-first"]:this.etal_use_first=this.state.inheritOpt(this.name,"et-al-use-first"),typeof this.state.tmp["et-al-use-last"]=="boolean"?this.etal_use_last=this.state.tmp["et-al-use-last"]:this.etal_use_last=this.state.inheritOpt(this.name,"et-al-use-last")),this.state.tmp["et-al-min"]||(this.state.tmp["et-al-min"]=this.etal_min)};a.NameOutput.prototype.setEtAlParameters=function(){var e,t,r,i;for(e=0,t=this.variables.length;e<t;e+=1){var s=this.variables[e];for(typeof this.etal_spec[s]>"u"&&(this.etal_spec[s]={freeters:0,institutions:0,persons:[]}),this.etal_spec[this.nameset_base+e]=this.etal_spec[s],this.freeters[s].length&&this._setEtAlParameter("freeters",s),r=0,i=this.persons[s].length;r<i;r+=1)typeof this.etal_spec[s][r]>"u"&&(this.etal_spec[s].persons[r]=0),this._setEtAlParameter("persons",s,r);this.institutions[s].length&&this._setEtAlParameter("institutions",s)}};a.NameOutput.prototype._setEtAlParameter=function(e,t,r){var i,s;e==="persons"?(i=this.persons[t][r],s=this.persons_count[t][r]):(i=this[e][t],s=this[e+"_count"][t]),i.length<s&&!this.state.tmp.sort_key_flag?this.etal_use_last?e==="persons"?this.etal_spec[t].persons[r]=2:this.etal_spec[t][e]=2:e==="persons"?this.etal_spec[t].persons[r]=1:this.etal_spec[t][e]=1:e==="persons"?this.etal_spec[t].persons[r]=0:this.etal_spec[t][e]=0};a.NameOutput.prototype.renderAllNames=function(){for(var e,t=0,r=this.variables.length;t<r;t+=1){var i=this.variables[t];(this.freeters[i].length||this.institutions[i].length)&&(this.state.tmp.group_context.tip.condition||(this.state.tmp.just_did_number=!1)),e=this.nameset_base+t,this.freeters[i].length&&(this.freeters[i]=this._renderNames(i,this.freeters[i],e));for(var s=0,n=this.institutions[i].length;s<n;s+=1)this.persons[i][s]=this._renderNames(i,this.persons[i][s],e,s)}this.renderInstitutionNames()};a.NameOutput.prototype.renderInstitutionNames=function(){for(var e=0,t=this.variables.length;e<t;e+=1)for(var r=this.variables[e],i=0,s=this.institutions[r].length;i<s;i+=1){var h,n=this.institutions[r][i],i,s,o;this.state.tmp.extension?o=["sort"]:n.isInstitution||n.literal?o=this.state.opt["cite-lang-prefs"].institutions:o=this.state.opt["cite-lang-prefs"].persons;var l={primary:"locale-orig",secondary:!1,tertiary:!1};if(o)for(var u=["primary","secondary","tertiary"],m=0,c=u.length;m<c&&!(o.length-1<m);m+=1)o[m]&&(l[u[m]]="locale-"+o[m]);else l.primary="locale-translat";this.state.tmp.area!=="bibliography"&&!(this.state.tmp.area==="citation"&&this.state.opt.xclass==="note"&&this.item&&!this.item.position)&&(l.secondary=!1,l.tertiary=!1),this.setRenderedName(n);var h=this._renderInstitutionName(r,n,l,i);this.institutions[r][i]=h}};a.NameOutput.prototype._renderInstitutionName=function(e,t,r,i){var s,n,o,l,u,m,c,h=this.getName(t,r.primary,!0),p=h.name,d=h.usedOrig;if(p&&(p=this.fixupInstitution(p,e,i)),s=!1,r.secondary){h=this.getName(t,r.secondary,!1,d);var s=h.name;d=h.usedOrig,s&&(s=this.fixupInstitution(s,e,i))}n=!1,r.tertiary&&(h=this.getName(t,r.tertiary,!1,d),n=h.name,n&&(n=this.fixupInstitution(n,e,i)));var v={l:{pri:!1,sec:!1,ter:!1},s:{pri:!1,sec:!1,ter:!1}};switch(p&&(v.l.pri=p.long,v.s.pri=p.short.length?p.short:p.long),s&&(v.l.sec=s.long,v.s.sec=s.short.length?s.short:s.long),n&&(v.l.ter=n.long,v.s.ter=n.short.length?n.short:n.long),this.institution.strings["institution-parts"]){case"short":p.short.length?(l=this._getShortStyle(),u=[this._composeOneInstitutionPart([v.s.pri,v.s.sec,v.s.ter],r,l,e)]):(o=this._getLongStyle(p,e,i),u=[this._composeOneInstitutionPart([v.l.pri,v.l.sec,v.l.ter],r,o,e)]);break;case"short-long":o=this._getLongStyle(p,e,i),l=this._getShortStyle(),m=this._renderOneInstitutionPart(p.short,l),c=this._composeOneInstitutionPart([v.l.pri,v.l.sec,v.l.ter],r,o,e),u=[m,c];break;case"long-short":o=this._getLongStyle(p,e,i),l=this._getShortStyle(),m=this._renderOneInstitutionPart(p.short,l),c=this._composeOneInstitutionPart([v.l.pri,v.l.sec,v.l.ter],r,o,e),u=[c,m];break;default:o=this._getLongStyle(p,e,i),u=[this._composeOneInstitutionPart([v.l.pri,v.l.sec,v.l.ter],r,o,e)];break}var f=this._join(u," ");return f&&(f.isInstitution=!0),this.state.tmp.name_node.children.push(f),f};a.NameOutput.prototype._composeOneInstitutionPart=function(e,t,r){var i=!1,s=!1,n=!1,o,l,u;if(e[0]){if(o=a.Util.cloneToken(r),this.state.opt.citeAffixes[t.primary]&&this.state.opt.citeAffixes.institutions[t.primary].prefix==="<i>"){for(var m=!1,c=0,h=o.decorations.length;c<h;c+=1)r.decorations[c][0]==="@font-style"&&o.decorations[c][1]==="italic"&&(m=!0);m||o.decorations.push(["@font-style","italic"])}i=this._renderOneInstitutionPart(e[0],o)}e[1]&&(s=this._renderOneInstitutionPart(e[1],r)),e[2]&&(n=this._renderOneInstitutionPart(e[2],r));var p;if(s||n){this.state.output.openLevel("empty"),this.state.output.append(i),l=a.Util.cloneToken(r),t.secondary&&(l.strings.prefix=this.state.opt.citeAffixes.institutions[t.secondary].prefix,l.strings.suffix=this.state.opt.citeAffixes.institutions[t.secondary].suffix,l.strings.prefix||(l.strings.prefix=" "));var d=new a.Token;d.decorations.push(["@font-style","normal"]),d.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(d),this.state.output.append(s,l),this.state.output.closeLevel(),u=a.Util.cloneToken(r),t.tertiary&&(u.strings.prefix=this.state.opt.citeAffixes.institutions[t.tertiary].prefix,u.strings.suffix=this.state.opt.citeAffixes.institutions[t.tertiary].suffix,u.strings.prefix||(u.strings.prefix=" "));var v=new a.Token;v.decorations.push(["@font-style","normal"]),v.decorations.push(["@font-weight","normal"]),this.state.output.openLevel(v),this.state.output.append(n,u),this.state.output.closeLevel(),this.state.output.closeLevel(),p=this.state.output.pop()}else p=i;return p};a.NameOutput.prototype._renderOneInstitutionPart=function(e,t){for(var r=0,i=e.length;r<i;r+=1)if(e[r]){var s=e[r];if(this.state.tmp.strip_periods)s=s.replace(/\./g,"");else for(var n=0,o=t.decorations.length;n<o;n+=1)if(t.decorations[n][0]==="@strip-periods"&&t.decorations[n][1]==="true"){s=s.replace(/\./g,"");break}this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,a.LITERAL),s==="!here>>>"?e[r]=!1:(this.state.output.append(s,t,!0),e[r]=this.state.output.pop())}return typeof this.institution.strings["part-separator"]>"u"&&(this.institution.strings["part-separator"]=this.state.tmp.name_delimiter),this._join(e,this.institution.strings["part-separator"])};a.NameOutput.prototype._renderNames=function(e,t,r,i){var s=!1;if(t.length){for(var n=[],o=0,l=t.length;o<l;o+=1){var u=t[o],s,m;this.state.tmp.extension?m=["sort"]:u.isInstitution||u.literal?m=this.state.opt["cite-lang-prefs"].institutions:m=this.state.opt["cite-lang-prefs"].persons;var c={primary:"locale-orig",secondary:!1,tertiary:!1};if(m)for(var h=["primary","secondary","tertiary"],p=0,d=h.length;p<d&&!(m.length-1<p);p+=1)c[h[p]]="locale-"+m[p];else c.primary="locale-translat";if((this.state.tmp.sort_key_flag||this.state.tmp.area!=="bibliography"&&!(this.state.tmp.area==="citation"&&this.state.opt.xclass==="note"&&this.item&&!this.item.position))&&(c.secondary=!1,c.tertiary=!1),this.setRenderedName(u),!u.literal&&!u.isInstitution){var v=this._renderPersonalName(e,u,c,r,o,i),f=a.Util.cloneToken(this.name);this.state.output.append(v,f,!0),n.push(this.state.output.pop())}else n.push(this._renderInstitutionName(e,u,c,i))}s=this.joinPersons(n,r,i)}return s};a.NameOutput.prototype._renderPersonalName=function(e,t,r,i,s,n){var o=this.getName(t,r.primary,!0),l=this._renderOnePersonalName(o.name,i,s,n),u=!1;r.secondary&&(o=this.getName(t,r.secondary,!1,o.usedOrig),o.name&&(u=this._renderOnePersonalName(o.name,i,s,n)));var m=!1;r.tertiary&&(o=this.getName(t,r.tertiary,!1,o.usedOrig),o.name&&(m=this._renderOnePersonalName(o.name,i,s,n)));var c;if(u||m){this.state.output.openLevel("empty"),this.state.output.append(l);var h=new a.Token;r.secondary&&(h.strings.prefix=this.state.opt.citeAffixes.persons[r.secondary].prefix,h.strings.suffix=this.state.opt.citeAffixes.persons[r.secondary].suffix,h.strings.prefix||(h.strings.prefix=" ")),this.state.output.append(u,h);var p=new a.Token;r.tertiary&&(p.strings.prefix=this.state.opt.citeAffixes.persons[r.tertiary].prefix,p.strings.suffix=this.state.opt.citeAffixes.persons[r.tertiary].suffix,p.strings.prefix||(p.strings.prefix=" ")),this.state.output.append(m,p),this.state.output.closeLevel(),c=this.state.output.pop()}else c=l;return c};a.NameOutput.prototype._isRomanesque=function(e){var t=2;e.family.replace(/\"/g,"").match(a.ROMANESQUE_REGEXP)||(t=0),!t&&e.given&&e.given.match(a.STARTSWITH_ROMANESQUE_REGEXP)&&(t=1);var r;return t==2&&(e.multi&&e.multi.main?r=e.multi.main.slice(0,2):this.Item.language&&(r=this.Item.language.slice(0,2)),["ja","zh"].indexOf(r)>-1&&(t=1)),t};a.NameOutput.prototype._renderOnePersonalName=function(e,t,r,i){var s=e,n=this._droppingParticle(s,t,i),o=this._familyName(s),l=this._nonDroppingParticle(s),u=this._givenName(s,t,r),m=u.blob,c=this._nameSuffix(s);m===!1&&(n=!1,c=!1);var h=this.state.inheritOpt(this.name,"sort-separator");h||(h="");var p;s["comma-suffix"]?p=", ":p=" ";var d=this._isRomanesque(s);function v(O){return O?typeof O.blobs=="string"?["\u2019","'","-"," "].indexOf(O.blobs.slice(-1))>-1:v(O.blobs[O.blobs.length-1]):!1}var f=v(l),y;["fr","ru","cs"].indexOf(this.state.opt["default-locale"][0].slice(0,2))>-1?y="\xA0":y=" ";var b,g,A,E;if(d===0)b=this._join([l,o,m],"");else if(d===1||s["static-ordering"])g=this._join([l,o],y),b=this._join([g,m]," ");else if(s["reverse-ordering"])g=this._join([l,o],y),b=this._join([m,g]," ");else if(this.state.tmp.sort_key_flag)this.state.opt["demote-non-dropping-particle"]==="never"?(g=this._join([l,o],y),g=this._join([g,n]," "),g=this._join([g,m],this.state.opt.sort_sep),b=this._join([g,c]," ")):(E=this._join([m,n,l]," "),g=this._join([o,E],this.state.opt.sort_sep),b=this._join([g,c]," "));else if(this.state.inheritOpt(this.name,"name-as-sort-order")==="all"||this.state.inheritOpt(this.name,"name-as-sort-order")==="first"&&r===0&&(i===0||typeof i>"u"))["Lord","Lady"].indexOf(s.given)>-1&&(h=", "),["always","display-and-sort"].indexOf(this.state.opt["demote-non-dropping-particle"])>-1?(E=this._join([m,n],s["comma-dropping-particle"]+" "),E=this._join([E,l]," "),E&&this.given&&(E.strings.prefix=this.given.strings.prefix,E.strings.suffix=this.given.strings.suffix),o&&this.family&&(o.strings.prefix=this.family.strings.prefix,o.strings.suffix=this.family.strings.suffix),g=this._join([o,E],h),b=this._join([g,c],h)):(f?A=this._join([l,o],""):A=this._join([l,o],y),A&&this.family&&(A.strings.prefix=this.family.strings.prefix,A.strings.suffix=this.family.strings.suffix),E=this._join([m,n],s["comma-dropping-particle"]+" "),E&&this.given&&(E.strings.prefix=this.given.strings.prefix,E.strings.suffix=this.given.strings.suffix),g=this._join([A,E],h),b=this._join([g,c],h)),b.isInverted=!0;else{if(s["dropping-particle"]&&s.family&&!s["non-dropping-particle"]){var S=s["dropping-particle"],w=["'","\u02BC","\u2019","-"];w.indexOf(S.slice(-1))>-1&&S.slice(0,-1)!=="de"&&(o=this._join([n,o],""),n=!1)}f?(E=this._join([l,o],""),E=this._join([n,E],y)):E=this._join([n,l,o],y),E=this._join([E,c],p),E&&this.family&&(E.strings.prefix=this.family.strings.prefix,E.strings.suffix=this.family.strings.suffix),m&&this.given&&(m.strings.prefix=this.given.strings.prefix,m.strings.suffix=this.given.strings.suffix),E.strings.prefix&&(s["comma-dropping-particle"]="");var I;this.state.inheritOpt(this.name,"initialize-with")&&this.state.inheritOpt(this.name,"initialize-with").match(/[\u00a0\ufeff]/)&&u.initializationLevel===1?I=y:I=" ",b=this._join([m,E],s["comma-dropping-particle"]+I)}return this.state.tmp.group_context.tip.variable_success=!0,this.state.tmp.can_substitute.replace(!1,a.LITERAL),this.state.tmp.term_predecessor=!0,this.state.tmp.name_node.children.push(b),b};a.NameOutput.prototype._normalizeNameInput=function(e){var t={literal:e.literal,family:e.family,isInstitution:e.isInstitution,given:e.given,suffix:e.suffix,"comma-suffix":e["comma-suffix"],"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],"static-ordering":e["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":e["reverse-ordering"],"full-form-always":e["full-form-always"],"parse-names":e["parse-names"],"comma-dropping-particle":"",block_initialize:e.block_initialize,multi:e.multi};return this._parseName(t),t};a.NameOutput.prototype._stripPeriods=function(e,t){var r=this[e+"_decor"];if(t){if(this.state.tmp.strip_periods)t=t.replace(/\./g,"");else if(r){for(var i=0,s=r.decorations.length;i<s;i+=1)if(r.decorations[i][0]==="@strip-periods"&&r.decorations[i][1]==="true"){t=t.replace(/\./g,"");break}}}return t};a.NameOutput.prototype._nonDroppingParticle=function(e){var t=e["non-dropping-particle"];t&&this.state.tmp.sort_key_flag&&(t=t.replace(/[\'\u2019]/,""));var r=this._stripPeriods("family",t);return this.state.output.append(r,this.family_decor,!0)?this.state.output.pop():!1};a.NameOutput.prototype._droppingParticle=function(e,t,r){var i=e["dropping-particle"];i&&this.state.tmp.sort_key_flag&&(i=i.replace(/[\'\u2019]/,""));var s=this._stripPeriods("given",i);if(e["dropping-particle"]&&e["dropping-particle"].match(/^et.?al[^a-z]$/))this.state.inheritOpt(this.name,"et-al-use-last")?typeof r>"u"?this.etal_spec[t].freeters=2:this.etal_spec[t].persons=2:typeof r>"u"?this.etal_spec[t].freeters=1:this.etal_spec[t].persons=1,e["comma-dropping-particle"]="";else if(this.state.output.append(s,this.given_decor,!0))return this.state.output.pop();return!1};a.NameOutput.prototype._familyName=function(e){var t=this._stripPeriods("family",e.family);return this.state.output.append(t,this.family_decor,!0)?this.state.output.pop():!1};a.NameOutput.prototype._givenName=function(e,t,r){var i,s=this.state.inheritOpt(this.name,"form","name-form","long")!=="long",n=this.state.inheritOpt(this.name,"initialize")!==!1,o=typeof this.state.inheritOpt(this.name,"initialize-with")=="string"&&!e.block_initialize,l,u;if(e["full-form-always"])u=2;else{s?l=0:o?l=1:l=2;var m=this.state.tmp.disambig_settings.givens[t][r];m>l?u=m:u=l}var c=this.state.citation.opt["givenname-disambiguation-rule"];if(c&&c.slice(-14)==="-with-initials"&&(o=!0),e.family&&u===1)if(o){var h=this.state.inheritOpt(this.name,"initialize-with",!1,"");e.given=a.Util.Names.initializeWith(this.state,e.given,h,!n)}else e.given=a.Util.Names.unInitialize(this.state,e.given);else{if(u===0)return{blob:!1};u===2&&(e.given=a.Util.Names.unInitialize(this.state,e.given))}var p=this._stripPeriods("given",e.given),d=this.state.output.append(p,this.given_decor,!0);return d?(i=this.state.output.pop(),{blob:i,initializationLevel:u}):{blob:!1}};a.NameOutput.prototype._nameSuffix=function(e){var t=e.suffix,r;t&&typeof this.state.inheritOpt(this.name,"initialize-with")=="string"&&(t=a.Util.Names.initializeWith(this.state,t,this.state.inheritOpt(this.name,"initialize-with"),!0)),t=this._stripPeriods("family",t);var i="";t&&t.slice(-1)==="."&&(t=t.slice(0,-1),i=".");var s=this.state.output.append(t,"empty",!0);return s?(r=this.state.output.pop(),r.strings.suffix=i+r.strings.suffix,r):!1};a.NameOutput.prototype._getLongStyle=function(e){var t;return e.short.length?this.institutionpart["long-with-short"]?t=this.institutionpart["long-with-short"]:t=this.institutionpart.long:t=this.institutionpart.long,t||(t=new a.Token),t};a.NameOutput.prototype._getShortStyle=function(){var e;return this.institutionpart.short?e=this.institutionpart.short:e=new a.Token,e};a.NameOutput.prototype._parseName=function(e){if(!e["parse-names"]&&typeof e["parse-names"]<"u")return e;e.family&&!e.given&&e.isInstitution&&(e.literal=e.family,e.family=void 0,e.isInstitution=void 0);var t;e.family&&e.family.slice(0,1)==='"'&&e.family.slice(-1)==='"'||!e["parse-names"]&&typeof e["parse-names"]<"u"?(e.family=e.family.slice(1,-1),t=!0,e["parse-names"]=0):t=!1,this.state.opt.development_extensions.parse_names&&!e["non-dropping-particle"]&&e.family&&!t&&e.given&&(e["static-particles"]||a.parseParticles(e,!0))};a.NameOutput.prototype.getName=function(e,t,r,i){if(i&&t==="locale-orig")return{name:!1,usedOrig:i};e.family||(e.family=""),e.given||(e.given="");var s={};s["static-ordering"]=this.getStaticOrder(e);var n=!0,o;if(t!=="locale-orig"&&(n=!1,e.multi)){for(var l=this.state.opt[t],u=0,m=l.length;u<m;u+=1)if(o=l[u],e.multi._key[o]){n=!0;var c=e.isInstitution;e=e.multi._key[o],e.isInstitution=c,s=this.getNameParams(o),s.transliterated=!0;break}}if(n||(o=!1,e.multi&&e.multi.main?o=e.multi.main:this.Item.language&&(o=this.Item.language),o&&(s=this.getNameParams(o))),!r&&!n)return{name:!1,usedOrig:i};e.family||(e.family=""),e.given||(e.given=""),e.literal&&(delete e.family,delete e.given),e={family:e.family,given:e.given,"non-dropping-particle":e["non-dropping-particle"],"dropping-particle":e["dropping-particle"],suffix:e.suffix,"static-ordering":s["static-ordering"],"static-particles":e["static-particles"],"reverse-ordering":s["reverse-ordering"],"full-form-always":s["full-form-always"],"parse-names":e["parse-names"],"comma-suffix":e["comma-suffix"],"comma-dropping-particle":e["comma-dropping-particle"],transliterated:s.transliterated,block_initialize:s["block-initialize"],literal:e.literal,isInstitution:e.isInstitution,multi:e.multi},!e.literal&&!e.given&&e.family&&e.isInstitution&&(e.literal=e.family),e.literal&&(delete e.family,delete e.given),e=this._normalizeNameInput(e);var h;return i?h=i:h=!n,{name:e,usedOrig:h}};a.NameOutput.prototype.getNameParams=function(e){var t={},r=a.localeResolve(this.Item.language,this.state.opt["default-locale"][0]),i=this.state.locale[r.best]?r.best:this.state.opt["default-locale"][0],s=this.state.locale[i].opts["name-as-sort-order"],n=this.state.locale[i].opts["name-as-reverse-order"],o=this.state.locale[i].opts["name-never-short"],l=e.split("-")[0];return s&&s[l]&&(t["static-ordering"]=!0,t["reverse-ordering"]=!1),n&&n[l]&&(t["reverse-ordering"]=!0,t["static-ordering"]=!1),o&&o[l]&&(t["full-form-always"]=!0),t["static-ordering"]&&(t["block-initialize"]=!0),t};a.NameOutput.prototype.setRenderedName=function(e){if(this.state.tmp.area==="bibliography"){for(var t="",r=0,i=a.NAME_PARTS.length;r<i;r+=1)e[a.NAME_PARTS[r]]&&(t+=e[a.NAME_PARTS[r]]);this.state.tmp.rendered_name.push(t)}};a.NameOutput.prototype.fixupInstitution=function(e,t,r){!e.literal&&e.family&&(e.literal=e.family,delete e.family);var i=e.literal,s=i,n={long:i.split(/\s*\|\s*/),short:s.split(/\s*\|\s*/)};if(this.state.sys.getAbbreviation){if(this.institution.strings.form==="short"){let p=this.Item.jurisdiction;p=this.state.transform.loadAbbreviation(p,"institution-entire",i,this.Item.language),this.state.transform.abbrevs[p]["institution-entire"][i]?i=this.state.transform.abbrevs[p]["institution-entire"][i]:(p=this.Item.jurisdiction,p=this.state.transform.loadAbbreviation(p,"institution-part",i,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][i]&&(i=this.state.transform.abbrevs[p]["institution-part"][i])),i=this._quashChecks(p,i)}if(["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1){let p=this.Item.jurisdiction;p=this.state.transform.loadAbbreviation(p,"institution-part",s,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][s]&&(s=this.state.transform.abbrevs[p]["institution-part"][s]),s=this._quashChecks(p,s),["short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1&&s===i&&(s="")}if(n.long=i.split(/\s*\|\s*/),n.short=s.split(/\s*\|\s*/),["short","short-long","long-short"].indexOf(this.institution.strings["institution-parts"])>-1)for(var o=n.short.length-1;o>-1;o--){let p=this.Item.jurisdiction;var l=n.short[o];if(p=this.state.transform.loadAbbreviation(p,"institution-part",l,this.Item.language),this.state.transform.abbrevs[p]["institution-part"][l]&&(n.short[o]=this.state.transform.abbrevs[p]["institution-part"][l]),n.short[o].indexOf("|")>-1){let d=n.short,v=d[o].split(/\s*\|\s*/);n.short=d.slice(0,o).concat(v).concat(d.slice(o+1))}}if(this.state.opt.development_extensions.legacy_institution_name_ordering&&n.short.reverse(),n.short=this._trimInstitution(n.short),this.institution.strings["reverse-order"]&&n.short.reverse(),!this.state.tmp.just_looking&&this.Item.jurisdiction){let p=this.Item.jurisdiction;var u=this.state.tmp.abbrev_trimmer;if(u&&u[p]&&u[p][t])for(var m=0,c=n.short.length;m<c;m++){var h=n.short[m];n.short[m]=h.replace(u[p][t],"").trim()}}}return this.state.opt.development_extensions.legacy_institution_name_ordering&&n.long.reverse(),n.long=this._trimInstitution(n.long),this.institution.strings["reverse-order"]&&n.long.reverse(),n};a.NameOutput.prototype.getStaticOrder=function(e,t){var r=!1;return(!t&&e["static-ordering"]||this._isRomanesque(e)===0||(!e.multi||!e.multi.main)&&this.Item.language&&["vi","hu"].indexOf(this.Item.language)>-1||e.multi&&e.multi.main&&["vi","hu"].indexOf(e.multi.main.slice(0,2))>-1||this.state.opt["auto-vietnamese-names"]&&a.VIETNAMESE_NAMES.exec(e.family+" "+e.given)&&a.VIETNAMESE_SPECIALS.exec(e.family+e.given))&&(r=!0),r};a.NameOutput.prototype._quashChecks=function(e,r){var r=this.state.transform.quashCheck(e,r),i=r.split(/>>[0-9]{4}>>/),s=r.match(/>>([0-9]{4})>>/);r=i.pop();var n=this.Item["original-date"]?this.Item["original-date"]:this.Item.issued;if(n&&(n=parseInt(n.year,10),n=isNaN(n)?!1:n),n){if(i.length>0)for(var o=s.length-1;o>0&&!(n>=parseInt(s[o],10));o--)r=i.pop();r=r.replace(/\s*\|\s*/g,"|")}return r};a.NameOutput.prototype._trimInstitution=function(e){var t=!1,r=!1,i=!1,s=!1,n=e.slice();if(this.institution){if(typeof this.institution.strings["use-first"]<"u"&&(t=this.institution.strings["use-first"]),typeof this.institution.strings["use-last"]<"u"&&(i=this.institution.strings["use-last"]),typeof this.institution.strings["stop-first"]<"u"&&(s=this.institution.strings["stop-first"]),typeof this.institution.strings["stop-last"]<"u"&&(r=this.institution.strings["stop-last"]),t&&(r&&(n=n.slice(0,r*-1)),n=n.slice(0,t)),i){var o=e.slice();t?s=t:n=[],s&&(o=o.slice(s)),o=o.slice(i*-1),n=n.concat(o)}e=n}return e};a.PublisherOutput=function(e,t){this.state=e,this.group_tok=t,this.varlist=[]};a.PublisherOutput.prototype.render=function(){this.clearVars(),this.composeAndBlob(),this.composeElements(),this.composePublishers(),this.joinPublishers()};a.PublisherOutput.prototype.composeAndBlob=function(){this.and_blob={};var e=!1;this.group_tok.strings.and==="text"?e=this.state.getTerm("and"):this.group_tok.strings.and==="symbol"&&(e="&");var t=new a.Token;t.strings.suffix=" ",t.strings.prefix=" ",this.state.output.append(e,t,!0);var r=this.state.output.pop();t.strings.prefix=this.group_tok.strings["subgroup-delimiter"],this.state.output.append(e,t,!0);var i=this.state.output.pop();this.and_blob.single=!1,this.and_blob.multiple=!1,e&&(this.group_tok.strings["subgroup-delimiter-precedes-last"]==="always"?this.and_blob.single=i:this.group_tok.strings["subgroup-delimiter-precedes-last"]==="never"?(this.and_blob.single=r,this.and_blob.multiple=r):(this.and_blob.single=r,this.and_blob.multiple=i))};a.PublisherOutput.prototype.composeElements=function(){for(var e=0,t=2;e<t;e+=1)for(var r=["publisher","publisher-place"][e],i=0,s=this["publisher-list"].length;i<s;i+=1){var n=this[r+"-list"][i],o=this[r+"-token"];this.state.output.append(n,o,!0),this[r+"-list"][i]=this.state.output.pop()}};a.PublisherOutput.prototype.composePublishers=function(){for(var e,t=0,r=this["publisher-list"].length;t<r;t+=1)e=[this[this.varlist[0]+"-list"][t],this[this.varlist[1]+"-list"][t]],this["publisher-list"][t]=this._join(e,this.group_tok.strings.delimiter)};a.PublisherOutput.prototype.joinPublishers=function(){var e=this["publisher-list"],t=this._join(e,this.group_tok.strings["subgroup-delimiter"],this.and_blob.single,this.and_blob.multiple,this.group_tok);this.state.output.append(t,"literal")};a.PublisherOutput.prototype._join=a.NameOutput.prototype._join;a.PublisherOutput.prototype._getToken=a.NameOutput.prototype._getToken;a.PublisherOutput.prototype.clearVars=function(){this.state.tmp["publisher-list"]=!1,this.state.tmp["publisher-place-list"]=!1,this.state.tmp["publisher-group-token"]=!1,this.state.tmp["publisher-token"]=!1,this.state.tmp["publisher-place-token"]=!1};a.evaluateLabel=function(e,t,r,i){var s;e.strings.term==="locator"?(i&&i.label&&(i.label==="sub verbo"?s="sub-verbo":s=i.label),s||(s="page")):s=e.strings.term;var n=e.strings.plural;if(typeof n!="number"){var o=i&&e.strings.term==="locator"?i:r;o[e.strings.term]&&(t.processNumber(!1,o,e.strings.term,r.type),n=t.tmp.shadow_numbers[e.strings.term].plural,!t.tmp.shadow_numbers[e.strings.term].labelForm&&!t.tmp.shadow_numbers[e.strings.term].labelDecorations&&(e.strings.form?t.tmp.shadow_numbers[e.strings.term].labelForm=e.strings.form:t.tmp.group_context.tip.label_form&&(t.tmp.shadow_numbers[e.strings.term].labelForm=t.tmp.group_context.tip.label_form),t.tmp.shadow_numbers[e.strings.term].labelCapitalizeIfFirst=e.strings.capitalize_if_first,t.tmp.shadow_numbers[e.strings.term].labelDecorations=e.decorations.slice()),["locator","number","page"].indexOf(e.strings.term)>-1&&t.tmp.shadow_numbers[e.strings.term].label&&(s=t.tmp.shadow_numbers[e.strings.term].label),e.decorations&&t.opt.development_extensions.csl_reverse_lookup_support&&(e.decorations.reverse(),e.decorations.push(["@showid","true",e.cslid]),e.decorations.reverse()))}return a.castLabel(t,e,s,n,a.TOLERANT)};a.castLabel=function(e,t,r,i,s){var n=t.strings.form,o=t.strings.capitalize_if_first;e.tmp.group_context.tip.label_form&&(n==="static"?e.tmp.group_context.tip.label_static=!0:n=e.tmp.group_context.tip.label_form),e.tmp.group_context.tip.label_capitalize_if_first&&(o=e.tmp.group_context.tip.label_capitalize_if_first);var l=e.getTerm(r,n,i,!1,s,t.default_locale);if(o&&(l=a.Output.Formatters["capitalize-first"](e,l)),e.tmp.strip_periods)l=l.replace(/\./g,"");else for(var u=0,m=t.decorations.length;u<m;u+=1)if(t.decorations[u][0]==="@strip-periods"&&t.decorations[u][1]==="true"){l=l.replace(/\./g,"");break}return l};a.Node.name={build:function(e,t){var r;if([a.SINGLETON,a.START].indexOf(this.tokentype)>-1){var i;typeof e.tmp.root>"u"?(i=void 0,e.tmp.root="citation"):i=e.tmp.root,e.inheritOpt(this,"et-al-subsequent-min")&&e.inheritOpt(this,"et-al-subsequent-min")!==e.inheritOpt(this,"et-al-min")&&(e.opt.update_mode=a.POSITION),e.inheritOpt(this,"et-al-subsequent-use-first")&&e.inheritOpt(this,"et-al-subsequent-use-first")!==e.inheritOpt(this,"et-al-use-first")&&(e.opt.update_mode=a.POSITION),e.tmp.root=i,r=function(s){s.tmp.etal_term="et-al",s.tmp.name_delimiter=s.inheritOpt(this,"delimiter","name-delimiter",", "),s.tmp["delimiter-precedes-et-al"]=s.inheritOpt(this,"delimiter-precedes-et-al"),s.inheritOpt(this,"and")==="text"?this.and_term=s.getTerm("and","long",0):s.inheritOpt(this,"and")==="symbol"&&(s.opt.development_extensions.expect_and_symbol_form?this.and_term=s.getTerm("and","symbol",0):this.and_term="&"),s.tmp.and_term=this.and_term,a.STARTSWITH_ROMANESQUE_REGEXP.test(this.and_term)?(this.and_prefix_single=" ",this.and_prefix_multiple=", ",typeof s.tmp.name_delimiter=="string"&&(this.and_prefix_multiple=s.tmp.name_delimiter),this.and_suffix=" "):(this.and_prefix_single="",this.and_prefix_multiple="",this.and_suffix=""),s.inheritOpt(this,"delimiter-precedes-last")==="always"?this.and_prefix_single=s.tmp.name_delimiter:s.inheritOpt(this,"delimiter-precedes-last")==="never"?this.and_prefix_multiple&&(this.and_prefix_multiple=" "):s.inheritOpt(this,"delimiter-precedes-last")==="after-inverted-name"&&(this.and_prefix_single&&(this.and_prefix_single=s.tmp.name_delimiter),this.and_prefix_multiple&&(this.and_prefix_multiple=" ")),this.and={},s.inheritOpt(this,"and")?(s.output.append(this.and_term,"empty",!0),this.and.single=s.output.pop(),this.and.single.strings.prefix=this.and_prefix_single,this.and.single.strings.suffix=this.and_suffix,s.output.append(this.and_term,"empty",!0),this.and.multiple=s.output.pop(),this.and.multiple.strings.prefix=this.and_prefix_multiple,this.and.multiple.strings.suffix=this.and_suffix):s.tmp.name_delimiter&&(this.and.single=new a.Blob(s.tmp.name_delimiter),this.and.single.strings.prefix="",this.and.single.strings.suffix="",this.and.multiple=new a.Blob(s.tmp.name_delimiter),this.and.multiple.strings.prefix="",this.and.multiple.strings.suffix=""),this.ellipsis={},s.inheritOpt(this,"et-al-use-last")&&(this.ellipsis_term="\u2026",this.ellipsis_prefix_single=" ",this.ellipsis_prefix_multiple=s.inheritOpt(this,"delimiter","name-delimiter",", "),this.ellipsis_suffix=" ",this.ellipsis.single=new a.Blob(this.ellipsis_term),this.ellipsis.single.strings.prefix=this.ellipsis_prefix_single,this.ellipsis.single.strings.suffix=this.ellipsis_suffix,this.ellipsis.multiple=new a.Blob(this.ellipsis_term),this.ellipsis.multiple.strings.prefix=this.ellipsis_prefix_multiple,this.ellipsis.multiple.strings.suffix=this.ellipsis_suffix),typeof s.tmp["et-al-min"]>"u"&&(s.tmp["et-al-min"]=s.inheritOpt(this,"et-al-min")),typeof s.tmp["et-al-use-first"]>"u"&&(s.tmp["et-al-use-first"]=s.inheritOpt(this,"et-al-use-first")),typeof s.tmp["et-al-use-last"]>"u"&&(s.tmp["et-al-use-last"]=s.inheritOpt(this,"et-al-use-last")),s.nameOutput.name=this},e.build.name_flag=!0,this.execs.push(r)}t.push(this)}};a.Node["name-part"]={build:function(e){e.build[this.strings.name]=this}};a.Node.names={build:function(e,t){var r;if((this.tokentype===a.START||this.tokentype===a.SINGLETON)&&(a.Util.substituteStart.call(this,e,t),e.build.substitute_level.push(1)),this.tokentype===a.SINGLETON){e.build.names_variables[e.build.names_variables.length-1].concat(this.variables);for(var i in this.variables){var s=this.variables[i],n=e.build.name_label[e.build.name_label.length-1];Object.keys(n).length&&(n[s]=n[Object.keys(n)[0]])}r=function(u){u.nameOutput.reinit(this,this.variables_real[0])},this.execs.push(r)}if(this.tokentype===a.START&&(e.build.names_flag=!0,e.build.name_flag=!1,e.build.names_level+=1,e.build.names_variables.push(this.variables),e.build.name_label.push({}),r=function(u){u.tmp.can_substitute.push(!0),u.tmp.name_node={},u.tmp.name_node.children=[],u.nameOutput.init(this)},this.execs.push(r)),this.tokentype===a.END){for(var i=0,o=3;i<o;i+=1){var l=["family","given","et-al"][i];this[l]=e.build[l],e.build.names_level===1&&(e.build[l]=void 0)}this.label=e.build.name_label[e.build.name_label.length-1],e.build.names_level+=-1,e.build.names_variables.pop(),e.build.name_label.pop(),r=function(u){u.tmp.etal_node?this.etal_style=u.tmp.etal_node:this.etal_style="empty",this.etal_term=u.getTerm(u.tmp.etal_term,"long",0),this.etal_prefix_single=" ",this.etal_prefix_multiple=u.tmp.name_delimiter,u.tmp["delimiter-precedes-et-al"]==="always"?this.etal_prefix_single=u.tmp.name_delimiter:u.tmp["delimiter-precedes-et-al"]==="never"?this.etal_prefix_multiple=" ":u.tmp["delimiter-precedes-et-al"]==="after-inverted-name"&&(this.etal_prefix_single=u.tmp.name_delimiter,this.etal_prefix_multiple=" "),this.etal_suffix="",a.STARTSWITH_ROMANESQUE_REGEXP.test(this.etal_term)||(this.etal_prefix_single===" "&&(this.etal_prefix_single=""),this.etal_prefix_multiple===" "&&(this.etal_prefix_multiple=""),this.etal_suffix===" "&&(this.etal_suffix=""));for(var m=0,c=3;m<c;m+=1){var h=["family","given"][m];u.nameOutput[h]=this[h]}u.nameOutput.with=this.with;var p="with",d="",v="";a.STARTSWITH_ROMANESQUE_REGEXP.test(p)&&(d=" ",v=" ");var f={};f.single=new a.Blob(p),f.single.strings.suffix=v,f.multiple=new a.Blob(p),f.multiple.strings.suffix=v,u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="always"?(f.single.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter"),f.multiple.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter")):u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="contextual"?(f.single.strings.prefix=d,f.multiple.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter")):u.inheritOpt(u.nameOutput.name,"delimiter-precedes-last")==="after-inverted-name"?(f.single.strings.prefix=u.inheritOpt(this,"delimiter","names-delimiter"),f.multiple.strings.prefix=d):(f.single.strings.prefix=d,f.multiple.strings.prefix=d),u.nameOutput.with=f,u.nameOutput.label=this.label,u.nameOutput.etal_style=this.etal_style,u.nameOutput.etal_term=this.etal_term,u.nameOutput.etal_prefix_single=this.etal_prefix_single,u.nameOutput.etal_prefix_multiple=this.etal_prefix_multiple,u.nameOutput.etal_suffix=this.etal_suffix,u.nameOutput.outputNames(),u.tmp["et-al-use-first"]=void 0,u.tmp["et-al-min"]=void 0,u.tmp["et-al-use-last"]=void 0},this.execs.push(r),r=function(u){u.tmp.can_substitute.pop()||u.tmp.can_substitute.replace(!1,a.LITERAL),u.tmp.can_substitute.mystack.length===1&&(u.tmp.can_block_substitute=!1)},this.execs.push(r),e.build.name_flag=!1}t.push(this),(this.tokentype===a.END||this.tokentype===a.SINGLETON)&&(e.build.substitute_level.pop(),a.Util.substituteEnd.call(this,e,t))}};a.Node.number={build:function(e,t){var r;a.Util.substituteStart.call(this,e,t),this.strings.form==="roman"?this.formatter=e.fun.romanizer:this.strings.form==="ordinal"?this.formatter=e.fun.ordinalizer:this.strings.form==="long-ordinal"&&(this.formatter=e.fun.long_ordinalizer),typeof this.successor_prefix>"u"&&(this.successor_prefix=e[e.build.area].opt.layout_delimiter),typeof this.splice_prefix>"u"&&(this.splice_prefix=e[e.build.area].opt.layout_delimiter),r=function(i,s,n){if(this.variables.length!==0){var o;if(o=this.variables[0],typeof n>"u")var n={};if(["locator","locator-extra"].indexOf(o)>-1){if(i.tmp.just_looking||!n[o])return}else if(!s[o])return;o==="collection-number"&&s.type==="legal_case"&&(i.tmp.renders_collection_number=!0);var l=this;if(i.tmp.group_context.tip.force_suppress)return!1;if(["locator","locator-extra"].indexOf(o)>-1?i.processNumber.call(i,l,n,o,s.type):(!i.tmp.group_context.tip.condition&&s[o]&&(i.tmp.just_did_number=(""+s[o]).match(/[0-9]$/)),i.processNumber.call(i,l,s,o,s.type)),this.substring){var u=s[o].slice(this.substring);i.output.append(u,l)}else a.Util.outputNumericField(i,o,s.id);["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!i.tmp.just_looking&&(i.tmp.done_vars.push(this.variables_real[0]),i.tmp.group_context.tip.done_vars.push(this.variables_real[0]))}},this.execs.push(r),t.push(this),a.Util.substituteEnd.call(this,e,t)}};a.Node.sort={build:function(e,t){if(t=e[e.build.root+"_sort"].tokens,this.tokentype===a.START){e.build.area==="citation"&&(e.opt.sort_citations=!0),e.build.area=e.build.root+"_sort",e.build.extension="_sort";var r=function(i,s){if(i.opt.has_layout_locale){for(var n=a.localeResolve(s.language,i.opt["default-locale"][0]),o=i[i.tmp.area.slice(0,-5)].opt.sort_locales,l,u=0,m=o.length;u<m&&(l=o[u][n.bare],l||(l=o[u][n.best]),!l);u+=1);l||(l=i.opt["default-locale"][0]),i.tmp.lang_sort_hold=i.opt.lang,i.opt.lang=l}};this.execs.push(r)}if(this.tokentype===a.END){e.build.area=e.build.root,e.build.extension="";var r=function(s){s.opt.has_layout_locale&&(s.opt.lang=s.tmp.lang_sort_hold,delete s.tmp.lang_sort_hold)};this.execs.push(r)}t.push(this)}};a.Node.substitute={build:function(e,t){var r;if(this.tokentype===a.START){var i=new a.Token("choose",a.START);a.Node.choose.build.call(i,e,t);var s=new a.Token("if",a.SINGLETON);r=function(){return!!(e.tmp.value.length&&!e.tmp.common_term_match_fail)},s.tests=[r],s.test=e.fun.match.any(s,e,s.tests),t.push(s),r=function(o){o.tmp.can_block_substitute=!0,o.tmp.value.length&&!o.tmp.common_term_match_fail&&o.tmp.can_substitute.replace(!1,a.LITERAL),o.tmp.common_term_match_fail=!1},this.execs.push(r),t.push(this)}if(this.tokentype===a.END){t.push(this);var n=new a.Token("choose",a.END);a.Node.choose.build.call(n,e,t)}}};a.Node.text={build:function(e,t){var r,i,s,n,o,l,u,m,c,h,p,d;if(this.postponed_macro){var v=a.Util.cloneToken(this);v.name="group",v.tokentype=a.START,a.Node.group.build.call(v,e,t),a.expandMacro.call(e,this,t);var f=a.Util.cloneToken(this);f.name="group",f.tokentype=a.END,this.postponed_macro==="juris-locator-label"&&(f.isJurisLocatorLabel=!0),a.Node.group.build.call(f,e,t)}else{if(a.Util.substituteStart.call(this,e,t),this.variables_real||(this.variables_real=[]),this.variables||(this.variables=[]),i="long",s=0,this.strings.form&&(i=this.strings.form),this.strings.plural&&(s=this.strings.plural),this.variables_real[0]==="citation-number"||this.variables_real[0]==="year-suffix"||this.variables_real[0]==="citation-label")this.variables_real[0]==="citation-number"?(e.build.root==="citation"&&(e.opt.update_mode=a.NUMERIC),e.build.root==="bibliography"&&(e.opt.bib_mode=a.NUMERIC),e[e.tmp.area].opt.collapse==="citation-number"&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,this.splice_prefix=e[e.build.area].opt.layout_delimiter,r=function(E,S,w){if(n=""+S.id,!E.tmp.just_looking){if(E.tmp.area.slice(-5)==="_sort"&&this.variables[0]==="citation-number"){if(E.tmp.area==="bibliography_sort"&&E.tmp.group_context.tip.done_vars.push("citation-number"),E.tmp.area==="citation_sort"&&E.bibliography_sort.tmp.citation_number_map)var I=E.bibliography_sort.tmp.citation_number_map[E.registry.registry[S.id].seq];else var I=E.registry.registry[S.id].seq;I&&(I=a.Util.padding(""+I)),E.output.append(I,this);return}w&&w["author-only"]&&E.tmp.element_trace.replace("suppress-me"),E.tmp.area!=="bibliography_sort"&&E.bibliography_sort.tmp.citation_number_map&&E.bibliography_sort.opt.citation_number_sort_direction===a.DESCENDING?I=E.bibliography_sort.tmp.citation_number_map[E.registry.registry[n].seq]:I=E.registry.registry[n].seq,E.opt.citation_number_slug?E.output.append(E.opt.citation_number_slug,this):(l=new a.NumericBlob(E,!1,I,this,S.id),E.tmp.in_cite_predecessor&&(l.suppress_splice_prefix=!0),E.output.append(l,"literal"))}},this.execs.push(r)):this.variables_real[0]==="year-suffix"?(e.opt.has_year_suffix=!0,e[e.tmp.area].opt.collapse==="year-suffix-ranged"&&(this.range_prefix=e.getTerm("citation-range-delimiter")),this.successor_prefix=e[e.build.area].opt.layout_delimiter,e[e.tmp.area].opt["year-suffix-delimiter"]&&(this.successor_prefix=e[e.build.area].opt["year-suffix-delimiter"]),r=function(E,S){if(E.registry.registry[S.id]&&E.registry.registry[S.id].disambig.year_suffix!==!1&&!E.tmp.just_looking){o=parseInt(E.registry.registry[S.id].disambig.year_suffix,10),E[E.tmp.area].opt.cite_group_delimiter&&(this.successor_prefix=E[E.tmp.area].opt.cite_group_delimiter),l=new a.NumericBlob(E,!1,o,this,S.id),u=new a.Util.Suffixator(a.SUFFIX_CHARS),l.setFormatter(u),E.output.append(l,"literal"),m=!1;for(var w=0,I=E.tmp.group_context.mystack.length;w<I;w++){var O=E.tmp.group_context.mystack[w];if(!O.variable_success&&(O.variable_attempt||!O.variable_attempt&&!O.term_intended)){m=!0;break}}c=E[E.tmp.area].opt["year-suffix-delimiter"],m&&c&&!E.tmp.sort_key_flag&&(E.tmp.splice_delimiter=E[E.tmp.area].opt["year-suffix-delimiter"])}},this.execs.push(r)):this.variables_real[0]==="citation-label"&&(e.build.root==="bibliography"&&(e.opt.bib_mode=a.TRIGRAPH),e.opt.has_year_suffix=!0,r=function(E,S){h=S["citation-label"],h||(h=E.getCitationLabel(S)),E.tmp.just_looking||(p="",E.registry.registry[S.id]&&E.registry.registry[S.id].disambig.year_suffix!==!1&&(o=parseInt(E.registry.registry[S.id].disambig.year_suffix,10),p=E.fun.suffixator.format(o)),h+=p),E.output.append(h,this)},this.execs.push(r));else if(this.strings.term)r=function(E,S){var w=E.opt.gender[S.type],I=this.strings.term;I=E.getTerm(I,i,s,w,a.TOLERANT,this.default_locale);var O;if(I!==""&&(E.tmp.group_context.tip.term_intended=!0),a.UPDATE_GROUP_CONTEXT_CONDITION(E,I,null,this),!E.tmp.term_predecessor&&!(E.opt.class==="in-text"&&E.tmp.area==="citation")?O=a.Output.Formatters["capitalize-first"](E,I):O=I,E.tmp.strip_periods)O=O.replace(/\./g,"");else for(var D=0,_=this.decorations.length;D<_;D+=1)if(this.decorations[D][0]==="@strip-periods"&&this.decorations[D][1]==="true"){O=O.replace(/\./g,"");break}E.output.append(O,this),E.tmp.can_block_substitute&&E.tmp.can_substitute.replace(!1,a.LITERAL)},this.execs.push(r),e.build.term=!1,e.build.form=!1,e.build.plural=!1;else if(this.variables_real.length){if(r=function(E,S){this.variables_real[0]!=="locator"&&(E.tmp.have_collapsed=!1),!E.tmp.group_context.tip.condition&&S[this.variables[0]]&&(E.tmp.just_did_number=!1);var w=S[this.variables[0]];w&&!E.tmp.group_context.tip.condition&&((""+w).slice(-1).match(/[0-9]/)?E.tmp.just_did_number=!0:E.tmp.just_did_number=!1)},this.execs.push(r),a.MULTI_FIELDS.indexOf(this.variables_real[0])>-1||this.variables_real[0].indexOf("-main")>-1||this.variables_real[0].indexOf("-sub")>-1||["language-name","language-name-original"].indexOf(this.variables_real[0])>-1){var y=this.variables[0],b=!1,g=!1,A=!1;i==="short"?this.variables_real[0].slice(-6)!=="-short"&&(g=this.variables_real[0]+"-short"):y=!1,e.build.extension?A=!0:(A=!0,b=!0),r=e.transform.getOutputFunction(this.variables,y,b,g,A)}else a.CITE_FIELDS.indexOf(this.variables_real[0])>-1?r=function(E,S,w){w&&w[this.variables[0]]&&(E.processNumber(this,w,this.variables[0],S.type),a.Util.outputNumericField(E,this.variables[0],S.id),["locator","locator-extra"].indexOf(this.variables_real[0])>-1&&!E.tmp.just_looking&&E.tmp.done_vars.push(this.variables_real[0]))}:["page","page-first","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume"].indexOf(this.variables_real[0])>-1?r=function(E,S){E.processNumber(this,S,this.variables[0],S.type),a.Util.outputNumericField(E,this.variables[0],S.id)}:["URL","DOI"].indexOf(this.variables_real[0])>-1?r=function(E,S){var w;if(this.variables[0]&&(w=E.getVariable(S,this.variables[0],i),w))if(this.variables[0]==="URL"&&i==="short"&&(w=w.replace(/(.*\.[^\/]+)\/.*/,"$1"),w.match(/\/\/www\./)&&(w=w.replace(/https?:\/\//,""))),E.opt.development_extensions.wrap_url_and_doi)if(!this.decorations.length||this.decorations[0][0]!=="@"+this.variables[0]){var I=a.Util.cloneToken(this),O=new a.Blob(null,null,"url-wrapper");if(O.decorations.push(["@DOI","true"]),this.variables_real[0]==="DOI"){var D;this.strings.prefix&&this.strings.prefix.match(/^.*https:\/\/doi\.org\/$/)&&(w=w.replace(/^https?:\/\/doi\.org\//,""),w.match(/^https?:\/\//)?D="":D="https://doi.org/",I.strings.prefix=this.strings.prefix.slice(0,I.strings.prefix.length-16));var _=new a.Blob(D),x=new a.Blob(w);O.push(_),O.push(x),E.output.append(O,I,!1,!1,!0)}else{var x=new a.Blob(w);O.push(x),E.output.append(O,I,!1,!1,!0)}}else E.output.append(w,this,!1,!1,!0);else{if(this.decorations.length)for(var k=this.decorations.length-1;k>-1;k--)this.decorations[k][0]==="@"+this.variables[0]&&(this.decorations=this.decorations.slice(0,k).concat(this.decorations.slice(k+1)));E.output.append(w,this,!1,!1,!0)}}:this.variables_real[0]==="section"?r=function(E,S){var w;w=E.getVariable(S,this.variables[0],i),w&&E.output.append(w,this)}:this.variables_real[0]==="hereinafter"?r=function(E,S){var w=E.transform.abbrevs.default.hereinafter[S.id];w&&(E.output.append(w,this),E.tmp.group_context.tip.variable_success=!0)}:r=function(E,S){var w;this.variables[0]&&(w=E.getVariable(S,this.variables[0],i),w&&(w=""+w,w=w.split("\\").join(""),E.output.append(w,this)))};this.execs.push(r)}else this.strings.value&&(r=function(E){E.tmp.group_context.tip.term_intended=!0,a.UPDATE_GROUP_CONTEXT_CONDITION(E,this.strings.value,!0,this),E.output.append(this.strings.value,this),E.tmp.can_block_substitute&&E.tmp.can_substitute.replace(!1,a.LITERAL)},this.execs.push(r));t.push(this),a.Util.substituteEnd.call(this,e,t)}}};a.Node.intext={build:function(e,t){if(this.tokentype===a.START){e.build.area="intext",e.build.root="intext",e.build.extension="";var r=function(i,s){i.tmp.area="intext",i.tmp.root="intext",i.tmp.extension=""};this.execs.push(r)}this.tokentype===a.END&&(e.intext_sort={opt:{sort_directions:e.citation_sort.opt.sort_directions}},e.intext.srt=e.citation.srt),t.push(this)}};a.Attributes={};a.Attributes["@disambiguate"]=function(e,t){if(this.tests||(this.tests=[]),t==="true"){e.opt.has_disambiguate=!0;var r=function(i){if(e.tmp.area==="bibliography"){if(e.tmp.disambiguate_count<e.registry.registry[i.id].disambig.disambiguate)return e.tmp.disambiguate_count+=1,!0}else if(e.tmp.disambiguate_maxMax+=1,e.tmp.disambig_settings.disambiguate&&e.tmp.disambiguate_count<e.tmp.disambig_settings.disambiguate)return e.tmp.disambiguate_count+=1,!0;return!1};this.tests.push(r)}else if(t==="check-ambiguity-and-backreference"){var r=function(s){return!!(e.registry.registry[s.id].disambig.disambiguate&&e.registry.registry[s.id]["citation-count"]>1)};this.tests.push(r)}};a.Attributes["@is-numeric"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(n){return function(o,l){var u=o;if(l&&["locator","locator-extra"].indexOf(n)>-1&&(u=l),!u[n])return!1;if(a.NUMERIC_VARIABLES.indexOf(n)>-1){if(e.tmp.shadow_numbers[n]||e.processNumber(!1,u,n,o.type),e.tmp.shadow_numbers[n].numeric)return!0}else if(["title","version"].indexOf(n)>-1&&u[n].slice(-1)===""+parseInt(u[n].slice(-1),10))return!0;return!1}},s=0;s<r.length;s+=1)this.tests.push(i(r[s]))};a.Attributes["@is-uncertain-date"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){return!!(l[o]&&l[o].circa)}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@locator"]=function(e,t){this.tests||(this.tests=[]);var r=t.replace("sub verbo","sub-verbo");r=r.split(/\s+/);for(var i=function(o){return function(l,u){var m;return e.processNumber(!1,u,"locator"),m=e.tmp.shadow_numbers.locator.label,!!(m&&o===m)}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@position"]=function(e,t){this.tests||(this.tests=[]);var r;e.opt.update_mode=a.POSITION;for(var i=t.split(/\s+/),s=function(m,c){return!!(c&&a.POSITION_MAP[c.position]>=a.POSITION_MAP[a.POSITION_SUBSEQUENT]&&c["near-note"])},n=function(m,c){return!!(c&&a.POSITION_MAP[c.position]==a.POSITION_MAP[a.POSITION_SUBSEQUENT]&&!c["near-note"])},o=function(m){return function(c,h){if(e.tmp.area==="bibliography")return!1;if(h&&typeof h.position>"u"&&(h.position=0),h&&typeof h.position=="number"){if(h.position===0&&m===0)return!0;if(m>0&&a.POSITION_MAP[h.position]>=a.POSITION_MAP[m])return!0}else if(m===0)return!0;return!1}},l=0,u=i.length;l<u;l+=1){var r=i[l];r==="first"?r=a.POSITION_FIRST:r==="container-subsequent"?r=a.POSITION_CONTAINER_SUBSEQUENT:r==="subsequent"?r=a.POSITION_SUBSEQUENT:r==="ibid"?r=a.POSITION_IBID:r==="ibid-with-locator"&&(r=a.POSITION_IBID_WITH_LOCATOR),r==="near-note"?this.tests.push(s):r==="far-note"?this.tests.push(n):this.tests.push(o(r))}};a.Attributes["@type"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(l){return function(u){var m=u.type===l;return!!m}},s=[],n=0,o=r.length;n<o;n+=1)s.push(i(r[n]));this.tests.push(e.fun.match.any(this,e,s))};a.Attributes["@variable"]=function(e,t){this.tests||(this.tests=[]);var r;if(this.variables=t.split(/\s+/),this.variables_real=this.variables.slice(),this.name==="label"&&this.variables[0])this.strings.term=this.variables[0];else if(["names","date","text","number"].indexOf(this.name)>-1)r=function(o,l,u){for(var m=this.variables.length-1;m>-1;m+=-1)this.variables.pop();for(var m=0,c=this.variables_real.length;m<c;m++)o.tmp.done_vars.indexOf(this.variables_real[m])===-1&&this.variables.push(this.variables_real[m]),o.tmp.can_block_substitute&&o.tmp.done_vars.push(this.variables_real[m])},this.execs.push(r),r=function(o,l,u){for(var m=!1,c=0,h=this.variables.length;c<h;c++){var p=this.variables[c];if(["authority","committee"].indexOf(p)>-1&&typeof l[p]=="string"&&this.name==="names"){var d=!0,v=l[p].split(/\s*;\s*/),f={};if(l.multi&&l.multi._keys[p]){for(var y in l.multi._keys[p])if(f[y]=l.multi._keys[p][y].split(/\s*;\s*/),f[y].length!==v.length){d=!1;break}}d||(v=[l[p]],f=l.multi._keys[p]);for(var b=0,g=v.length;b<g;b++){var A={literal:v[b],multi:{_key:{}}};for(var y in f){var E={literal:f[y][b]};A.multi._key[y]=E}v[b]=A}l[p]=v}if(this.strings.form==="short"&&!l[p]&&(p==="title"?p="title-short":p==="container-title"&&(p="container-title-short")),p==="year-suffix"){m=!0;break}else if(a.DATE_VARIABLES.indexOf(p)>-1){if(o.opt.development_extensions.locator_date_and_revision&&p==="locator-date"){m=!0;break}if(l[p]){for(var S in l[p])if(!(this.dateparts.indexOf(S)===-1&&S!=="literal")&&l[p][S]){m=!0;break}if(m)break}}else if(p==="locator"){u&&u.locator&&(m=!0);break}else if(p==="locator-extra"){u&&u["locator-extra"]&&(m=!0);break}else if(["citation-number","citation-label"].indexOf(p)>-1){m=!0;break}else if(p==="first-reference-note-number"){u&&u["first-reference-note-number"]&&(m=!0);break}else if(p==="first-container-reference-note-number"){u&&u["first-container-reference-note-number"]&&(m=!0);break}else if(p==="hereinafter"){o.transform.abbrevs.default.hereinafter[l.id]&&o.sys.getAbbreviation&&l.id&&(m=!0);break}else{if(typeof l[p]=="object")break;if(typeof l[p]=="string"&&l[p]){m=!0;break}else if(typeof l[p]=="number"){m=!0;break}}if(m)break}if(m){for(var c=0,h=this.variables_real.length;c<h;c++){var p=this.variables_real[c];(p!=="citation-number"||o.tmp.area!=="bibliography")&&(o.tmp.cite_renders_content=!0),o.tmp.group_context.tip.variable_success=!0,o.tmp.can_substitute.value()&&o.tmp.area==="bibliography"&&typeof l[p]=="string"&&(o.tmp.name_node.top=o.output.current.value(),o.tmp.rendered_name.push(l[p]))}o.tmp.can_substitute.replace(!1,a.LITERAL)}else o.tmp.group_context.tip.variable_attempt=!0},this.execs.push(r);else if(["if","else-if","condition"].indexOf(this.name)>-1)for(var i=function(o){return function(l,u){var m=l;if(u&&["locator","locator-extra","first-reference-note-number","first-container-reference-note-number","locator-date"].indexOf(o)>-1&&(m=u),o==="hereinafter"&&e.sys.getAbbreviation&&m.id){if(e.transform.abbrevs.default.hereinafter[m.id])return!0}else if(m[o]){if(typeof m[o]=="number"||typeof m[o]=="string")return!0;if(typeof m[o]=="object"){for(var c in m[o])if(m[o][c])return!0}}return!1}},s=0,n=this.variables.length;s<n;s+=1)this.tests.push(i(this.variables[s]))};a.Attributes["@page"]=function(e,t){this.tests||(this.tests=[]);var r=t.replace("sub verbo","sub-verbo");r=r.split(/\s+/);for(var i=function(o){return function(l){var u;return e.processNumber(!1,l,"page",l.type),e.tmp.shadow_numbers.page.label?e.tmp.shadow_numbers.page.label==="sub verbo"?u="sub-verbo":u=e.tmp.shadow_numbers.page.label:u="page",e.tmp.shadow_numbers.page.values.length>0&&e.tmp.shadow_numbers.page.values[0].gotosleepability&&(e.tmp.shadow_numbers.page.values[0].labelVisibility=!1),o===u}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@number"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){var u;return e.processNumber(!1,l,"number",l.type),e.tmp.shadow_numbers.number.label?u=e.tmp.shadow_numbers.number.label:u="number",o===u}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@jurisdiction"]=function(e,t){this.tests||(this.tests=[]);var r=t.split(/\s+/),i=function(s){return function(n){if(!n.jurisdiction)return!1;for(var o=n.jurisdiction,l=0,u=s.length;l<u;l++)if(o===s[l])return!0;return!1}};this.tests.push(i(r))};a.Attributes["@country"]=function(e,t){this.tests||(this.tests=[]);var r=t.split(/\s+/),i=function(s){return function(n){if(!n.country)return!1;for(var o=n.country,l=0,u=s.length;l<u;l++)if(o===s[l])return!0;return!1}};this.tests.push(i(r))};a.Attributes["@context"]=function(e,t){this.tests||(this.tests=[]);var r=function(){if(["bibliography","citation"].indexOf(t)>-1){var i=e.tmp.area.slice(0,t.length);return i===t}else if(t==="alternative")return!!e.tmp.abort_alternative};this.tests.push(r)};a.Attributes["@has-year-only"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){var u=l[o];return!(!u||u.month||u.season)}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@has-to-month-or-season"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){var u=l[o];return!(!u||!u.month&&!u.season||u.day)}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@has-day"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){var u=l[o];return!(!u||!u.day)}},s=0,n=r.length;s<n;s+=1)this.tests.push(i(r[s]))};a.Attributes["@is-plural"]=function(e,t){this.tests||(this.tests=[]);var r=function(i){var s=i[t];if(s&&s.length){for(var n=0,o=0,l=!1,u=0,m=s.length;u<m;u+=1)e.opt.development_extensions.spoof_institutional_affiliations&&(s[u].literal||s[u].isInstitution&&s[u].family&&!s[u].given)?(o+=1,l=!1):(n+=1,l=!0);if(n>1)return!0;if(o>1)return!0;if(o&&l)return!0}return!1};this.tests.push(r)};a.Attributes["@is-multiple"]=function(e,t){this.tests||(this.tests=[]);var r=function(i){var s=""+i[t],n=s.split(/(?:,\s|\s(?:tot\sen\smet|ldz|oraz|and|bis|||och|a|do|en|et|in|ir|ja|og|sa|to|un|und|s|i|i|u|y||e|a||-|)\s||\&)/);return n.length>1};this.tests.push(r)};a.Attributes["@locale"]=function(e,t){this.tests||(this.tests=[]);var r,i,s,n,o,l,u=e.opt["default-locale"][0];if(this.name==="layout"){if(this.locale_raw=t,this.tokentype===a.START){e.opt.multi_layout||(e.opt.multi_layout=[]);var m=[],c=t.split(/\s+/),h={},p=a.localeResolve(c[0],u);m.push(p),p.generic?h[p.generic]=p.best:h[p.best]=p.best;for(var o=1,l=c.length;o<l;o+=1){var d=a.localeResolve(c[o],u);m.push(d),d.generic?h[d.generic]=p.best:h[d.best]=p.best}e[e.build.area].opt.sort_locales.push(h),e.opt.multi_layout.push(m)}e.opt.has_layout_locale=!0}else{n=t.split(/\s+/);var v=[];for(o=0,l=n.length;o<l;o+=1)s=n[o],i=a.localeResolve(s,u),n[o].length===2&&v.push(i.bare),e.localeConfigure(i,!0),n[o]=i;var f=n.slice(),y=function(b,g,A){return function(E){var S;r=[],S=!1;var w=!1,I;for(E.language?I=E.language:I=g,w=a.localeResolve(I,g),o=0,l=b.length;o<l;o+=1)if(w.best===b[o].best){e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=b[0].best,S=!0;break}return!S&&A.indexOf(w.bare)>-1&&(e.tmp.condition_lang_counter_arr.push(e.tmp.condition_counter),e.tmp.condition_lang_val_arr.push(e.opt.lang),e.opt.lang=b[0].best,S=!0),S}};this.tests.push(y(f,u,v))}};a.Attributes["@alternative-node-internal"]=function(e){this.tests||(this.tests=[]);var t=function(){return function(){return!e.tmp.abort_alternative}},r=this;this.tests.push(t(r))};a.Attributes["@locale-internal"]=function(e,t){this.tests||(this.tests=[]);var r,i,s,n,o;for(s=t.split(/\s+/),this.locale_bares=[],n=0,o=s.length;n<o;n+=1)i=s[n],r=a.localeResolve(i,e.opt["default-locale"][0]),s[n].length===2&&this.locale_bares.push(r.bare),e.localeConfigure(r),s[n]=r;this.locale_default=e.opt["default-locale"][0],this.locale=s[0].best,this.locale_list=s.slice();var l=function(m){return function(c){var h,p;h=[],p=!1;var d=!1;if(c.language&&(i=c.language,d=a.localeResolve(i,e.opt["default-locale"][0]),d.best===e.opt["default-locale"][0]&&(d=!1)),d){for(n=0,o=m.locale_list.length;n<o;n+=1)if(d.best===m.locale_list[n].best){e.opt.lang=m.locale,e.tmp.last_cite_locale=m.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=m.locale,p=!0;break}!p&&m.locale_bares.indexOf(d.bare)>-1&&(e.opt.lang=m.locale,e.tmp.last_cite_locale=m.locale,e.output.openLevel("empty"),e.output.current.value().new_locale=m.locale,p=!0)}return p}},u=this;this.tests.push(l(u))};a.Attributes["@court-class"]=function(e,t){this.tests||(this.tests=[]);for(var r=t.split(/\s+/),i=function(o){return function(l){var u=a.GET_COURT_CLASS(e,l);return u===o}},s=0,n=r.length;s<n;s++)this.tests.push(i(r[s]))};a.Attributes["@container-multiple"]=function(e,t){this.tests||(this.tests=[]);var r=t==="true",i=function(s){return function(n){if(e.tmp.container_item_count[n.container_id]){if(e.tmp.container_item_count[n.container_id]>1)return s}else return!s;return!s}};this.tests.push(i(r))};a.Attributes["@container-subsequent"]=function(e,t){this.tests||(this.tests=[]);var r=t==="true",i=function(s){return function(n){return e.tmp.container_item_pos[n.container_id]>1?s:!s}};this.tests.push(i(r))};a.Attributes["@has-subunit"]=function(e,t){this.tests||(this.tests=[]);var r=function(i){return function(s){var n=0;for(var o in s[i]){var l=s[i][o];if(!l.given){var u=l.literal?l.literal:l.family,m=u.split("|").length;(n===0||m<n)&&(n=m)}}return n>1}};this.tests.push(r(t))};a.Attributes["@cite-form"]=function(e,t){this.tests||(this.tests=[]);var r=function(i){return function(s){return s["cite-form"]===i}};this.tests.push(r(t))};a.Attributes["@disable-duplicate-year-suppression"]=function(e,t){e.opt.disable_duplicate_year_suppression=t.split(/\s+/)};a.Attributes["@consolidate-containers"]=function(e,t){a.Attributes["@track-containers"](e,t);var r=t.split(/\s+/);e.bibliography.opt.consolidate_containers=r};a.Attributes["@track-containers"]=function(e,t){var r=t.split(/\s+/);e.bibliography.opt.track_container_items||(e.bibliography.opt.track_container_items=[]),e.bibliography.opt.consolidate_containers||(e.bibliography.opt.consolidate_containers=[]),e.bibliography.opt.track_container_items=e.bibliography.opt.track_container_items.concat(r)};a.Attributes["@parallel-first"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_first={};for(var i in r){var s=r[i];this.parallel_first[s]=!0,e.opt.track_repeat[s]=!0}};a.Attributes["@parallel-last"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.parallel_last={};for(var i in r){var s=r[i];this.parallel_last[s]=!0,e.opt.track_repeat[s]=!0}};a.Attributes["@parallel-last-to-first"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);this.parallel_last_to_first={};for(var i=0,s=r.length;i<s;i++)this.parallel_last_to_first[r[i]]=!0};a.Attributes["@parallel-delimiter-override"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override=t};a.Attributes["@parallel-delimiter-override-on-suppress"]=function(e,t){e.opt.parallel.enable=!0,this.strings.set_parallel_delimiter_override_on_suppress=t};a.Attributes["@no-repeat"]=function(e,t){e.opt.parallel.enable=!0;var r=t.split(/\s+/);e.opt.track_repeat||(e.opt.track_repeat={}),this.non_parallel={};for(var i in r){var s=r[i];this.non_parallel[s]=!0,e.opt.track_repeat[s]=!0}};a.Attributes["@require"]=function(e,t){e.opt.use_context_condition=!0,this.strings.require=t};a.Attributes["@reject"]=function(e,t){e.opt.use_context_condition=!0,this.strings.reject=t};a.Attributes["@require-comma-on-symbol"]=function(e,t){e.opt.require_comma_on_symbol=t};a.Attributes["@gender"]=function(e,t){this.gender=t};a.Attributes["@cslid"]=function(e,t){this.cslid=parseInt(t,10)};a.Attributes["@capitalize-if-first"]=function(e,t){this.strings.capitalize_if_first_override=t};a.Attributes["@label-capitalize-if-first"]=function(e,t){this.strings.label_capitalize_if_first_override=t};a.Attributes["@label-form"]=function(e,t){this.strings.label_form_override=t};a.Attributes["@part-separator"]=function(e,t){this.strings["part-separator"]=t};a.Attributes["@leading-noise-words"]=function(e,t){this["leading-noise-words"]=t};a.Attributes["@name-never-short"]=function(e,t){this["name-never-short"]=t};a.Attributes["@class"]=function(e,t){e.opt.class=t};a.Attributes["@version"]=function(e,t){e.opt.version=t};a.Attributes["@value"]=function(e,t){this.strings.value=t};a.Attributes["@name"]=function(e,t){this.strings.name=t};a.Attributes["@form"]=function(e,t){this.strings.form=t};a.Attributes["@date-parts"]=function(e,t){this.strings["date-parts"]=t};a.Attributes["@range-delimiter"]=function(e,t){this.strings["range-delimiter"]=t};a.Attributes["@macro"]=function(e,t){this.postponed_macro=t};a.Attributes["@term"]=function(e,t){t==="sub verbo"?this.strings.term="sub-verbo":this.strings.term=t};a.Attributes["@xmlns"]=function(){};a.Attributes["@lang"]=function(e,t){t&&(e.build.lang=t)};a.Attributes["@lingo"]=function(){};a.Attributes["@macro-has-date"]=function(){this["macro-has-date"]=!0};a.Attributes["@suffix"]=function(e,t){this.strings.suffix=t};a.Attributes["@prefix"]=function(e,t){this.strings.prefix=t};a.Attributes["@delimiter"]=function(e,t){this.strings.delimiter=t};a.Attributes["@match"]=function(e,t){this.match=t};a.Attributes["@names-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),this.strings["et-al-min"]=r};a.Attributes["@names-use-first"]=function(e,t){this.strings["et-al-use-first"]=parseInt(t,10)};a.Attributes["@names-use-last"]=function(e,t){t==="true"?this.strings["et-al-use-last"]=!0:this.strings["et-al-use-last"]=!1};a.Attributes["@sort"]=function(e,t){t==="descending"&&(this.strings.sort_direction=a.DESCENDING)};a.Attributes["@plural"]=function(e,t){t==="always"||t==="true"?this.strings.plural=1:t==="never"||t==="false"?this.strings.plural=0:t==="contextual"&&(this.strings.plural=!1)};a.Attributes["@has-publisher-and-publisher-place"]=function(){this.strings["has-publisher-and-publisher-place"]=!0};a.Attributes["@publisher-delimiter-precedes-last"]=function(e,t){this.strings["publisher-delimiter-precedes-last"]=t};a.Attributes["@publisher-delimiter"]=function(e,t){this.strings["publisher-delimiter"]=t};a.Attributes["@publisher-and"]=function(e,t){this.strings["publisher-and"]=t};a.Attributes["@givenname-disambiguation-rule"]=function(e,t){a.GIVENNAME_DISAMBIGUATION_RULES.indexOf(t)>-1&&(e.citation.opt["givenname-disambiguation-rule"]=t)};a.Attributes["@collapse"]=function(e,t){t&&(e[this.name].opt.collapse=t)};a.Attributes["@cite-group-delimiter"]=function(e,t){t&&(e[e.tmp.area].opt.cite_group_delimiter=t)};a.Attributes["@names-delimiter"]=function(e,t){e.setOpt(this,"names-delimiter",t)};a.Attributes["@name-form"]=function(e,t){e.setOpt(this,"name-form",t)};a.Attributes["@subgroup-delimiter"]=function(e,t){this.strings["subgroup-delimiter"]=t};a.Attributes["@subgroup-delimiter-precedes-last"]=function(e,t){this.strings["subgroup-delimiter-precedes-last"]=t};a.Attributes["@name-delimiter"]=function(e,t){e.setOpt(this,"name-delimiter",t)};a.Attributes["@et-al-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),e.setOpt(this,"et-al-min",r)};a.Attributes["@et-al-use-first"]=function(e,t){e.setOpt(this,"et-al-use-first",parseInt(t,10))};a.Attributes["@et-al-use-last"]=function(e,t){t==="true"?e.setOpt(this,"et-al-use-last",!0):e.setOpt(this,"et-al-use-last",!1)};a.Attributes["@et-al-subsequent-min"]=function(e,t){var r=parseInt(t,10);e[e.build.area].opt.max_number_of_names<r&&(e[e.build.area].opt.max_number_of_names=r),e.setOpt(this,"et-al-subsequent-min",r)};a.Attributes["@et-al-subsequent-use-first"]=function(e,t){e.setOpt(this,"et-al-subsequent-use-first",parseInt(t,10))};a.Attributes["@suppress-min"]=function(e,t){this.strings["suppress-min"]=parseInt(t,10)};a.Attributes["@suppress-max"]=function(e,t){this.strings["suppress-max"]=parseInt(t,10)};a.Attributes["@and"]=function(e,t){e.setOpt(this,"and",t)};a.Attributes["@delimiter-precedes-last"]=function(e,t){e.setOpt(this,"delimiter-precedes-last",t)};a.Attributes["@delimiter-precedes-et-al"]=function(e,t){e.setOpt(this,"delimiter-precedes-et-al",t)};a.Attributes["@initialize-with"]=function(e,t){e.setOpt(this,"initialize-with",t)};a.Attributes["@initialize"]=function(e,t){t==="false"&&e.setOpt(this,"initialize",!1)};a.Attributes["@name-as-reverse-order"]=function(e,t){this["name-as-reverse-order"]=t};a.Attributes["@name-as-sort-order"]=function(e,t){this.name==="style-options"?this["name-as-sort-order"]=t:e.setOpt(this,"name-as-sort-order",t)};a.Attributes["@sort-separator"]=function(e,t){e.setOpt(this,"sort-separator",t)};a.Attributes["@require-match"]=function(e,t){t==="true"&&(this.requireMatch=!0)};a.Attributes["@exclude-types"]=function(e,t){e.bibliography.opt.exclude_types=t.split(/\s+/)};a.Attributes["@exclude-with-fields"]=function(e,t){e.bibliography.opt.exclude_with_fields=t.split(/\s+/)};a.Attributes["@year-suffix-delimiter"]=function(e,t){e[this.name].opt["year-suffix-delimiter"]=t};a.Attributes["@after-collapse-delimiter"]=function(e,t){e[this.name].opt["after-collapse-delimiter"]=t};a.Attributes["@subsequent-author-substitute"]=function(e,t){e[this.name].opt["subsequent-author-substitute"]=t};a.Attributes["@subsequent-author-substitute-rule"]=function(e,t){e[this.name].opt["subsequent-author-substitute-rule"]=t};a.Attributes["@disambiguate-add-names"]=function(e,t){t==="true"&&(e.opt["disambiguate-add-names"]=!0)};a.Attributes["@disambiguate-add-givenname"]=function(e,t){t==="true"&&(e.opt["disambiguate-add-givenname"]=!0)};a.Attributes["@disambiguate-add-year-suffix"]=function(e,t){t==="true"&&e.opt.xclass!=="numeric"&&(e.opt["disambiguate-add-year-suffix"]=!0)};a.Attributes["@second-field-align"]=function(e,t){(t==="flush"||t==="margin")&&(e[this.name].opt["second-field-align"]=t)};a.Attributes["@hanging-indent"]=function(e,t){t==="true"&&(e.opt.development_extensions.hanging_indent_legacy_number?e[this.name].opt.hangingindent=2:e[this.name].opt.hangingindent=!0)};a.Attributes["@line-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["line-spacing"]=parseFloat(t,10))};a.Attributes["@entry-spacing"]=function(e,t){t&&t.match(/^[.0-9]+$/)&&(e[this.name].opt["entry-spacing"]=parseFloat(t,10))};a.Attributes["@near-note-distance"]=function(e,t){e[this.name].opt["near-note-distance"]=parseInt(t,10)};a.Attributes["@substring"]=function(e,t){this.substring=parseInt(t,10)};a.Attributes["@text-case"]=function(e,t){var r=function(i,s){t==="normal"?this.text_case_normal=!0:(this.strings["text-case"]=t,t==="title"&&s.jurisdiction&&(this.strings["text-case"]="passthrough"))};this.execs.push(r)};a.Attributes["@page-range-format"]=function(e,t){e.opt["page-range-format"]=t};a.Attributes["@year-range-format"]=function(e,t){e.opt["year-range-format"]=t};a.Attributes["@default-locale"]=function(e,t){if(this.name==="style"){var r,i,s,o,n,o=t.match(/-x-(sort|translit|translat)-/g);if(o)for(s=0,i=o.length;s<i;s+=1)o[s]=o[s].replace(/^-x-/,"").replace(/-$/,"");for(r=t.split(/-x-(?:sort|translit|translat)-/),n=[r[0]],s=1,i=r.length;s<i;s+=1)n.push(o[s-1]),n.push(r[s]);for(r=n.slice(),i=r.length,s=1;s<i;s+=2)e.opt["locale-"+r[s]].push(r[s+1].replace(/^\s*/g,"").replace(/\s*$/g,""));r.length?e.opt["default-locale"]=r.slice(0,1):e.opt["default-locale"]=["en"]}else t==="true"&&(this.default_locale=!0)};a.Attributes["@default-locale-sort"]=function(e,t){e.opt["default-locale-sort"]=t};a.Attributes["@demote-non-dropping-particle"]=function(e,t){e.opt["demote-non-dropping-particle"]=t};a.Attributes["@initialize-with-hyphen"]=function(e,t){t==="false"&&(e.opt["initialize-with-hyphen"]=!1)};a.Attributes["@institution-parts"]=function(e,t){this.strings["institution-parts"]=t};a.Attributes["@if-short"]=function(e,t){t==="true"&&(this.strings["if-short"]=!0)};a.Attributes["@substitute-use-first"]=function(e,t){this.strings["substitute-use-first"]=parseInt(t,10)};a.Attributes["@use-first"]=function(e,t){this.strings["use-first"]=parseInt(t,10)};a.Attributes["@use-last"]=function(e,t){this.strings["use-last"]=parseInt(t,10)};a.Attributes["@stop-first"]=function(e,t){this.strings["stop-first"]=parseInt(t,10)};a.Attributes["@stop-last"]=function(e,t){this.strings["stop-last"]=parseInt(t,10)*-1};a.Attributes["@reverse-order"]=function(e,t){t==="true"&&(this.strings["reverse-order"]=!0)};a.Attributes["@display"]=function(e,t){e.bibliography.tokens.length===2&&(e.opt.using_display=!0),this.strings.cls=t};a.Stack=function(e,t){this.mystack=[],(t||e)&&this.mystack.push(e),this.tip=this.mystack[0]};a.Stack.prototype.push=function(e,t){t||e?this.mystack.push(e):this.mystack.push(""),this.tip=this.mystack[this.mystack.length-1]};a.Stack.prototype.clear=function(){this.mystack=[],this.tip={}};a.Stack.prototype.replace=function(e,t){this.mystack.length===0&&a.error("Internal CSL processor error: attempt to replace nonexistent stack item with "+e),t||e?this.mystack[this.mystack.length-1]=e:this.mystack[this.mystack.length-1]="",this.tip=this.mystack[this.mystack.length-1]};a.Stack.prototype.pop=function(){var e=this.mystack.pop();return this.mystack.length?this.tip=this.mystack[this.mystack.length-1]:this.tip={},e};a.Stack.prototype.value=function(){return this.mystack.slice(-1)[0]};a.Stack.prototype.length=function(){return this.mystack.length};a.Parallel=function(e){this.state=e};a.Parallel.prototype.StartCitation=function(e,t){if(this.state.tmp.suppress_repeats=[],!(e.length<2)){for(var r=0,i=!1,s=[],n=0,o=e.length-1;n<o;n++){var l=e[n][0],u=e[n+1][0],m=!1,c={};if(e[n][0].seeAlso&&e[n][0].seeAlso.length>0&&!i){m=!0,i=[e[n][0].id].concat(e[n][0].seeAlso);var h=i.slice(),p=e.slice(n);p[0][1].parallel="first";for(var d=0,v=p.length;d<v;d++){var f=p[d][0].id,y=h.indexOf(f);if(r=!1,y===-1?r=n+d-1:n+d===e.length-1&&(r=n+d),r){s.push([n,r]);break}else h=h.slice(0,y).concat(h.slice(y+1))}}n>0&&m&&(this.state.tmp.suppress_repeats[n-1].START=!0,m=!1);for(var b in this.state.opt.track_repeat)if(!l[b]||!u[b])c[b]=!1;else if(typeof u[b]=="string"||typeof u[b]=="number"){if(b==="title"&&l["title-short"]&&u["title-short"])var g=l["title-short"],A=u["title-short"];else var g=l[b],A=u[b];g==A?c[b]=!0:c[b]=!1}else if(typeof l[b].length>"u"){c[b]=!1;var E=l[b].year,S=u[b].year;E&&S&&E==S&&(c[b]=!0)}else{var g=JSON.stringify(l[b]),A=JSON.stringify(u[b]);g===A?c[b]=!0:c[b]=!1}i||(c.ORPHAN=!0),r===n&&(c.END=!0,i=!1),this.state.tmp.suppress_repeats.push(c)}for(var d=0,v=s.length;d<v;d++){var w=e[s[d][0]][0].id;this.state.registry.registry[w].master=!0,this.state.registry.registry[w].siblings=[];for(var I=s[d][0],O=s[d][1],D=I;D<O;D++){this.state.tmp.suppress_repeats[D].SIBLING=!0;var _=e[D+1][0].id;e[D+1][1].parallel="other",this.state.registry.registry[w].siblings.push(_)}}}};a.Parallel.prototype.checkRepeats=function(e){var t=this.state.tmp.cite_index;if(this.state.tmp.suppress_repeats){if(e.parallel_first&&Object.keys(e.parallel_first).length>0){var r=[{}].concat(this.state.tmp.suppress_repeats),i=!0;for(var s in e.parallel_first)(!r[t][s]||r[t].START)&&(i=!1);return i}if(e.parallel_last&&Object.keys(e.parallel_last).length>0){var r=this.state.tmp.suppress_repeats.concat([{}]),i=Object.keys(e.parallel_last).length>0;for(var s in e.parallel_last)(!r[t][s]||r[t].END)&&(i=!1);return i}if(e.non_parallel&&Object.keys(e.non_parallel).length>0){var r=[{}].concat(this.state.tmp.suppress_repeats),i=!0;for(var s in e.non_parallel)r[t][s]||(i=!1);return i}}return!1};a.Util={};a.Util.Match=function(){this.any=function(e,t,r){return function(i,s){for(var n=0,o=r.length;n<o;n+=1){var l=r[n](i,s);if(l)return!0}return!1}},this.none=function(e,t,r){return function(i,s){for(var n=0,o=r.length;n<o;n+=1){var l=r[n](i,s);if(l)return!1}return!0}},this.all=function(e,t,r){return function(i,s){for(var n=0,o=r.length;n<o;n+=1){var l=r[n](i,s);if(!l)return!1}return!0}},this[void 0]=this.all,this.nand=function(e,t,r){return function(i,s){for(var n=0,o=r.length;n<o;n+=1){var l=r[n](i,s);if(!l)return!0}return!1}}};a.Transform=function(e){this.abbrevs={},this.abbrevs.default=new e.sys.AbbreviationSegments;function t(c,h,p){var d="";return e.sys.getHumanForm&&(c==="country"?(d=e.sys.getHumanForm(h.toLowerCase(),!1,!0),d=d.split("|")[0]):c==="jurisdiction"&&(d=e.sys.getHumanForm(h.toLowerCase(),!1,!0),p?d="":d=d.split("|").slice(1).join(", "))),d}function r(c,h,p,d,v,f,y){var b="",g=a.FIELD_CATEGORY_REMAP[f],A;if(!g)return v;var E=f,S=v;c.sys.normalizeAbbrevsKey&&(S=c.sys.normalizeAbbrevsKey(f,v));var w=!1;if(E==="jurisdiction"&&S&&(w=S.indexOf(":")===-1),["jurisdiction","country"].indexOf(f)>-1&&v===v.toLowerCase()&&(S=v.toUpperCase()),c.sys.getAbbreviation){["jurisdiction","country","language-name","language-name-original"].indexOf(E)>-1?A="default":p.jurisdiction?A=p.jurisdiction:A="default";var I=c.transform.loadAbbreviation(A,g,S,p.language);if(c.transform.abbrevs[I][g]&&S){var O=c.transform.abbrevs[I][g][S];h.strings.form==="short"&&O?w?b="":b=O:b=t(E,S,w)}}return!b&&(!c.opt.development_extensions.require_explicit_legal_case_title_short||p.type!=="legal_case")&&d&&p[d]&&y&&(b=p[d]),!b&&!c.sys.getAbbreviation&&c.sys.getHumanForm&&(b=t(E,S,w)),!b&&!w&&(!c.sys.getHumanForm||E!=="jurisdiction")&&(b=v),c.opt.development_extensions.force_title_abbrev_fallback&&E==="title"&&b===v&&p["title-short"]&&(b=p["title-short"]),b}function i(c,h){var p=e.opt["default-locale"][0].slice(0,2),d;if(e.opt.development_extensions.strict_text_case_locales?d=new RegExp("^([a-zA-Z]{2})(?:$|-.*| .*)"):d=new RegExp("^([a-zA-Z]{2})(?:$|-.*|.*)"),c.language){var v=(""+c.language).match(d);v?p=v[1]:p="tlh"}return c.multi&&c.multi&&c.multi.main&&c.multi.main[h]&&(p=c.multi.main[h]),(!e.opt.development_extensions.strict_text_case_locales||e.opt.development_extensions.normalize_lang_keys_to_lowercase)&&(p=p.toLowerCase()),p}function s(c,h,p,d,v,f){var y,b,g,A,E=v,S=!1;if(!c[h])return{name:"",usedOrig:v,token:a.Util.cloneToken(this)};var w=!1;a.VARIABLES_WITH_SHORT_FORM.indexOf(h)>-1&&f&&(h=h+"-short",w=!0);var I=!1,O=null,D=[];h.slice(-6)==="-short"?(D.push(h),D.push(h.slice(0,-6))):D.push(h);for(var _=0,x=D.length;_<x;_++){var k=!1,h=D[_];g={name:"",usedOrig:v,locale:i(c,h)},A=e.opt[p]?e.opt[p].slice():[];var R=!1;if(p==="locale-orig"?(v||(g.name=c[h],g.usedOrig=!1),R=!0,S=!0):d&&(typeof A>"u"||A.length===0)&&(g.name=c[h],g.usedOrig=!0,R=!0,S=!0),!R){for(var N=0,T=A.length;N<T;N+=1)if(y=A[N],b=y.split(/[\-_]/)[0],y&&c.multi&&c.multi._keys[h]&&c.multi._keys[h][y]){g.name=c.multi._keys[h][y],g.locale=y,R=!0,k=!0,S=!1;break}else if(b&&c.multi&&c.multi._keys[h]&&c.multi._keys[h][b]){g.name=c.multi._keys[h][b],g.locale=b,R=!0,k=!0,S=!1;break}!g.name&&d&&(g={name:c[h],usedOrig:!0,locale:i(c,h)},S=!0)}if(g.token=a.Util.cloneToken(this),_===0?(k&&(g.found_variant_ok=!0),O=g,!w&&(typeof A>"u"||A.length===0)&&(I=!0),k&&(I=!0)):!w&&!k&&O?(g=O,h=D[0]):k&&(g.found_variant_ok=!0),["title","container-title"].indexOf(h)>-1&&!E&&(!g.token.strings["text-case"]||g.token.strings["text-case"]==="sentence"||g.token.strings["text-case"]==="normal")){var C=e.opt.lang,j;S?j=!1:j=g.locale;var F=h.slice(0,-5),M=g.token.strings["text-case"]==="sentence";g.name=a.titlecaseSentenceOrNormal(e,c,F,j,M),delete g.token.strings["text-case"]}if(I)break}return g}this.getTextSubField=s;function n(c,h,p,d){c||(c="default");var v=c.split(":")[0],f=a.getAbbrevsDomain(e,v,d);return f&&(c+="@"+f),p?(e.sys.getAbbreviation&&(c=e.sys.getAbbreviation(e.opt.styleID,e.transform.abbrevs,c,h,p),c||(c="default",f&&(c+="@"+f))),c):(e.transform.abbrevs[c]||(e.transform.abbrevs[c]=new e.sys.AbbreviationSegments),e.transform.abbrevs[c][h]||(e.transform.abbrevs[c][h]={}),c)}this.loadAbbreviation=n;function o(c,h,p,d){var v=c.variables[0];if(e.publisherOutput&&p){if(["publisher","publisher-place"].indexOf(v)===-1)return!1;e.publisherOutput[v+"-token"]=c,e.publisherOutput.varlist.push(v);var f=p.split(/;\s*/);f.length===e.publisherOutput[v+"-list"].length&&(e.publisherOutput[v+"-list"]=f);for(var y=0,b=f.length;y<b;y+=1)f[y]=r(e,c,h,!1,f[y],d,!0);return e.tmp[v+"-token"]=c,!0}return!1}function l(c,h){var p=h.match(/^#([0-9]+).*>>>/);p&&p[1]&&(c["cite-form"]=p[1])}function u(c,h){var p=h.match(/^(?:#[0-9]+)*(?:!((?:[-_a-z]+(?:(?:.*)))(?:,(?:[-_a-z]+(?:(?:.*))))*))*>>>/);if(p&&(h=h.slice(p[0].length),p[1]))for(var d=p[1].split(","),v=0,f=d.length;v<f;v+=1){var y=d[v],b=y.match(/^([-_a-z]+)(?:\:(.*))*$/),g=b[1],A=e.tmp.abbrev_trimmer;b[2]?A&&c&&(A[c]||(A[c]={}),A[c][g]=b[2]):e.tmp.done_vars.indexOf(g)===-1&&(A&&c&&(A.QUASHES[c]||(A.QUASHES[c]={}),A.QUASHES[c][g]=!0),e.tmp.done_vars.push(g))}return h}this.quashCheck=u;function m(c,h,p,d){var v,f=a.LangPrefsMap[c[0]];return f?v=e.opt["cite-lang-prefs"][f]:v=!1,function(y,b,g){var A,E,S,w,I,O,T;if(!c[0]||!b[c[0]]&&!b[d]||!y.tmp.just_looking&&g&&g["suppress-author"]&&!y.tmp.probably_rendered_something&&y.tmp.can_substitute.length()>1)return null;var D={primary:!1,secondary:!1,tertiary:!1};if(y.tmp.area.slice(-5)==="_sort")D.primary="locale-sort";else if(v&&v.length===1&&v[0]==="locale-orig")D.primary="locale-orig",v=!1;else if(v&&!y.tmp.multi_layout)for(var _=["primary","secondary","tertiary"],x=0,k=_.length;x<k&&!(v.length-1<x);x+=1)v[x]&&(D[_[x]]="locale-"+v[x]);else D.primary="locale-orig";if((c[0]==="title-short"||y.tmp.area!=="bibliography"&&!(y.tmp.area==="citation"&&y.opt.xclass==="note"&&g&&!g.position))&&(D.secondary=!1,D.tertiary=!1),y.tmp.multi_layout&&(D.secondary=!1,D.tertiary=!1),y.tmp["publisher-list"])return c[0]==="publisher"?y.tmp["publisher-token"]=this:c[0]==="publisher-place"&&(y.tmp["publisher-place-token"]=this),null;var R=y.tmp.lang_array.slice(),N=s.call(this,b,c[0],D.primary,!0,null,h);A=N.name,E=N.locale;var T=N.token,C=N.usedOrig;if(h&&!N.found_variant_ok&&(A=r(y,T,b,d,A,h,!0),A&&(l(b,A),y.tmp.just_looking||(A=u(b.jurisdiction,A)))),o(this,b,A,h))return y.tmp.lang_array=R,null;S=!1,I=!1;var j,F;D.secondary&&(N=s.call(this,b,c[0],D.secondary,!1,N.usedOrig,null,h),S=N.name,w=N.locale,j=N.token,h&&!N.found_variant_ok&&S&&(S=r(y,j,b,!1,S,h,!0))),D.tertiary&&(N=s.call(this,b,c[0],D.tertiary,!1,N.usedOrig,null,h),I=N.name,O=N.locale,F=N.token,h&&!N.found_variant_ok&&I&&(I=r(y,F,b,!1,I,h,!0)));var M;if(D.primary==="locale-translit"&&(M=y.opt.citeAffixes[f][D.primary].prefix),M==="<i>"&&c[0]==="title"&&!C){for(var U=!1,x=0,k=T.decorations.length;x<k;x+=1)T.decorations[x][0]==="@font-style"&&T.decorations[x][1]==="italic"&&(U=!0);U||T.decorations.push(["@font-style","italic"])}if(E!=="en"&&T.strings["text-case"]==="title"&&(T.strings["text-case"]="passthrough"),c[0]==="title"&&(A=a.demoteNoiseWords(y,A,this["leading-noise-words"])),S||I){if(y.output.openLevel("empty"),T.strings.suffix=T.strings.suffix.replace(/[ .,]+$/,""),E&&(y.tmp.lang_array=[E].concat(R)),a.UPDATE_GROUP_CONTEXT_CONDITION(y,null,null,T,T.strings.prefix+A),y.output.append(A,T),y.tmp.probably_rendered_something=!0,A===S&&(S=!1),S){j.strings.prefix=y.opt.citeAffixes[f][D.secondary].prefix,j.strings.suffix=y.opt.citeAffixes[f][D.secondary].suffix,j.strings.prefix||(j.strings.prefix=" ");for(var x=j.decorations.length-1;x>-1;x+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(j.decorations[x].join("/"))>-1&&(j.decorations=j.decorations.slice(0,x).concat(j.decorations.slice(x+1)));w!=="en"&&j.strings["text-case"]==="title"&&(j.strings["text-case"]="passthrough"),w&&(y.tmp.lang_array=[w].concat(R));var B=new a.Token;B.decorations.push(["@font-style","normal"]),B.decorations.push(["@font-weight","normal"]),y.output.openLevel(B),y.output.append(S,j),y.output.closeLevel();var L=y.output.current.value(),z=y.output.current.value().blobs.length-1}if(A===I&&(I=!1),I){F.strings.prefix=y.opt.citeAffixes[f][D.tertiary].prefix,F.strings.suffix=y.opt.citeAffixes[f][D.tertiary].suffix,F.strings.prefix||(F.strings.prefix=" ");for(var x=F.decorations.length-1;x>-1;x+=-1)["@quotes/true","@font-style/italic","@font-style/oblique","@font-weight/bold"].indexOf(F.decorations[x].join("/"))>-1&&(F.decorations=F.decorations.slice(0,x).concat(F.decorations.slice(x+1)));O!=="en"&&F.strings["text-case"]==="title"&&(F.strings["text-case"]="passthrough"),O&&(y.tmp.lang_array=[O].concat(R));var H=new a.Token;H.decorations.push(["@font-style","normal"]),H.decorations.push(["@font-weight","normal"]),y.output.openLevel(H),y.output.append(I,F),y.output.closeLevel();var L=y.output.current.value(),z=y.output.current.value().blobs.length-1}y.output.closeLevel()}else E&&(y.tmp.lang_array=[E].concat(R)),a.UPDATE_GROUP_CONTEXT_CONDITION(y,null,null,T,T.strings.prefix+A),y.output.append(A,T),y.tmp.probably_rendered_something=!0;return y.tmp.lang_array=R,y.tmp.can_block_substitute&&y.tmp.name_node.children.push(y.output.current.value()),null}}this.getOutputFunction=m};a.Token=function(e,t,r){this.name=e,this.strings={},this.strings.delimiter=void 0,this.strings.prefix="",this.strings.suffix="",this.decorations=[],this.variables=[],this.execs=[],this.tokentype=t};a.Util.cloneToken=function(e){var t,r,i,s;if(typeof e=="string")return e;t=new a.Token(e.name,e.tokentype);for(var r in e.strings)e.strings.hasOwnProperty(r)&&(t.strings[r]=e.strings[r]);if(e.decorations)for(t.decorations=[],i=0,s=e.decorations.length;i<s;i+=1)t.decorations.push(e.decorations[i].slice());return e.variables&&(t.variables=e.variables.slice()),e.execs&&(t.execs=e.execs.slice(),e.tests&&(t.tests=e.tests.slice())),t};a.AmbigConfig=function(){this.maxvals=[],this.minval=1,this.names=[],this.givens=[],this.year_suffix=!1,this.disambiguate=0};a.Blob=function(e,t,r){var i,s,n;if(this.levelname=r,t){this.strings={prefix:"",suffix:""};for(var n in t.strings)t.strings.hasOwnProperty(n)&&(this.strings[n]=t.strings[n]);for(this.decorations=[],t.decorations===void 0?i=0:i=t.decorations.length,s=0;s<i;s+=1)this.decorations.push(t.decorations[s].slice())}else this.strings={},this.strings.prefix="",this.strings.suffix="",this.strings.delimiter="",this.decorations=[];typeof e=="string"?this.blobs=e:e?this.blobs=[e]:this.blobs=[],this.alldecor=[this.decorations]};a.Blob.prototype.push=function(e){typeof this.blobs=="string"?a.error("Attempt to push blob onto string object"):e!==!1&&(e.alldecor=e.alldecor.concat(this.alldecor),this.blobs.push(e))};a.NumericBlob=function(e,t,r,i,s){if(this.id=s,this.alldecor=[],this.num=r,this.particle=t,this.blobs=r.toString(),this.status=a.START,this.strings={},i){if(i.strings["text-case"]){var n=i.strings["text-case"];this.particle=a.Output.Formatters[n](e,this.particle),this.blobs=a.Output.Formatters[n](e,this.blobs)}this.gender=i.gender,this.decorations=i.decorations,this.strings.prefix=i.strings.prefix,this.strings.suffix=i.strings.suffix,this.strings["text-case"]=i.strings["text-case"],this.successor_prefix=i.successor_prefix,this.range_prefix=i.range_prefix,this.splice_prefix=i.splice_prefix,this.formatter=i.formatter,this.formatter||(this.formatter=new a.Output.DefaultFormatter),this.formatter&&(this.type=this.formatter.format(1))}else this.decorations=[],this.strings.prefix="",this.strings.suffix="",this.successor_prefix="",this.range_prefix="",this.splice_prefix="",this.formatter=new a.Output.DefaultFormatter};a.NumericBlob.prototype.setFormatter=function(e){this.formatter=e,this.type=this.formatter.format(1)};a.Output.DefaultFormatter=function(){};a.Output.DefaultFormatter.prototype.format=function(e){return e.toString()};a.NumericBlob.prototype.checkNext=function(e,t){t?(this.status=a.START,typeof e=="object"&&(e.num===this.num+1?e.status=a.SUCCESSOR:e.status=a.SEEN)):!e||!e.num||this.type!==e.type||e.num!==this.num+1?(this.status===a.SUCCESSOR_OF_SUCCESSOR&&(this.status=a.END),typeof e=="object"&&(e.status=a.SEEN)):this.status===a.START||this.status===a.SEEN?e.status=a.SUCCESSOR:(this.status===a.SUCCESSOR||this.status===a.SUCCESSOR_OF_SUCCESSOR)&&(this.range_prefix?(e.status=a.SUCCESSOR_OF_SUCCESSOR,this.status=a.SUPPRESS):e.status=a.SUCCESSOR)};a.NumericBlob.prototype.checkLast=function(e){return this.status===a.SEEN||e.num!==this.num-1&&this.status===a.SUCCESSOR?(this.status=a.SUCCESSOR,!0):!1};a.Util.fixDateNode=function(e,t,r){var i,s,n,o,l,u,m,c,h,p,d,v,f,b=this.cslXml.getAttributeValue(r,"lingo"),y=this.cslXml.getAttributeValue(r,"default-locale");this.build.date_key=!0,i=this.cslXml.getAttributeValue(r,"form");var b;if(y?b=this.opt["default-locale"][0]:b=this.cslXml.getAttributeValue(r,"lingo"),!this.getDate(i,y))return e;var g=this.cslXml.getAttributeValue(r,"date-parts");s=this.cslXml.getAttributeValue(r,"variable"),c=this.cslXml.getAttributeValue(r,"prefix"),h=this.cslXml.getAttributeValue(r,"suffix"),v=this.cslXml.getAttributeValue(r,"display"),f=this.cslXml.getAttributeValue(r,"cslid"),n=this.cslXml.nodeCopy(this.getDate(i,y)),this.cslXml.setAttribute(n,"lingo",this.opt.lang),this.cslXml.setAttribute(n,"form",i),this.cslXml.setAttribute(n,"date-parts",g),this.cslXml.setAttribute(n,"cslid",f),this.cslXml.setAttribute(n,"variable",s),this.cslXml.setAttribute(n,"default-locale",y),c&&this.cslXml.setAttribute(n,"prefix",c),h&&this.cslXml.setAttribute(n,"suffix",h),v&&this.cslXml.setAttribute(n,"display",v),p=this.cslXml.children(n);for(var A in p)o=p[A],this.cslXml.nodename(o)==="date-part"&&(l=this.cslXml.getAttributeValue(o,"name"),y&&this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",l,"@default-locale","true"));p=this.cslXml.children(r);for(var A in p)if(o=p[A],this.cslXml.nodename(o)==="date-part"){l=this.cslXml.getAttributeValue(o,"name"),d=this.cslXml.attributes(o);for(u in d)u!=="@name"&&(b&&b!==this.opt.lang&&["@suffix","@prefix","@form"].indexOf(u)>-1||(m=d[u],this.cslXml.setAttributeOnNodeIdentifiedByNameAttribute(n,"date-part",l,u,m)))}if(this.cslXml.getAttributeValue(r,"date-parts")==="year")this.cslXml.deleteNodeByNameAttribute(n,"month"),this.cslXml.deleteNodeByNameAttribute(n,"day");else if(this.cslXml.getAttributeValue(r,"date-parts")==="year-month")this.cslXml.deleteNodeByNameAttribute(n,"day");else if(this.cslXml.getAttributeValue(r,"date-parts")==="month-day"){for(var E=this.cslXml.children(n),S=1,w=this.cslXml.numberofnodes(E);S<w;S++)if(this.cslXml.getAttributeValue(E[S],"name")==="year"){this.cslXml.setAttribute(E[S-1],"suffix","");break}this.cslXml.deleteNodeByNameAttribute(n,"year")}return this.cslXml.insertChildNodeAfter(e,r,t,n)};a.dateMacroAsSortKey=function(e,t){a.dateAsSortKey.call(this,e,t,!0)};a.dateAsSortKey=function(e,t,r){var i,s,n,o,l,u,m,c,h=this.variables[0],p="empty";if(r&&e.tmp.extension&&(p="macro-with-date"),i=t[h],typeof i>"u"&&(i={"date-parts":[[0]]}),typeof this.dateparts>"u"&&(this.dateparts=["year","month","day"]),i.raw?i=e.fun.dateparser.parseDateToArray(i.raw):i["date-parts"]&&(i=e.dateParseArray(i)),typeof i>"u"&&(i={}),i.year)for(m=0,c=a.DATE_PARTS_INTERNAL.length;m<c;m+=1)if(s=a.DATE_PARTS_INTERNAL[m],n=0,o=s,o.slice(-4)==="_end"&&(o=o.slice(0,-4)),i[s]&&this.dateparts.indexOf(o)>-1&&(n=i[s]),s.slice(0,4)==="year"){l=a.Util.Dates[o].numeric(e,n);var u="1";l[0]==="-"&&(u="0",l=l.slice(1),l=9999-parseInt(l,10)),e.output.append(a.Util.Dates[s.slice(0,4)].numeric(e,u+l),p)}else n=a.Util.Dates[o]["numeric-leading-zeros"](e,n),n||(n="00"),e.output.append(n,p)};a.Engine.prototype.dateParseArray=function(e){var t,r,i,s;t={};for(r in e)if(r==="date-parts"){i=e["date-parts"],i.length>1&&i[0].length!==i[1].length&&a.error("CSL data error: element mismatch in date range input."),s=["","_end"];for(var n=0,o=i.length;n<o;n+=1)for(var l=0,u=a.DATE_PARTS.length;l<u;l+=1)isNaN(parseInt(i[n][l],10))?t[a.DATE_PARTS[l]+s[n]]=void 0:t[a.DATE_PARTS[l]+s[n]]=parseInt(i[n][l],10)}else e.hasOwnProperty(r)&&(r==="literal"&&typeof e.literal=="object"&&typeof e.literal.part=="string"?(a.debug("Warning: fixing up weird literal date value"),t.literal=e.literal.part):t[r]=e[r]);return t};a.Util.Names={};a.Util.Names.compareNamesets=a.NameOutput.prototype._compareNamesets;a.Util.Names.unInitialize=function(e,t){var r,i,s,n,o;if(!t)return"";for(s=t.split(/(?:\-|\s+)/),n=t.match(/(\-|\s+)/g),o="",r=0,i=s.length;r<i;r+=1)o+=s[r],r<i-1&&(o+=n[r]);return o};a.Util.Names.initializeWith=function(e,t,r,i){var s,n,o,l,u;if(!t)return"";if(r||(r=""),["Lord","Lady"].indexOf(t)>-1||!t.replace(/^(?:<[^>]+>)*/,"").match(a.STARTSWITH_ROMANESQUE_REGEXP)&&!r.match("%s"))return t;e.opt["initialize-with-hyphen"]===!1&&(t=t.replace(/\-/g," ")),t=t.replace(/\s*\-\s*/g,"-").replace(/\s+/g," "),t=t.replace(/-([a-z])/g,"\u2013$1");for(var s=t.length-2;s>-1;s+=-1)t.slice(s,s+1)==="."&&t.slice(s+1,s+2)!==" "&&(t=t.slice(0,s)+". "+t.slice(s+1));var m=a.Output.Formatters.nameDoppel.split(t),c=[];if(c=[m.strings[0]],m.tags.length===0){var h=c[0].match(/[^\.]+$/);h&&h[0].length===1&&h[0]!==h[0].toLowerCase()&&(c[0]+=".")}for(s=1,n=m.strings.length;s<n;s+=1)c.push(m.tags[s-1]),c.push(m.strings[s]);return i?u=this.doNormalize(e,c,r):u=this.doInitialize(e,c,r),u=u.replace(/\u2013([a-z])/g,"-$1"),u};a.Util.Names.notag=function(e){return e.replace(/^(?:<[^>]+>)*/,"")};a.Util.Names.mergetag=function(e,t,r){var i=t.match(/(?:-*<[^>]+>-*)/g);if(i)t=i.join("");else return r;return i=r.match(/^(.*[^\s])*(\s+)$/),i?(i[1]=i[1]?i[1]:"",r=i[1]+t+i[2]):r=r+t,r};a.Util.Names.tagonly=function(e,t){var r=t.match(/(?:<[^>]+>)+/);return r?r.join(""):t};a.Util.Names.doNormalize=function(e,t,r){var i,s;r=r||"";var n=[];for(i=0,s=t.length;i<s;i+=1)this.notag(t[i]).length>1&&this.notag(t[i]).slice(-1)==="."?(t[i]=t[i].replace(/^(.*)\.(.*)$/,"$1$2"),n.push(!0)):t[i].length===1&&t[i].toUpperCase()===t[i]?n.push(!0):n.push(!1);for(i=0,s=t.length;i<s;i+=2)n[i]&&(i<t.length-2&&(t[i+1]=this.tagonly(e,t[i+1]),n[i+2]||(t[i+1]=this.tagonly(e,t[i+1])+" "),t[i+2].length>1?t[i+1]=r.replace(/\ufeff$/,"")+t[i+1]:t[i+1]=this.mergetag(e,t[i+1],r)),i===t.length-1&&(t[i]=t[i]+r));return t.join("").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," ")};a.Util.Names.doInitialize=function(e,t,r){var i,s,n,o,l,u,m;for(i=0,s=t.length;i<s;i+=2)if(m=t[i],!!m)if(n=m.match(a.NAME_INITIAL_REGEXP),!n&&!m.match(a.STARTSWITH_ROMANESQUE_REGEXP)&&m.length>1&&r.match("%s")&&(n=m.match(/(.)(.*)/)),n&&n[2]&&n[3]&&(n[1]=n[1]+n[2],n[2]=""),n&&n[1].slice(0,1)===n[1].slice(0,1).toUpperCase()){var c="";if(n[2]){var h="";for(u=n[2].split(""),o=0,l=u.length;o<l;o+=1){var p=u[o];if(p===p.toUpperCase())h+=p;else break}h.length<n[2].length&&(c=a.toLocaleLowerCase.call(e,h))}t[i]=n[1]+c,i<s-1?r.match("%s")?t[i]=r.replace("%s",t[i]):t[i+1].indexOf("-")>-1?t[i+1]=this.mergetag(e,t[i+1].replace("-",""),r)+"-":t[i+1]=this.mergetag(e,t[i+1],r):r.match("%s")?t[i]=r.replace("%s",t[i]):t.push(r)}else m.match(a.ROMANESQUE_REGEXP)&&(!n||!n[3])&&(t[i]=" "+m);var d=t.join("");return d=d.replace(/[\u0009\u000a\u000b\u000c\u000d\u0020\ufeff\u00a0]+$/,"").replace(/\s*\-\s*/g,"-").replace(/[\u0009\u000a\u000b\u000c\u000d\u0020]+/g," "),d};a.Util.Names.getRawName=function(e){var t=[];return e.literal?t.push(e.literal):(e.given&&t.push(e.given),e.family&&t.push(e.family)),t.join(" ")};a.Util.Dates={};a.Util.Dates.year={};a.Util.Dates.year.long=function(e,t){return t||(typeof t=="boolean"?t="":t=0),t.toString()};a.Util.Dates.year.imperial=function(e,t,r){var i="";t||(typeof t=="boolean"?t="":t=0),r=r?"_end":"";var s=e.tmp.date_object["month"+r];for(s=s?""+s:"1";s.length<2;)s="0"+s;var n=e.tmp.date_object["day"+r];for(n=n?""+n:"1";n.length<2;)n="0"+n;var o=parseInt(t+s+n,10),l,u;if(o>=18680908&&o<19120730?(l="\u660E\u6CBB",u=1867):o>=19120730&&o<19261225?(l="\u5927\u6B63",u=1911):o>=19261225&&o<19890108?(l="\u662D\u548C",u=1925):o>=19890108&&(l="\u5E73\u6210",u=1988),l&&u){var m=l;e.sys.normalizeAbbrevsKey&&(m=e.sys.normalizeAbbrevsKey("number",l)),e.transform.abbrevs.default.number[m]||e.transform.loadAbbreviation("default","number",m,null),e.transform.abbrevs.default.number[m]&&(l=e.transform.abbrevs.default.number[m]),i=l+(t-u)}return i};a.Util.Dates.year.short=function(e,t){if(t=t.toString(),t&&t.length===4)return t.substr(2)};a.Util.Dates.year.numeric=function(e,t){var i,r;t=""+t;var i=t.match(/([0-9]*)$/);for(i?(r=t.slice(0,i[1].length*-1),t=i[1]):(r=t,t="");t.length<4;)t="0"+t;return r+t};a.Util.Dates.normalizeMonth=function(e,t){var r;if(e||(e=0),e=""+e,e.match(/^[0-9]+$/)||(e=0),e=parseInt(e,10),t){var i={stub:"month-",num:e};if(i.num<1||i.num>24)i.num=0;else{for(;i.num>16;)i.num=i.num-4;i.num>12&&(i.stub="season-",i.num=i.num-12)}r=i}else(e<1||e>12)&&(e=0),r=e;return r};a.Util.Dates.month={};a.Util.Dates.month.numeric=function(e,r){var r=a.Util.Dates.normalizeMonth(r);return r||(r=""),r};a.Util.Dates.month["numeric-leading-zeros"]=function(e,r){var r=a.Util.Dates.normalizeMonth(r);if(!r)r="";else for(r=""+r;r.length<2;)r="0"+r;return r};a.Util.Dates.month.long=function(e,n,r,i){var s=a.Util.Dates.normalizeMonth(n,!0),n=s.num;if(!n)n="";else{for(n=""+n;n.length<2;)n="0"+n;n=e.getTerm(s.stub+n,"long",0,0,!1,i)}return n};a.Util.Dates.month.short=function(e,n,r,i){var s=a.Util.Dates.normalizeMonth(n,!0),n=s.num;if(!n)n="";else{for(n=""+n;n.length<2;)n="0"+n;n=e.getTerm(s.stub+n,"short",0,0,!1,i)}return n};a.Util.Dates.day={};a.Util.Dates.day.numeric=function(e,t){return t.toString()};a.Util.Dates.day.long=a.Util.Dates.day.numeric;a.Util.Dates.day["numeric-leading-zeros"]=function(e,t){for(t||(t=0),t=t.toString();t.length<2;)t="0"+t;return t.toString()};a.Util.Dates.day.ordinal=function(e,t,r){return e.fun.ordinalizer.format(t,r)};a.Util.Sort={};a.Util.Sort.strip_prepositions=function(e){var t;return typeof e=="string"&&(t=e.match(/^(([aA]|[aA][nN]|[tT][hH][eE])\s+)/)),t&&(e=e.substr(t[1].length)),e};a.Util.substituteStart=function(e,t){var r,i,s,n,o,l,u;n=function(m,c,h){for(var p=0,d=this.decorations.length;p<d;p+=1)if(this.decorations[p][0]==="@strip-periods"&&this.decorations[p][1]==="true"){m.tmp.strip_periods+=1;break}},this.execs.push(n),this.decorations&&e.opt.development_extensions.csl_reverse_lookup_support&&(this.decorations.reverse(),this.decorations.push(["@showid","true",this.cslid]),this.decorations.reverse()),u=["number","date","names"],(this.name==="text"&&!this.postponed_macro||u.indexOf(this.name)>-1)&&(r=function(m,c,h){m.tmp.element_trace.value()==="author"||this.name==="names"?(!m.tmp.just_looking&&h&&h["author-only"]&&m.tmp.area!=="intext"&&m.tmp.probably_rendered_something&&m.tmp.element_trace.push("suppress-me"),!m.tmp.just_looking&&h&&h["suppress-author"]&&(m.tmp.probably_rendered_something||m.tmp.element_trace.push("suppress-me"))):this.name==="date"?!m.tmp.just_looking&&h&&h["author-only"]&&m.tmp.area!=="intext"&&m.tmp.probably_rendered_something&&m.tmp.element_trace.push("suppress-me"):!m.tmp.just_looking&&h&&h["author-only"]&&m.tmp.area!=="intext"?!m.tmp.probably_rendered_something&&m.tmp.can_block_substitute||m.tmp.element_trace.push("suppress-me"):h&&h["suppress-author"]&&m.tmp.element_trace.push("do-not-suppress-me")},this.execs.push(r)),i=this.strings.cls,this.strings.cls=!1,e.build.render_nesting_level===0&&(e.build.area==="bibliography"&&e.bibliography.opt["second-field-align"]?(s=new a.Token("group",a.START),s.decorations=[["@display","left-margin"]],n=function(m,c){m.tmp.render_seen||(s.strings.first_blob=c.id,m.output.startTag("bib_first",s))},s.execs.push(n),t.push(s)):a.DISPLAY_CLASSES.indexOf(i)>-1&&(s=new a.Token("group",a.START),s.decorations=[["@display",i]],n=function(m,c){s.strings.first_blob=c.id,m.output.startTag("bib_first",s)},s.execs.push(n),t.push(s)),e.build.cls=i),e.build.render_nesting_level+=1,e.build.substitute_level.value()===1&&(o=new a.Token("choose",a.START),a.Node.choose.build.call(o,e,t),l=new a.Token("if",a.START),n=function(){return!!e.tmp.can_substitute.value()},l.tests||(l.tests=[]),l.tests.push(n),l.test=e.fun.match.any(this,e,l.tests),t.push(l)),e.sys.variableWrapper&&this.variables_real&&this.variables_real.length&&(n=function(m,c,h){if(!m.tmp.just_looking&&!m.tmp.suppress_decorations){var p=new a.Token("text",a.START);p.decorations=[["@showid","true"]],m.output.startTag("variable_entry",p);var d=null;h&&(d=h.position),d||(d=0);var v=["first","container-subsequent","subsequent","ibid","ibid-with-locator"],f=0;h&&h.noteIndex&&(f=h.noteIndex);var y=0;h&&h["first-reference-note-number"]&&(y=h["first-reference-note-number"]);var b=0;h&&h["first-container-reference-note-number"]&&(b=h["first-container-reference-note-number"]);var g=0;h&&h["citation-number"]&&(g=h["citation-number"]);var A=0;h&&h.index&&(A=h.index);var E={itemData:c,variableNames:this.variables,context:m.tmp.area,xclass:m.opt.xclass,position:v[d],"note-number":f,"first-reference-note-number":y,"first-container-reference-note-number":b,"citation-number":g,index:A,mode:m.opt.mode};m.output.current.value().params=E}},this.execs.push(n))};a.Util.substituteEnd=function(e,t){var r,i,s,n,o,l,u;if(e.sys.variableWrapper&&(this.hasVariable||this.variables_real&&this.variables_real.length)&&(r=function(c){!c.tmp.just_looking&&!c.tmp.suppress_decorations&&c.output.endTag("variable_entry")},this.execs.push(r)),r=function(c){for(var h=0,p=this.decorations.length;h<p;h+=1)if(this.decorations[h][0]==="@strip-periods"&&this.decorations[h][1]==="true"){c.tmp.strip_periods+=-1;break}},this.execs.push(r),e.build.render_nesting_level+=-1,e.build.render_nesting_level===0&&(e.build.cls?(r=function(c){c.output.endTag("bib_first")},this.execs.push(r),e.build.cls=!1):e.build.area==="bibliography"&&e.bibliography.opt["second-field-align"]&&(i=new a.Token("group",a.END),r=function(c){c.tmp.render_seen||c.output.endTag("bib_first")},i.execs.push(r),t.push(i),s=new a.Token("group",a.START),s.decorations=[["@display","right-inline"]],r=function(c){c.tmp.render_seen||(c.tmp.render_seen=!0,c.output.startTag("bib_other",s))},s.execs.push(r),t.push(s))),e.build.substitute_level.value()===1&&(n=new a.Token("if",a.END),t.push(n),o=new a.Token("choose",a.END),a.Node.choose.build.call(o,e,t)),this.name==="names"||this.name==="text"&&this.variables_real!=="title"){l=new a.Token("text",a.SINGLETON);var m=this.name;r=function(c,h){if(c.tmp.area==="bibliography"&&typeof c.bibliography.opt["subsequent-author-substitute"]=="string"&&!(this.variables_real&&!h[this.variables_real])&&!(this.variables_real&&m==="names")){var p=c.bibliography.opt["subsequent-author-substitute-rule"],d,v,f=!c.tmp.suppress_decorations;if(f&&c.tmp.subsequent_author_substitute_ok&&c.tmp.rendered_name){if(p==="partial-each"||p==="partial-first"){var y=!0,b=[];for(d=0,v=c.tmp.name_node.children.length;d<v;d+=1){var g=c.tmp.rendered_name[d];y&&c.tmp.last_rendered_name&&c.tmp.last_rendered_name.length>d-1&&g&&!g.localeCompare(c.tmp.last_rendered_name[d])?(u=new a.Blob(c[c.tmp.area].opt["subsequent-author-substitute"]),c.tmp.name_node.children[d].blobs=[u],p==="partial-first"&&(y=!1)):y=!1,b.push(g)}c.tmp.last_rendered_name=b}else if(p==="complete-each"){var b=c.tmp.rendered_name.join(",");if(b){if(c.tmp.last_rendered_name&&!b.localeCompare(c.tmp.last_rendered_name))for(d=0,v=c.tmp.name_node.children.length;d<v;d+=1)u=new a.Blob(c[c.tmp.area].opt["subsequent-author-substitute"]),c.tmp.name_node.children[d].blobs=[u];c.tmp.last_rendered_name=b}}else{var b=c.tmp.rendered_name.join(",");b&&(c.tmp.last_rendered_name&&!b.localeCompare(c.tmp.last_rendered_name)&&(u=new a.Blob(c[c.tmp.area].opt["subsequent-author-substitute"]),c.tmp.label_blob?c.tmp.name_node.top.blobs=[u,c.tmp.label_blob]:c.tmp.name_node.top.blobs.length?c.tmp.name_node.top.blobs[0].blobs=[u]:c.tmp.name_node.top.blobs=[u],c.tmp.substituted_variable=m),c.tmp.last_rendered_name=b)}c.tmp.subsequent_author_substitute_ok=!1}}},this.execs.push(r)}(this.name==="text"&&!this.postponed_macro||["number","date","names"].indexOf(this.name)>-1)&&(r=function(c,h){c.tmp.element_trace.mystack.length>1&&c.tmp.element_trace.pop()},this.execs.push(r))};a.Util.padding=function(e){var t=e.match(/\s*(-{0,1}[0-9]+)/);if(t)for(e=parseInt(t[1],10),e<0&&(e=1e20+e),e=""+e;e.length<20;)e="0"+e;return e};a.Util.LongOrdinalizer=function(){};a.Util.LongOrdinalizer.prototype.init=function(e){this.state=e};a.Util.LongOrdinalizer.prototype.format=function(e,t){e<10&&(e="0"+e);var r=a.Engine.getField(a.LOOSE,this.state.locale[this.state.opt.lang].terms,"long-ordinal-"+e,"long",0,t);return r||(r=this.state.fun.ordinalizer.format(e,t)),this.state.tmp.cite_renders_content=!0,r};a.Util.Ordinalizer=function(e){this.state=e,this.suffixes={}};a.Util.Ordinalizer.prototype.init=function(){if(!this.suffixes[this.state.opt.lang]){this.suffixes[this.state.opt.lang]={};for(var e=0,t=3;e<t;e+=1){var r=[void 0,"masculine","feminine"][e];this.suffixes[this.state.opt.lang][r]=[];for(var i=1;i<5;i+=1){var s=this.state.getTerm("ordinal-0"+i,"long",!1,r);if(typeof s>"u"){delete this.suffixes[this.state.opt.lang][r];break}this.suffixes[this.state.opt.lang][r].push(s)}}}};a.Util.Ordinalizer.prototype.format=function(e,t){var r;e=parseInt(e,10),r=""+e;var i="",s=[];if(t&&s.push(t),s.push("neuter"),this.state.locale[this.state.opt.lang].ord["1.0.1"]){i=this.state.getTerm("ordinal",!1,0,t);for(var n,o=0,l=s.length;o<l;o+=1){n=s[o];var u=this.state.locale[this.state.opt.lang].ord["1.0.1"];if(u["whole-number"][r]&&u["whole-number"][r][n]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["whole-number"][r][n],!1,0,t):u["last-two-digits"][r.slice(r.length-2)]&&u["last-two-digits"][r.slice(r.length-2)][n]?i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-two-digits"][r.slice(r.length-2)][n],!1,0,t):u["last-digit"][r.slice(r.length-1)]&&u["last-digit"][r.slice(r.length-1)][n]&&(i=this.state.getTerm(this.state.locale[this.state.opt.lang].ord["1.0.1"]["last-digit"][r.slice(r.length-1)][n],!1,0,t)),i)break}}else t||(t=void 0),this.state.fun.ordinalizer.init(),e/10%10===1||e>10&&e<20?i=this.suffixes[this.state.opt.lang][t][3]:e%10===1&&e%100!==11?i=this.suffixes[this.state.opt.lang][t][0]:e%10===2&&e%100!==12?i=this.suffixes[this.state.opt.lang][t][1]:e%10===3&&e%100!==13?i=this.suffixes[this.state.opt.lang][t][2]:i=this.suffixes[this.state.opt.lang][t][3];return r=r+=i,r};a.Util.Romanizer=function(){};a.Util.Romanizer.prototype.format=function(e){var t,r,i,s,n;if(t="",e<6e3)for(s=e.toString().split(""),s.reverse(),r=0,i=0,n=s.length,r=0;r<n;r+=1)i=parseInt(s[r],10),t=a.ROMAN_NUMERALS[r][i]+t;return t};a.Util.Suffixator=function(e){e||(e=a.SUFFIX_CHARS),this.slist=e.split(",")};a.Util.Suffixator.prototype.format=function(e){var t;e+=1;var r="";do{t=e%26===0?26:e%26;var r=this.slist[t-1]+r;e=(e-t)/26}while(e!==0);return r};a.Engine.prototype.processNumber=function(e,t,r){var i,s=this,n=r;r=r==="page-first"?"page":r;var o=",\\s+and\\s+|\\s+and\\s+";this.opt.lang.slice(0,2)!=="en"&&(o+="|,\\s+"+this.getTerm("and")+"\\s+|\\s+"+this.getTerm("and")+"\\s+");var l="\\s*&\\s*",u=new RegExp("^"+l+"$"),m=new RegExp("("+l+"|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)","g"),c=new RegExp("(?:"+l+"|"+o+"|;\\s+|,\\s+|\\s*\\\\*[\\-\\u2013]+\\s*)"),h=this.getTerm("and"),p=this.getTerm("and","symbol");h===p&&(p="&");function d(B){B=B.trim();var L=B.match(/^([^ ]+)/);if(L&&!a.STATUTE_SUBDIV_STRINGS[L[1]]){var z=null;["locator","locator-extra","page"].indexOf(r)>-1?t.label?z=a.STATUTE_SUBDIV_STRINGS_REVERSE[t.label]:z="p.":z=a.STATUTE_SUBDIV_STRINGS_REVERSE[r],z&&(B=z+" "+B)}return B}function v(B,L,z,H,G){H=H||"";var X={};if(!L&&!a.STATUTE_SUBDIV_STRINGS_REVERSE[r]&&(L="var:"+r),L){var P=L.match(/(\s*)([^\s]+)(\s*)/);n==="page"&&G===0&&["p.","pp."].indexOf(P[2])===-1?(X.gotosleepability=!0,X.labelVisibility=!0):X.labelVisibility=!1,X.label=P[2],X.origLabel=B,X.labelSuffix=P[3]?P[3]:"",X.plural=0}var P=z.match(/^([0-9]*[a-zA-Z]+0*)?([0-9]+(?:[a-zA-Z]*|[-,a-zA-Z]+))$/);return P?(X.particle=P[1]?P[1]:"",X.value=P[2]):(X.particle="",X.value=z),X.joiningSuffix=H.replace(/\s*-\s*/,"-"),X}function f(B){for(var L=B.length-2;L>-1;L-=2)B[L]==="-"&&B[L-1].match(/^(?:(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z])\.  *)*[0-9]+[,a-zA-Z]+$/)&&B[L+1].match(/^[,a-zA-Z]+$/)&&(B[L-1]=B.slice(L-1,L+2).join(""),B=B.slice(0,L).concat(B.slice(L+2)));return B}function y(B,L){L=L||"",B=d(B,L);var z,H,G;if(r==="page"&&B.indexOf("\u2013")>-1&&(B=B.replace(/\u2013/g,"-")),B.indexOf("\\-")>-1){z=new RegExp(m.source.replace("\\-","")),H=new RegExp(c.source.replace("\\-",""));for(var X=B.split("\\-"),P=0,$=X.length;P<$;P++)X[P]=X[P].replace(/\-/g,"\u2013");G=X.join("\\-"),G=G.replace(/\\/g,"")}else z=m,H=c,G=B;var V=[],J=G.match(z);if(J){for(var X=G.split(H),P=0,$=J.length;P<$;P++)J[P].match(u)&&(X[P].match(/[a-zA-Z]$/)&&X[P].match(/^[a-zA-Z]/)?J[P]=p:J[P]=" "+p+" ");var ee=!1;for(var P in X)if((""+X[P]).replace(/^[a-z]\.\s+/,"").match(/[^\s0-9ivxlcmIVXLCM]/))break;if(ee)V=[G];else{for(var P=0,$=X.length-1;P<$;P++)V.push(X[P]),V.push(J[P]);V.push(X[X.length-1]),V=f(V)}}else var V=[G];for(var Q=[],W=L,ne="",P=0,$=V.length;P<$;P+=2){var J=V[P].match(/((?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/g);if(J){for(var X=V[P].split(/(?:(?:^| )(?:[a-z]|[a-z][a-z]|[a-z][a-z][a-z]|[a-z][a-z][a-z][a-z]|subpara|subch|amend|bibliog|annot|illus|princ|intro|sched|subdiv|subsec)(?:\.| ) *)/),Z=X.length-1;Z>0;Z--)X[Z-1]&&(!X[Z].match(/^[0-9]+([-;,:a-zA-Z]*)$/)||!X[Z-1].match(/^[0-9]+([-;,:a-zA-Z]*)$/))&&(X[Z-1]=X[Z-1]+J[Z-1]+X[Z],X=X.slice(0,Z).concat(X.slice(Z+1)),J=J.slice(0,Z-1).concat(J.slice(Z)));if(J.length>0){var le=J[0].trim(),ye=!a.STATUTE_SUBDIV_STRINGS[le]||typeof s.getTerm(a.STATUTE_SUBDIV_STRINGS[le])>"u"||["locator","number","locator-extra","page"].indexOf(r)===-1&&a.STATUTE_SUBDIV_STRINGS[le]!==r;ye?P===0&&(J=J.slice(1),X[0]=X[0]+" "+le+" "+X[1],X=X.slice(0,1).concat(X.slice(2))):ne=le}for(var Z=0,te=X.length;Z<te;Z++)if(X[Z]||Z===X.length-1){var ue;W=J[Z-1]?J[Z-1]:W,ne===W.trim()?ue="":ue=ne,G=X[Z]?X[Z].trim():"",Z===X.length-1?Q.push(v(ue,W,G,V[P+1],P)):Q.push(v(ue,W,G,null,P))}}else{var ue;ne===W.trim()?ue="":ue=ne,Q.push(v(ue,W,V[P],V[P+1]))}}return Q}function b(B){for(var L=0,z=B.length-1;L<z;L++)!B[L].joiningSuffix&&B[L+1].label&&(B[L].joiningSuffix=" ")}function g(B,L,z){var H=B[z.pos],G=B[L].value,X=H.joiningSuffix==="\\-";G.particle&&G.particle!==H.particle&&(z.collapsible=!1);var P=G.match(/^[0-9]+([-,:a-zA-Z]*)$/),$=H.value.match(/^(?:[0-9]+|[ixv]+)([-,:a-zA-Z]*|\-[\-0-9]+)$/);if((!G||!P||!$||X)&&(z.collapsible=!1,(!G||!$)&&(z.numeric=!1),X&&z.count--),(P&&P[1]||$&&$[1])&&(z.collapsible=!1),B[L].collapsible===void 0){for(var V=L,J=L+z.count;V<J;V++)isNaN(parseInt(B[V].value))&&!B[V].value.match(/^[ivxlcmIVXLCM]+$/)?B[V].collapsible=!1:B[V].collapsible=!0;z.collapsible=B[L].collapsible}for(var ee=z.collapsible,V=z.pos,J=z.pos+z.count;V<J;V++)z.count>1&&ee&&(B[V].plural=1),B[V].numeric=z.numeric,B[V].collapsible=z.collapsible}function A(B,L,z){z.label.slice(0,4)!=="var:"&&(z.pos===0?(["locator","number","locator-extra","page"].indexOf(r)>-1&&typeof s.getTerm(a.STATUTE_SUBDIV_STRINGS[z.label])>"u"&&(B[z.pos].labelVisibility=!0),["locator","number","locator-extra","page"].indexOf(r)===-1&&a.STATUTE_SUBDIV_STRINGS[z.label]!==r&&(B[0].labelVisibility=!0)):B[z.pos].labelVisibility=!0)}function E(B){if(B.length!==0){for(var L=0,z=1,H=1,G=B.length;H<G;H++){var X=B[H-1],P=B[H];if(X.label===P.label&&X.particle===X.particle)z++;else{var $=JSON.parse(JSON.stringify(B[L]));$.pos=L,$.count=z,$.numeric=!0,g(B,L,$),X.label!==P.label&&A(B,L,$),L=H,z=1}}var $=JSON.parse(JSON.stringify(B[L]));$.pos=L,$.count=z,$.numeric=!0,g(B,L,$),A(B,L,$),B.length&&B[0].numeric&&r.slice(0,10)==="number-of-"&&parseInt(t[n],10)>1&&(B[0].plural=1)}}function S(B){return B.replace("\\-","-")}function w(B){var L=a.Util.cloneToken(e),z=new a.Token;s.tmp.just_looking||(z.decorations=L.decorations,L.decorations=[],z.strings.prefix=L.strings.prefix,L.strings.prefix="",z.strings.suffix=L.strings.suffix,L.strings.suffix="");var H=B.length?B[0].label:null;if(B.length){for(var G=0,X=B.length;G<X;G++){var P=B[G],$=a.Util.cloneToken(L);$.gender=e.gender,H===P.label&&($.formatter=e.formatter),P.numeric&&($.successor_prefix=P.successor_prefix),$.strings.suffix=$.strings.suffix+S(P.joiningSuffix),P.styling=$}s.tmp.just_looking||B[0].value.slice(0,1)==='"'&&B[B.length-1].value.slice(-1)==='"'&&(B[0].value=B[0].value.slice(1),B[B.length-1].value=B[B.length-1].value.slice(0,-1),z.decorations.push(["@quotes",!0]))}return z}function I(B,L){var z=!0;if(["locator","locator-extra","page"].indexOf(B)>-1){var H;L.origLabel?H=L.origLabel:H=L.label,z=!!s.getTerm(a.STATUTE_SUBDIV_STRINGS[H])}return z}function O(B,L){return B==="page"||["locator","locator-extra"].indexOf(B)>-1&&(["p."].indexOf(L.label)>-1||["p."].indexOf(L.origLabel)>-1)}function D(B,L,z,H){var G=O(B,L),X=I(B,L);return X&&z==="-"&&H&&((G||["locator","locator-extra","issue","volume","edition","number"].indexOf(B)>-1)&&(z=s.getTerm("page-range-delimiter"),z||(z="\u2013")),B==="collection-number"&&(z=s.getTerm("year-range-delimiter"),z||(z="\u2013"))),z}function _(B,L,z){if(!(L<1)&&z.count===2&&B[L-1].particle===B[L].particle){if(B[L-1].joiningSuffix!=="-"){z.count=1;return}if(!s.opt["page-range-format"]&&parseInt(B[L-1].value,10)>parseInt(B[L].value,10)){B[L-1].joiningSuffix=D(r,B[L],B[L-1].joiningSuffix,!0);return}var H=B[L],G=O(r,H),X;G&&!isNaN(parseInt(B[L-1].value))&&!isNaN(parseInt(B[L].value))?(X=B[L-1].particle+B[L-1].value+" - "+B[L].particle+B[L].value,X=s.fun.page_mangler(X)):((""+B[L-1].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(""+B[L].value).match(/^([0-9]+|[ivxlcmIVXLCM]+)$/)&&(B[L-1].joiningSuffix=s.getTerm("page-range-delimiter")),X=B[L-1].value+S(B[L-1].joiningSuffix)+B[L].value);var P=X.match(/^((?:[0-9]*[a-zA-Z]+0*))?([0-9]+[a-z]*)(\s*[^0-9]+\s*)([-,a-zA-Z]?0*)([0-9]+[a-z]*)$/);if(P){var $=P[3];$=D(r,H,$,B[L].numeric),B[L-1].particle=P[1],B[L-1].value=P[2],B[L-1].joiningSuffix=$,B[L].particle=P[4],B[L].value=P[5]}z.count=0}}function x(B){if(e&&["page","chapter-number","collection-number","edition","issue","number","number-of-pages","number-of-volumes","volume","locator","locator-extra"].indexOf(r)!==-1){for(var L={count:0,label:null,lastHadRangeDelimiter:!1},z=0,H=B.length;z<H;z++){var G=B[z];if(G.collapsible)L.label===G.label&&G.joiningSuffix==="-"?L.count=1:L.label===G.label&&G.joiningSuffix!=="-"?(L.count++,L.count===2&&_(B,z,L)):L.label!==G.label?(L.label=G.label,L.count=1):(L.count=1,L.label=G.label);else{L.count=0,L.label=null;var X=G.numeric;G.joiningSuffix=D(r,G,G.joiningSuffix,X)}}L.count===2&&_(B,B.length-1,L)}}function k(B,L,z){var H=B[L];z.length&&(H.numeric=z[0].numeric,H.collapsible=z[0].collapsible,H.plural=z[0].plural,H.label=a.STATUTE_SUBDIV_STRINGS[z[0].label],r==="number"&&H.label==="issue"&&s.getTerm("number")&&(H.label="number"))}if(e&&this.tmp.shadow_numbers[n]&&this.tmp.shadow_numbers[n].values.length){var R=this.tmp.shadow_numbers[n].values;x(R),this.tmp.shadow_numbers[n].masterStyling=w(R);return}if(this.tmp.shadow_numbers[n]||(this.tmp.shadow_numbers[n]={values:[]}),!!t){var N=a.LangPrefsMap[r];if(N){var T=this.opt["cite-lang-prefs"][N][0];i=this.transform.getTextSubField(t,n,"locale-"+T,!0),i=i.name}else i=t[n];if(i&&n==="number"&&t.type==="legal_case"&&(i=i.replace(/[\\]*-/g,"\\-")),i&&this.sys.getAbbreviation){if(this.sys.normalizeAbbrevsKey)var C=this.sys.normalizeAbbrevsKey(n,i);else var C=i;var j=this.transform.loadAbbreviation(t.jurisdiction,"number",C,t.language);this.transform.abbrevs[j].number&&(this.transform.abbrevs[j].number[C]?i=this.transform.abbrevs[j].number[C]:typeof this.transform.abbrevs[j].number[C]<"u"&&delete this.transform.abbrevs[j].number[C])}if(typeof i<"u"&&(typeof i=="string"||typeof i=="number")){typeof i=="number"&&(i=""+i);var F=a.STATUTE_SUBDIV_STRINGS_REVERSE[r];if(this.tmp.shadow_numbers[n].values.length===0){var R=y(i,F);b(R),E(R);for(var M of R)M.numeric||(M.plural=0);this.tmp.shadow_numbers[n].values=R,e&&(x(R),this.tmp.shadow_numbers[n].masterStyling=w(R)),k(this.tmp.shadow_numbers,n,R)}var U=this.tmp.shadow_numbers[n];r==="number"&&U.values.length===1&&U.values[0].value.indexOf("|")>-1&&(U.values[0].value=U.values[0].value.replace(/\|/g,", "),U.values[0].numeric=!0,U.values[0].plural=1,U.values[0].collapsible=!1,U.numeric=!0,U.plural=1,U.collapsible=!1),U.values.length===1&&U.values[0].value.match(/^[0-9]+(?:\/[0-9]+)+$/)&&(U.values[0].numeric=!0,U.values[0].plural=0,U.values[0].collapsible=!1,U.numeric=!0,U.plural=0,U.collapsible=!1),r==="page"&&U.values.length>0&&U.values[0].gotosleepability&&(U.labelForm="short")}}};a.Util.outputNumericField=function(e,t,r){e.output.openLevel(e.tmp.shadow_numbers[t].masterStyling);var i=e.tmp.shadow_numbers[t].masterStyling,s=e.tmp.shadow_numbers[t].values,n=s.length?s[0].label:null,o=e.tmp.shadow_numbers[t].labelForm,l=e.tmp.group_context.tip.label_static,u;o?u=o:u="short";for(var m=e.tmp.shadow_numbers[t].labelCapitalizeIfFirst,c=e.tmp.shadow_numbers[t].labelDecorations,h=null,p=0,d=s.length;p<d;p++){var v=s[p],f="",y;v.label&&(v.label.slice(0,4)==="var:"?y=v.label.slice(4):y=a.STATUTE_SUBDIV_STRINGS[v.label],y&&(v.label===n?(l&&(f=e.getTerm(y,"static",v.plural),f.indexOf("%s")===-1&&(f="")),f||(f=e.getTerm(y,o,v.plural))):(l&&(f=e.getTerm(y,"static",v.plural),f.indexOf("%s")===-1&&(f="")),f||(f=e.getTerm(y,u,v.plural))),m&&(f=a.Output.Formatters["capitalize-first"](e,f))));var b=-1;f&&(b=f.indexOf("%s"));var g=a.Util.cloneToken(v.styling);if(g.formatter=v.styling.formatter,g.type=v.styling.type,g.num=v.styling.num,g.gender=v.styling.gender,b>0&&b<f.length-2)g.strings.prefix+=f.slice(0,b),g.strings.suffix=f.slice(b+2)+g.strings.suffix;else if(v.labelVisibility)if(f||(f=v.label,y=v.label),b>0){var A=new a.Token;A.decorations=c,e.output.append(f.slice(0,b),A)}else(b===f.length-2||b===-1)&&e.output.append(f+v.labelSuffix,"empty");if(a.UPDATE_GROUP_CONTEXT_CONDITION(e,i.strings.prefix,null,i,`${v.particle}${v.value}`),v.collapsible){var E;v.value.match(/^[1-9][0-9]*$/)&&Number.isSafeInteger(parseInt(v.value,10))?E=new a.NumericBlob(e,v.particle,parseInt(v.value,10),g,r):E=new a.NumericBlob(e,v.particle,v.value,g,r),typeof E.gender>"u"&&(E.gender=e.locale[e.opt.lang]["noun-genders"][t]),e.output.append(E,"literal")}else e.output.append(v.particle+v.value,g);if(b===0&&b<f.length-2&&(h===null&&(h=y),y!==h||p===s.length-1)){var S=new a.Token;S.decorations=c,e.output.append(f.slice(b+2),S)}h=y,e.tmp.term_predecessor=!0}e.output.closeLevel()};a.Util.PageRangeMangler={};a.Util.PageRangeMangler.getFunction=function(e,t){var r,i,s,n,o,l,u,m,c,h,p,d,v,f,y,b,g,A,E=e.getTerm(t+"-range-delimiter");r=/([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)\s*(?:\u2013|-)\s*([0-9]*[a-zA-Z]+0*)?([0-9]+[a-z]*)/,n=function(w){for(s=w.length,i=1;i<s;i+=2)typeof w[i]=="object"&&(w[i]=w[i].join(""));var I=w.join("");return I=I.replace(/([^\\])\-/g,"$1"+e.getTerm(t+"-range-delimiter")),I},o=function(w){var I,O,D,_="\\s+\\-\\s+",x=E==="-"?"":E,k=new RegExp("([^\\\\])[-"+x+"\\u2013]","g");w=w.replace(k,"$1 - ").replace(/\s+-\s+/g," - ");var R=new RegExp("((?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+_+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*)","g"),N=new RegExp("(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*"+_+"(?:[0-9]*[a-zA-Z]+0*)?[0-9]+[a-z]*");if(I=w.match(R),O=w.split(N),O.length===0)D=I;else for(D=[O[0]],i=1,s=O.length;i<s;i+=1)D.push(I[i-1].replace(/\s*\-\s*/g,"-")),D.push(O[i]);return D},l=function(w){for(w=""+w,p=o(w),s=p.length,i=1;i<s;i+=2)d=p[i].match(r),d&&(!d[3]||d[1]===d[3])&&(d[4].length<d[2].length&&(d[4]=d[2].slice(0,d[2].length-d[4].length)+d[4]),parseInt(d[2],10)<parseInt(d[4],10)&&(d[3]=E+(d[1]?d[1]:""),p[i]=d.slice(1))),typeof p[i]=="string"&&(p[i]=p[i].replace(/\-/g,E));return p},u=function(w,I,O){s=w.length;for(var D=1,_=w.length;D<_;D+=2)typeof w[D]=="object"&&(w[D][3]=m(w[D][1],w[D][3],I,O),w[D][2].slice(1)===w[D][0]&&(w[D][2]=E));return n(w)},m=function(w,I,O,D){if(O||(O=0),v=(""+w).split(""),f=(""+I).split(""),y=f.slice(),y.reverse(),v.length===f.length)for(var _=0,x=v.length;_<x;_+=1)if(v[_]===f[_]&&y.length>O)y.pop();else{if(O&&D&&y.length===3){var k=v.slice(0,_);k.reverse(),y=y.concat(k)}break}return y.reverse(),y.join("")},c=function(w){for(s=w.length,i=1;i<s;i+=2)typeof w[i]=="object"&&(d=w[i],b=parseInt(d[1],10),g=parseInt(d[3],10),b>100&&b%100&&parseInt(b/100,10)===parseInt(g/100,10)?d[3]=""+g%100:b>=1e4&&(d[3]=""+g%1e3)),d[2].slice(1)===d[0]&&(d[2]=E);return n(w)},h=function(w){for(s=w.length,i=1;i<s;i+=2){if(typeof w[i]=="object"&&(d=w[i],b=parseInt(d[1],10),g=parseInt(d[3],10),f=""+g,b>100&&b%100))for(var I=2;I<f.length;I++){var O=Math.pow(10,I);if(Math.floor(b/O)===Math.floor(g/O)){d[3]=""+g%O;break}}d[2].slice(1)===d[0]&&(d[2]=E)}return n(w)};var S=function(w,I,O,D){var x;w=""+w;var _=l(w),x=I(_,O,D);return x};return e.opt[t+"-range-format"]?e.opt[t+"-range-format"]==="expanded"?A=function(w){return S(w,n)}:e.opt[t+"-range-format"]==="minimal"?A=function(w){return S(w,u)}:e.opt[t+"-range-format"]==="minimal-two"?A=function(w,I){return S(w,u,2,I)}:e.opt[t+"-range-format"]==="chicago"?A=function(w){return S(w,c)}:e.opt[t+"-range-format"]==="chicago-15"?A=function(w){return S(w,c)}:e.opt[t+"-range-format"]==="chicago-16"&&(A=function(w){return S(w,h)}):A=function(w){return S(w,n)},A};a.Util.FlipFlopper=function(e){var t=[],r={'<span class="nocase">':{type:"nocase",opener:'<span class="nocase">',closer:"</span>",attr:null,outer:null,flipflop:null},'<span class="nodecor">':{type:"nodecor",opener:'<span class="nodecor">',closer:"</span>",attr:"@class",outer:"nodecor",flipflop:{nodecor:"nodecor"}},'<span style="font-variant:small-caps;">':{type:"tag",opener:'<span style="font-variant:small-caps;">',closer:"</span>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<sc>":{type:"tag",opener:"<sc>",closer:"</sc>",attr:"@font-variant",outer:"small-caps",flipflop:{"small-caps":"normal",normal:"small-caps"}},"<i>":{type:"tag",opener:"<i>",closer:"</i>",attr:"@font-style",outer:"italic",flipflop:{italic:"normal",normal:"italic"}},"<b>":{type:"tag",opener:"<b>",closer:"</b>",attr:"@font-weight",outer:"bold",flipflop:{bold:"normal",normal:"bold"}},"<sup>":{type:"tag",opener:"<sup>",closer:"</sup>",attr:"@vertical-align",outer:"sup",flipflop:{sub:"sup",sup:"sup"}},"<sub>":{type:"tag",opener:"<sub>",closer:"</sub>",attr:"@vertical-align",outer:"sub",flipflop:{sup:"sub",sub:"sub"}},' "':{type:"quote",opener:' "',closer:'"',attr:"@quotes",outer:"true",flipflop:{true:"inner",inner:"true",false:"true"}}," '":{type:"quote",opener:" '",closer:"'",attr:"@quotes",outer:"inner",flipflop:{true:"inner",inner:"true",false:"true"}}};r['("']=r[' "'],r["('"]=r[" '"];var i=e.getTerm("open-quote"),s=e.getTerm("close-quote"),n=e.getTerm("open-inner-quote"),o=e.getTerm("close-inner-quote");i&&s&&[' "'," '",'"',"'"].indexOf(i)===-1&&(r[i]=JSON.parse(JSON.stringify(r[' "'])),r[i].opener=i,r[i].closer=s),n&&o&&[' "'," '",'"',"'"].indexOf(n)===-1&&(r[n]=JSON.parse(JSON.stringify(r[" '"])),r[n].opener=n,r[n].closer=o);function l(g){var A={" '":' "',' "':" '",'("':"('","('":'("'};r[g].outer="true",r[A[g]].outer="inner"}function u(g){for(var A=[],E=Object.keys(r),S=0,w=E.length;S<w;S++){var I=E[S];(r[g].type!=="quote"||!r[g])&&A.push(I)}var O=r[g];return O.opener=new RegExp("^(?:"+A.map(function(D){return D.replace("(","\\(")}).join("|")+")"),O}var m=function(){for(var g={},A=Object.keys(r),E=0,S=A.length;E<S;E++){var w=A[E];g[w]=u(w)}return g}(),c=function(){var g=[],A=[],E={};for(var S in m)g.push(S),E[m[S].closer]=!0;for(var w=Object.keys(E),I=0,O=w.length;I<O;I++){var D=w[I];A.push(D)}var _=g.concat(A).map(function(x){return x.replace("(","\\(")}).join("|");return{matchAll:new RegExp("((?:"+_+"))","g"),splitAll:new RegExp("(?:"+_+")","g"),open:new RegExp("(^(?:"+g.map(function(x){return x.replace("(","\\(")}).join("|")+")$)"),close:new RegExp("(^(?:"+A.join("|")+")$)")}}();function h(g,A){var E=t[t.length-1];return!E||g.match(E.opener)?(t.push({type:m[g].type,opener:m[g].opener,closer:m[g].closer,pos:A}),!1):(t.pop(),t.push({type:m[g].type,opener:m[g].opener,closer:m[g].closer,pos:A}),{fixtag:E.pos})}function p(g,A){var E=t[t.length-1];return E&&g===E.closer?(t.pop(),E.type==="nocase"?{nocase:{open:E.pos,close:A}}:!1):E?{fixtag:E.pos}:{fixtag:A}}function d(g,A){return g.match(c.open)?h(g,A):p(g,A)}function v(g){var A=[];g=g.replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?\"[^>]*(>)/g,'$1 $2$3;"$4'),g=g.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3");var E=g.match(c.matchAll);if(!E)return{tags:[],strings:[g],forcedSpaces:[]};for(var S=g.split(c.splitAll),w=0,I=E.length-1;w<I;w++)r[E[w]]&&(S[w+1]===""&&['"',"'"].indexOf(E[w+1])>-1?(E[w+1]=" "+E[w+1],A.push(!0)):A.push(!1));return{tags:E,strings:S,forcedSpaces:A}}var f=function(g){var A=[];this.set=function(E){for(var S=r[E].attr,w=null,I=A.length-1;I>-1;I--){var O=A[I];if(O[0]===S){w=O;break}}if(!w){var D=[e[e.tmp.area].opt.layout_decorations].concat(g.alldecor);e:for(var I=D.length-1;I>-1;I--){var _=D[I];if(_)for(var x=_.length-1;x>-1;x--){var O=_[x];if(O[0]===S){w=O;break e}}}}w?w=[S,r[E].flipflop[w[1]]]:w=[S,r[E].outer],A.push(w)},this.pair=function(){return A[A.length-1]},this.pop=function(){A.pop()}};function y(g,A){if(g==="'"){if(A&&A.match(/^[^\,\.\?\:\;\ ]/))return"\u2019"}else if(g===" '"&&A&&A.match(/^[\ ]/))return" \u2019";return!1}function b(g,A,E){var S=!0,w=new f(g);g.blobs=[];function I(R){this.stack=[R],this.latest=R,this.addStyling=function(N,T){if(S&&(N.slice(0,1)===" "&&(N=N.slice(1)),N.slice(0,1)===" "&&(N=N.slice(1)),S=!1),this.latest=this.stack[this.stack.length-1],T){if(typeof this.latest.blobs=="string"){var C=new a.Blob;C.blobs=this.latest.blobs,C.alldecor=this.latest.alldecor.slice(),this.latest.blobs=[C]}var j=new a.Token,F=new a.Blob(null,j);if(F.alldecor=this.latest.alldecor.slice(),T[0]==="@class"&&T[1]==="nodecor"){for(var M=[],U={},B=[e[e.tmp.area].opt.layout_decorations].concat(F.alldecor),L=B.length-1;L>-1;L--){var z=B[L];if(z)for(var H=z.length-1;H>-1;H--){var G=z[H];["@font-weight","@font-style","@font-variant"].indexOf(G[0])>-1&&!U[G[0]]&&(T[1]!=="normal"&&(F.decorations.push([G[0],"normal"]),M.push([G[0],"normal"])),U[G[0]]=!0)}}F.alldecor.push(M)}else F.decorations.push(T),F.alldecor.push([T]);if(this.latest.blobs.push(F),this.stack.push(F),this.latest=F,N){var j=new a.Token,F=new a.Blob(null,j);F.blobs=N,F.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(F)}}else if(N){var C=new a.Blob;C.blobs=N,C.alldecor=this.latest.alldecor.slice(),this.latest.blobs.push(C)}},this.popStyling=function(){this.stack.pop()}}var O=new I(g);if(A.strings.length){var D=A.strings[0];E&&(D=" "+D),O.addStyling(D)}for(var _=0,x=A.tags.length;_<x;_++){var k=A.tags[_],D=A.strings[_+1];k.match(c.open)?(w.set(k),O.addStyling(D,w.pair())):(w.pop(),O.popStyling(),O.addStyling(D))}}this.processTags=function(g){var S=g.blobs,A=!1;S.slice(0,1)===" "&&!S.match(/^\s+[\'\"]/)&&(A=!0);var E=new RegExp("("+a.ROMANESQUE_REGEXP.source+")\u2019("+a.ROMANESQUE_REGEXP.source+")","g"),S=" "+S.replace(E,"$1'$2"),w=v(S);if(w.tags.length!==0){for(var I=!1,O=0,D=w.tags.length;O<D;O++){var _=w.tags[O],S=w.strings[O+1],x=y(_,S);if(x)w.strings[O+1]=x+w.strings[O+1],w.tags[O]="";else{for(var k;k=d(_,O),k;)if(Object.keys(k).indexOf("fixtag")>-1){if(_.match(c.close)&&_==="'")w.strings[O+1]="\u2019"+w.strings[O+1],w.tags[O]="";else{var R=w.tags[k.fixtag];w.forcedSpaces[k.fixtag-1]&&(R=R.slice(1)),w.strings[k.fixtag+1]=R+w.strings[k.fixtag+1],w.tags[k.fixtag]=""}if(t.length>0)if(_!=="'")t.pop();else break;else break}else if(k.nocase){w.tags[k.nocase.open]="",w.tags[k.nocase.close]="";break}else break;k&&(k.fixtag||k.fixtag===0)&&(w.strings[O+1]=w.tags[O]+w.strings[O+1],w.tags[O]="")}}for(var O=t.length-1;O>-1;O--){var N=t[O].pos,_=w.tags[N];_===" '"||_==="'"?w.strings[N+1]=" \u2019"+w.strings[N+1]:w.strings[N+1]=w.tags[N]+w.strings[N+1],w.tags[N]="",t.pop()}for(var O=w.tags.length-1;O>-1;O--)w.tags[O]||(w.tags=w.tags.slice(0,O).concat(w.tags.slice(O+1)),w.strings[O]=w.strings[O]+w.strings[O+1],w.strings=w.strings.slice(0,O+1).concat(w.strings.slice(O+2)));for(var O=0,D=w.tags.length;O<D;O++){var _=w.tags[O],T=w.forcedSpaces[O-1];[' "'," '",'("',"('"].indexOf(_)>-1&&(I||(l(_),I=!0),T||(w.strings[O]+=_.slice(0,1)))}b(g,w,A)}}};a.Output.Formatters=function(){var e=`(?:\u2018|\u2019|\u201C|\u201D| "| '|"|'|[-\u2013\u2014/.,;?!:]|\\[|\\]|\\(|\\)|<span style="font-variant: small-caps;">|<span class="no(?:case|decor)">|</span>|</?(?:i|sc|b|sub|sup)>)`,t=new a.Doppeler(e,function(f){return f.replace(/(<span)\s+(class=\"no(?:case|decor)\")[^>]*(>)/g,"$1 $2$3").replace(/(<span)\s+(style=\"font-variant:)\s*(small-caps);?(\")[^>]*(>)/g,"$1 $2 $3;$4$5")}),r='(?:[-\\s]*<\\/*(?:spans+class="no(?:case|decor)"|i|sc|b|sub|sup)>[-\\s]*|[-\\s]+)',i=new a.Doppeler(r),s=new a.Doppeler("(?:[\xA0 \xA0\u2000-\u200B\u205F\u3000]+)"),n={'<span style="font-variant: small-caps;">':"</span>",'<span class="nocase">':"</span>",'<span class="nodecor">':"</span>","<sc>":"</sc>","<sub>":"</sub>","<sup>":"</sup>"};function o(f){var y=f.match(/(^\s*)((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))(.*)/);return y&&!(y[2].match(/^[\u0370-\u03FF]$/)&&!y[3])?y[1]+a.toLocaleUpperCase.call(this,y[2])+y[3]:f}function l(f,y){if(!y)return"";f.doppel=t.split(y);var b={' "':{opener:" '",closer:'"'}," '":{opener:' "',closer:"'"},"\u2018":{opener:"\u2018",closer:"\u2019"},"\u201C":{opener:"\u201C",closer:"\u201D"}};function g(N,T){if(f.quoteState.length===0||N===f.quoteState[f.quoteState.length-1].opener)return f.quoteState.push({opener:b[N].opener,closer:b[N].closer,pos:T}),!1;var C=f.quoteState[f.quoteState.length-1].pos;return f.quoteState.pop(),f.quoteState.push({opener:b[N].opener,closer:b[N].closer,positions:T}),C}function A(N,T){if(f.quoteState.length>0&&N===f.quoteState[f.quoteState.length-1].closer)f.quoteState.pop();else return T}function E(N,T){var C=["\u201C","\u2018",' "'," '"].indexOf(N)>-1;return C?g(N,T):A(N,T)}function S(N,T){var C=N.match(/(^(?:\u2018|\u2019|\u201C|\u201D|\"|\')|(?: \"| \')$)/);if(C)return E(C[1],T)}f.doppel.strings.length&&f.doppel.strings[0].trim()&&(f.doppel.strings[0]=f.capitaliseWords(f.doppel.strings[0],0,f.doppel.tags[0]));for(var w=0,I=f.doppel.tags.length;w<I;w++){var O=f.doppel.tags[w],D=f.doppel.strings[w+1];if(f.tagState!==null&&(n[O]?f.tagState.push(n[O]):f.tagState.length&&O===f.tagState[f.tagState.length-1]&&f.tagState.pop()),f.afterPunct!==null&&O.match(/[\!\?\:]$/)&&(f.afterPunct=!0),f.tagState.length===0?f.doppel.strings[w+1]=f.capitaliseWords(D,w+1,f.doppel,f.doppel.tags[w+1]):f.doppel.strings[w+1].trim()&&(f.lastWordPos=null),f.quoteState!==null){var _=S(O,w);if(_||_===0){var x=f.doppel.origStrings[_+1].slice(0,1);f.doppel.strings[_+1]=x+f.doppel.strings[_+1].slice(1),f.lastWordPos=null}}f.isFirst&&D.trim()&&(f.isFirst=!1),f.afterPunct&&D.trim()&&(f.afterPunct=!1)}if(f.quoteState)for(var w=0,I=f.quoteState.length;w<I;w++){var _=f.quoteState[w].pos;if(typeof _<"u"){var x=f.doppel.origStrings[_+1].slice(0,1);f.doppel.strings[_+1]=x+f.doppel.strings[_+1].slice(1)}}if(f.lastWordPos){var k=s.split(f.doppel.strings[f.lastWordPos.strings]),R=k.strings[f.lastWordPos.words];R.length>1&&a.toLocaleLowerCase.call(this,R).match(f.skipWordsRex)&&(R=o.call(this,R),k.strings[f.lastWordPos.words]=R),f.doppel.strings[f.lastWordPos.strings]=s.join(k)}return t.join(f.doppel)}function u(f,y){return y}function m(f,y){var b={quoteState:null,capitaliseWords:function(g){for(var A=g.split(" "),E=0,S=A.length;E<S;E++){var w=A[E];w&&(A[E]=a.toLocaleLowerCase.call(f,w))}return A.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return l.call(f,b,y)}function c(f,y){var b={quoteState:null,capitaliseWords:function(g){for(var A=g.split(" "),E=0,S=A.length;E<S;E++){var w=A[E];w&&(A[E]=a.toLocaleUpperCase.call(f,w))}return A.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return l.call(f,b,y)}function h(f,y){var b={quoteState:[],capitaliseWords:function(g){for(var A=g.split(" "),E=0,S=A.length;E<S;E++){var w=A[E];w&&(b.isFirst?(A[E]=o.call(f,w),b.isFirst=!1):A[E]=a.toLocaleLowerCase.call(f,w))}return A.join(" ")},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return l.call(f,b,y)}function p(f,y){var b={quoteState:[],capitaliseWords:function(g,A,E){if(g.trim()){for(var S=s.split(g),w=S.strings,I=0,O=w.length;I<O;I++){var D=w[I];if(!D)continue;let _=a.toLocaleLowerCase.call(f,D),x=!1;(D.length>1&&!_.match(b.skipWordsRex)||I===w.length-1&&E==="-"||b.isFirst||b.afterPunct)&&(x=!0),x&&D===_&&(w[I]=o.call(f,D)),b.afterPunct=!1,b.isFirst=!1,b.lastWordPos={strings:A,words:I}}g=s.join(S)}return g},skipWordsRex:f.locale[f.opt.lang].opts["skip-words-regexp"],tagState:[],afterPunct:!1,isFirst:!0};return l.call(f,b,y)}function d(f,y){var b={quoteState:[],capitaliseWords:function(g){for(var A=s.split(g),E=A.strings,S=0,w=E.length;S<w;S++){var I=E[S];if(I&&b.isFirst){I===a.toLocaleLowerCase.call(f,I)&&(E[S]=o.call(f,I)),b.isFirst=!1;break}}return s.join(A)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:!0};return l.call(f,b,y)}function v(f,y){var b={quoteState:[],capitaliseWords:function(g){for(var A=s.split(g),E=A.strings,S=0,w=E.length;S<w;S++){var I=E[S];I&&I===a.toLocaleLowerCase.call(f,I)&&(E[S]=o.call(f,I))}return s.join(A)},skipWordsRex:null,tagState:[],afterPunct:null,isFirst:null};return l.call(f,b,y)}return{nameDoppel:i,passthrough:u,lowercase:m,uppercase:c,sentence:h,title:p,"capitalize-first":d,"capitalize-all":v}}();a.Output.Formats=function(){};a.Output.Formats.prototype.html={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/\s\s/g,"\xA0 ").replace(a.SUPERSCRIPTS_REGEXP,function(t){return"<sup>"+a.SUPERSCRIPTS[t]+"</sup>"})},bibstart:`<div class="csl-bib-body">
`,bibend:"</div>","@font-style/italic":"<i>%%STRING%%</i>","@font-style/oblique":"<em>%%STRING%%</em>","@font-style/normal":'<span style="font-style:normal;">%%STRING%%</span>',"@font-variant/small-caps":'<span style="font-variant:small-caps;">%%STRING%%</span>',"@passthrough/true":a.Output.Formatters.passthrough,"@font-variant/normal":'<span style="font-variant:normal;">%%STRING%%</span>',"@font-weight/bold":"<b>%%STRING%%</b>","@font-weight/normal":'<span style="font-weight:normal;">%%STRING%%</span>',"@font-weight/light":!1,"@text-decoration/none":'<span style="text-decoration:none;">%%STRING%%</span>',"@text-decoration/underline":'<span style="text-decoration:underline;">%%STRING%%</span>',"@vertical-align/sup":"<sup>%%STRING%%</sup>","@vertical-align/sub":"<sub>%%STRING%%</sub>","@vertical-align/baseline":'<span style="baseline">%%STRING%%</span>',"@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="";return e.sys.embedBibliographyEntry&&(r=e.sys.embedBibliographyEntry(this.item_id)+`
`),'  <div class="csl-entry">'+t+`</div>
`+r},"@display/block":function(e,t){return`

    <div class="csl-block">`+t+`</div>
`},"@display/left-margin":function(e,t){return`
    <div class="csl-left-margin">`+t+"</div>"},"@display/right-inline":function(e,t){return'<div class="csl-right-inline">'+t+`</div>
  `},"@display/indent":function(e,t){return'<div class="csl-indent">'+t+`</div>
  `},"@showid/true":function(e,t,r){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){if(r)return'<span class="'+e.opt.nodenames[r]+'" cslid="'+r+'">'+t+"</span>";if(this.params&&typeof t=="string"){var i="";if(t){var s=t.match(a.VARIABLE_WRAPPER_PREPUNCT_REX);i=s[1],t=s[2]}var n="";return t&&a.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(n=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,i,t,n)}else return t}else return t},"@URL/true":function(e,t){return'<a href="'+t+'">'+t+"</a>"},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),'<a href="'+r+'">'+t+"</a>"}};a.Output.Formats.prototype.text={text_escape:function(e){return e||(e=""),e},bibstart:"",bibend:"","@font-style/italic":!1,"@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":a.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":!1,"@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+`
`},"@display/block":function(e,t){return`
`+t},"@display/left-margin":function(e,t){return t+" "},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return`
    `+t},"@showid/true":function(e,t){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};a.Output.Formats.prototype.rtf={text_escape:function(e){return e||(e=""),e.replace(/([\\{}])/g,"\\$1").replace(a.SUPERSCRIPTS_REGEXP,function(t){return"\\super "+a.SUPERSCRIPTS[t]+"\\nosupersub{}"}).replace(/[\u007F-\uFFFF]/g,function(t){return"\\uc0\\u"+t.charCodeAt(0).toString()+"{}"}).split("	").join("\\tab{}")},"@passthrough/true":a.Output.Formatters.passthrough,"@font-style/italic":"{\\i{}%%STRING%%}","@font-style/normal":"{\\i0{}%%STRING%%}","@font-style/oblique":"{\\i{}%%STRING%%}","@font-variant/small-caps":"{\\scaps %%STRING%%}","@font-variant/normal":"{\\scaps0{}%%STRING%%}","@font-weight/bold":"{\\b{}%%STRING%%}","@font-weight/normal":"{\\b0{}%%STRING%%}","@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"{\\ul{}%%STRING%%}","@vertical-align/baseline":!1,"@vertical-align/sup":"\\super %%STRING%%\\nosupersub{}","@vertical-align/sub":"\\sub %%STRING%%\\nosupersub{}","@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?a.Output.Formats.rtf.text_escape(e.getTerm("open-quote")):a.Output.Formats.rtf.text_escape(e.getTerm("open-quote"))+t+a.Output.Formats.rtf.text_escape(e.getTerm("close-quote"))},"@quotes/inner":function(e,t){return typeof t>"u"?a.Output.Formats.rtf.text_escape("\u2019"):a.Output.Formats.rtf.text_escape(e.getTerm("open-inner-quote"))+t+a.Output.Formats.rtf.text_escape(e.getTerm("close-inner-quote"))},"@quotes/false":!1,bibstart:"{\\rtf ",bibend:"}","@display/block":`\\line{}%%STRING%%\\line\r
`,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t},"@display/left-margin":function(e,t){return t+"\\tab "},"@display/right-inline":function(e,t){return t+`\r
`},"@display/indent":function(e,t){return`
\\tab `+t+`\\line\r
`},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations){var r="";if(t){var i=t.match(a.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var s="";return t&&a.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,s)}else return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};a.Output.Formats.prototype.asciidoc={text_escape:function(e){return e||(e=""),e.replace("*","pass:[*]","g").replace("_","pass:[_]","g").replace("#","pass:[#]","g").replace("^","pass:[^]","g").replace("~","pass:[~]","g").replace("[[","pass:[[[]","g").replace("  ","&#160; ","g").replace(a.SUPERSCRIPTS_REGEXP,function(t){return"^"+a.SUPERSCRIPTS[t]+"^"})},bibstart:"",bibend:"","@passthrough/true":a.Output.Formatters.passthrough,"@font-style/italic":"__%%STRING%%__","@font-style/oblique":"__%%STRING%%__","@font-style/normal":!1,"@font-variant/small-caps":"[small-caps]#%%STRING%%#","@font-variant/normal":!1,"@font-weight/bold":"**%%STRING%%**","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":"[underline]##%%STRING%%##","@vertical-align/sup":"^^%%STRING%%^^","@vertical-align/sub":"~~%%STRING%%~~","@vertical-align/baseline":!1,"@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?"``":"``"+t+"''"},"@quotes/inner":function(e,t){return typeof t>"u"?"`":"`"+t+"'"},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return t+`
`},"@display/block":function(e,t){return t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return" "+t},"@display/indent":function(e,t){return" "+t},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations&&this.params&&typeof t=="string"){var r="";if(t){var i=t.match(a.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var s="";return t&&a.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,s)}else return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),r+"["+t+"]"}};a.Output.Formats.prototype.fo={text_escape:function(e){return e||(e=""),e.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace("  ","&#160; ","g").replace(a.SUPERSCRIPTS_REGEXP,function(t){return'<fo:inline vertical-align="super">'+a.SUPERSCRIPTS[t]+"</fo:inline>"})},bibstart:"",bibend:"","@passthrough/true":a.Output.Formatters.passthrough,"@font-style/italic":'<fo:inline font-style="italic">%%STRING%%</fo:inline>',"@font-style/oblique":'<fo:inline font-style="oblique">%%STRING%%</fo:inline>',"@font-style/normal":'<fo:inline font-style="normal">%%STRING%%</fo:inline>',"@font-variant/small-caps":'<fo:inline font-variant="small-caps">%%STRING%%</fo:inline>',"@font-variant/normal":'<fo:inline font-variant="normal">%%STRING%%</fo:inline>',"@font-weight/bold":'<fo:inline font-weight="bold">%%STRING%%</fo:inline>',"@font-weight/normal":'<fo:inline font-weight="normal">%%STRING%%</fo:inline>',"@font-weight/light":'<fo:inline font-weight="lighter">%%STRING%%</fo:inline>',"@text-decoration/none":'<fo:inline text-decoration="none">%%STRING%%</fo:inline>',"@text-decoration/underline":'<fo:inline text-decoration="underline">%%STRING%%</fo:inline>',"@vertical-align/sup":'<fo:inline vertical-align="super">%%STRING%%</fo:inline>',"@vertical-align/sub":'<fo:inline vertical-align="sub">%%STRING%%</fo:inline>',"@vertical-align/baseline":'<fo:inline vertical-align="baseline">%%STRING%%</fo:inline>',"@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){var r="";if(e.bibliography&&e.bibliography.opt&&e.bibliography.opt.hangingindent){var i=e.bibliography.opt.hangingindent;r=' start-indent="'+i+'em" text-indent="-'+i+'em"'}var s="";return e.sys.embedBibliographyEntry&&(s=e.sys.embedBibliographyEntry(this.item_id)+`
`),'<fo:block id="'+this.system_id+'"'+r+">"+t+`</fo:block>
`+s},"@display/block":function(e,t){return`
  <fo:block>`+t+`</fo:block>
`},"@display/left-margin":function(e,t){return`
  <fo:table table-layout="fixed" width="100%">
    <fo:table-column column-number="1" column-width="$$$__COLUMN_WIDTH_1__$$$"/>
    <fo:table-column column-number="2" column-width="proportional-column-width(1)"/>
    <fo:table-body>
      <fo:table-row>
        <fo:table-cell>
          <fo:block>`+t+`</fo:block>
        </fo:table-cell>
        `},"@display/right-inline":function(e,t){return`<fo:table-cell>
          <fo:block>`+t+`</fo:block>
        </fo:table-cell>
      </fo:table-row>
    </fo:table-body>
  </fo:table>
`},"@display/indent":function(e,t){return'<fo:block margin-left="2em">'+t+`</fo:block>
`},"@showid/true":function(e,t){if(!e.tmp.just_looking&&!e.tmp.suppress_decorations&&this.params&&typeof t=="string"){var r="";if(t){var i=t.match(a.VARIABLE_WRAPPER_PREPUNCT_REX);r=i[1],t=i[2]}var s="";return t&&a.SWAPPING_PUNCTUATION.indexOf(t.slice(-1))>-1&&(s=t.slice(-1),t=t.slice(0,-1)),e.sys.variableWrapper(this.params,r,t,s)}else return t},"@URL/true":function(e,t){return`<fo:basic-link external-destination="url('`+t+`')">`+t+"</fo:basic-link>"},"@DOI/true":function(e,t){var r=t;return t.match(/^https?:\/\//)||(r="https://doi.org/"+t),`<fo:basic-link external-destination="url('`+r+`')">`+t+"</fo:basic-link>"}};a.Output.Formats.prototype.latex={text_escape:function(e){return e||(e=""),e},bibstart:"\\begin{thebibliography}{4}",bibend:"\\end{thebibliography}","@font-style/italic":"{\\em %%STRING%%}","@font-style/oblique":!1,"@font-style/normal":!1,"@font-variant/small-caps":!1,"@passthrough/true":a.Output.Formatters.passthrough,"@font-variant/normal":!1,"@font-weight/bold":"{\\bf %%STRING%%}","@font-weight/normal":!1,"@font-weight/light":!1,"@text-decoration/none":!1,"@text-decoration/underline":!1,"@vertical-align/baseline":!1,"@vertical-align/sup":!1,"@vertical-align/sub":!1,"@strip-periods/true":a.Output.Formatters.passthrough,"@strip-periods/false":a.Output.Formatters.passthrough,"@quotes/true":function(e,t){return typeof t>"u"?e.getTerm("open-quote"):e.getTerm("open-quote")+t+e.getTerm("close-quote")},"@quotes/inner":function(e,t){return typeof t>"u"?"\u2019":e.getTerm("open-inner-quote")+t+e.getTerm("close-inner-quote")},"@quotes/false":!1,"@cite/entry":function(e,t){return e.sys.wrapCitationEntry(t,this.item_id,this.locator_txt,this.suffix_txt)},"@bibliography/entry":function(e,t){return"\\bibitem{"+e.sys.embedBibliographyEntry(this.item_id)+`}
`},"@display/block":function(e,t){return`
`+t},"@display/left-margin":function(e,t){return t},"@display/right-inline":function(e,t){return t},"@display/indent":function(e,t){return`
    `+t},"@showid/true":function(e,t,r){return t},"@URL/true":function(e,t){return t},"@DOI/true":function(e,t){return t}};a.Output.Formats=new a.Output.Formats;a.Registry=function(e){this.debug=!1,this.state=e,this.registry={},this.reflist=[],this.refhash={},this.namereg=new a.Registry.NameReg(e),this.citationreg=new a.Registry.CitationReg(e),this.authorstrings={},this.masterMap={},this.mylist=[],this.myhash={},this.deletes=[],this.inserts=[],this.uncited={},this.refreshes={},this.akeys={},this.oldseq={},this.return_data={},this.ambigcites={},this.ambigresets={},this.sorter=new a.Registry.Comparifier(e,"bibliography_sort"),this.getSortedIds=function(){for(var t=[],r=0,i=this.reflist.length;r<i;r+=1)t.push(""+this.reflist[r].id);return t},this.getSortedRegistryItems=function(){for(var t=[],r=0,i=this.reflist.length;r<i;r+=1)t.push(this.reflist[r]);return t}};a.Registry.prototype.init=function(e,t){var r,i;if(this.oldseq={},t){this.uncited={};for(var r=0,i=e.length;r<i;r+=1)this.myhash[e[r]]||this.mylist.push(""+e[r]),this.uncited[e[r]]=!0,this.myhash[e[r]]=!0}else{for(var s in this.uncited)e.push(s);var n={};for(r=e.length-1;r>-1;r+=-1)n[e[r]]?e=e.slice(0,r).concat(e.slice(r+1)):n[e[r]]=!0;this.mylist=e,this.myhash=n}this.refreshes={},this.touched={},this.ambigsTouched={},this.ambigresets={}};a.Registry.prototype.dopurge=function(e){for(var t=this.mylist.length-1;t>-1;t+=-1)this.citationreg.citationsByItemId&&(!this.citationreg.citationsByItemId||!this.citationreg.citationsByItemId[this.mylist[t]])&&!e[this.mylist[t]]&&(delete this.myhash[this.mylist[t]],delete this.uncited[this.mylist[t]],this.mylist=this.mylist.slice(0,t).concat(this.mylist.slice(t+1)));this.dodeletes(this.myhash)};a.Registry.prototype.dodeletes=function(e){var t,r,i,s,n,o,l,u,m;if(typeof e=="string"){var r=e;e={},e[r]=!0}for(var r in this.registry)if(!e[r]){if(this.uncited[r])continue;t=this.namereg.delitems(r);for(l in t)this.refreshes[l]=!0;for(i=this.registry[r].ambig,u=this.ambigcites[i].indexOf(r),u>-1&&(o=this.ambigcites[i].slice(),this.ambigcites[i]=o.slice(0,u).concat(o.slice(u+1,o.length)),this.ambigresets[i]=this.ambigcites[i].length),n=this.ambigcites[i].length,s=0;s<n;s+=1)m=""+this.ambigcites[i][s],this.refreshes[m]=!0;if(this.registry[r].siblings){if(this.registry[r].siblings.length==1){var c=this.registry[r].siblings[0];this.registry[c].siblings&&(this.registry[c].siblings.pop(),this.registry[c].master=!0)}else if(this.registry[r].siblings.length>1){var h=[r];if(this.registry[r].master){var p=this.registry[r].siblings[0],d=this.registry[p];d.master=!0,h.push(p)}for(var v=[],f=this.registry[r].siblings.length-1;f>-1;f+=-1){var y=this.registry[r].siblings.pop();h.indexOf(y)===-1&&v.push(y)}for(var f=v.length-1;f>-1;f+=-1)this.registry[r].siblings.push(v[f])}}for(var b=this.reflist.length-1;b>-1;b--)this.reflist[b].id===r&&(this.reflist=this.reflist.slice(0,b).concat(this.reflist.slice(b+1)));delete this.registry[r],delete this.refhash[r],this.return_data.bibchange=!0}};a.Registry.prototype.doinserts=function(e){var t,r,i,s,n,o,l;typeof e=="string"&&(e=[e]);for(var o=0,l=e.length;o<l;o+=1)t=e[o],this.registry[t]||(r=this.state.retrieveItem(t),i=a.getAmbiguousCite.call(this.state,r),this.ambigsTouched[i]=!0,r.legislation_id||(this.akeys[i]=!0),s={id:""+t,seq:0,offset:0,sortkeys:!1,ambig:!1,rendered:!1,disambig:!1,ref:r,newItem:!0},this.registry[t]=s,this.citationreg.citationsByItemId&&this.citationreg.citationsByItemId[t]&&(this.registry[t]["first-reference-note-number"]=this.citationreg.citationsByItemId[t][0].properties.noteIndex),n=a.getAmbigConfig.call(this.state),this.registerAmbigToken(i,t,n),this.touched[t]=!0,this.return_data.bibchange=!0)};a.Registry.prototype.rebuildlist=function(e){var t,r,i,s;if(e)for(this.reflist=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],s=this.registry[i],this.reflist.push(s),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1;else for(this.reflist_inserts=[],t=this.mylist.length,r=0;r<t;r+=1)i=this.mylist[r],s=this.registry[i],s.newItem&&this.reflist_inserts.push(s),this.oldseq[i]=this.registry[i].seq,this.registry[i].seq=r+1};a.Registry.prototype.dorefreshes=function(){var e,t,r,i,s;for(var e in this.refreshes)if(t=this.registry[e],!!t){t.sortkeys=void 0,r=this.state.refetchItem(e);var i=t.ambig;typeof i>"u"&&(this.state.tmp.disambig_settings=!1,i=a.getAmbiguousCite.call(this.state,r),s=a.getAmbigConfig.call(this.state),this.registerAmbigToken(i,e,s));for(var n in this.ambigresets)if(this.ambigresets[n]===1){var o=this.ambigcites[i][0],r=this.state.refetchItem(o);this.registry[o].disambig=new a.AmbigConfig,this.state.tmp.disambig_settings=!1;var i=a.getAmbiguousCite.call(this.state,r),s=a.getAmbigConfig.call(this.state);this.registerAmbigToken(i,o,s)}this.state.tmp.taintedItemIDs[e]=!0,this.ambigsTouched[i]=!0,r.legislation_id||(this.akeys[i]=!0),this.touched[e]=!0}};a.Registry.prototype.setdisambigs=function(){for(var e in this.ambigsTouched)this.state.disambiguate.run(e);this.ambigsTouched={},this.akeys={}};a.Registry.prototype.renumber=function(){var e,t,r;for(this.state.bibliography_sort.opt.citation_number_sort_direction===a.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map={}),e=this.reflist.length,t=0;t<e;t+=1)r=this.reflist[t],r.seq=t+1,this.state.bibliography_sort.opt.citation_number_sort_direction===a.DESCENDING&&(this.state.bibliography_sort.tmp.citation_number_map[r.seq]=this.reflist.length-r.seq+1),this.state.opt.update_mode===a.NUMERIC&&r.seq!=this.oldseq[r.id]&&(this.state.tmp.taintedItemIDs[r.id]=!0),r.seq!=this.oldseq[r.id]&&(this.return_data.bibchange=!0)};a.Registry.prototype.setsortkeys=function(){for(var e,t=0,r=this.mylist.length;t<r;t+=1){var e=this.mylist[t];(this.touched[e]||this.state.tmp.taintedItemIDs[e]||!this.registry[e].sortkeys)&&(this.registry[e].sortkeys=a.getSortKeys.call(this.state,this.state.retrieveItem(e),"bibliography_sort"))}};a.Registry.prototype._insertItem=function(e,t){return t.splice(this._locationOf(e,t)+1,0,e),t};a.Registry.prototype._locationOf=function(e,t,r,i){if(t.length===0)return-1;r=r||0,i=i||t.length;var s=r+i>>1,n=this.sorter.compareKeys(e,t[s]);if(i-r<=1)return n==-1?s-1:s;switch(n){case-1:return this._locationOf(e,t,r,s);case 0:return s;case 1:return this._locationOf(e,t,s,i)}};a.Registry.prototype.sorttokens=function(e){var t,r,i,s;if(!e){for(this.reflist_inserts=[],t=this.mylist.length,s=0;s<t;s+=1)r=this.mylist[s],i=this.registry[r],i.newItem&&this.reflist_inserts.push(i);for(var n in this.state.tmp.taintedItemIDs)if(this.registry[n]&&!this.registry[n].newItem)for(var o=this.reflist.length-1;o>-1;o--)this.reflist[o].id===n&&(this.reflist_inserts.push(this.reflist[o]),this.reflist=this.reflist.slice(0,o).concat(this.reflist.slice(o+1)));for(var o=0,l=this.reflist_inserts.length;o<l;o++){var i=this.reflist_inserts[o];delete i.newItem,this.reflist=this._insertItem(i,this.reflist)}for(s=0;s<t;s+=1)r=this.mylist[s],i=this.registry[r],this.registry[r].seq=s+1}};a.Registry.Comparifier=function(e,t){var r,i,s,n,o=a.getSortCompare.call(e,e.opt["default-locale-sort"]);r=e[t].opt.sort_directions,this.compareKeys=function(l,u){for(i=l.sortkeys?l.sortkeys.length:0,s=0;s<i;s+=1){var m=0;if(l.sortkeys[s]===u.sortkeys[s]?m=0:typeof l.sortkeys[s]>"u"?m=r[s][1]:typeof u.sortkeys[s]>"u"?m=r[s][0]:m=o(l.sortkeys[s],u.sortkeys[s]),0<m)return r[s][1];if(0>m)return r[s][0]}return l.seq>u.seq?1:l.seq<u.seq?-1:0},n=this.compareKeys,this.compareCompositeKeys=function(l,u){return n(l[1],u[1])}};a.Registry.prototype.compareRegistryTokens=function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0};a.Registry.prototype.registerAmbigToken=function(e,t,r){if(this.registry[t]||a.debug("Warning: unregistered item: itemID=("+t+"), akey=("+e+")"),this.registry[t]&&this.registry[t].disambig&&this.registry[t].disambig.names)for(var i=0,s=r.names.length;i<s;i+=1){var n=r.names[i],o=this.registry[t].disambig.names[i];if(n!==o)this.state.tmp.taintedItemIDs[t]=!0;else if(r.givens[i])for(var l=0,u=r.givens[i].length;l<u;l+=1){var m=r.givens[i][l],c=this.registry[t].disambig.givens[i][l];m!==c&&(this.state.tmp.taintedItemIDs[t]=!0)}}this.ambigcites[e]||(this.ambigcites[e]=[]),this.ambigcites[e].indexOf(""+t)===-1&&this.ambigcites[e].push(""+t),this.registry[t].ambig=e,this.registry[t].disambig=a.cloneAmbigConfig(r)};a.getSortKeys=function(e,t){var r,i,s,n,o,l;for(r=this.tmp.area,i=this.tmp.root,s=this.tmp.extension,n=a.Util.Sort.strip_prepositions,this.tmp.area=t,this.tmp.root=t.indexOf("_")>-1?t.slice(0,-5):t,this.tmp.extension="_sort",this.tmp.disambig_override=!0,this.tmp.disambig_request=!1,this.tmp.suppress_decorations=!0,a.getCite.call(this,e),this.tmp.suppress_decorations=!1,this.tmp.disambig_override=!1,o=this[t].keys.length,l=0;l<o;l+=1)this[t].keys[l]=n(this[t].keys[l]);return this.tmp.area=r,this.tmp.root=i,this.tmp.extension=s,this[t].keys};a.Registry.NameReg=function(e){var t,r,i,s,n,o,l,u,m,c,h,p;this.state=e,this.namereg={},this.nameind={},this.nameindpkeys={},this.itemkeyreg={},l=function(d){return d||(d=""),d.replace(/\./g," ").replace(/\s+/g," ").replace(/\s+$/,"")},u=function(d,v,f){t=l(f.family),d.opt["demote-non-dropping-particle"]==="never"&&f["non-dropping-particle"]&&f.family&&(t=`${t} ${f["non-dropping-particle"]}`),i=l(f.given);var y=i.match(/[,\!]* ([^,]+)$/);y&&y[1]===y[1].toLowerCase()&&(i=i.replace(/[,\!]* [^,]+$/,"")),r=a.Util.Names.initializeWith(d,i,"%s"),d.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&(t=""+v+t)},m=function(d,v,f,y,b,g){var A;if(e.tmp.area.slice(0,12)==="bibliography"&&!b)return typeof g=="string"?1:2;var E=e.nameOutput.getName(v,"locale-translit",!0);v=E.name,u(this.state,""+d,v),A=2,s=e.opt["disambiguate-add-givenname"],n=e.citation.opt["givenname-disambiguation-rule"];var S=n;if(n==="by-cite"&&(n="all-names"),b==="short"?A=0:typeof g=="string"&&(A=1),typeof this.namereg[t]>"u"||typeof this.namereg[t].ikey[r]>"u")return A;if(S==="by-cite"&&A<=y)return y;if(!s||typeof n=="string"&&n.slice(0,12)==="primary-name"&&f>0||(!n||n==="all-names"||n==="primary-name"?(this.namereg[t].count>1&&(A=1),(this.namereg[t].ikey&&this.namereg[t].ikey[r].count>1||this.namereg[t].count>1&&typeof g!="string")&&(A=2)):(n==="all-names-with-initials"||n==="primary-name-with-initials")&&(this.namereg[t].count>1?A=1:A=0),e.registry.registry[d]))return A;if(b=="short")return 0;if(typeof g=="string")return 1},c=function(d){var v,f,y,b,g;(typeof d=="string"||typeof d=="number")&&(d=[""+d]);var A={};for(f=d.length,v=0;v<f;v+=1)if(b=""+d[v],!!this.nameind[b]){for(g in this.nameind[b])if(this.nameind[b].hasOwnProperty(g)){var E=g.split("::");if(t=E[0],r=E[1],i=E[2],typeof this.namereg[t]>"u")continue;if(o=this.namereg[t].items,i&&this.namereg[t].ikey[r]&&this.namereg[t].ikey[r].skey[i]&&(p=this.namereg[t].ikey[r].skey[i].items,y=p.indexOf(""+b),y>-1&&(this.namereg[t].ikey[r].skey[i].items=p.slice(0,y).concat(p.slice([y+1]))),this.namereg[t].ikey[r].skey[i].items.length===0&&(delete this.namereg[t].ikey[r].skey[i],this.namereg[t].ikey[r].count+=-1,this.namereg[t].ikey[r].count<2)))for(var S=0,w=this.namereg[t].ikey[r].items.length;S<w;S+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[r].items[S]]=!0;if(r&&this.namereg[t].ikey[r]&&(y=this.namereg[t].ikey[r].items.indexOf(""+b),y>-1&&(o=this.namereg[t].ikey[r].items.slice(),this.namereg[t].ikey[r].items=o.slice(0,y).concat(o.slice([y+1]))),this.namereg[t].ikey[r].items.length===0&&(delete this.namereg[t].ikey[r],this.namereg[t].count+=-1,this.namereg[t].count<2)))for(var S=0,w=this.namereg[t].items.length;S<w;S+=1)e.tmp.taintedItemIDs[this.namereg[t].items[S]]=!0;t&&(y=this.namereg[t].items.indexOf(""+b),y>-1&&(o=this.namereg[t].items.slice(),this.namereg[t].items=o.slice(0,y).concat(o.slice([y+1],o.length))),this.namereg[t].items.length<2&&delete this.namereg[t]),delete this.nameind[b][g]}delete this.nameind[b],delete this.nameindpkeys[b]}return A},h=function(d,v,f){var y,b,g=e.nameOutput.getName(v,"locale-translit",!0);if(v=g.name,!(e.citation.opt["givenname-disambiguation-rule"]&&e.citation.opt["givenname-disambiguation-rule"].slice(0,8)==="primary-"&&f!==0)){if(u(this.state,""+d,v),t&&(typeof this.namereg[t]>"u"?(this.namereg[t]={},this.namereg[t].count=0,this.namereg[t].ikey={},this.namereg[t].items=[d]):this.namereg[t].items.indexOf(d)===-1&&this.namereg[t].items.push(d)),t&&r)if(typeof this.namereg[t].ikey[r]>"u"){if(this.namereg[t].ikey[r]={},this.namereg[t].ikey[r].count=0,this.namereg[t].ikey[r].skey={},this.namereg[t].ikey[r].items=[d],this.namereg[t].count+=1,this.namereg[t].count===2)for(var y=0,b=this.namereg[t].items.length;y<b;y+=1)e.tmp.taintedItemIDs[this.namereg[t].items[y]]=!0}else this.namereg[t].ikey[r].items.indexOf(d)===-1&&this.namereg[t].ikey[r].items.push(d);if(t&&r&&i)if(typeof this.namereg[t].ikey[r].skey[i]>"u"){if(this.namereg[t].ikey[r].skey[i]={},this.namereg[t].ikey[r].skey[i].items=[d],this.namereg[t].ikey[r].count+=1,this.namereg[t].ikey[r].count===2)for(var y=0,b=this.namereg[t].ikey[r].items.length;y<b;y+=1)e.tmp.taintedItemIDs[this.namereg[t].ikey[r].items[y]]=!0}else this.namereg[t].ikey[r].skey[i].items.indexOf(d)===-1&&this.namereg[t].ikey[r].skey[i].items.push(d);typeof this.nameind[d]>"u"&&(this.nameind[d]={},this.nameindpkeys[d]={}),t&&(this.nameind[d][t+"::"+r+"::"+i]=!0,this.nameindpkeys[d][t]=this.namereg[t])}},this.addname=h,this.delitems=c,this.evalname=m};a.Registry.CitationReg=function(){this.citationById={},this.citationByIndex=[]};a.Disambiguation=function(e){this.state=e,this.sys=this.state.sys,this.registry=e.registry.registry,this.ambigcites=e.registry.ambigcites,this.configModes(),this.debug=!1};a.Disambiguation.prototype.run=function(e){this.modes.length&&(this.debug&&this.state.sys.print("[A] === RUN ==="),this.akey=e,this.initVars(e)&&this.runDisambig())};a.Disambiguation.prototype.runDisambig=function(){var e;for(this.debug&&this.state.sys.print("[C] === runDisambig() ==="),this.initGivens=!0;this.lists.length;){for(this.gnameset=0,this.gname=0,this.clashes=[1,0];this.lists[0][1].length;)this.listpos=0,this.base||(this.base=this.lists[0][0]),e=this.incrementDisambig(),this.scanItems(this.lists[0]),this.evalScan(e);this.lists=this.lists.slice(1)}};a.Disambiguation.prototype.scanItems=function(e){var t,r,i;this.debug&&this.state.sys.print("[2] === scanItems() ==="),this.Item=e[1][0],this.ItemCite=a.getAmbiguousCite.call(this.state,this.Item,this.base,!0),this.scanlist=e[1],this.partners=[],this.partners.push(this.Item),this.nonpartners=[];for(var s=0,t=1,r=e[1].length;t<r;t+=1){i=e[1][t];var n=a.getAmbiguousCite.call(this.state,i,this.base,!0);this.debug&&t>1&&this.state.sys.print("  -----------"),this.ItemCite===n?(this.debug&&(this.state.sys.print("  [CLASH]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+i.id+": "+n)),s+=1,this.partners.push(i)):(this.debug&&(this.state.sys.print("  [clear]--> "+this.Item.id+": "+this.ItemCite),this.state.sys.print("             "+i.id+": "+n)),this.nonpartners.push(i))}this.clashes[0]=this.clashes[1],this.clashes[1]=s};a.Disambiguation.prototype.evalScan=function(e){this[this.modes[this.modeindex]](e),e&&(this.modeindex<this.modes.length-1?this.modeindex+=1:this.lists[this.listpos+1]=[this.base,[]])};a.Disambiguation.prototype.disNames=function(e){var t,r;if(this.debug&&this.state.sys.print("[3] == disNames() =="),this.clashes[1]===0&&this.nonpartners.length===1)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [a]: lone partner, one nonpartner"),this.state.sys.print("  registering "+this.partners[0].id+" and "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,[]];else if(this.clashes[1]===0)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [b]: lone partner, unknown number of remaining nonpartners"),this.state.sys.print("  registering "+this.partners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.partners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.nonpartners.length&&(this.initGivens=!0);else if(this.nonpartners.length===1)this.captureStepToBase(),this.debug&&(this.state.sys.print("  ** RESOLUTION [c]: lone nonpartner, unknown number of partners remaining"),this.state.sys.print("  registering "+this.nonpartners[0].id)),this.state.registry.registerAmbigToken(this.akey,""+this.nonpartners[0].id,this.betterbase),this.lists[this.listpos]=[this.betterbase,this.partners];else if(this.clashes[1]<this.clashes[0])this.captureStepToBase(),this.debug&&this.state.sys.print("  ** RESOLUTION [d]: better result, but no entries safe to register"),this.lists[this.listpos]=[this.betterbase,this.partners],this.lists.push([this.betterbase,this.nonpartners]);else if(this.debug&&this.state.sys.print("  ** RESOLUTION [e]: no improvement, and clashes remain"),e&&(this.lists[this.listpos]=[this.betterbase,this.nonpartners],this.lists.push([this.betterbase,this.partners]),this.modeindex===this.modes.length-1)){this.debug&&this.state.sys.print("     (registering clashing entries because we've run out of options)");for(var t=0,r=this.partners.length;t<r;t+=1)this.state.registry.registerAmbigToken(this.akey,""+this.partners[t].id,this.betterbase);this.lists[this.listpos]=[this.betterbase,[]]}};a.Disambiguation.prototype.disExtraText=function(){this.debug&&this.state.sys.print("[3] === disExtraText ==");var e=!1;if(this.clashes[1]===0&&this.nonpartners.length<2&&(e=!0),!e&&(!this.base.disambiguate||this.state.tmp.disambiguate_count!==this.state.tmp.disambiguate_maxMax))if(this.modeindex=0,this.base.disambiguate=this.state.tmp.disambiguate_count,this.betterbase.disambiguate=this.state.tmp.disambiguate_count,this.base.disambiguate)this.disNames();else{this.initGivens=!0,this.base.disambiguate=1;for(var t=0,r=this.lists[this.listpos][1].length;t<r;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0}else if(e||this.state.tmp.disambiguate_count===this.state.tmp.disambiguate_maxMax)if(e||this.modeindex===this.modes.length-1){for(var i=this.lists[this.listpos][0],t=0,r=this.lists[this.listpos][1].length;t<r;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][t].id,i);this.lists[this.listpos]=[this.betterbase,[]]}else{this.modeindex=this.modes.length-1;var i=this.lists[this.listpos][0];i.disambiguate=!0;for(var t=0,r=this.lists[this.listpos][1].length;t<r;t+=1)this.state.tmp.taintedItemIDs[this.lists[this.listpos][1][t].id]=!0,this.state.registry.registerAmbigToken(this.akey,""+this.lists[this.listpos][1][t].id,i)}};a.Disambiguation.prototype.disYears=function(){var e,t,r,i;this.debug&&this.state.sys.print("[3] === disYears =="),r=[];var s=this.lists[this.listpos][0];if(this.clashes[1])for(var n=0,o=this.state.registry.mylist.length;n<o;n+=1)for(var l=this.state.registry.mylist[n],u=0,m=this.lists[this.listpos][1].length;u<m;u+=1){var i=this.lists[this.listpos][1][u];if(i.id==l){r.push(this.registry[i.id]);break}}r.sort(this.state.registry.sorter.compareKeys);for(var e=0,t=r.length;e<t;e+=1){s.year_suffix=""+e;var c=this.state.registry.registry[r[e].id].disambig;this.state.registry.registerAmbigToken(this.akey,""+r[e].id,s),a.ambigConfigDiff(c,s)&&(this.state.tmp.taintedItemIDs[r[e].id]=!0)}this.lists[this.listpos]=[this.betterbase,[]]};a.Disambiguation.prototype.incrementDisambig=function(){if(this.debug&&this.state.sys.print(`
[1] === incrementDisambig() ===`),this.initGivens)return this.initGivens=!1,!1;var e=!1,t=!0;if(this.modes[this.modeindex]==="disNames"){t=!1,typeof this.givensMax!="number"&&(t=!0);var r=!1;typeof this.namesMax!="number"&&(r=!0),typeof this.givensMax=="number"&&(this.base.givens.length&&this.base.givens[this.gnameset][this.gname]<this.givensMax?this.base.givens[this.gnameset][this.gname]+=1:t=!0),typeof this.namesMax=="number"&&t&&(this.state.opt["disambiguate-add-names"]?(r=!1,this.gname<this.namesMax?(this.base.names[this.gnameset]+=1,this.gname+=1):r=!0):r=!0),typeof this.namesetsMax=="number"&&r&&this.gnameset<this.namesetsMax&&(this.gnameset+=1,this.base.names[this.gnameset]=1,this.gname=0),this.debug&&(this.state.sys.print("    ------------------"),this.state.sys.print("    incremented values"),this.state.sys.print("    ------------------"),this.state.sys.print("    | gnameset: "+this.gnameset),this.state.sys.print("    | gname: "+this.gname),this.state.sys.print("    | names value: "+this.base.names[this.gnameset]),this.base.givens.length?this.state.sys.print("    | givens value: "+this.base.givens[this.gnameset][this.gname]):this.state.sys.print("    | givens value: nil"),this.state.sys.print("    | namesetsMax: "+this.namesetsMax),this.state.sys.print("    | namesMax: "+this.namesMax),this.state.sys.print("    | givensMax: "+this.givensMax)),(typeof this.namesetsMax!="number"||this.namesetsMax===-1||this.gnameset===this.namesetsMax)&&(!this.state.opt["disambiguate-add-names"]||typeof this.namesMax!="number"||this.gname===this.namesMax)&&(typeof this.givensMax!="number"||typeof this.base.givens[this.gnameset]>"u"||typeof this.base.givens[this.gnameset][this.gname]>"u"||this.base.givens[this.gnameset][this.gname]===this.givensMax)&&(e=!0,this.debug&&this.state.sys.print("    MAXED"))}else this.modes[this.modeindex]==="disExtraText"&&(this.base.disambiguate+=1,this.betterbase.disambiguate+=1);return e};a.Disambiguation.prototype.initVars=function(e){var t,r,i,s,n;if(this.debug&&this.state.sys.print("[B] === initVars() ==="),this.lists=[],this.base=!1,this.betterbase=!1,this.akey=e,this.maxNamesByItemId={},s=[],i=this.ambigcites[e],!i||!i.length)return!1;var o=this.state.refetchItem(""+i[0]);if(this.getCiteData(o),this.base=a.getAmbigConfig.call(this.state),i&&i.length>1){s.push([this.maxNamesByItemId[o.id],o]);for(var t=1,r=i.length;t<r;t+=1)o=this.state.refetchItem(""+i[t]),this.getCiteData(o,this.base),s.push([this.maxNamesByItemId[o.id],o]);s.sort(function(u,m){return u[0]>m[0]?1:u[0]<m[0]?-1:u[1].id>m[1].id?1:u[1].id<m[1].id?-1:0}),n=[];for(var t=0,r=s.length;t<r;t+=1)n.push(s[t][1]);this.lists.push([this.base,n]),this.Item=this.lists[0][1][0]}else this.Item=this.state.refetchItem(""+i[0]);if(this.modeindex=0,this.state.citation.opt["disambiguate-add-names"]||!0)this.namesMax=this.maxNamesByItemId[this.Item.id][0];else{var l;for(var t,r;t<r;t+=1);}return this.padBase(this.base),this.padBase(this.betterbase),this.base.year_suffix=!1,this.base.disambiguate=!1,this.betterbase.year_suffix=!1,this.betterbase.disambiguate=!1,this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&this.state.opt["disambiguate-add-givenname"]&&(this.givensMax=2),!0};a.Disambiguation.prototype.padBase=function(e){for(var t=0,r=e.names.length;t<r;t+=1){e.givens[t]||(e.givens[t]=[]);for(var i=0,s=e.names[t];i<s;i+=1)e.givens[t][i]||(e.givens[t][i]=0)}};a.Disambiguation.prototype.configModes=function(){var e,t;this.modes=[],e=this.state.opt["disambiguate-add-givenname"],t=this.state.citation.opt["givenname-disambiguation-rule"],(this.state.opt["disambiguate-add-names"]||e&&t==="by-cite")&&this.modes.push("disNames"),this.state.opt.development_extensions.prioritize_disambiguate_condition?(this.state.opt.has_disambiguate&&this.modes.push("disExtraText"),this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears")):(this.state.opt["disambiguate-add-year-suffix"]&&this.modes.push("disYears"),this.state.opt.has_disambiguate&&this.modes.push("disExtraText"))};a.Disambiguation.prototype.getCiteData=function(e,t){if(!this.maxNamesByItemId[e.id]){a.getAmbiguousCite.call(this.state,e,t),t=a.getAmbigConfig.call(this.state),this.maxNamesByItemId[e.id]=a.getMaxVals.call(this.state),this.state.registry.registry[e.id].disambig.givens=this.state.tmp.disambig_settings.givens.slice();for(var r=0,i=this.state.registry.registry[e.id].disambig.givens.length;r<i;r+=1)this.state.registry.registry[e.id].disambig.givens[r]=this.state.tmp.disambig_settings.givens[r].slice();this.namesetsMax=this.state.registry.registry[e.id].disambig.names.length-1,this.base||(this.base=t,this.betterbase=a.cloneAmbigConfig(t)),t.names.length<this.base.names.length&&(this.base=t);for(var r=0,i=t.names.length;r<i;r+=1)t.names[r]>this.base.names[r]&&(this.base.givens[r]=t.givens[r].slice(),this.base.names[r]=t.names[r],this.betterbase.names=this.base.names.slice(),this.betterbase.givens=this.base.givens.slice(),this.padBase(this.base),this.padBase(this.betterbase));this.betterbase.givens=this.base.givens.slice();for(var s=0,n=this.base.givens.length;s<n;s+=1)this.betterbase.givens[s]=this.base.givens[s].slice()}};a.Disambiguation.prototype.captureStepToBase=function(){this.state.citation.opt["givenname-disambiguation-rule"]==="by-cite"&&this.base.givens&&this.base.givens.length&&typeof this.base.givens[this.gnameset][this.gname]<"u"&&(this.betterbase.givens.length<this.base.givens.length&&(this.betterbase.givens=JSON.parse(JSON.stringify(this.base.givens))),this.betterbase.givens[this.gnameset][this.gname]=this.base.givens[this.gnameset][this.gname]),this.betterbase.names[this.gnameset]=this.base.names[this.gnameset]};a.Engine.prototype.getJurisdictionList=function(e){for(var t=[],r=e.split(":"),i=r.length;i>0;i--){var s=r.slice(0,i).join(":");if(t.push(s),this.opt.jurisdiction_fallbacks[s]){var n=this.opt.jurisdiction_fallbacks[s];t.push(n)}}return t.indexOf("us")===-1&&t.push("us"),t};a.Engine.prototype.loadStyleModule=function(e,t,r){var i=null,s=0;this.juris[e]={};var n=a.setupXml(t);n.addMissingNameNodes(n.dataObj),n.addInstitutionNodes(n.dataObj),n.insertPublisherAndPlace(n.dataObj),n.flagDateMacros(n.dataObj);for(var p=n.getNodesByName(n.dataObj,"law-module"),o=0,l=p.length;o<l;o++){var u=n.getAttributeValue(p[o],"types");if(u){this.juris[e].types={},u=u.split(/\s+/);for(var m=0,c=u.length;m<c;m++)this.juris[e].types[u[m]]=!0}r||(i=n.getAttributeValue(p[o],"fallback"),i&&e!=="us"&&(this.opt.jurisdiction_fallbacks[e]=i))}var h=this.opt.lang?this.opt.lang:this.opt["default-locale"][0];a.SET_COURT_CLASSES(this,h,n,n.dataObj),this.juris[e].types||(this.juris[e].types=a.MODULE_TYPES);for(var p=n.getNodesByName(n.dataObj,"macro"),o=0,l=p.length;o<l;o++){var d=n.getAttributeValue(p[o],"name");if(!a.MODULE_MACROS[d]){a.debug('CSL: skipping non-modular macro name "'+d+'" in module context');continue}s++,this.juris[e][d]=[],this.buildTokenLists(p[o],this.juris[e][d]),this.configureTokenList(this.juris[e][d])}return i};a.Engine.prototype.retrieveAllStyleModules=function(e){var t={},r=this.locale[this.opt.lang].opts["jurisdiction-preference"];r=r||[],r=[""].concat(r);for(var i=r.length-1;i>-1;i--)for(var s=r[i],n=0,o=e.length;n<o;n++){var l=e[n];if(!this.opt.jurisdictions_seen[l]){var u=this.sys.retrieveStyleModule(l,s);(!u&&!s||u)&&(this.opt.jurisdictions_seen[l]=!0),u&&(t[l]=u)}}return t};a.ParticleList=function(){var e=[[[0,1],null]],t=[[[0,3],null]],r=[[null,[0,1]]],i=[[null,[0,2]]],s=[[null,[0,3]]],n=[[null,[0,1]],[[0,1],null]],o=[[null,[0,2]],[[0,2],null]],l=[[[0,1],null],[null,[0,1]]],u=[[[0,2],null],[null,[0,2]]],m=[[[0,3],null],[null,[0,3]]],c=[[null,[0,2]],[[0,1],[1,2]]],h=[["'s",r],["'s-",r],["'t",r],["a",r],["aan 't",i],["aan de",i],["aan den",i],["aan der",i],["aan het",i],["aan t",i],["aan",r],["ad-",n],["adh-",n],["af",n],["al",n],["al-",n],["am de",i],["am",r],["an-",n],["ar-",n],["as-",n],["ash-",n],["at-",n],["ath-",n],["auf dem",u],["auf den",u],["auf der",u],["auf ter",i],["auf",l],["aus 'm",u],["aus dem",u],["aus den",u],["aus der",u],["aus m",u],["aus",l],["aus'm",u],["az-",n],["a\u0161-",n],["a\u1E0D-",n],["a\u1E0F-",n],["a\u1E63-",n],["a\u1E6D-",n],["a\u1E6F-",n],["a\u1E93-",n],["ben",r],["bij 't",i],["bij de",i],["bij den",i],["bij het",i],["bij t",i],["bij",r],["bin",r],["boven d",i],["boven d'",i],["d",r],["d'",n],["da",n],["dal",r],["dal'",r],["dall'",r],["dalla",r],["das",n],["de die le",s],["de die",i],["de l",i],["de l'",i],["de la",c],["de las",c],["de le",i],["de li",o],["de van der",s],["de",n],["de'",n],["deca",r],["degli",n],["dei",n],["del",n],["dela",e],["dell'",n],["della",n],["delle",n],["dello",n],["den",n],["der",n],["des",n],["di",n],["die le",i],["do",r],["don",r],["dos",n],["du",n],["ed-",n],["edh-",n],["el",n],["el-",n],["en-",n],["er-",n],["es-",n],["esh-",n],["et-",n],["eth-",n],["ez-",n],["e\u0161-",n],["e\u1E0D-",n],["e\u1E0F-",n],["e\u1E63-",n],["e\u1E6D-",n],["e\u1E6F-",n],["e\u1E93-",n],["het",r],["i",r],["il",e],["im",r],["in 't",i],["in de",i],["in den",i],["in der",o],["in het",i],["in t",i],["in",r],["l",r],["l'",r],["la",r],["las",r],["le",r],["les",n],["lo",n],["los",r],["lou",r],["of",r],["onder 't",i],["onder de",i],["onder den",i],["onder het",i],["onder t",i],["onder",r],["op 't",i],["op de",o],["op den",i],["op der",i],["op gen",i],["op het",i],["op t",i],["op ten",i],["op",r],["over 't",i],["over de",i],["over den",i],["over het",i],["over t",i],["over",r],["s",r],["s'",r],["sen",e],["t",r],["te",r],["ten",r],["ter",r],["tho",r],["thoe",r],["thor",r],["to",r],["toe",r],["tot",r],["uijt 't",i],["uijt de",i],["uijt den",i],["uijt te de",s],["uijt ten",i],["uijt",r],["uit 't",i],["uit de",i],["uit den",i],["uit het",i],["uit t",i],["uit te de",s],["uit ten",i],["uit",r],["unter",r],["v",r],["v.",r],["v.d.",r],["van 't",i],["van de l",s],["van de l'",s],["van de",i],["van de",i],["van den",i],["van der",i],["van gen",i],["van het",i],["van la",i],["van t",i],["van ter",i],["van van de",s],["van",n],["vander",r],["vd",r],["ver",r],["vom und zum",t],["vom",n],["von 't",i],["von dem",u],["von den",u],["von der",u],["von t",i],["von und zu",m],["von zu",u],["von",l],["voor 't",i],["voor de",i],["voor den",i],["voor in 't",s],["voor in t",s],["voor",r],["vor der",u],["vor",l],["z",e],["ze",e],["zu",l],["zum",n],["zur",n]];return h}();a.parseParticles=function(){function e(i,s,n){var o=i;i=n?i.toLowerCase():i;var l=[],u,m;s?(i=i.split("").reverse().join(""),u=a.PARTICLE_GIVEN_REGEXP):u=a.PARTICLE_FAMILY_REGEXP;for(var c=i.match(u);c;){var h=s?c[1].split("").reverse().join(""):c[1],p=c?h:!1,p=p?h.replace(/^[-\'\u02bb\u2019\s]*(.).*$/,"$1"):!1;if(m=p?p.toUpperCase()!==p:!1,!m)break;s?(l.push(o.slice(h.length*-1)),o=o.slice(0,h.length*-1)):(l.push(o.slice(0,h.length)),o=o.slice(h.length)),i=c[2],c=i.match(u)}if(s){i=i.split("").reverse().join(""),l.reverse();for(var d=1,v=l.length;d<v;d++)l[d].slice(0,1)==" "&&(l[d-1]+=" ");for(var d=0,v=l.length;d<v;d++)l[d].slice(0,1)==" "&&(l[d]=l[d].slice(1));i=o.slice(0,i.length)}else i=o.slice(i.length*-1);return[m,i,l]}function t(i){var s=i.slice(-1);return i=i.trim(),s===" "&&["'","\u2019"].indexOf(i.slice(-1))>-1&&(i+=" "),i}function r(i){if(!i.suffix&&i.given){var s=i.given.match(/(\s*,!*\s*)/);if(s){var n=i.given.indexOf(s[1]),o=i.given.slice(n+s[1].length),l=i.given.slice(n,n+s[1].length).replace(/\s*/g,"");o.replace(/\./g,"")==="et al"&&!i["dropping-particle"]?(i["dropping-particle"]=o,i["comma-dropping-particle"]=","):(l.length===2&&(i["comma-suffix"]=!0),i.suffix=o),i.given=i.given.slice(0,n)}}}return function(i){var l=e(i.family),s=l[1],n=l[2];i.family=s;var o=t(n.join(""));o&&(i["non-dropping-particle"]=o),r(i);var l=e(i.given,!0),u=l[1],m=l[2];i.given=u;var c=m.join("").trim();c&&(i["dropping-particle"]=c)}}();Eo.exports=a});var of={};me(of,{Refs:()=>Ks});var ui={};me(ui,{currentVersion:()=>Sl,retrieveLastVersion:()=>Cl,retrieveVersion:()=>kl,save:()=>Dl,undo:()=>Nl});function Sl(){return this.log.length}function kl(e=1){if(e<=0||e>this.currentVersion())return null;{let[t,r]=this.log[e-1],i=new this.constructor(JSON.parse(t),JSON.parse(r));return i.log=this.log.slice(0,e),i}}function Nl(e=1){return this.retrieveVersion(this.currentVersion()-e)}function Cl(){return this.retrieveVersion(this.currentVersion())}function Dl(){return this.log.push([JSON.stringify(this.data),JSON.stringify(this._options)]),this}var mi={};me(mi,{defaultOptions:()=>Il,options:()=>Bl});var un=["real","string"],mn=["json","html","string","rtf"],pn=["csl","bibtex","bibtxt","citation-*","ris","ndjson"],cn=["string","function"];function bt(e){if(typeof e!="object")throw new TypeError("Options not an object!");let{format:t,type:r,style:i,lang:s,append:n,prepend:o}=e;if(t&&!un.includes(t))throw new TypeError(`Option format ("${t}") should be one of: ${un}`);if(r&&!mn.includes(r))throw new TypeError(`Option type ("${r}") should be one of: ${mn}`);if(i&&!pn.includes(i)&&!/^citation/.test(i))throw new TypeError(`Option style ("${i}") should be one of: ${pn}`);if(s&&typeof s!="string")throw new TypeError(`Option lang should be a string, but is a ${typeof s}`);if(o&&!cn.includes(typeof o))throw new TypeError(`Option prepend should be a string or a function, but is a ${typeof o}`);if(n&&!cn.includes(typeof n))throw new TypeError(`Option append should be a string or a function, but is a ${typeof n}`);if(/^citation/.test(i)&&r==="json")throw new Error(`Combination type/style of json/citation-* is not valid: ${r}/${i}`);return!0}function Rl(e){if(typeof e!="object")throw new TypeError("Options should be an object");if(e.output)bt(e.output);else{if(e.maxChainLength&&typeof e.maxChainLength!="number")throw new TypeError("Option maxChainLength should be a number");if(e.forceType&&typeof e.forceType!="string")throw new TypeError("Option forceType should be a string");if(e.generateGraph!=null&&typeof e.generateGraph!="boolean")throw new TypeError("Option generateGraph should be a boolean");if(e.strict!=null&&typeof e.strict!="boolean")throw new TypeError("Option strict should be a boolean");if(e.target!=null&&typeof e.target!="string")throw new TypeError("Option target should be a boolean")}return!0}var Il={format:"real",type:"json",style:"csl",lang:"en-US"};function Bl(e,t){return bt(e),t&&this.save(),Object.assign(this._options,e),this}var Zi={};me(Zi,{add:()=>um,addAsync:()=>mm,reset:()=>fm,set:()=>pm,setAsync:()=>cm});var kr={};me(kr,{add:()=>fu,addDataParser:()=>gr,addTypeParser:()=>bi,chain:()=>Qi,chainAsync:()=>Yi,chainLink:()=>am,chainLinkAsync:()=>om,data:()=>Et,dataAsync:()=>Ut,get:()=>Fi,has:()=>du,hasDataParser:()=>Sn,hasTypeParser:()=>Fl,list:()=>gu,listDataParser:()=>cu,listTypeParser:()=>Pl,remove:()=>hu,removeDataParser:()=>br,removeTypeParser:()=>vi,treeTypeParser:()=>Ll,type:()=>Ee,typeMatcher:()=>yi,util:()=>lm});var fi={};me(fi,{dataTypeOf:()=>ci,typeOf:()=>pi});function pi(e){switch(e){case void 0:return"Undefined";case null:return"Null";default:return e.constructor.name}}function ci(e){switch(typeof e){case"string":return"String";case"object":if(Array.isArray(e))return"Array";if(pi(e)==="Object")return"SimpleObject";if(pi(e)!=="Null")return"ComplexObject";default:return"Primitive"}}var gi={};me(gi,{applyGraph:()=>hi,removeGraph:()=>di});function hi(e,t){if(e._graph){let r=t.findIndex(({type:i})=>i==="@else/list+object");r!==-1&&t.splice(r+1,0,...e._graph.slice(0,-1))}return e._graph=t,e}function di(e){return delete e._graph,e}var _i={};me(_i,{DataParser:()=>Lt,FormatParser:()=>jt,TypeParser:()=>fr});var vt={_output(e,t,r){this._log.push(t,r),!(this._levels.indexOf(e)<this._levels.indexOf(this.level))&&this._console.log(t,...r)},_console:null,_log:[],_levels:["http","debug","unmapped","info","warn","error","silent"],level:"silent"};for(let e of vt._levels)vt[e]=(t,...r)=>vt._output(e,t,r);typeof console.Console=="function"?vt._console=new console.Console(process.stderr):vt._console=console;var ge=vt;var Se={},tt={},yt={};function fn(e,t){switch(t){case"Array":return e.length===0||e.every(r=>Ee(r)==="@csl/object")?"@csl/list+object":"@else/list+object";case"SimpleObject":case"ComplexObject":return"@csl/object";default:return"@invalid"}}function hn(e=[],t){for(let r of e)if(Se[r].predicate(t))return hn(Se[r].extensions,t)||r}function Ee(e){let t=ci(e);return t==="Array"&&e.length===0?fn(e,t):hn(tt[t],e)||fn(e,t)}function bi(e,{dataType:t,predicate:r,extends:i}){let s=[];e in yt&&(s=yt[e],delete yt[e],ge.debug("[core]",`Subclasses "${s}" finally registered to parent type "${e}"`));let n={predicate:r,extensions:s};if(Se[e]=n,i){let o=Se[i];o?o.extensions.push(e):(yt[i]||(yt[i]=[]),yt[i].push(e),ge.debug("[core]",`Subclass "${e}" is waiting on parent type "${i}"`))}else(tt[t]||(tt[t]=[])).push(e)}function Fl(e){return Object.prototype.hasOwnProperty.call(Se,e)}function vi(e){delete Se[e],[...Object.keys(tt).map(r=>tt[r]),...Object.keys(Se).map(r=>Se[r].extensions).filter(r=>r.length>0)].forEach(r=>{let i=r.indexOf(e);i>-1&&r.splice(i,1)})}function Pl(){return Object.keys(Se)}function Ll(){let e=t=>({name:t,children:Se[t].extensions.map(e)});return{name:"Type tree",children:Object.keys(tt).map(t=>({name:t,children:tt[t].map(e)}))}}var yi=/^(?:@(.+?))(?:\/(?:(.+?)\+)?(?:(.+)))?$/;function jl(e,t,r){return(t=Ul(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ul(e){var t=Ml(e,"string");return typeof t=="symbol"?t:t+""}function Ml(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fr=class{constructor(t){jl(this,"validDataTypes",["String","Array","SimpleObject","ComplexObject","Primitive"]),this.data=t}validateDataType(){let t=this.data.dataType;if(t&&!this.validDataTypes.includes(t))throw new RangeError(`dataType was ${t}; expected one of ${this.validDataTypes}`)}validateParseType(){let t=this.data.predicate;if(t&&!(t instanceof RegExp||typeof t=="function"))throw new TypeError(`predicate was ${typeof t}; expected RegExp or function`)}validateTokenList(){let t=this.data.tokenList;if(t&&typeof t!="object")throw new TypeError(`tokenList was ${typeof t}; expected object or RegExp`)}validatePropertyConstraint(){let t=this.data.propertyConstraint;if(t&&typeof t!="object")throw new TypeError(`propertyConstraint was ${typeof t}; expected array or object`)}validateElementConstraint(){let t=this.data.elementConstraint;if(t&&typeof t!="string")throw new TypeError(`elementConstraint was ${typeof t}; expected string`)}validateExtends(){let t=this.data.extends;if(t&&typeof t!="string")throw new TypeError(`extends was ${typeof t}; expected string`)}validate(){if(this.data===null||typeof this.data!="object")throw new TypeError(`typeParser was ${typeof this.data}; expected object`);this.validateDataType(),this.validateParseType(),this.validateTokenList(),this.validatePropertyConstraint(),this.validateElementConstraint(),this.validateExtends()}parseTokenList(){let t=this.data.tokenList;if(t)t instanceof RegExp&&(t={token:t});else return[];let{token:r,split:i=/\s+/,trim:s=!0,every:n=!0}=t,o=m=>s?m.trim():m,l=n?"every":"some";return[m=>o(m).split(i)[l](c=>r.test(c))]}parsePropertyConstraint(){return[].concat(this.data.propertyConstraint||[]).map(({props:r,match:i,value:s})=>{switch(r=[].concat(r),i){case"any":case"some":return n=>r.some(o=>o in n&&(!s||s(n[o])));case"none":return n=>!r.some(o=>o in n&&(!s||s(n[o])));case"every":default:return n=>r.every(o=>o in n&&(!s||s(n[o])))}})}parseElementConstraint(){let t=this.data.elementConstraint;return t?[r=>r.every(i=>Ee(i)===t)]:[]}parsePredicate(){return this.data.predicate instanceof RegExp?[this.data.predicate.test.bind(this.data.predicate)]:this.data.predicate?[this.data.predicate]:[]}getCombinedPredicate(){let t=[...this.parsePredicate(),...this.parseTokenList(),...this.parsePropertyConstraint(),...this.parseElementConstraint()];return t.length===0?()=>!0:t.length===1?t[0]:r=>t.every(i=>i(r))}getDataType(){return this.data.dataType?this.data.dataType:this.data.predicate instanceof RegExp||this.data.tokenList?"String":this.data.elementConstraint?"Array":"Primitive"}get dataType(){return this.getDataType()}get predicate(){return this.getCombinedPredicate()}get extends(){return this.data.extends}},Lt=class{constructor(t,{async:r}={}){this.parser=t,this.async=r}validate(){let t=this.parser;if(typeof t!="function")throw new TypeError(`parser was ${typeof t}; expected function`)}},jt=class{constructor(t,r={}){this.format=t,r.parseType&&(this.typeParser=new fr(r.parseType)),r.parse&&(this.dataParser=new Lt(r.parse,{async:!1})),r.parseAsync&&(this.asyncDataParser=new Lt(r.parseAsync,{async:!0}))}validateFormat(){let t=this.format;if(!yi.test(t))throw new TypeError(`format name was "${t}"; didn't match expected pattern`)}validate(){this.validateFormat(),this.typeParser&&this.typeParser.validate(),this.dataParser&&this.dataParser.validate(),this.asyncDataParser&&this.asyncDataParser.validate()}};var Ri={};me(Ri,{clean:()=>Di});var wn=Oe(Oi());function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xn(Object(r),!0).forEach(function(i){au(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function au(e,t,r){return(t=ou(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ou(e){var t=lu(e,"string");return typeof t=="symbol"?t:t+""}function lu(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uu=1,re=2,qe=3,An=4,Si={article:!0,"article-journal":!0,"article-magazine":!0,"article-newspaper":!0,bill:!0,book:!0,broadcast:!0,chapter:!0,classic:!0,collection:!0,dataset:!0,document:!0,entry:!0,"entry-dictionary":!0,"entry-encyclopedia":!0,event:!0,figure:!0,graphic:!0,hearing:!0,interview:!0,legal_case:!0,legislation:!0,manuscript:!0,map:!0,motion_picture:!0,musical_score:!0,pamphlet:!0,"paper-conference":!0,patent:!0,performance:!0,periodical:!0,personal_communication:!0,post:!0,"post-weblog":!0,regulation:!0,report:!0,review:!0,"review-book":!0,software:!0,song:!0,speech:!0,standard:!0,thesis:!0,treaty:!0,webpage:!0,"journal-article":"article-journal","book-chapter":"chapter","posted-content":"manuscript","proceedings-article":"paper-conference",dissertation:"thesis"},En={author:re,chair:re,"collection-editor":re,compiler:re,composer:re,"container-author":re,contributor:re,curator:re,director:re,editor:re,"editorial-director":re,"executive-producer":re,guest:re,host:re,interviewer:re,illustrator:re,narrator:re,organizer:re,"original-author":re,performer:re,producer:re,"reviewed-author":re,recipient:re,"script-writer":re,"series-creator":re,translator:re,accessed:qe,"available-date":qe,container:qe,"event-date":qe,issued:qe,"original-date":qe,submitted:qe,type:An,categories:"object",custom:"object",id:["string","number"],language:"string",journalAbbreviation:"string",shortTitle:"string",abstract:"string",annote:"string",archive:"string",archive_collection:"string",archive_location:"string","archive-place":"string",authority:"string","call-number":"string","chapter-number":"string","citation-number":"string","citation-key":"string","citation-label":"string","collection-number":"string","collection-title":"string","container-title":"string","container-title-short":"string",dimensions:"string",division:"string",DOI:"string",edition:["string","number"],event:"string","event-title":"string","event-place":"string","first-reference-note-number":"string",genre:"string",ISBN:"string",ISSN:"string",issue:["string","number"],jurisdiction:"string",keyword:"string",locator:"string",medium:"string",note:"string",number:["string","number"],"number-of-pages":"string","number-of-volumes":["string","number"],"original-publisher":"string","original-publisher-place":"string","original-title":"string",page:"string","page-first":"string","part-number":["string","number"],"part-title":"string",PMCID:"string",PMID:"string",printing:"string",publisher:"string","publisher-place":"string",references:"string","reviewed-title":"string","reviewed-genre":"string",scale:"string",section:"string",source:"string",status:"string",supplement:["string","number"],title:"string","title-short":"string",URL:"string",version:"string",volume:["string","number"],"volume-title":"string","volume-title-short":"string","year-suffix":"string"};function Tn(e,t){if(typeof e=="object"&&e!==null&&(e.literal||e.given||e.family))return(e.ORCID||e.orcid||e._ORCID)&&(e=Ni({_orcid:e.ORCID||e.orcid||e._ORCID},e),delete e.ORCID,delete e.orcid,delete e._ORCID),e;if(t){if(typeof e=="string")return(0,wn.parse)(e)}else return}function mu(e,t){if(e instanceof Array){let r=e.map(i=>Tn(i,t)).filter(Boolean);return r.length?r:void 0}}function ki(e,t){return e.every(r=>typeof r=="number")?e:!t||e.some(r=>isNaN(parseInt(r)))?void 0:e.map(r=>parseInt(r))}function pu(e,t){let r="date-parts";if(!(typeof e!="object"||e===null)){if(e[r]instanceof Array&&e[r].every(i=>i instanceof Array)){let i=e[r].map(s=>ki(s,t)).filter(Boolean);return i.length?Ni(Ni({},e),{},{"date-parts":i}):void 0}else if(e instanceof Array&&e.every(i=>i[r]instanceof Array)){let i=e.map(s=>ki(s[r],t)).filter(Boolean);return i.length?{"date-parts":i}:void 0}else if(e[r]instanceof Array){let i=ki(e[r],t);return i&&{"date-parts":[i]}}else if("literal"in e||"raw"in e)return e}}function On(e,t){if(e=Ci("language",e,t),Si[e]===!0)return e;if(t){if(e in Si)return Si[e];if(e.toLowerCase()!==e)return On(e.toLowerCase(),t)}}function Ci(e,t,r){let i=[].concat(En[e]);switch(En[e]){case uu:return Tn(t,r);case re:return mu(t,r);case qe:return pu(t,r);case An:return On(t,r)}if(r){if(typeof t=="string"&&i.includes("number")&&!i.includes("string")&&!isNaN(+t))return parseFloat(t);if(typeof t=="number"&&i.includes("string")&&!i.includes("number"))return t.toString();if(Array.isArray(t)&&t.length)return Ci(e,t[0],r)}if(i.includes(typeof t))return t}function Di(e,t=!0){return e.map(function(r){let i={};for(let s in r){let n=Ci(s,r[s],t);n!==void 0&&(i[s]=n)}return i})}var _t={},xt={},Ii={"@csl/object":e=>[e],"@csl/list+object":e=>e,"@else/list+object":e=>e.map(t=>{let r=Ee(t);return Et(t,r)}).flat(),"@invalid":()=>{throw new Error("This format is not supported or recognized")}},Bi={"@else/list+object":e=>Promise.all(e.map(t=>{let r=Ee(t);return Ut(t,r)})).then(t=>t.flat())};function Et(e,t){if(typeof _t[t]=="function")return _t[t](e);if(typeof Ii[t]=="function")return Ii[t](e);throw new TypeError(`No synchronous parser found for ${t}`)}async function Ut(e,t){if(typeof xt[t]=="function")return xt[t](e);if(typeof Bi[t]=="function")return Bi[t](e);if(Sn(t,!1))return Et(e,t);throw new TypeError(`No parser found for ${t}`)}function gr(e,{parser:t,async:r}){r?xt[e]=t:_t[e]=t}function Sn(e,t){return t?xt[e]||Bi[e]:_t[e]||Ii[e]}function br(e,t){delete(t?xt:_t)[e]}function cu(e){return Object.keys(e?xt:_t)}var rt={};function fu(e,t){let r=new jt(e,t);r.validate();let i=rt[e]||(rt[e]={});r.typeParser&&(bi(e,r.typeParser),i.type=!0),r.dataParser&&(gr(e,r.dataParser),i.data=!0),r.asyncDataParser&&(gr(e,r.asyncDataParser),i.asyncData=!0),t.outputs&&(i.outputs=t.outputs)}function Fi(e){return rt[e]}function hu(e){let t=rt[e];t&&(t.type&&vi(e),t.data&&br(e),t.asyncData&&br(e,!0),delete rt[e])}function du(e){return e in rt}function gu(){return Object.keys(rt)}var ae={};me(ae,{Grammar:()=>Or,Register:()=>Ot,TokenStack:()=>sa,Translator:()=>nt,deepCopy:()=>Ge,downgradeCsl:()=>wt,fetchFile:()=>ta,fetchFileAsync:()=>ra,fetchId:()=>Xt,setUserAgent:()=>ia,upgradeCsl:()=>Mt});function kn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Nn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kn(Object(r),!0).forEach(function(i){bu(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kn(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function bu(e,t,r){return(t=vu(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vu(e){var t=yu(e,"string");return typeof t=="symbol"?t:t+""}function yu(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mt(e){return Array.isArray(e)?e.map(Mt):(e=Nn({},e),"event"in e&&(e["event-title"]=e.event,delete e.event),e.type==="book"&&"version"in e&&(e.type="software"),e)}function wt(e){return Array.isArray(e)?e.map(wt):(e=Nn({},e),"event-title"in e&&(e.event=e["event-title"],delete e["event-title"]),e.type==="software"&&(e.type="book"),e)}function zt(e,t=new Set){if(typeof e!="object"||e===null||e.constructor!==Object&&e.constructor!==Array)return e;if(t.has(e))throw new TypeError("Recursively copying circular structure");t.add(e);let r;if(e.constructor===Array)r=e.map(i=>zt(i,t));else{let i={};for(let s in e)i[s]=zt(e[s],t);r=i}return t.delete(e),r}var Ge=zt;var Wi=Oe(Wn()),Kn=Oe(Jn());var Ar={name:"@citation-js/core",version:"0.7.18",description:"Convert different bibliographic metadata sources",keywords:["citation-js","citation","bibliography"],author:"Lars Willighagen <lars.willighagen@gmail.com>",license:"MIT",main:"lib/index.js",module:"lib-mjs/index.js",directories:{lib:"src",test:"__tests__"},homepage:"https://citation.js.org/",repository:{type:"git",url:"https://github.com/citation-js/citation-js.git",directory:"packages/core"},bugs:{url:"https://github.com/citation-js/citation-js/issues"},engines:{node:">=16.0.0"},files:["lib","lib-mjs"],scripts:{test:"mocha -c -R dot test/*.spec.js"},dependencies:{"@citation-js/date":"^0.5.0","@citation-js/name":"^0.4.2","fetch-ponyfill":"^7.1.0","sync-fetch":"^0.4.1"},gitHead:"c4ac806070502051e36cf3ab8ad29f3d97e85978"};var Qn=typeof location<"u"&&typeof navigator<"u",{fetch:Zu,Headers:em}=typeof fetch=="function"&&Qn?{fetch,Headers}:(0,Kn.default)(),Tr=`Citation.js/${Ar.version}`;typeof process<"u"&&process&&process.release&&process.release.name==="node"&&process.version&&(Tr+=` Node.js/${process.version}`);function Yn(e){let t={},r=e instanceof em||e instanceof Wi.default.Headers?Array.from(e):Object.entries(e);for(let[i,s]of r)t[i.toLowerCase()]=s.toString();return t}function Zn(e={}){let t={headers:{accept:"*/*"},method:"GET",checkContentType:e.checkContentType};if(Tr&&!Qn&&(t.headers["user-agent"]=Tr),e.body){t.method="POST";let r=typeof e.body!="string";t.body=r?JSON.stringify(e.body):e.body,t.headers["content-type"]=r?"application/json":"text/plain"}return e.headers&&Object.assign(t.headers,Yn(e.headers)),t}function tm(e,t){if(!e.accept||e.accept==="*/*"||!t["content-type"])return!0;let[r,i]=t["content-type"].split(";")[0].trim().split("/");return e.accept.split(",").map(s=>s.split(";")[0].trim().split("/")).some(([s,n])=>(s===r||s==="*")&&(n===i||n==="*"))}function ea(e,t){let{status:r,headers:i}=e,s;if(r>=400?s=new Error(`Server responded with status code ${r}`):t.checkContentType===!0&&!tm(t.headers,Yn(i))&&(s=new Error(`Server responded with content-type ${i.get("content-type")}`)),s)throw s.status=r,s.headers=i,s.body=e.body,s;return e}function ta(e,t){let r=Zn(t);return ge.http("[core]",r.method,e,r),ea((0,Wi.default)(e,r),r).text()}async function ra(e,t){let r=Zn(t);return ge.http("[core]",r.method,e,r),Zu(e,r).then(i=>ea(i,r)).then(i=>i.text())}function ia(e){Tr=e}function rm(e,t){let r;for(;r===void 0||e.includes(r);)r=`${t}${Math.random().toString().slice(2)}`;return r}var Xt=rm;var Ji=class e{constructor(t){this.stack=t,this.index=0,this.current=this.stack[this.index]}static getPatternText(t){return`"${t instanceof RegExp?t.source:t}"`}static getMatchCallback(t){if(Array.isArray(t)){let r=t.map(e.getMatchCallback);return i=>r.some(s=>s(i))}else return t instanceof Function?t:t instanceof RegExp?r=>t.test(r):r=>t===r}tokensLeft(){return this.stack.length-this.index}matches(t){return e.getMatchCallback(t)(this.current,this.index,this.stack)}matchesSequence(t){let r=this.stack.slice(this.index,this.index+t.length).join("");return typeof t=="string"?r===t:t.every((i,s)=>e.getMatchCallback(i)(r[s]))}consumeToken(t=/^[\s\S]$/,{inverse:r=!1,spaced:i=!0}={}){i&&this.consumeWhitespace();let s=this.current;if(e.getMatchCallback(t)(s,this.index,this.stack))this.current=this.stack[++this.index];else throw new SyntaxError(`Unexpected token at index ${this.index}: Expected ${e.getPatternText(t)}, got "${s}"`);return i&&this.consumeWhitespace(),s}consumeWhitespace(t=/^\s$/,{optional:r=!0}={}){return this.consume(t,{min:+!r})}consumeN(t){if(this.tokensLeft()<t)throw new SyntaxError("Not enough tokens left");let r=this.index;for(;t--;)this.current=this.stack[++this.index];return this.stack.slice(r,this.index).join("")}consumeSequence(t){if(this.matchesSequence(t))return this.consumeN(t.length);throw new SyntaxError(`Expected "${t}", got "${this.consumeN(t.length)}"`)}consume(t=/^[\s\S]$/,{min:r=0,max:i=1/0,inverse:s=!1,tokenMap:n,tokenFilter:o}={}){let l=this.index,u=e.getMatchCallback(t);for(;u(this.current,this.index,this.stack)!==s;)this.current=this.stack[++this.index];let m=this.stack.slice(l,this.index);if(m.length<r)throw new SyntaxError(`Not enough ${e.getPatternText(t)}`);if(m.length>i)throw new SyntaxError(`Too many ${e.getPatternText(t)}`);return n&&(m=m.map(n)),o&&(m=m.filter(o)),m.join("")}},sa=Ji;var Ki=class{constructor(t={}){this.data=t}set(t,r){return this.data[t]=r,this}add(...t){return this.set(...t)}delete(t){return delete this.data[t],this}remove(...t){return this.delete(...t)}get(t){return this.data[t]}has(t){return Object.prototype.hasOwnProperty.call(this.data,t)}list(){return Object.keys(this.data)}},Ot=Ki;var Or=class{constructor(t,r){this.rules=t,this.defaultState=r,this.mainRule=Object.keys(t)[0],this.log=[]}parse(t,r){return this.lexer=t,this.token=this.lexer.next(),this.state=zt(this.defaultState),this.log=[],this.consumeRule(r||this.mainRule)}matchEndOfFile(){return!this.token}matchToken(t){return this.token&&t===this.token.type}consumeToken(t,r){let i=this.token;if(!t||i&&i.type===t)return this.token=this.lexer.next(),i;if(r)return;{let s=i?`"${i.type}"`:"EOF",n=new SyntaxError(this.lexer.formatError(i,`expected "${t}", got ${s}`));throw n.message+=` (${this.log.join("->")})`,n}}consumeRule(t){this.log.push(t);let r=this.rules[t].call(this);return this.log.pop(),r}};function im(e){return function(r){return typeof e=="boolean"?e:Object.keys(e).every(i=>{let s=e[i];return s===!0?i in r:s===!1?!(i in r):typeof s=="function"?s(r[i]):Array.isArray(s)?s.includes(r[i]):r[i]===s})}}function sm(e,t){let r,i,s,n;if(typeof e=="string")r=i=e;else if(e)r=t?e.target:e.source,i=t?e.source:e.target,e.convert&&(s=t?e.convert.toSource:e.convert.toTarget),e.when&&(n=t?e.when.target:e.when.source,n!=null&&(n=im(n)));else return null;return r=[].concat(r).filter(Boolean),i=[].concat(i).filter(Boolean),{inputProp:r,outputProp:i,convert:s,condition:n}}function na(e,t){return t=t===nt.CONVERT_TO_SOURCE,e=e.map(r=>sm(r,t)).filter(Boolean),function(i){let s={};for(let{inputProp:n,outputProp:o,convert:l,condition:u}of e){if(o.length===0)continue;if(u&&!u(i))continue;if(n.length!==0&&n.every(c=>!(c in i)))continue;let m=n.map(c=>i[c]);if(l)try{let c=l.apply(i,m);m=o.length===1?[c]:c}catch(c){throw new Error(`Failed to convert ${n} to ${o}`,{cause:c})}o.forEach((c,h)=>{let p=m[h];p!==void 0&&(s[c]=p)})}return s}}var nt=class e{constructor(t){this.convertToSource=na(t,e.CONVERT_TO_SOURCE),this.convertToTarget=na(t,e.CONVERT_TO_TARGET)}};nt.CONVERT_TO_SOURCE=Symbol("convert to source");nt.CONVERT_TO_TARGET=Symbol("convert to target");function nm(e){return e.reduce((t,r)=>{let i=t[t.length-1];return i&&i.type===r.type?i.count=i.count+1||2:t.push(r),t},[]).map(t=>(t.count>1?t.count+"x ":"")+t.type).join(" -> ")}var Sr=class{constructor(t,r={}){this.options=Object.assign({generateGraph:!0,forceType:Ee(t),maxChainLength:10,strict:!0,target:"@csl/list+object"},r),this.type=this.options.forceType,this.data=typeof t=="object"?Ge(t):t,this.graph=[{type:this.type,data:t}],this.iteration=0}iterate(){if(this.iteration!==0){let t=Fi(this.type);t&&t.outputs?this.type=t.outputs:this.type=Ee(this.data),this.graph.push({type:this.type})}return this.error||this.type===this.options.target?!1:this.iteration>=this.options.maxChainLength?(this.error=new RangeError(`Max. number of parsing iterations reached (${nm(this.graph)})`),!1):(this.iteration++,!0)}end(){if(this.error){if(ge.error("[core]",this.error.message),this.options.strict!==!1)throw this.error;return[]}else return this.options.target==="@csl/list+object"?Mt(this.data).map(this.options.generateGraph?t=>hi(t,this.graph):di):this.data}},Qi=(...e)=>{let t=new Sr(...e);for(;t.iterate();)try{t.data=Et(t.data,t.type)}catch(r){t.error=r}return t.end()},am=e=>{let t=Ee(e),r=t.match(/array|object/)?Ge(e):e;return Et(r,t)},Yi=async(...e)=>{let t=new Sr(...e);for(;t.iterate();)t.data=await Ut(t.data,t.type).catch(r=>{t.error=r});return t.end()},om=async e=>{let t=Ee(e),r=t.match(/array|object/)?Ge(e):e;return Ut(r,t)};var lm=Object.assign({},fi,gi,_i,Ri);function um(e,t={},r=!1){return(t===!0||r===!0)&&this.save(),this.data.push(...Qi(e,t)),this.data.filter(i=>!Object.prototype.hasOwnProperty.call(i,"id")).forEach(i=>{i.id=Xt(this.getIds(),"temp_id_")}),this}async function mm(e,t={},r=!1){return(t===!0||r===!0)&&this.save(),this.data.push(...await Yi(e,t)),this.data.filter(i=>!Object.prototype.hasOwnProperty.call(i,"id")).forEach(i=>{i.id=Xt(this.getIds(),"temp_id_")}),this}function pm(e,t={},r=!1){return(t===!0||r===!0)&&this.save(),this.data=[],typeof t!="boolean"?this.add(e,t):this.add(e)}async function cm(e,t={},r=!1){return(t===!0||r===!0)&&this.save(),this.data=[],typeof t!="boolean"?this.addAsync(e,t):this.addAsync(e)}function fm(e){return e&&this.save(),this.data=[],this._options={},this}var ts={};me(ts,{sort:()=>gm});function es(e){if("citation-label"in e)return e["citation-label"];let t="";return e.author&&(t+=e.author[0].family||e.author[0].literal),e.issued&&e.issued["date-parts"]&&e.issued["date-parts"][0]&&(t+=e.issued["date-parts"][0][0]),e["year-suffix"]?t+=e["year-suffix"]:e.title&&(t+=e.title.replace(/<\/?.*?>/g,"").match(/^(?:(?:the|a|an)\s+)?(\S+)/i)[1]),t}var aa={label(e){return e.reduce((t,r)=>(t[r.id]=es(r),t),{})}};var la=Oe(Oi());function oa(e,t,r=t==="label"){let i=r?es(e):e[t];switch(t){case"author":case"editor":return i.map(s=>s.literal||s.family||(0,la.format)(s));case"accessed":case"issued":return i["date-parts"][0];case"page":return i.split("-").map(s=>parseInt(s));case"edition":case"issue":case"volume":return i=parseInt(i),isNaN(i)?-1/0:i;default:return i||-1/0}}function hm(e,t,r,i=/^!/.test(r)){r=r.replace(/^!/,"");let s=oa(e,r),n=oa(t,r);return(i?-1:1)*(s>n?1:s<n?-1:0)}function dm(...e){return(t,r)=>{let i=e.slice(),s=0;for(;!s&&i.length;)s=hm(t,r,i.shift());return s}}function gm(e=[],t){return t&&this.save(),this.data.sort(typeof e=="function"?e:dm(...e,"label")),this}var is={};me(is,{format:()=>wm,get:()=>Am,getIds:()=>Em});var Nr={};me(Nr,{add:()=>vm,format:()=>rs,has:()=>_m,list:()=>xm,register:()=>at,remove:()=>ym});function bm(e,t){if(typeof e!="string")throw new TypeError(`Invalid output format name, expected string, got ${typeof e}`);if(typeof t!="function")throw new TypeError(`Invalid formatter, expected function, got ${typeof t}`)}var at=new Ot;function vm(e,t){bm(e,t),at.set(e,t)}function ym(e){at.remove(e)}function _m(e){return at.has(e)}function xm(){return at.list()}function rs(e,t,...r){if(!at.has(e))throw new Error(`Output format "${e}" unavailable`);return at.get(e)(t,...r)}function Em(){return this.data.map(e=>e.id)}function wm(e,...t){return rs(e,Di(this.data),...t)}function Am(e={}){bt(e);let t=Object.assign({},this.defaultOptions,this._options.output,e),{type:r,style:i}=t,[s,n]=i.split("-"),o=s==="citation"?"bibliography":s==="csl"?"data":s,l=r==="string"?"text":r==="json"?"object":r,u;switch(o){case"bibliography":{let{lang:h,append:p,prepend:d}=t;u={template:n,lang:h,format:l,append:p,prepend:d};break}case"data":case"bibtex":case"bibtxt":case"ndjson":case"ris":u={type:l};break;default:throw new Error(`Invalid style "${o}"`)}let m=this.format(o,Object.assign(u,e._newOptions)),{format:c}=t;if(c==="real"&&l==="html"&&typeof document<"u"&&typeof document.createElement=="function"){let h=document.createElement("div");return h.innerHTML=m,h.firstChild}else return c==="string"&&typeof m=="object"?JSON.stringify(m):m}var ss={};me(ss,{async:()=>ua,validateOptions:()=>Rl,validateOutputOptions:()=>bt});function Tm(e,t,r){typeof t=="function"&&!r&&(r=t,t=void 0);let i=new this().setAsync(e,t);if(typeof r=="function"){i.then(r);return}else return i}var ua=Tm;function St(e,t={}){return this instanceof St?(this._options=t,this.log=[],this.data=[],this.set(e,t),this.options(t),this):new St(e,t)}Object.assign(St.prototype,ui,mi,Zi,ts,is);St.prototype[Symbol.iterator]=function*(){yield*this.data};Object.assign(St,ss);var ns=St;var Ae={};me(Ae,{add:()=>os,config:()=>Cr,dict:()=>kt,has:()=>Mm,input:()=>kr,list:()=>zm,output:()=>Nr,remove:()=>Um});var kt={};me(kt,{add:()=>Sm,get:()=>Dm,has:()=>Nm,htmlDict:()=>Rm,list:()=>Cm,register:()=>ot,remove:()=>km,textDict:()=>Im});function Om(e,t){if(typeof e!="string")throw new TypeError(`Invalid dict name, expected string, got ${typeof e}`);if(typeof t!="object")throw new TypeError(`Invalid dict, expected object, got ${typeof t}`);for(let r in t){let i=t[r];if(!Array.isArray(i)||i.some(s=>typeof s!="string"))throw new TypeError(`Invalid dict entry "${r}", expected array of strings`)}}var ot=new Ot({html:{bibliographyContainer:['<div class="csl-bib-body">',"</div>"],entry:['<div class="csl-entry">',"</div>"],list:['<ul style="list-style-type:none">',"</ul>"],listItem:["<li>","</li>"]},text:{bibliographyContainer:["",`
`],entry:["",`
`],list:[`
`,""],listItem:["	",`
`]}});function Sm(e,t){Om(e,t),ot.set(e,t)}function km(e){ot.remove(e)}function Nm(e){return ot.has(e)}function Cm(){return ot.list()}function Dm(e){if(!ot.has(e))throw new Error(`Dict "${e}" unavailable`);return ot.get(e)}var Rm={wr_start:'<div class="csl-bib-body">',wr_end:"</div>",en_start:'<div class="csl-entry">',en_end:"</div>",ul_start:'<ul style="list-style-type:none">',ul_end:"</ul>",li_start:"<li>",li_end:"</li>"},Im={wr_start:"",wr_end:`
`,en_start:"",en_end:`
`,ul_start:`
`,ul_end:"",li_start:"	",li_end:`
`};var Cr={};me(Cr,{add:()=>Bm,get:()=>Fm,has:()=>Pm,list:()=>jm,remove:()=>Lm});var Vt={};function Bm(e,t){Vt[e]=t}function Fm(e){return Vt[e]}function Pm(e){return Object.prototype.hasOwnProperty.call(Vt,e)}function Lm(e){delete Vt[e]}function jm(){return Object.keys(Vt)}var as={input:kr,output:Nr,dict:kt,config:Cr},Ht={};function os(e,t={}){let r=Ht[e]={};for(let i in t){if(i==="config"){r.config={[e]:t.config},as.config.add(e,t.config);continue}let s=r[i]={},n=t[i];for(let o in n){let l=n[o];s[o]=!0,as[i].add(o,l)}}}function Um(e){let t=Ht[e];for(let r in t){let i=t[r];for(let s in i)as[r].remove(s)}delete Ht[e]}function Mm(e){return e in Ht}function zm(){return Object.keys(Ht)}function Dr(){return[]}var qm=[[/((?:\[|:|,)\s*)'((?:\\'|[^'])*?[^\\])?'(?=\s*(?:\]|}|,))/g,'$1"$2"'],[/((?:(?:"|]|}|\/[gmiuys]|\.|(?:\d|\.|-)*\d)\s*,|{)\s*)(?:"([^":\n]+?)"|'([^":\n]+?)'|([^":\n]+?))(\s*):/g,'$1"$2$3$4"$5:']];function ma(e){if(typeof e!="string")return JSON.parse(e);try{return JSON.parse(e)}catch{return ge.debug("[plugin-common]","Invalid JSON, switching to experimental parser"),qm.forEach(([r,i])=>{e=e.replace(r,i)}),JSON.parse(e)}}function pa(e){return e.val()||e.text()||e.html()}function ca(e){return e.value||e.textContent}var fa="@else";var ha={"@empty/text":{parse:Dr,parseType:{dataType:"String",predicate:e=>e===""}},"@empty/whitespace+text":{parse:Dr,parseType:{dataType:"String",predicate:/^\s+$/}},"@empty":{parse:Dr,parseType:{dataType:"Primitive",predicate:e=>e==null}},"@else/json":{parse:ma,parseType:{dataType:"String",predicate:/^\s*(\{[\S\s]*\}|\[[\S\s]*\])\s*$/}},"@else/url":{parseType:{dataType:"String",predicate:/^https?:\/\/(([\w-]+\.)*[\w-]+)(:\d+)?(\/[^?/]*)*(\?[^#]*)?(#.*)?$/i}},"@else/jquery":{parse:pa,parseType:{dataType:"ComplexObject",predicate(e){return typeof jQuery<"u"&&e instanceof jQuery}}},"@else/html":{parse:ca,parseType:{dataType:"ComplexObject",predicate(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}}}};function ga(e,t,r){return e+(t<r.length-1?",":"")}function ba(e,t){let r=Array.isArray(e),i;return r?i=e.map(s=>da(s,t)):i=Object.keys(e).filter(s=>JSON.stringify(e[s])).map(s=>`"${s}": ${da(e[s],t)}`),i=i.map(ga).map(s=>t.listItem.join(s)),i=t.list.join(i.join("")),r?`[${i}]`:`{${i}}`}function da(e,t){return typeof e=="object"&&e!==null?e.length===0?"[]":Object.keys(e).length===0?"{}":ba(e,t):JSON.stringify(e)}function Hm(e,t){let r=e.map(i=>ba(i,t));return r=r.map(ga).map(i=>t.entry.join(i)),r=r.join(""),t.bibliographyContainer.join(`[${r}]`)}var va={data(e,{type:t,format:r=t||"text",version:i="1.0.2"}={}){return i<"1.0.2"&&(e=wt(e)),r==="object"?Ge(e):r==="text"?JSON.stringify(e,null,2):(ge.warn("[core]","This feature (JSON output with special formatting) is unstable. See https://github.com/larsgw/citation.js/issues/144"),Hm(e,kt.get(r)))},ndjson(e,{version:t="1.0.2"}={}){return t<"1.0.2"&&(e=wt(e)),e.map(r=>JSON.stringify(r)).join(`
`)}};var ya=Object.assign({},va,aa);os(fa,{input:ha,output:ya});var Rh=Ar.version;var Ta=Oe(ls());var Wt={source:{article:"article-journal",book:"book",mvbook:"book",inbook:"chapter",bookinbook:"book",booklet:"book",collection:"book",mvcollection:"book",incollection:"chapter",dataset:"dataset",manual:"report",misc:"document",online:"webpage",patent:"patent",periodical:"periodical",proceedings:"book",mvproceedings:"book",inproceedings:"paper-conference",reference:"book",mvreference:"book",inreference:"entry",report:"report",software:"software",thesis:"thesis",unpublished:"manuscript",artwork:"graphic",audio:"song",image:"figure",jurisdiction:"legal_case",legislation:"legislation",legal:"treaty",letter:"personal_communication",movie:"motion_picture",music:"musical_score",performance:"performance",review:"review",standard:"standard",video:"motion_picture",conference:"paper-conference",electronic:"webpage",mastersthesis:"thesis",phdthesis:"thesis",techreport:"report",www:"webpage"},target:{article:"article","article-journal":"article","article-magazine":"article","article-newspaper":"article",bill:"legislation",book:"book",broadcast:"audio",chapter:"inbook",classic:"unpublished",collection:"misc",dataset:"dataset",document:"misc",entry:"inreference","entry-dictionary":"inreference","entry-encyclopedia":"inreference",event:"misc",figure:"artwork",graphic:"artwork",hearing:"legal",interview:"audio",legal_case:"jurisdiction",legislation:"legislation",manuscript:"unpublished",motion_picture:"movie",musical_score:"music","paper-conference":"inproceedings",patent:"patent",performance:"performance",periodical:"periodical",personal_communication:"letter",post:"online","post-weblog":"online",regulation:"legal",report:"report",review:"review","review-book":"review",software:"software",song:"music",speech:"audio",standard:"standard",thesis:"thesis",treaty:"legal",webpage:"online"}};var Jt={source:{article:"article-journal",book:"book",booklet:"book",conference:"paper-conference",inbook:"chapter",incollection:"chapter",inproceedings:"paper-conference",manual:"report",mastersthesis:"thesis",misc:"document",phdthesis:"thesis",proceedings:"book",techreport:"report",unpublished:"manuscript"},target:{article:"article","article-journal":"article","article-magazine":"article","article-newspaper":"article",book:"book",chapter:"inbook",manuscript:"unpublished","paper-conference":"inproceedings",report:"techreport",review:"article","review-book":"article"}};var jr={};me(jr,{argumentCommands:()=>Pr,commands:()=>ut,defaultStrings:()=>us,diacritics:()=>lt,fieldTypes:()=>Nt,formatting:()=>Qt,formattingCommands:()=>Fr,formattingEnvs:()=>Kt,ligaturePattern:()=>ms,ligatures:()=>pt,mathCommands:()=>mt,mathScriptFormatting:()=>Yt,mathScripts:()=>Lr,required:()=>Br,sentenceCaseLanguages:()=>ps});var xa={biblatex:{article:["author","title","journaltitle",["year","date"]],book:["author","title",["year","date"]],mvbook:["author","title",["year","date"]],inbook:["author","title","booktitle",["year","date"]],booklet:[["author","editor"],"title",["year","date"]],collection:["editor","title",["year","date"]],mvcollection:["editor","title",["year","date"]],incollection:["author","title","booktitle",["year","date"]],dataset:[["author","editor"],"title",["year","date"]],online:[["author","editor"],"title",["year","date"],["doi","eprint","url"]],patent:["author","title","number",["year","date"]],periodical:["editor","title",["year","date"]],proceedings:["title",["year","date"]],mvproceedings:["title",["year","date"]],inproceedings:["author","title","booktitle",["year","date"]],report:["author","title","type","institution",["year","date"]],thesis:["author","title","type","institution",["year","date"]],unpublished:["author","title",["year","date"]],conference:["author","title","booktitle",["year","date"]],electronic:[["author","editor"],"title",["year","date"],["doi","eprint","url"]],mastersthesis:["author","title","institution",["year","date"]],phdthesis:["author","title","institution",["year","date"]],techreport:["author","title","institution",["year","date"]],www:[["author","editor"],"title",["year","date"],["doi","eprint","url"]]},bibtex:{article:["author","title","journal","year"],book:[["author","editor"],"title","publisher","year"],booklet:["title"],inbook:[["author","editor"],"title",["chapter","pages"],"publisher","year"],incollection:["author","title","booktitle","publisher","year"],inproceedings:["author","title","booktitle","year"],mastersthesis:["author","title","school","year"],phdthesis:["author","title","school","year"],proceedings:["title","year"],techreport:["author","title","institution","year"],unpublished:["author","title","note"]}};var Ea={abstract:["field","literal"],addendum:["field","literal"],afterword:["list","name"],annotation:["field","literal"],annotator:["list","name"],author:["list","name"],authortype:["field","key"],bookauthor:["list","name"],bookpagination:["field","key"],booksubtitle:["field","literal"],booktitle:["field","title"],booktitleaddon:["field","literal"],chapter:["field","literal"],commentator:["list","name"],date:["field","date"],doi:["field","verbatim"],edition:["field","literal"],editor:["list","name"],editora:["list","name"],editorb:["list","name"],editorc:["list","name"],editortype:["field","key"],editoratype:["field","key"],editorbtype:["field","key"],editorctype:["field","key"],eid:["field","literal"],entrysubtype:["field","literal"],eprint:["field","verbatim"],eprintclass:["field","literal"],eprinttype:["field","literal"],eventdate:["field","date"],eventtitle:["field","title"],eventtitleaddon:["field","literal"],file:["field","verbatim"],foreword:["list","name"],holder:["list","name"],howpublished:["field","literal"],indextitle:["field","literal"],institution:["list","literal"],introduction:["list","name"],isan:["field","literal"],isbn:["field","literal"],ismn:["field","literal"],isrn:["field","literal"],issn:["field","literal"],issue:["field","literal"],issuesubtitle:["field","literal"],issuetitle:["field","literal"],iswc:["field","literal"],journalsubtitle:["field","literal"],journaltitle:["field","literal"],label:["field","literal"],language:["list","key"],library:["field","literal"],location:["list","literal"],mainsubtitle:["field","literal"],maintitle:["field","title"],maintitleaddon:["field","literal"],month:["field","literal"],nameaddon:["field","literal"],note:["field","literal"],number:["field","literal"],organization:["list","literal"],origdate:["field","date"],origlanguage:["list","key"],origlocation:["list","literal"],origpublisher:["list","literal"],origtitle:["field","title"],pages:["field","range"],pagetotal:["field","literal"],pagination:["field","key"],part:["field","literal"],publisher:["list","literal"],pubstate:["field","key"],reprinttitle:["field","literal"],series:["field","title"],shortauthor:["list","name"],shorteditor:["list","name"],shorthand:["field","literal"],shorthandintro:["field","literal"],shortjournal:["field","literal"],shortseries:["field","literal"],shorttitle:["field","title"],subtitle:["field","literal"],title:["field","title"],titleaddon:["field","literal"],translator:["list","name"],type:["field","title"],url:["field","uri"],urldate:["field","date"],venue:["field","literal"],version:["field","literal"],volume:["field","integer"],volumes:["field","integer"],year:["field","literal"],crossref:["field","entry key"],entryset:["separated","literal"],execute:["field","code"],gender:["field","gender"],langid:["field","identifier"],langidopts:["field","literal"],ids:["separated","entry key"],indexsorttitle:["field","literal"],keywords:["separated","literal"],options:["separated","options"],presort:["field","string"],related:["separated","literal"],relatedoptions:["separated","literal"],relatedtype:["field","identifier"],relatedstring:["field","literal"],sortkey:["field","literal"],sortname:["list","name"],sortshorthand:["field","literal"],sorttitle:["field","literal"],sortyear:["field","integer"],xdata:["separated","entry key"],xref:["field","entry key"],namea:["list","name"],nameb:["list","name"],namec:["list","name"],nameatype:["field","key"],namebtype:["field","key"],namectype:["field","key"],lista:["list","literal"],listb:["list","literal"],listc:["list","literal"],listd:["list","literal"],liste:["list","literal"],listf:["list","literal"],usera:["field","literal"],userb:["field","literal"],userc:["field","literal"],userd:["field","literal"],usere:["field","literal"],userf:["field","literal"],verba:["field","literal"],verbb:["field","literal"],verbc:["field","literal"],address:["list","literal"],annote:["field","literal"],archiveprefix:["field","literal"],journal:["field","literal"],key:["field","literal"],pdf:["field","verbatim"],primaryclass:["field","literal"],school:["list","literal"],numpages:["field","integer"],pmid:["field","literal"],pmcid:["field","literal"]};var Ir={diacritics:{"`":"\u0300","'":"\u0301","^":"\u0302","~":"\u0303","=":"\u0304",u:"\u0306",".":"\u0307",'"':"\u0308",r:"\u030A",H:"\u030B",v:"\u030C",b:"\u0332",d:"\u0323",c:"\u0327",k:"\u0328",t:"\u0361",textcommabelow:"\u0326"},commands:{textquotesingle:"'",textasciigrave:"`",textquotedbl:'"',textdollar:"$",textless:"<",textgreater:">",textbackslash:"\\",textasciicircum:"^",textunderscore:"_",textbraceleft:"{",textbar:"|",textbraceright:"}",textasciitilde:"~",textexclamdown:"\xA1",textcent:"\xA2",textsterling:"\xA3",textcurrency:"\xA4",textyen:"\xA5",textbrokenbar:"\xA6",textsection:"\xA7",textasciidieresis:"\xA8",textcopyright:"\xA9",textordfeminine:"\xAA",guillemetleft:"\xAB",guillemotleft:"\xAB",textlnot:"\xAC",textregistered:"\xAE",textasciimacron:"\xAF",textdegree:"\xB0",textpm:"\xB1",texttwosuperior:"\xB2",textthreesuperior:"\xB3",textasciiacute:"\xB4",textmu:"\xB5",textparagraph:"\xB6",textperiodcentered:"\xB7",textonesuperior:"\xB9",textordmasculine:"\xBA",guillemetright:"\xBB",guillemotright:"\xBB",textonequarter:"\xBC",textonehalf:"\xBD",textthreequarters:"\xBE",textquestiondown:"\xBF",AE:"\xC6",DH:"\xD0",texttimes:"\xD7",O:"\xD8",TH:"\xDE",ss:"\xDF",ae:"\xE6",dh:"\xF0",textdiv:"\xF7",o:"\xF8",th:"\xFE",DJ:"\u0110",dj:"\u0111",i:"\u0131",IJ:"\u0132",ij:"\u0133",L:"\u0141",l:"\u0142",NG:"\u014A",ng:"\u014B",OE:"\u0152",oe:"\u0153",textflorin:"\u0192",j:"\u0237",textasciicaron:"\u02C7",textasciibreve:"\u02D8",textacutedbl:"\u02DD",textgravedbl:"\u02F5",texttildelow:"\u02F7",textbaht:"\u0E3F",SS:"\u1E9E",textcompwordmark:"\u200C",textendash:"\u2013",textemdash:"\u2014",textbardbl:"\u2016",textquoteleft:"\u2018",textquoteright:"\u2019",quotesinglbase:"\u201A",textquotedblleft:"\u201C",textquotedblright:"\u201D",quotedblbase:"\u201E",textdagger:"\u2020",textdaggerdbl:"\u2021",textbullet:"\u2022",textellipsis:"\u2026",textperthousand:"\u2030",textpertenthousand:"\u2031",guilsinglleft:"\u2039",guilsinglright:"\u203A",textreferencemark:"\u203B",textinterrobang:"\u203D",textfractionsolidus:"\u2044",textlquill:"\u2045",textrquill:"\u2046",textdiscount:"\u2052",textcolonmonetary:"\u20A1",textlira:"\u20A4",textnaira:"\u20A6",textwon:"\u20A9",textdong:"\u20AB",texteuro:"\u20AC",textpeso:"\u20B1",textcelsius:"\u2103",textnumero:"\u2116",textcircledP:"\u2117",textrecipe:"\u211E",textservicemark:"\u2120",texttrademark:"\u2122",textohm:"\u2126",textmho:"\u2127",textestimated:"\u212E",textleftarrow:"\u2190",textuparrow:"\u2191",textrightarrow:"\u2192",textdownarrow:"\u2193",textminus:"\u2212",Hwithstroke:"\u0126",hwithstroke:"\u0127",textasteriskcentered:"\u2217",textsurd:"\u221A",textlangle:"\u2329",textrangle:"\u232A",textblank:"\u2422",textvisiblespace:"\u2423",textopenbullet:"\u25E6",textbigcircle:"\u25EF",textmusicalnote:"\u266A",textmarried:"\u26AD",textdivorced:"\u26AE",textinterrobangdown:"\u2E18",textcommabelow:null,copyright:"\xA9"},mathCommands:{Gamma:"\u0393",Delta:"\u0394",Theta:"\u0398",Lambda:"\u039B",Xi:"\u039E",Pi:"\u03A0",Sigma:"\u03A3",Phi:"\u03A6",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",varepsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",pi:"\u03C0",rho:"\u03C1",varsigma:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",varphi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",vartheta:"\u03D1",Upsilon:"\u03D2",phi:"\u03D5",varpi:"\u03D6",varrho:"\u03F1",epsilon:"\u03F5"}};var Br=xa,Nt=Ea,lt=Ir.diacritics,ut=Ir.commands,mt=Ir.mathCommands,us={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12",acmcs:"ACM Computing Surveys",acta:"Acta Informatica",cacm:"Communications of the ACM",ibmjrd:"IBM Journal of Research and Development",ibmsj:"IBM Systems Journal",ieeese:"IEEE Transactions on Software Engineering",ieeetc:"IEEE Transactions on Computers",ieeetcad:"IEEE Transactions on Computer-Aided Design of Integrated Circuits",ipl:"Information Processing Letters",jacm:"Journal of the ACM",jcss:"Journal of Computer and System Sciences",scp:"Science of Computer Programming",sicomp:"SIAM Journal on Computing",tocs:"ACM Transactions on Computer Systems",tods:"ACM Transactions on Database Systems",tog:"ACM Transactions on Graphics",toms:"ACM Transactions on Mathematical Software",toois:"ACM Transactions on Office Information Systems",toplas:"ACM Transactions on Programming Languages and Systems",tcs:"Theoretical Computer Science"},Kt={it:"italics",itshape:"italics",sl:"italics",slshape:"italics",em:"italics",bf:"bold",bfseries:"bold",sc:"smallcaps",scshape:"smallcaps",rm:void 0,sf:void 0,tt:void 0},Fr={textit:"italics",textsl:"italics",emph:"italics",mkbibitalic:"italics",mkbibemph:"italics",textbf:"bold",strong:"bold",mkbibbold:"bold",textsc:"smallcaps",textsuperscript:"superscript",textsubscript:"subscript",enquote:"quotes",mkbibquote:"quotes",textmd:void 0,textrm:void 0,textsf:void 0,texttt:void 0,textup:void 0},Qt={italics:["<i>","</i>"],bold:["<b>","</b>"],superscript:["<sup>","</sup>"],subscript:["<sub>","</sub>"],smallcaps:['<span style="font-variant:small-caps;">',"</span>"],nocase:['<span class="nocase">',"</span>"],quotes:["\u201C","\u201D"]},Pr={ElsevierGlyph(e){return String.fromCharCode(parseInt(e,16))},href(e,t){return e},url(e){return e}},ms=/---?|''|``|~/g,pt={"--":"\u2013","---":"\u2014","``":"\u201C","''":"\u201D","~":"\xA0"},Yt={"^":"superscript",sp:"superscript",_:"subscript",sb:"subscript",mathrm:void 0},Lr={"^":{0:"\u2070",1:"\xB9",2:"\xB2",3:"\xB3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207A","-":"\u207B","=":"\u207C","(":"\u207D",")":"\u207E",i:"\u2071",n:"\u207F"},_:{0:"\u2080",1:"\u2081",2:"\u2082",3:"\u2083",4:"\u2084",5:"\u2085",6:"\u2086",7:"\u2087",8:"\u2088",9:"\u2089","+":"\u208A","-":"\u208B","=":"\u208C","(":"\u208D",")":"\u208E",a:"\u2090",e:"\u2091",o:"\u2092",x:"\u2093",\u0259:"\u2094",h:"\u2095",k:"\u2096",l:"\u2097",m:"\u2098",n:"\u2099",s:"\u209A",p:"\u209B",t:"\u209C"}},ps=["american","british","canadian","english","australian","newzealand","usenglish","ukenglish","en","eng","en-au","en-bz","en-ca","en-cb","en-gb","en-ie","en-jm","en-nz","en-ph","en-tt","en-us","en-za","en-zw","anglais"];var ie={constants:jr,types:{biblatex:Wt,bibtex:Jt},parse:{biblatex:!0,strict:!1,sentenceCase:"never"},format:{useIdAsLabel:!1,checkLabel:!0,asciiOnly:!0},biber:{annotationMarker:"+an",namedAnnotationMarker:":"}};function wa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wa(Object(r),!0).forEach(function(i){Zm(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wa(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Zm(e,t,r){return(t=ep(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ep(e){var t=tp(e,"string");return typeof t=="symbol"?t:t+""}function tp(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Aa=/[a-zA-Z_][a-zA-Z0-9_:+-]*/,Ur={comment:/%.*/,whitespace:{match:/\s+/,lineBreaks:!0}},rp=Ta.default.states({main:{junk:{match:/@[cC][oO][mM][mM][eE][nN][tT].+|[^@]+/,lineBreaks:!0},at:{match:"@",push:"entry"}},entry:Le(Le({},Ur),{},{otherEntryType:{match:/[sS][tT][rR][iI][nN][gG]|[pP][rR][eE][aA][mM][bB][lL][eE]/,next:"otherEntryContents"},dataEntryType:{match:Aa,next:"dataEntryContents"}}),otherEntryContents:Le(Le({},Ur),{},{lbrace:{match:/[{(]/,next:"fields"}}),dataEntryContents:Le(Le({},Ur),{},{lbrace:{match:/[{(]/,next:"dataEntryContents"},label:/[^,\s]+/,comma:{match:",",next:"fields"}}),fields:Le(Le({},Ur),{},{identifier:Aa,number:/-?\d+/,hash:"#",equals:"=",comma:",",quote:{match:'"',push:"quotedLiteral"},lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:/[})]/,pop:!0}}),quotedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},quote:{match:'"',pop:!0},text:{match:/(?:\\[\\{]|[^{"])+/,lineBreaks:!0}},bracedLiteral:{lbrace:{match:"{",push:"bracedLiteral"},rbrace:{match:"}",pop:!0},text:{match:/(?:\\[\\{}]|[^{}])+/,lineBreaks:!0}}}),ip={"(":")","{":"}"},sp=new ae.Grammar({Main(){let e=[];for(;;){for(;this.matchToken("junk");)this.consumeToken("junk");if(this.matchEndOfFile())break;e.push(this.consumeRule("Entry"))}return e.filter(Boolean)},_(){let e;for(;e!==this.token;)e=this.token,this.consumeToken("whitespace",!0),this.consumeToken("comment",!0)},Entry(){this.consumeToken("at"),this.consumeRule("_");let e=(this.matchToken("otherEntryType")?this.consumeToken("otherEntryType"):this.consumeToken("dataEntryType")).value.toLowerCase();this.consumeRule("_");let t=this.consumeToken("lbrace").value;this.consumeRule("_");let r;if(e==="string"){let[s,n]=this.consumeRule("Field");this.state.strings[s]=n}else if(e==="preamble")this.consumeRule("Expression");else{let s=this.consumeToken("label").value;this.consumeRule("_"),this.consumeToken("comma"),this.consumeRule("_");let n=this.consumeRule("EntryBody");r=Le({type:e,label:s},n)}this.consumeRule("_");let i=this.consumeToken("rbrace").value;return i!==ip[t]&&ge.warn("[plugin-bibtex]",`entry started with "${t}", but ends with "${i}"`),r},EntryBody(){let e={properties:{}};for(;this.matchToken("identifier");){let[t,r]=this.consumeRule("Field"),i,s="default";if(t.endsWith(ie.biber.annotationMarker)?i=t.slice(0,-ie.biber.annotationMarker.length):t.includes(ie.biber.annotationMarker+ie.biber.namedAnnotationMarker)&&([i,s]=t.split(ie.biber.annotationMarker+ie.biber.namedAnnotationMarker)),i?(e.annotations||(e.annotations={}),e.annotations[i]||(e.annotations[i]={}),e.annotations[i][s]=r):e.properties[t]=r,this.consumeRule("_"),this.consumeToken("comma",!0))this.consumeRule("_");else break}return e},Field(){let e=this.consumeToken("identifier").value.toLowerCase();this.consumeRule("_"),this.consumeToken("equals"),this.consumeRule("_");let t=this.consumeRule("Expression");return[e,t]},Expression(){let e=this.consumeRule("ExpressionPart");for(this.consumeRule("_");this.matchToken("hash");)this.consumeToken("hash"),this.consumeRule("_"),e+=this.consumeRule("ExpressionPart").toString(),this.consumeRule("_");return e},ExpressionPart(){return this.matchToken("identifier")?this.state.strings[this.consumeToken("identifier").value.toLowerCase()]||"":this.matchToken("number")?parseInt(this.consumeToken("number")):this.matchToken("quote")?this.consumeRule("QuoteString"):this.consumeRule("BracketString")},QuoteString(){let e="";for(this.consumeToken("quote");!this.matchToken("quote");)e+=this.consumeRule("Text");return this.consumeToken("quote"),e},BracketString(){let e="";for(this.consumeToken("lbrace");!this.matchToken("rbrace");)e+=this.consumeRule("Text");return this.consumeToken("rbrace"),e},Text(){return this.matchToken("lbrace")?`{${this.consumeRule("BracketString")}}`:this.consumeToken("text").value}},{strings:us});function cs(e){return sp.parse(rp.reset(e))}var Mr={splitEntries:/\n\s*(?=\[)/g,parseEntry:/^\[(.+?)\]\s*(?:\n([\s\S]+))?$/,splitPairs:/((?=.)\s)*\n\s*/g,splitPair:/:(.*)/},np=e=>{let[,t,r]=e.match(Mr.parseEntry)||[];if(!t||!r)return{};{let i={type:"book",label:t,properties:{}};return r.trim().split(Mr.splitPairs).filter(s=>s).forEach(s=>{let[n,o]=s.split(Mr.splitPair);o&&(n=n.trim(),o=o.trim(),n==="type"?i.type=o:i.properties[n]=o)}),i}},Oa=e=>e.trim().split(Mr.splitEntries).map(np);var ap=new Set(["the","a","an"]),fs=/(?:<\/?.*?>|[\u0020-\u002F\u003A-\u0040\u005B-\u005E\u0060\u007B-\u007F])+/g,op=/[^\u0020-\u007F]+/g;function lp(e){return!ie.format.checkLabel||!e.match(fs)}function Sa(e){return e===null?"null":e===void 0?"undefined":ie.format.checkLabel?e.toString().replace(fs,""):e.toString()}function ka(e){return e?e.normalize("NFKD").replace(op,"").split(fs).find(t=>t.length&&!ap.has(t.toLowerCase())):""}var zr=new ae.Translator([{source:"given",target:"given"},{source:"family",target:"family"},{source:"suffix",target:"suffix"},{source:"prefix",target:"non-dropping-particle"},{source:"family",target:"literal",when:{source:!1,target:{family:!1,given:!1}}}]),up=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],oe="BibTeX type",Xe="BibTeX label",Ct={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12,january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Na={bathesis:"Bachelor's thesis",mathesis:"Master's thesis",phdthesis:"PhD thesis",candthesis:"Candidate thesis",techreport:"technical report",resreport:"research report",software:"computer software",datacd:"data cd",audiocd:"audio cd",patent:"patent",patentde:"German patent",patenteu:"European patent",patentfr:"French patent",patentuk:"British patent",patentus:"U.S. patent",patreq:"patent request",patreqde:"German patent request",patreqeu:"European patent request",patreqfr:"French patent request",patrequk:"British patent request",patrequs:"U.S. patent request"},mp=/(^(?:ISAN )?(?:[0-9a-f]{4}-){4}[0-9a-z](?:-(?:[0-9a-f]{4}-){2}[0-9a-z])?$)|(^(?:979-?0-?|M-?)(?:\d{9}|(?=[\d-]{11}$)\d+-\d+-\d)$)|(^ISRN .{1,36}$)|(^(?:ISWC )?T-?\d{9}-?\d$)/i;function pp(e){let t=e.split("T")[0].replace(/[?~%]$/,"").split("-"),r=+t[0].replace(/^Y(?=-?\d{4}\d+)/,"").replace(/X/g,"0"),i=+t[1],s=+t[2];return!i||i>20?[r]:s?[r,i,s]:[r,i]}function cp(e){if(e==null)return[];if(+e)return[parseInt(e,10)];if(e=e.trim().toLowerCase(),e in Ct)return[Ct[e]];let t=e.split(/\s+/),r,i;return t[0]in Ct?(r=Ct[t[0]],i=parseInt(t[1])):t[1]in Ct&&(r=Ct[t[1]],i=parseInt(t[0])),i?[r,i]:r?[r]:[]}function fp(e,t,r,i){let s="";return e&&e[0]&&(s+=ka(e[0].family||e[0].literal)),t&&t["date-parts"]&&t["date-parts"][0]&&(s+=t["date-parts"][0][0]),r?s+=r:i&&(s+=ka(i)),s}var Y={PICK:{toTarget(...e){return e.find(Boolean)},toSource(e){return[e]}},DATE:{toTarget(e){let t=e.split("/").map(r=>r&&r!==".."?pp(r):void 0);return isNaN(t[0][0])?{literal:e}:{"date-parts":t}},toSource(e){if("date-parts"in e)return e["date-parts"].map(t=>t.map(r=>r.toString().padStart(2,"0")).join("-")).join("/")}},YEAR_MONTH:{toTarget(e,t,r){return isNaN(+e)?{literal:e}:!isNaN(+r)&&!isNaN(+t)?{"date-parts":[[+e,+t,+r]]}:{"date-parts":[[+e,...cp(t)]]}},toSource(e){if("date-parts"in e){let[t,r,i]=e["date-parts"][0];return[t.toString(),r?i?`${up[r-1]} ${i}`:r:void 0]}else return[]}},EPRINT:{toTarget(e,t){if(t==="pubmed")return e},toSource(e){return[e,"pubmed"]}},EVENT_TITLE:{toTarget(e,t){return t&&(e+=" ("+t+")"),e},toSource(e){return e.match(/^(.+)(?: \((.+)\))?$/).slice(1,3)}},HOW_PUBLISHED:{toTarget(e){if(e.startsWith("http"))return e}},KEYWORDS:{toTarget(e){return e.join(",")},toSource(e){return e.split(",")}},LABEL:{toTarget(e){return[e,e]},toSource(e,t,r,i,s,n){return t&&lp(t)?t:ie.format.useIdAsLabel?Sa(e):fp(r,i,s,n)||Sa(e)}},NAMES:{toTarget(e){return e.map(zr.convertToTarget)},toSource(e){return e.map(zr.convertToSource)}},NAMES_ORCID:{toTarget(e,t){return e.map((r,i)=>{var s;let n=zr.convertToTarget(r);return typeof(t==null||(s=t.item)===null||s===void 0?void 0:s[i])=="string"&&(n._orcid=t.item[i]),n})},toSource(e){let t=[],r=[];for(let i=0;i<e.length;i++)t.push(zr.convertToSource(e[i])),e[i]._orcid&&(r[i]=e[i]._orcid);return[t,r.length?{item:r}:void 0]}},PAGES:{toTarget(e){return e.replace(/[]/,"-")},toSource(e){return e.replace("-","--")}},STANDARD_NUMBERS:{toTarget(...e){return e.find(Boolean)},toSource(e){let t=e.toString().match(mp);return t?t.slice(1,5):[]}},STATUS:{toSource(e){if(/^(inpreparation|submitted|forthcoming|inpress|prepublished)$/i.test(e))return e}},TITLE:{toTarget(e,t,r){return t&&(e+=": "+t),e},toSource(e){return[e]}}};var Fa=Oe(ds());var Fp=[{source:"note",target:"accessed",when:{source:!1,target:{note:!1,addendum:!1}},convert:{toSource(e){return`[Online; accessed ${(0,Fa.format)(e)}]`}}},{source:"numpages",target:"number-of-pages",when:{source:{pagetotal:!1},target:!1}},{source:"pmid",target:"PMID",when:{source:{eprinttype(e){return e!=="pmid"},archiveprefix(e){return e!=="pmid"}},target:!1}},{source:"pmcid",target:"PMCID",when:{target:!1}},{source:"s2id",target:"custom",convert:{toTarget(e){return{S2ID:e}},toSource({S2ID:e}){return e}}}],Pp=[{source:"annote",target:"annote",when:{source:{annotation:!1},target:!1}},{source:"address",target:"publisher-place",convert:Y.PICK,when:{source:{location:!1},target:!1}},{source:["eprint","archiveprefix"],target:"PMID",convert:Y.EPRINT,when:{source:{eprinttype:!1},target:!1}},{source:"journal",target:"container-title",when:{source:{maintitle:!1,booktitle:!1,journaltitle:!1},target:!1}},{source:"school",target:"publisher",convert:Y.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:!1}}],gs=new ae.Translator([...Pp,...Fp,{source:"abstract",target:"abstract"},{source:"urldate",target:"accessed",convert:Y.DATE},{source:"annotation",target:"annote"},{source:["author","author+an:orcid"],target:"author",convert:Y.NAMES_ORCID},{source:"library",target:"call-number"},{source:"chapter",target:"chapter-number"},{source:"bookauthor",target:"container-author",convert:Y.NAMES},{source:["maintitle","mainsubtitle","maintitleaddon"],target:"container-title",when:{source:!0,target:{"number-of-volumes":!0}},convert:Y.TITLE},{source:["booktitle","booksubtitle","booktitleaddon"],target:"container-title",when:{source:{maintitle:!1},target:{"number-of-volumes":!1,type(e){return!e||!e.startsWith("article")}}},convert:Y.TITLE},{source:["journaltitle","journalsubtitle","journaltitleaddon"],target:"container-title",when:{source:{[oe]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}},convert:Y.TITLE},{source:"shortjournal",target:"container-title-short",when:{source:{[oe]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"shortjournal",target:"journalAbbreviation",when:{source:!1,target:{"container-title-short":!1}}},{source:"number",target:"collection-number",when:{source:{[oe]:["book","mvbook","inbook","bookinbook","suppbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"shortseries",target:"collection-title-short"},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:Y.NAMES},{source:[oe,"entrysubtype","type"],target:["type","genre"],convert:{toTarget(e,t,r){return r||(e==="mastersthesis"&&(r="mathesis"),e==="phdthesis"&&(r="phdthesis"),e==="techreport"&&(r="techreport")),[Wt.source[e]||"document",r||t]},toSource(e,t){let r=Wt.target[e]||"misc";return t in Na?[r,void 0,t]:[r,t]}}},{source:oe,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"eventdate",target:"event-date",convert:Y.DATE},{source:"venue",target:"event-place"},{source:["eventtitle","eventtitleaddon"],target:"event-title",convert:Y.EVENT_TITLE},{source:["eventtitle","eventtitleaddon"],target:"event",convert:Y.EVENT_TITLE,when:{source:!1,target:{"event-title":!1}}},{source:Xe,target:["id","citation-key","author","issued","year-suffix","title"],convert:Y.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"issue",target:"issue",when:{source:{number:!1,[oe]:["article","periodical"]},target:{issue(e){return typeof e=="string"&&!e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","periodical"]}}},{source:"number",target:"issue",when:{source:{[oe]:["article","periodical","inproceedings"]},target:{issue(e){return e&&(typeof e=="number"||e.match(/\d+/))},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:"date",target:"issued",convert:Y.DATE},{source:["year","month","day"],target:"issued",convert:Y.YEAR_MONTH,when:{source:{date:!1},target:!1}},{source:"location",target:"jurisdiction",when:{source:{type:"patent"},target:{type:"patent"}}},{source:"keywords",target:"keyword",convert:Y.KEYWORDS},{source:"language",target:"language",convert:Y.PICK},{source:"langid",target:"language",when:{source:{language:!1},target:!1}},{source:"note",target:"note"},{source:"addendum",target:"note",when:{source:{note:!1},target:!1}},{source:"eid",target:"number",when:{target:{type:["article-journal"]}}},{source:["isan","ismn","isrn","iswc"],target:"number",convert:Y.STANDARD_NUMBERS,when:{source:{[oe](e){return e!=="patent"}},target:{type(e){return e!=="patent"}}}},{source:"number",target:"number",when:{source:{[oe]:["patent","report","techreport","legislation"]},target:{type:["patent","report","legislation"]}}},{source:"origdate",target:"original-date",convert:Y.DATE},{source:"origlocation",target:"original-publisher-place",convert:Y.PICK},{source:"origpublisher",target:"original-publisher",convert:Y.PICK},{source:"origtitle",target:"original-title"},{source:"pages",target:"page",when:{source:{bookpagination:[void 0,"page"]}},convert:Y.PAGES},{source:"pagetotal",target:"number-of-pages"},{source:"part",target:"part-number"},{source:["eprint","eprinttype"],target:"PMID",convert:Y.EPRINT},{source:"location",target:"publisher-place",convert:Y.PICK},{source:"publisher",target:"publisher",convert:Y.PICK,when:{source:!0,target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","manuscript","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty"]}}},{source:"organization",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1},target:{type:["paper-conference","webpage"]}}},{source:"institution",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1,organization:!1},target:{type:["report","thesis"]}}},{source:"howpublished",target:"publisher",convert:Y.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1},target:{type:"manuscript"}}},{source:["pages","bookpagination"],target:"section",when:{source:{bookpagination:"section"},target:{page:!1}},convert:{toTarget(e){return e},toSource(e){return[e,"section"]}}},{source:"pubstate",target:"status",convert:Y.STATUS},{source:"shorttitle",target:"title-short"},{source:"shorttitle",target:"shortTitle",when:{source:!1,target:{"title-short":!1}}},{source:["title","subtitle","titleaddon"],target:"title",convert:Y.TITLE},{source:"translator",target:"translator",convert:Y.NAMES},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:Y.HOW_PUBLISHED,when:{source:{url:!1},target:!1}},{source:"version",target:"version"},{source:"volume",target:"volume"},{source:"volumes",target:"number-of-volumes"},{source:["issuetitle","issuesubtitle","issuetitleaddon"],target:"volume-title",convert:Y.TITLE}]);var Pa=Oe(ds());var bs=new ae.Translator([{source:"note",target:"accessed",when:{source:!1,target:{note:!1}},convert:{toSource(e){return`[Online; accessed ${(0,Pa.format)(e)}]`}}},{source:"annote",target:"annote"},{source:"address",target:"publisher-place",convert:Y.PICK},{source:"author",target:"author",convert:Y.NAMES},{source:"chapter",target:"chapter-number"},{source:"number",target:"collection-number",when:{source:{[oe]:["book","mvbook","inbook","collection","mvcollection","incollection","suppcollection","manual","suppperiodical","proceedings","mvproceedings","refererence"]},target:{type:["bill","book","broadcast","chapter","dataset","entry","entry-dictionary","entry-encyclopedia","figure","graphic","interview","legislation","legal_case","manuscript","map","motion_picture","musical_score","pamphlet","post","post-weblog","personal_communication","review","review-book","song","speech","thesis","treaty","webpage"]}}},{source:"series",target:"collection-title"},{source:"booktitle",target:"container-title",when:{target:{type:["chapter","paper-conference"]}}},{source:"journal",target:"container-title",when:{source:{[oe]:"article"},target:{type:["article","article-newspaper","article-journal","article-magazine"]}}},{source:"doi",target:"DOI"},{source:"edition",target:"edition"},{source:"editor",target:"editor",convert:Y.NAMES},{source:Xe,target:["id","citation-key","author","issued","year-suffix","title"],convert:Y.LABEL},{source:"isbn",target:"ISBN"},{source:"issn",target:"ISSN"},{source:"number",target:"issue",when:{source:{[oe]:["article","periodical","inproceedings"]},target:{issue(e){return typeof e=="number"||typeof e=="string"&&e.match(/\d+/)},type:["article","article-journal","article-newspaper","article-magazine","paper-conference","periodical"]}}},{source:["year","month","day"],target:"issued",convert:Y.YEAR_MONTH},{source:"note",target:"note"},{source:"number",target:"number",when:{source:{[oe]:["patent","report","techreport"]},target:{type:["patent","report"]}}},{source:"eid",target:"number",when:{source:{number:!1},target:{type:["article-journal"]}}},{source:"pages",target:"page",convert:Y.PAGES},{source:"publisher",target:"publisher",convert:Y.PICK,when:{target:{type:["article","article-journal","article-magazine","article-newspaper","bill","book","broadcast","chapter","classic","collection","dataset","document","entry","entry-dictionary","entry-encyclopedia","event","figure","graphic","hearing","interview","legal_case","legislation","map","motion_picture","musical_score","pamphlet","patent","performance","periodical","personal_communication","post","post-weblog","regulation","review","review-book","software","song","speech","standard","treaty","webpage"]}}},{source:"organization",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1},target:{type:"paper-conference"}}},{source:"institution",target:"publisher",convert:Y.PICK,when:{source:{publisher:!1,organization:!1},target:{type:"report"}}},{source:"school",target:"publisher",convert:Y.PICK,when:{source:{institution:!1,organization:!1,publisher:!1},target:{type:"thesis"}}},{source:"howpublished",target:"publisher",convert:Y.PICK,when:{source:{howpublished(e){return e&&!e.startsWith("http")},publisher:!1,organization:!1,institution:!1,school:!1},target:{type:"manuscript"}}},{source:"title",target:"title"},{source:[oe,"type"],target:["type","genre"],convert:{toTarget(e,t){let r=Jt.source[e]||"document";return t?[r,t]:e==="mastersthesis"?[r,"Master's thesis"]:e==="phdthesis"?[r,"PhD thesis"]:[r]},toSource(e,t){let r=Jt.target[e]||"misc";return/^(master'?s|diploma) thesis$/i.test(t)?["mastersthesis"]:/^(phd|doctoral) thesis$/i.test(t)?["phdthesis"]:[r,t]}}},{source:oe,when:{target:{type:!1}},convert:{toSource(){return"misc"}}},{source:"url",target:"URL"},{source:"howpublished",target:"URL",convert:Y.HOW_PUBLISHED,when:{target:{publisher:!1}}},{source:"volume",target:"volume"}]);function La(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Lp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?La(Object(r),!0).forEach(function(i){jp(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):La(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function jp(e,t,r){return(t=Up(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Up(e){var t=Mp(e,"string");return typeof t=="symbol"?t:t+""}function Mp(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zp=new Set(["book","inbook","bookinbook","suppbook"]),za=new Set(["inbook","bookinbook","suppbook"]),ja=new Set(["collection","reference","incollection","inreference","suppcollection"]),Ua=new Set(["incollection","inreference","suppcollection"]),$p=new Set(["proceedings","inproceedings"]),qp=new Set(["inproceedings"]),Gp=new Set(["article","suppperiodical"]),Ma={mvbook:["main",zp],mvcollection:["main",ja],mvreference:["main",ja],mvproceedings:["main",$p],book:["book",za],collection:["book",Ua],reference:["book",Ua],proceedings:["book",qp],periodical:["journal",Gp]};function vs(e,t,r){if(t.crossref in r){let i=r[t.crossref];if(i.properties===t)return t;let s=Lp({},vs(i.type,i.properties,r));if(delete s.ids,delete s.crossref,delete s.xref,delete s.entryset,delete s.entrysubtype,delete s.execute,delete s.label,delete s.options,delete s.presort,delete s.related,delete s.relatedoptions,delete s.relatedstring,delete s.relatedtype,delete s.shortand,delete s.shortandintro,delete s.sortkey,(i.type==="mvbook"||i.type==="book")&&za.has(e)&&(s.bookauthor=s.author),i.type in Ma){let[n,o]=Ma[i.type];o.has(e)&&(s[n+"title"]=s.title,s[n+"subtitle"]=s.subtitle,n!=="journal"&&(s[n+"titleaddon"]=s.titleaddon),delete s.title,delete s.subtitle,delete s.titleaddon,delete s.shorttitle,delete s.sorttitle,delete s.indextitle,delete s.indexsorttitle)}return Object.assign(s,t)}return t}function Xp(e,t){if(e==null)return{};var r,i,s=Vp(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Vp(e,t){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}function $a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function Hp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$a(Object(r),!0).forEach(function(i){Wp(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$a(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Wp(e,t,r){return(t=qa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qa(e){var t=Jp(e,"string");return typeof t=="symbol"?t:t+""}function Jp(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ga(e,t){let r={};for(let i of e)r[i.label]=i;return e.map(({type:i,label:s,properties:n})=>t.convertToTarget(Hp({[oe]:i,[Xe]:s},vs(i,n,r))))}function Xa(e,t){return e.map(r=>{let i=t.convertToSource(r),{[oe]:s,[Xe]:n}=i,o=Xp(i,[oe,Xe].map(qa));return{type:s,label:n,properties:o}})}function Va(e){return Ga(e,bs)}function Ha(e){return Xa(e,bs)}function Wa(e){return Ga(e,gs)}function Ja(e){return Xa(e,gs)}var eo=Oe(ls());function Ka(e){let t=e.toUpperCase(),r=e.toLowerCase();for(let i=0;i<e.length;i++)if(t[i]!==r[i])return t[i]===e[i];return null}function je(e){if(e.length===0)return;let t="";for(;e.length>1;){let{value:i,hyphenated:s}=e.shift();t+=i+(s?"-":" ")}let r=t+e[0].value;return r[0]&&r}function Kp(e,t=!0){let r=[],i=[];if(t)for(;e.length>1&&e[0].upperCase!==!1;){for(r.push(...i),i.length=0;e.length>1&&e[0].upperCase!==!1&&!e[0].hyphenated;)r.push(e.shift());for(;e.length>0&&e[0].upperCase!==!1&&e[0].hyphenated;)i.push(e.shift())}let s=[],n=[];for(;e.length>1;){for(s.push(...n),n.length=0;e.length>1&&e[0].upperCase===!1;)s.push(e.shift());for(;e.length>0&&e[0].upperCase!==!1;)n.push(e.shift())}return i.length&&n.unshift(...i),e.length&&n.push(e[0]),[je(r),je(s),je(n)]}function Qa(e){if(e[0][0].label){let n={};for(let[{value:o,label:l}]of e)n[l]=o;return n}let t={},[r,i,s]=Kp(e[0],e.length===1);return s&&(t.family=s),i&&(t.prefix=i),e.length===3?(t.given=je(e[2]),t.suffix=je(e[1])):e.length===2?t.given=je(e[1]):r&&(t.given=r),t}function Ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function he(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ya(Object(r),!0).forEach(function(i){Qp(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ya(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Qp(e,t,r){return(t=Yp(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yp(e){var t=Zp(e,"string");return typeof t=="symbol"?t:t+""}function Zp(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ve={commandBegin:{match:"\\begin",push:"environment"},command:{match:/\\(?:[a-zA-Z]+|.) */,value:e=>e.slice(1).trim()},lbrace:{match:"{",push:"bracedLiteral"},mathShift:{match:"$",push:"mathLiteral"},whitespace:{match:/[\s]+|~/,lineBreaks:!0,value(e){return e==="~"?"\xA0":" "}}},to=eo.default.states({stringLiteral:he(he({},Ve),{},{text:/[^{$}\s~\\]+/}),namesLiteral:he(he({and:/\s+[aA][nN][dD]\s+/,comma:",",hyphen:"-",equals:"="},Ve),{},{text:/[^{$}\s~\\,=-]+/}),listLiteral:he(he({and:/\s+and\s+/},Ve),{},{text:/[^{$}\s~\\]+/}),separatedLiteral:he(he({comma:","},Ve),{},{text:/[^{$}\s~\\,]+/}),annotation:he(he({},Ve),{},{colon:":",equals:"=",comma:",",semicolon:";",quote:'"',itemCount:/\d+/,text:/[^{$}\s~\\":;,=]+/}),bracedLiteral:he(he({},Ve),{},{rbrace:{match:"}",pop:!0},text:/[^{$}\s~\\]+/}),mathLiteral:he(he({},Ve),{},{mathShift:{match:"$",pop:!0},script:/[\^_]/,text:/[^{$}\s~\\^_]+/}),environment:he(he({commandEnd:{match:"\\end",pop:!0}},Ve),{},{text:/[^{$}\s~\\]+/})});function ft(e){return e[0],e}function Zt(e,t){return t in Qt?e&&Qt[t].join(e):e}var ro=new ae.Grammar({String(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return ft(e)},StringNames(){let e=[];for(;;){if(this.consumeToken("whitespace",!0),e.push(this.consumeRule("Name")),this.consumeToken("whitespace",!0),this.matchEndOfFile())return e;this.consumeToken("and")}},Name(){let e=[];for(;;){if(e.push(this.consumeRule("NamePiece")),this.matchEndOfFile()||this.matchToken("and"))return Qa(e);this.consumeToken("comma"),this.consumeToken("whitespace",!0)}},NamePiece(){let e=[];for(;;){let t=this.consumeRule("NameToken");if(t.label)return t.label=je([...e,{value:t.label}]),[t];if(e.push(t),this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma"))return e;for(;this.matchToken("hyphen")||this.matchToken("whitespace");)this.consumeToken()}},NameToken(){let e=null,t="";for(;;)if(e===null&&this.matchToken("text")){let r=this.consumeToken().value;t+=r,e=Ka(r)}else{if(this.matchEndOfFile()||this.matchToken("and")||this.matchToken("comma")||this.matchToken("whitespace"))return{value:t,upperCase:e};if(this.matchToken("hyphen"))return{value:t,upperCase:e,hyphenated:!0};if(this.matchToken("equals")){this.consumeToken("equals");let r=this.consumeRule("NamePiece");return r[0].label&&(t+="="+r[0].label),{value:je(r),label:t}}else t+=this.consumeRule("Text")}},StringList(){let e=[];for(;!this.matchEndOfFile();){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("and");)t+=this.consumeRule("Text");e.push(ft(t)),this.consumeToken("and",!0)}return e.length===1?e[0]:e},StringSeparated(){let e=[];for(;!this.matchEndOfFile();){let t="";for(;!this.matchEndOfFile()&&!this.matchToken("comma");)t+=this.consumeRule("Text");e.push(t.trim()),this.consumeToken("comma",!0),this.consumeToken("whitespace",!0)}return e},StringVerbatim(){let e="";for(;!this.matchEndOfFile();)e+=this.consumeToken().text;return ft(e)},StringUri(){let e=this.consumeRule("StringVerbatim");try{return decodeURI(e)===e?encodeURI(e):e}catch{return encodeURI(e)}},StringTitleCase(){this.state.sentenceCase=!0;let e="";for(;!this.matchEndOfFile();)e+=this.consumeRule("Text");return ft(e)},Annotations(){let e={};for(;;){let{scope:t,item:r,part:i,value:s}=this.consumeRule("Annotation");if(t==="part"?(e.part||(e.part=[]),e.part[r]||(e.part[r]={}),e.part[r][i]=s):t==="item"?(e.item||(e.item=[]),e.item[r]=s):e.field=s,this.matchEndOfFile())break;this.consumeToken("semicolon"),this.consumeRule("_")}return e},Annotation(){let e={};if(this.matchToken("itemCount")?(e.item=parseInt(this.consumeToken("itemCount"))-1,this.matchToken("colon")?(this.consumeToken("colon"),e.part=this.consumeToken("text"),e.scope="part"):e.scope="item"):e.scope="field",this.consumeToken("equals"),this.consumeRule("_"),this.matchToken("quote")){this.consumeToken("quote");let t="";for(;!this.matchToken("quote");)this.matchToken("itemCount")||this.matchToken("colon")||this.matchToken("comma")||this.matchToken("semicolon")||this.matchToken("equals")?(t+=this.token.value,this.token=this.lexer.next()):t+=this.consumeRule("Text");this.consumeToken("quote"),e.value=ft(t),this.consumeRule("_")}else{e.value=[];let t="";for(;;)if(t+=this.consumeRule("Text"),this.matchToken("comma"))this.consumeToken("comma"),this.consumeRule("_"),e.value.push(ft(t)),t="";else if(this.matchEndOfFile()||this.matchToken("semicolon")){e.value.push(ft(t));break}}return e},BracketString(){var e;let t="";this.consumeToken("lbrace");let r=this.state.sentenceCase;for(this.state.sentenceCase=r&&this.matchToken("command"),(e=this.state).partlyLowercase&&(e.partlyLowercase=this.state.sentenceCase);!this.matchToken("rbrace");)t+=this.consumeRule("Text");let s=r&&!this.state.sentenceCase&&this.state.partlyLowercase;return this.state.sentenceCase=r,this.consumeToken("rbrace"),s?Zt(t,"nocase"):t},MathString(){let e="";for(this.consumeToken("mathShift");!this.matchToken("mathShift");){if(this.matchToken("script")){let t=this.consumeToken("script").value,r=this.consumeRule("Text").split("");if(r.every(i=>i in Lr[t]))e+=r.map(i=>Lr[t][i]).join("");else{let i=Yt[t];e+=Qt[i].join(r.join(""))}continue}if(this.matchToken("command")){let t=this.token.value;if(t in Yt){this.consumeToken("command");let r=this.consumeRule("BracketString");e+=Zt(r,Yt[t]);continue}}e+=this.consumeRule("Text")}return this.consumeToken("mathShift"),e},Text(){if(this.matchToken("lbrace"))return this.consumeRule("BracketString");if(this.matchToken("mathShift"))return this.consumeRule("MathString");if(this.matchToken("whitespace"))return this.consumeToken("whitespace").value;if(this.matchToken("commandBegin"))return this.consumeRule("EnclosedEnv");if(this.matchToken("command"))return this.consumeRule("Command");let e=this.consumeToken("text").value.replace(ms,l=>pt[l]),t=this.state.afterPunctuation;if(this.state.afterPunctuation=/[?!.:]$/.test(e),!this.state.sentenceCase){var r;return(r=this.state).partlyLowercase||(r.partlyLowercase=e===e.toLowerCase()&&e!==e.toUpperCase()),e}let[i,...s]=e,n=s.join(""),o=n.toLowerCase();return n!==o?e:t?i+o:e.toLowerCase()},Command(){let e=this.consumeToken("command"),t=e.value;if(t in Kt){let r=this.consumeRule("Env"),i=Kt[t];return Zt(r,i)}else if(t in Fr){let r=this.consumeRule("BracketString"),i=Fr[t];return Zt(r,i)}else{if(t in ut)return ut[t];if(t in mt)return mt[t];if(t in lt&&!this.matchEndOfFile()){let r=this.consumeRule("Text");return(r[0]+lt[t]).normalize("NFC")+r.slice(1)}else if(t in Pr){let r=Pr[t],i=[],s=r.length;for(;s-- >0;)this.consumeToken("whitespace",!0),i.push(this.consumeRule("BracketString"));return r(...i)}else return/^[&%$#_{}]$/.test(t)?e.text.slice(1):e.text}},Env(){let e="";for(;!this.matchEndOfFile()&&!this.matchToken("rbrace");)e+=this.consumeRule("Text");return e},EnclosedEnv(){this.consumeToken("commandBegin");let e=this.consumeRule("BracketString"),t="";for(;!this.matchToken("commandEnd");)t+=this.consumeRule("Text");let r=this.consumeToken("commandEnd"),i=this.consumeRule("BracketString");if(e!==i)throw new SyntaxError(this.lexer.formatError(r,`environment started with "${e}", ended with "${i}"`));return Zt(t,Kt[e])},_(){for(;this.matchToken("whitespace");)this.consumeToken("whitespace")}},{sentenceCase:!1,partlyLowercase:!1,afterPunctuation:!0});function Za(e){return ps.includes(e.toLowerCase())}function ec(e){return Array.isArray(e)?e.every(Za):Za(e)}function tc(e,t){if(e[1]==="name")return e[0]==="list"?"StringNames":"Name";if(e[1]==="title"){let r=ie.parse.sentenceCase;return r==="always"||r==="english"&&ec(t)?"StringTitleCase":"String"}switch(e[0]==="field"?e[1]:e[0]){case"list":return"StringList";case"separated":return"StringSeparated";case"verbatim":return"StringVerbatim";case"uri":return"StringUri";case"title":case"literal":default:return"String"}}function rc(e){if(e[1]==="name")return"namesLiteral";switch(e[0]){case"list":return"listLiteral";case"separated":return"separatedLiteral";case"field":default:return"stringLiteral"}}function ys(e,t,r=[]){let i=Nt[t]||[];return ro.parse(to.reset(e,{state:rc(i),line:0,col:0}),tc(i,r))}function io(e){return ro.parse(to.reset(e,{state:"annotation",line:0,col:0}),"Annotations")}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function no(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?so(Object(r),!0).forEach(function(i){ic(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):so(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ic(e,t,r){return(t=sc(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sc(e){var t=nc(e,"string");return typeof t=="symbol"?t:t+""}function nc(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ao(e,t){let r=[];for(let{type:i,label:s,properties:n}of e)if(i in t){let o=[];for(let l of t[i])Array.isArray(l)&&!l.some(u=>u in n)?o.push(l.join("/")):typeof l=="string"&&!(l in n)&&o.push(l);o.length&&r.push([s,`missing fields: ${o.join(", ")}`])}else r.push([s,`invalid type: "${i}"`]);if(r.length)throw new RangeError(["Invalid entries:"].concat(r.map(([i,s])=>`  - ${i} has ${s}`)).join(`
`))}function oo(e){let t={};"language"in e.properties&&(t.language=ys(e.properties.language,"language"));for(let r in e.properties){let i=e.properties[r];i!==""&&(t[r]=ys(i+"",r,t.language))}for(let r in e.annotations)for(let i in e.annotations[r])t[r+"+an:"+i]=io(e.annotations[r][i]);return no(no({},e),{},{properties:t})}function _s(e){return ie.parse.strict&&ao(e,Br.biblatex),Wa(e.map(oo))}function xs(e){return ie.parse.strict&&ao(e,Br.bibtex),Va(e.map(oo))}var lo="@bibtex",uo={"@biblatex/text":{parse:cs,parseType:{dataType:"String",predicate:/@\s{0,5}[A-Za-z]{1,13}\s{0,5}\{\s{0,5}[^@{}"=,\\\s]{0,100}\s{0,5},[\s\S]*\}/}},"@biblatex/entry+object":{parse(e){return _s([e])},parseType:{dataType:"SimpleObject",propertyConstraint:{props:["type","label","properties"]}}},"@biblatex/entries+list":{parse:_s,parseType:{elementConstraint:"@biblatex/entry+object"}},"@bibtex/text":{parse:cs,outputs:"@bibtex/entries+list"},"@bibtex/entry+object":{parse(e){return xs([e])}},"@bibtex/entries+list":{parse:xs},"@bibtxt/text":{parse:Oa,parseType:{dataType:"String",predicate:/^\s*(\[(?!\s*[{[]).*?\]\s*(\n\s*[^[]((?!:)\S)+\s*:\s*.+?\s*)*\s*)+$/}}};var He={};for(let e in ut)He[ut[e]]=e;for(let e in lt)He[lt[e]]=e;for(let e in pt)He[pt[e]]=e;var ws={};for(let e in mt)ws[mt[e]]=e;var ac=/[^a-zA-Z0-9\s!"'()*+,\-./:;=?@[\]\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,oc=/.[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]+/g,lc=/[\u0300-\u0308\u030a-\u030c\u0332\u0323\u0327\u0328\u0361\u0326]/g,Ts={separated:",",list:" and "},mo={i:"\\textit{",b:"\\textbf{",sc:"\\textsc{",sup:"\\textsuperscript{",sub:"\\textsubscript{",'span style="font-variant:small-caps;"':"\\textsc{",'span class="nocase"':"{"};function uc(e){return e in He?He[e]in pt?He[e]:`\\${He[e]}{}`:e in ws?`$\\${ws[e]}$`:/^[&%$#_{}]$/.test(e)?`\\${e}`:""}function er(e){return ie.format.asciiOnly?e.normalize("NFKD").replace(ac,t=>uc(t)).replace(oc,t=>Array.from(t).reduce((r,i)=>`{\\${He[i]} ${r}}`)).replace(lc,""):e}function po(e){let t=[],r=e.split(/<(\/?(?:i|b|sc|sup|sub|span)|span .*?)>/g);return r=r.map((i,s)=>s%2===0?er(i):i in mo?(t.push("/"+i.split(" ")[0]),mo[i]):i===t[t.length-1]?(t.pop(),"}"):""),r.join("")}function mc(e){if(e.family&&!e.prefix&&!e.given&!e.suffix)return e.family.includes(Ts.list)?e.family:`{${e.family}}`;let t=[""];return e.prefix&&e.family&&(t[0]+=e.prefix+" "),e.family&&(t[0]+=e.family),e.suffix?(t.push(e.suffix),t.push(e.given||"")):t.push(e.given),er(t.join(", ").trim())}function pc(e){return po(e).split(/(:\s*)/).map((t,r)=>r%2?t:t.replace(/([^\\])\b([a-z]*[A-Z].*?)\b/g,"$1{$2}")).join("")}function As(e,t){switch(t){case"title":return pc(e);case"literal":return po(e.toString());case"name":return mc(e);case"verbatim":case"uri":return e.toString();default:return er(e.toString())}}function cc(e,t,r){let i=Ts[r];return e.map(s=>{let n=As(s,t);return n.includes(i)?`{${n}}`:n}).join(i)}function Es(e){return Array.isArray(e)?e.map(t=>er(t).replace(/([;,"])/g,"{$1}")).join(", "):'"'+er(e).replace(/(["])/g,"{$1}")+'"'}function co(e,t){if(!(e in Nt))return As(t,"verbatim");let[r,i]=Nt[e];return r in Ts?cc(t,i,r):As(t,i)}function fo(e){let t=[];if(e.field&&t.push("="+Es(e.field)),e.item)for(let[r,i]of Object.entries(e.item)){if(!i)continue;let s=parseInt(r)+1;t.push(s+"="+Es(i))}if(e.part)for(let[r,i]of Object.entries(e.part)){if(!i)continue;let s=parseInt(r)+1;for(let n in i)i[n]&&t.push(s+":"+n+"="+Es(i[n]))}return t.join("; ")}function ho({type:e,label:t,properties:r}){let i={type:e,label:t,properties:{}};for(let s in r){let n=r[s],[o,l]=s.split("+an:");l?(i.annotations||(i.annotations={}),i.annotations[o]||(i.annotations[o]={}),i.annotations[o][l]=fo(n)):i.properties[s]=co(s,n)}return i}function go(e){return Ja(e).map(ho)}function Os(e){return Ha(e).map(ho)}function bo(e,t,r){return r.listItem.join(`${e} = {${t}},`)}function fc(e,t){let r=[];for(let i in e.properties)if(r.push(bo(i,e.properties[i],t)),e.annotations&&e.annotations[i])for(let s in e.annotations[i]){let n=i+ie.biber.annotationMarker;s!=="default"&&(n+=ie.biber.namedAnnotationMarker+s),r.push(bo(n,e.annotations[i][s],t))}return t.entry.join(`@${e.type}{${e.label},${t.list.join(r.join(""))}}`)}function Ss(e,t){let r=e.map(i=>fc(i,t)).join("");return t.bibliographyContainer.join(r)}function hc({type:e,label:t,properties:r},i){let s=Object.entries(r).concat([["type",e]]).map(([n,o])=>i.listItem.join(`${n}: ${o}`));return i.entry.join(`[${t}]${i.list.join(s.join(""))}`)}function vo(e,t){let r=e.map(i=>hc(i,t)).join(`
`);return t.bibliographyContainer.join(r)}var ks=function(e,t){return function(r,i={}){let{type:s,format:n=s||"text"}=i;if(r=e(r),n==="object")return r;if(Ae.dict.has(n))return t(r,Ae.dict.get(n),i);throw new RangeError(`Output dictionary "${n}" not available`)}},yo={bibtex:ks(Os,Ss),biblatex:ks(go,Ss),bibtxt:ks(Os,vo)};Ae.add(lo,{input:uo,output:yo,config:ie});var _o={"en-US":`<?xml version="1.0" encoding="utf-8"?>
<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="en-US"><info><translator><name>Andrew Dunning</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Denis Meier</name></translator><translator><name>Brenton M. Wiernik</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2015-10-10T23:31:02+00:00</updated></info><style-options punctuation-in-quote="true"/><date form="text"><date-part name="month" suffix=" "/><date-part name="day" suffix=", "/><date-part name="year"/></date><date form="numeric"><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> <!-- sine nomine --><term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="original-work-published">original work published</term><term name="personal-communication">personal communication</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">accessed</term><term name="and">and</term><term name="and others">and others</term><term name="anonymous">anonymous</term><term name="anonymous" form="short">anon.</term><term name="at">at</term><term name="available at">available at</term><term name="by">by</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">cited</term><term name="edition"><single>edition</single><multiple>editions</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et al.</term><term name="forthcoming">forthcoming</term><term name="from">from</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in press</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">letter</term><term name="no date">no date</term><term name="no date" form="short">n.d.</term><term name="online">online</term><term name="presented at">presented at the</term><term name="reference"><single>reference</single><multiple>references</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">retrieved</term><term name="scale">scale</term><term name="version">version</term>
<!-- LONG ITEM TYPE FORMS --><term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term><!-- figure is in the list of locator terms --><term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">personal communication</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>
<!-- SHORT ITEM TYPE FORMS --><term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term><!-- figure is in the list of locator terms --><term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>
<!-- HISTORICAL ERA TERMS --><term name="ad">AD</term><term name="bc">BC</term><term name="bce">BCE</term><term name="ce">CE</term>
<!-- PUNCTUATION --><term name="open-quote">\u201C</term><term name="close-quote">\u201D</term><term name="open-inner-quote">\u2018</term><term name="close-inner-quote">\u2019</term><term name="page-range-delimiter">\u2013</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>
<!-- ORDINALS --><term name="ordinal">th</term><term name="ordinal-01">st</term><term name="ordinal-02">nd</term><term name="ordinal-03">rd</term><term name="ordinal-11">th</term><term name="ordinal-12">th</term><term name="ordinal-13">th</term>
<!-- LONG ORDINALS --><term name="long-ordinal-01">first</term><term name="long-ordinal-02">second</term><term name="long-ordinal-03">third</term><term name="long-ordinal-04">fourth</term><term name="long-ordinal-05">fifth</term><term name="long-ordinal-06">sixth</term><term name="long-ordinal-07">seventh</term><term name="long-ordinal-08">eighth</term><term name="long-ordinal-09">ninth</term><term name="long-ordinal-10">tenth</term>
<!-- LONG LOCATOR FORMS --><term name="act">			 <single>act</single><multiple>acts</multiple>						 </term><term name="appendix">			 <single>appendix</single><multiple>appendices</multiple>						 </term><term name="article-locator">			 <single>article</single><multiple>articles</multiple>						 </term><term name="canon">			 <single>canon</single><multiple>canons</multiple>						 </term><term name="elocation">			 <single>location</single><multiple>locations</multiple>						 </term><term name="equation">			 <single>equation</single><multiple>equations</multiple>						 </term><term name="rule">			 <single>rule</single><multiple>rules</multiple>						 </term><term name="scene">			 <single>scene</single><multiple>scenes</multiple>						 </term><term name="table">			 <single>table</single><multiple>tables</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>title</single><multiple>titles</multiple>						 </term><term name="book"><single>book</single><multiple>books</multiple></term><term name="chapter"><single>chapter</single><multiple>chapters</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>number</single><multiple>numbers</multiple></term><term name="line"><single>line</single><multiple>lines</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraph</single><multiple>paragraphs</multiple></term><term name="part"><single>part</single><multiple>parts</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verse</single><multiple>verses</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term>
<!-- SHORT LOCATOR FORMS --><term name="appendix" form="short">			 <single>app.</single><multiple>apps.</multiple>						 </term><term name="article-locator" form="short">			 <single>art.</single><multiple>arts.</multiple></term><term name="elocation" form="short">			 <single>loc.</single><multiple>locs.</multiple></term><term name="equation" form="short">			 <single>eq.</single><multiple>eqs.</multiple></term><term name="rule" form="short">			 <single>r.</single><multiple>rr.</multiple>						 </term><term name="scene" form="short">			 <single>sc.</single><multiple>scs.</multiple>						 </term><term name="table" form="short">			 <single>tbl.</single><multiple>tbls.</multiple>						 </term><term name="timestamp" form="short"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator" form="short">			 <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short"><single>bk.</single><multiple>bks.</multiple></term><term name="chapter" form="short"><single>chap.</single><multiple>chaps.</multiple></term><term name="column" form="short"><single>col.</single><multiple>cols.</multiple></term><term name="figure" form="short"><single>fig.</single><multiple>figs.</multiple></term><term name="folio" form="short"><single>fol.</single><multiple>fols.</multiple></term><term name="issue" form="short"><single>no.</single><multiple>nos.</multiple></term><term name="line" form="short"><single>l.</single><multiple>ll.</multiple></term><term name="note" form="short"><single>n.</single><multiple>nn.</multiple></term><term name="opus" form="short"><single>op.</single><multiple>opp.</multiple></term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short"><single>para.</single><multiple>paras.</multiple></term><term name="part" form="short"><single>pt.</single><multiple>pts.</multiple></term><term name="section" form="short"><single>sec.</single><multiple>secs.</multiple></term><term name="sub-verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>
<!-- SYMBOL LOCATOR FORMS --><term name="paragraph" form="symbol"><single>\xB6</single><multiple>\xB6\xB6</multiple></term><term name="section" form="symbol"><single>\xA7</single><multiple>\xA7\xA7</multiple></term>
<!-- LONG ROLE FORMS --><term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>director</single><multiple>directors</multiple></term><term name="editor"><single>editor</single><multiple>editors</multiple></term><term name="editorial-director"><single>editor</single><multiple>editors</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>translator</single><multiple>translators</multiple></term><term name="editortranslator"><single>editor &amp; translator</single><multiple>editors &amp; translators</multiple></term>
<!-- SHORT ROLE FORMS --><term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ills.</multiple></term><term name="translator" form="short"><single>tran.</single><multiple>trans.</multiple></term><term name="editortranslator" form="short"><single>ed. &amp; tran.</single><multiple>eds. &amp; trans.</multiple></term>
<!-- VERB ROLE FORMS --><term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">by</term><term name="director" form="verb">directed by</term><term name="editor" form="verb">edited by</term><term name="editorial-director" form="verb">edited by</term><term name="illustrator" form="verb">illustrated by</term><term name="interviewer" form="verb">interview by</term><term name="recipient" form="verb">to</term><term name="reviewed-author" form="verb">by</term><term name="translator" form="verb">translated by</term><term name="editortranslator" form="verb">edited &amp; translated by</term>
<!-- SHORT VERB ROLE FORMS --><term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">dir. by</term><term name="editor" form="verb-short">ed. by</term><term name="editorial-director" form="verb-short">ed. by</term><term name="illustrator" form="verb-short">illus. by</term><term name="translator" form="verb-short">trans. by</term><term name="editortranslator" form="verb-short">ed. &amp; trans. by</term>
<!-- LONG MONTH FORMS --><term name="month-01">January</term><term name="month-02">February</term><term name="month-03">March</term><term name="month-04">April</term><term name="month-05">May</term><term name="month-06">June</term><term name="month-07">July</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">October</term><term name="month-11">November</term><term name="month-12">December</term>
<!-- SHORT MONTH FORMS --><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">Mar.</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">May</term><term name="month-06" form="short">Jun.</term><term name="month-07" form="short">Jul.</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Oct.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dec.</term>
<!-- SEASONS --><term name="season-01">Spring</term><term name="season-02">Summer</term><term name="season-03">Autumn</term><term name="season-04">Winter</term></terms>
</locale>
`,"nl-NL":`<?xml version="1.0" encoding="utf-8"?>
<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="nl-NL"><info><translator><name>Rintze M. Zelle</name><uri>http://twitter.com/rintzezelle</uri></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2017-04-01T12:00:00+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" suffix="-" range-delimiter="/"/><date-part name="month" form="numeric" suffix="-" range-delimiter="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> <!-- sine nomine --><term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="original-work-published">original work published</term><term name="personal-communication">persoonlijke communicatie</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">geraadpleegd</term><term name="and">en</term><term name="and others">en anderen</term><term name="anonymous">anoniem</term><term name="anonymous" form="short">anon.</term><term name="at">bij</term><term name="available at">beschikbaar op</term><term name="by">door</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">geciteerd</term><term name="edition"><single>druk</single><multiple>drukken</multiple></term><term name="edition" form="short">dr.</term><term name="et-al">e.a.</term><term name="forthcoming">in voorbereiding</term><term name="from">van</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">in druk</term><term name="internet">internet</term><term name="interview">interview</term><term name="letter">brief</term><term name="no date">zonder datum</term><term name="no date" form="short">z.d.</term><term name="online">online</term><term name="presented at">gepresenteerd bij</term><term name="reference"><single>referentie</single><multiple>referenties</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">geraadpleegd</term><term name="scale">schaal</term><term name="version">versie</term>
<!-- LONG ITEM TYPE FORMS --><term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term><!-- figure is in the list of locator terms --><term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">persoonlijke communicatie</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>
<!-- SHORT ITEM TYPE FORMS --><term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term><!-- figure is in the list of locator terms --><term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>
<!-- HISTORICAL ERA TERMS --><term name="ad">AD</term><term name="bc">BC</term><term name="bce">BCE</term><term name="ce">CE</term>
<!-- PUNCTUATION --><term name="open-quote">\u2018</term><term name="close-quote">\u2019</term><term name="open-inner-quote">\u201C</term><term name="close-inner-quote">\u201D</term><term name="page-range-delimiter">\u2013</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>
<!-- ORDINALS --><term name="ordinal">ste</term><term name="ordinal-00" match="whole-number">de</term><term name="ordinal-02" match="last-two-digits">de</term><term name="ordinal-03" match="last-two-digits">de</term><term name="ordinal-04" match="last-two-digits">de</term><term name="ordinal-05" match="last-two-digits">de</term><term name="ordinal-06" match="last-two-digits">de</term><term name="ordinal-07" match="last-two-digits">de</term><term name="ordinal-09" match="last-two-digits">de</term><term name="ordinal-10">de</term><term name="ordinal-11">de</term><term name="ordinal-12">de</term><term name="ordinal-13">de</term><term name="ordinal-14">de</term><term name="ordinal-15">de</term><term name="ordinal-16">de</term><term name="ordinal-17">de</term><term name="ordinal-18">de</term><term name="ordinal-19">de</term>
<!-- LONG ORDINALS --><term name="long-ordinal-01">eerste</term><term name="long-ordinal-02">tweede</term><term name="long-ordinal-03">derde</term><term name="long-ordinal-04">vierde</term><term name="long-ordinal-05">vijfde</term><term name="long-ordinal-06">zesde</term><term name="long-ordinal-07">zevende</term><term name="long-ordinal-08">achtste</term><term name="long-ordinal-09">negende</term><term name="long-ordinal-10">tiende</term>
<!-- LONG LOCATOR FORMS --><term name="act">			 <single>act</single><multiple>acts</multiple>						 </term><term name="appendix">			 <single>appendix</single><multiple>appendices</multiple>						 </term><term name="article-locator">			 <single>article</single><multiple>articles</multiple>						 </term><term name="canon">			 <single>canon</single><multiple>canons</multiple>						 </term><term name="elocation">			 <single>location</single><multiple>locations</multiple>						 </term><term name="equation">			 <single>equation</single><multiple>equations</multiple>						 </term><term name="rule">			 <single>rule</single><multiple>rules</multiple>						 </term><term name="scene">			 <single>scene</single><multiple>scenes</multiple>						 </term><term name="table">			 <single>table</single><multiple>tables</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>title</single><multiple>titles</multiple>						 </term><term name="book"><single>boek</single><multiple>boeken</multiple></term><term name="chapter"><single>hoofdstuk</single><multiple>hoofdstukken</multiple></term><term name="column"><single>column</single><multiple>columns</multiple></term><term name="figure"><single>figuur</single><multiple>figuren</multiple></term><term name="folio"><single>folio</single><multiple>folio's</multiple></term><term name="issue"><single>nummer</single><multiple>nummers</multiple></term><term name="line"><single>regel</single><multiple>regels</multiple></term><term name="note"><single>aantekening</single><multiple>aantekeningen</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>pagina</single><multiple>pagina's</multiple></term><term name="number-of-pages"><single>pagina</single><multiple>pagina's</multiple></term><term name="paragraph"><single>paragraaf</single><multiple>paragrafen</multiple></term><term name="part"><single>deel</single><multiple>delen</multiple></term><term name="section"><single>sectie</single><multiple>secties</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>vers</single><multiple>versen</multiple></term><term name="volume"><single>volume</single><multiple>volumes</multiple></term>
<!-- SHORT LOCATOR FORMS --><term name="appendix">			 <single>app.</single><multiple>apps.</multiple>						 </term><term name="article-locator">			 <single>art.</single><multiple>arts.</multiple></term><term name="elocation">			 <single>loc.</single><multiple>locs.</multiple></term><term name="equation">			 <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">			 <single>r.</single><multiple>rr.</multiple>						 </term><term name="scene">			 <single>sc.</single><multiple>scs.</multiple>						 </term><term name="table">			 <single>tbl.</single><multiple>tbls.</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">bk.</term><term name="chapter" form="short">hfdst.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">nr.</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">par.</term><term name="part" form="short">deel</term><term name="section" form="short">sec.</term><term name="sub-verbo" form="short"><single>s.v.</single><multiple>s.vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>
<!-- SYMBOL LOCATOR FORMS --><term name="paragraph" form="symbol"><single>\xB6</single><multiple>\xB6\xB6</multiple></term><term name="section" form="symbol"><single>\xA7</single><multiple>\xA7\xA7</multiple></term>
<!-- LONG ROLE FORMS --><term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>regisseur</single><multiple>regisseurs</multiple></term><term name="editor"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="editorial-director"><single>redacteur</single><multiple>redacteuren</multiple></term><term name="illustrator"><single>illustrator</single><multiple>illustrators</multiple></term><term name="translator"><single>vertaler</single><multiple>vertalers</multiple></term><term name="editortranslator"><single>redacteur &amp; vertaler</single><multiple>redacteuren &amp; vertalers</multiple></term>
<!-- SHORT ROLE FORMS --><term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>reg.</single><multiple>reg.</multiple></term><term name="editor" form="short"><single>red.</single><multiple>red.</multiple></term><term name="editorial-director" form="short"><single>red.</single><multiple>red.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>vert.</single><multiple>vert.</multiple></term><term name="editortranslator" form="short"><single>red. &amp; vert.</single><multiple>red. &amp; vert.</multiple></term>
<!-- VERB ROLE FORMS --><term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">door</term><term name="director" form="verb">geregisseerd door</term><term name="editor" form="verb">onder redactie van</term><term name="editorial-director" form="verb">onder redactie van</term><term name="illustrator" form="verb">ge\xEFllustreerd door</term><term name="interviewer" form="verb">ge\xEFnterviewd door</term><term name="recipient" form="verb">ontvangen door</term><term name="reviewed-author" form="verb">door</term><term name="translator" form="verb">vertaald door</term><term name="editortranslator" form="verb">bewerkt &amp; vertaald door</term>
<!-- SHORT VERB ROLE FORMS --><term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">geregisseerd door</term><term name="editor" form="verb-short">onder redactie van</term><term name="editorial-director" form="verb-short">bewerkt door</term><term name="illustrator" form="verb-short">ge\xEFllustreerd door</term><term name="translator" form="verb-short">vertaald door</term><term name="editortranslator" form="verb-short">bewerkt &amp; vertaald door</term>
<!-- LONG MONTH FORMS --><term name="month-01">januari</term><term name="month-02">februari</term><term name="month-03">maart</term><term name="month-04">april</term><term name="month-05">mei</term><term name="month-06">juni</term><term name="month-07">juli</term><term name="month-08">augustus</term><term name="month-09">september</term><term name="month-10">oktober</term><term name="month-11">november</term><term name="month-12">december</term>
<!-- SHORT MONTH FORMS --><term name="month-01" form="short">jan.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mrt.</term><term name="month-04" form="short">apr.</term><term name="month-05" form="short">mei</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">aug.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">okt.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dec.</term>
<!-- SEASONS --><term name="season-01">lente</term><term name="season-02">zomer</term><term name="season-03">herst</term><term name="season-04">winter</term></terms>
</locale>
`,"fr-FR":`<?xml version="1.0" encoding="utf-8"?>
<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="fr-FR"><info><translator><name>Gr\xE9goire Colly</name></translator><translator><name>Collectif Zotero francophone</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false" limit-day-ordinals-to-day-1="true"/><date form="text"><date-part name="day" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">publication en ligne anticip\xE9e</term><term name="album">album</term><term name="audio-recording">enregistrement audio</term><term name="film">film</term><term name="henceforth">d\xE9sormais</term><term name="loc-cit">loc.&#160;cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="no-place">sans lieu</term><term name="no-place" form="short">s.&#160;l.</term><term name="no-publisher">sans nom</term> <!-- sine nomine --><term name="no-publisher" form="short">s.&#160;n.</term><term name="on">sur</term><term name="op-cit">op.&#160;cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="original-work-published">\xE9dition originale</term><term name="personal-communication">communication personnelle</term><term name="podcast">podcast</term><term name="podcast-episode">\xE9pisode de podcast</term><term name="preprint">pr\xE9publication</term><term name="radio-broadcast">\xE9mission de radio</term><term name="radio-series">s\xE9rie radiophonique</term><term name="radio-series-episode">\xE9pisode de s\xE9rie radiophonique</term><term name="special-issue">num\xE9ro sp\xE9cial</term><term name="special-section">section sp\xE9ciale</term><term name="television-broadcast">\xE9mission de t\xE9l\xE9vision</term><term name="television-series">s\xE9rie t\xE9l\xE9vis\xE9e</term><term name="television-series-episode">\xE9pisode de s\xE9rie t\xE9l\xE9vis\xE9e</term><term name="video">vid\xE9o</term><term name="working-paper">document de travail</term><term name="accessed">consult\xE9 le</term><term name="and">et</term><term name="and others">et autres</term><term name="anonymous">anonyme</term><term name="anonymous" form="short">anon.</term><term name="at">sur</term><term name="available at">disponible sur</term><term name="by">par</term><term name="circa">vers</term><term name="circa" form="short">v.</term><term name="cited">cit\xE9</term><term name="edition" gender="feminine"><single>\xE9dition</single><multiple>\xE9ditions</multiple></term><term name="edition" form="short">\xE9d.</term><term name="et-al">et al.</term><term name="forthcoming">\xE0 para\xEEtre</term><term name="from">\xE0 l'adresse</term><term name="ibid">ibid.</term><term name="in">in</term><term name="in press">sous presse</term><term name="internet">Internet</term><term name="interview">entretien</term><term name="letter">lettre</term><term name="no date">sans date</term><term name="no date" form="short">s.&#160;d.</term><term name="online">en ligne</term><term name="presented at">pr\xE9sent\xE9 \xE0</term><term name="reference"><single>r\xE9f\xE9rence</single><multiple>r\xE9f\xE9rences</multiple></term><term name="reference" form="short"><single>r\xE9f.</single><multiple>r\xE9f.</multiple></term><term name="retrieved">consult\xE9</term><term name="scale">\xE9chelle</term><term name="version">version</term>
<!-- LONG ITEM TYPE FORMS --><term name="article">article</term><term name="article-journal">article de revue</term><term name="article-magazine">article de magazine</term><term name="article-newspaper">article de presse</term><term name="bill">projet de loi</term><term name="book">livre</term><term name="broadcast">\xE9mission</term><term name="chapter">chapitre de livre</term><term name="classic">classique</term><term name="collection">collection</term><term name="dataset">jeu de donn\xE9es</term><term name="document">document</term><term name="entry">entr\xE9e</term><term name="entry-dictionary">entr\xE9e de dictionnaire</term><term name="entry-encyclopedia">entr\xE9e d'encyclop\xE9die</term><term name="event">\xE9v\xE9nement</term><!-- figure is in the list of locator terms --><term name="graphic">image</term><term name="hearing">audience</term><term name="interview">interview</term><term name="legal_case">affaire</term><term name="legislation">acte juridique</term><term name="manuscript">manuscrit</term><term name="map">carte</term><term name="motion_picture">enregistrement vid\xE9o</term><term name="musical_score">partition</term><term name="pamphlet">pamphlet</term><term name="paper-conference">article de colloque</term><term name="patent">brevet</term><term name="performance">interpr\xE9tation</term><term name="periodical">p\xE9riodique</term><term name="personal_communication">communication personnelle</term><term name="post">billet</term><term name="post-weblog">billet de blog</term><term name="regulation">r\xE8glement</term><term name="report">rapport</term><term name="review">recension</term><term name="review-book">recension de livre</term><term name="software">logiciel</term><term name="song">chanson</term><term name="speech">pr\xE9sentation</term><term name="standard">norme</term><term name="thesis">th\xE8se</term><term name="treaty">trait\xE9</term><term name="webpage">page web</term>
<!-- SHORT ITEM TYPE FORMS --><term name="article-journal" form="short">art. de revue</term><term name="article-magazine" form="short">art. de mag.</term><term name="article-newspaper" form="short">art. de presse</term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap. de liv.</term><term name="document" form="short">doc.</term><!-- figure is in the list of locator terms --><term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">ms</term><term name="motion_picture" form="short">enr. vid\xE9o</term><term name="report" form="short">rap.</term><term name="review" form="short">recens.</term><term name="review-book" form="short">recens. de liv.</term><term name="song" form="short">enr. audio</term>
<!-- HISTORICAL ERA TERMS --><term name="ad">apr. J.-C.</term><term name="bc">av. J.-C.</term><term name="bce">av. n. \xE8.</term><term name="ce">n. \xE8.</term>
<!-- PUNCTUATION --><term name="open-quote">\xAB&#160;</term><term name="close-quote">&#160;\xBB</term><term name="open-inner-quote">\u201C</term><term name="close-inner-quote">\u201D</term><term name="page-range-delimiter">&#8209;</term> <!-- non-breaking hyphen --><term name="colon">&#160;:</term><term name="comma">,</term><term name="semicolon">&#160;;</term>
<!-- ORDINALS --><term name="ordinal">\u1D49</term><term name="ordinal-01" gender-form="feminine" match="whole-number">\u02B3\u1D49</term><term name="ordinal-01" gender-form="masculine" match="whole-number">\u1D49\u02B3</term>
<!-- LONG ORDINALS --><term name="long-ordinal-01">premier</term><term name="long-ordinal-02">deuxi\xE8me</term><term name="long-ordinal-03">troisi\xE8me</term><term name="long-ordinal-04">quatri\xE8me</term><term name="long-ordinal-05">cinqui\xE8me</term><term name="long-ordinal-06">sixi\xE8me</term><term name="long-ordinal-07">septi\xE8me</term><term name="long-ordinal-08">huiti\xE8me</term><term name="long-ordinal-09">neuvi\xE8me</term><term name="long-ordinal-10">dixi\xE8me</term>
<!-- LONG LOCATOR FORMS --><term name="act"><single>acte</single><multiple>actes</multiple></term><term name="appendix"><single>appendice</single><multiple>appendices</multiple></term><term name="article-locator"><single>article</single><multiple>articles</multiple></term><term name="canon"><single>canon</single><multiple>canons</multiple></term><term name="elocation"><single>emplacement</single><multiple>emplacements</multiple></term><term name="equation"><single>\xE9quation</single><multiple>\xE9quations</multiple></term><term name="rule"><single>r\xE8gle</single><multiple>r\xE8gles</multiple></term><term name="scene"><single>sc\xE8ne</single><multiple>sc\xE8nes</multiple></term><term name="table"><single>tableau</single><multiple>tableaux</multiple></term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple></term><term name="title-locator"><single>titre</single><multiple>titres</multiple></term><term name="book"><single>livre</single><multiple>livres</multiple></term><term name="chapter"><single>chapitre</single><multiple>chapitres</multiple></term><term name="column"><single>colonne</single><multiple>colonnes</multiple></term><term name="figure"><single>figure</single><multiple>figures</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue" gender="masculine"><single>num\xE9ro</single><multiple>num\xE9ros</multiple></term><term name="line"><single>ligne</single><multiple>lignes</multiple></term><term name="note"><single>note</single><multiple>notes</multiple></term><term name="opus"><single>opus</single><multiple>opus</multiple></term><term name="page"><single>page</single><multiple>pages</multiple></term><term name="number-of-pages"><single>page</single><multiple>pages</multiple></term><term name="paragraph"><single>paragraphe</single><multiple>paragraphes</multiple></term><term name="part"><single>partie</single><multiple>parties</multiple></term><term name="section"><single>section</single><multiple>sections</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>verset</single><multiple>versets</multiple></term><term name="volume" gender="masculine"><single>volume</single><multiple>volumes</multiple></term>
<!-- SHORT LOCATOR FORMS --><term name="appendix"><single>append.</single><multiple>append.</multiple></term><term name="article-locator"><single>art.</single><multiple>art.</multiple></term><term name="elocation"><single>emplact</single><multiple>emplact</multiple></term><term name="equation"><single>eq.</single><multiple>eq.</multiple></term><term name="rule"><single>r\xE8gle</single><multiple>r\xE8gles</multiple></term><term name="scene"><single>sc.</single><multiple>sc.</multiple></term><term name="table"><single>tab.</single><multiple>tab.</multiple></term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple></term><term name="title-locator"><single>tit.</single><multiple>tit.</multiple></term><term name="book" form="short">liv.</term><term name="chapter" form="short">chap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short"><single>f\u1D52</single><multiple>f\u1D52\u02E2</multiple></term><term name="issue" form="short"><single>n\u1D52</single><multiple>n\u1D52\u02E2</multiple></term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>p.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>p.</multiple></term><term name="paragraph" form="short">paragr.</term><term name="part" form="short">part.</term><term name="section" form="short">sect.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>v.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vol.</multiple></term>
<!-- SYMBOL LOCATOR FORMS --><term name="paragraph" form="symbol"><single>\xA7</single><multiple>\xA7</multiple></term><term name="section" form="symbol"><single>\xA7</single><multiple>\xA7</multiple></term>
<!-- LONG ROLE FORMS --><term name="chair"><single>pr\xE9sident</single><multiple>pr\xE9sidents</multiple></term><term name="compiler"><single>compilateur</single><multiple>compilateurs</multiple></term><term name="contributor"><single>contributeur</single><multiple>contributeurs</multiple></term><term name="curator"><single>commissaire</single><multiple>commissaires</multiple></term><term name="executive-producer"><single>producteur ex\xE9cutif</single><multiple>producteurs ex\xE9cutifs</multiple></term><term name="guest"><single>invit\xE9</single><multiple>invit\xE9s</multiple></term><term name="host"><single>h\xF4te</single><multiple>h\xF4tes</multiple></term><term name="narrator"><single>narrateur</single><multiple>narrateurs</multiple></term><term name="organizer"><single>organisateur</single><multiple>organisateurs</multiple></term><term name="performer"><single>interpr\xE8te</single><multiple>interpr\xE8tes</multiple></term><term name="producer"><single>producteur</single><multiple>producteurs</multiple></term><term name="script-writer"><single>sc\xE9nariste</single><multiple>sc\xE9naristes</multiple></term><term name="series-creator"><single>cr\xE9ateur de s\xE9rie</single><multiple>cr\xE9ateurs de s\xE9rie</multiple></term><term name="director"><single>r\xE9alisateur</single><multiple>r\xE9alisateurs</multiple></term><term name="editor"><single>\xE9diteur</single><multiple>\xE9diteurs</multiple></term><term name="editorial-director"><single>directeur</single><multiple>directeurs</multiple></term><term name="illustrator"><single>illustrateur</single><multiple>illustrateurs</multiple></term><term name="translator"><single>traducteur</single><multiple>traducteurs</multiple></term><term name="editortranslator"><single>\xE9diteur et traducteur</single><multiple>\xE9diteurs et traducteurs</multiple></term>
<!-- SHORT ROLE FORMS --><term name="compiler" form="short"><single>compil.</single><multiple>compil.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contrib.</multiple></term><term name="curator" form="short"><single>commiss.</single><multiple>commiss.</multiple></term><term name="executive-producer" form="short"><single>prod. ex\xE9.</single><multiple>prod. ex\xE9.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narr.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>org.</multiple></term><term name="performer" form="short"><single>interpr.</single><multiple>interpr.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prod.</multiple></term><term name="script-writer" form="short"><single>sc\xE9nar.</single><multiple>sc\xE9nar.</multiple></term><term name="series-creator" form="short"><single>cr\xE9at.</single><multiple>cr\xE9at.</multiple></term><term name="director" form="short"><single>r\xE9al.</single><multiple>r\xE9al.</multiple></term><term name="editor" form="short"><single>\xE9d.</single><multiple>\xE9d.</multiple></term><term name="editorial-director" form="short"><single>dir.</single><multiple>dir.</multiple></term><term name="illustrator" form="short"><single>ill.</single><multiple>ill.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trad.</multiple></term><term name="editortranslator" form="short"><single>\xE9d. et trad.</single><multiple>\xE9d. et trad.</multiple></term>
<!-- VERB ROLE FORMS --><term name="chair" form="verb">pr\xE9sid\xE9 par</term><term name="compiler" form="verb">compil\xE9 par</term><term name="contributor" form="verb">avec</term><term name="curator" form="verb">organis\xE9 par</term><term name="executive-producer" form="verb">production ex\xE9cutive par</term><term name="guest" form="verb">avec pour invit\xE9</term><term name="host" form="verb">anim\xE9 par</term><term name="narrator" form="verb">lu par</term><term name="organizer" form="verb">organis\xE9 par</term><term name="performer" form="verb">interpr\xE9t\xE9 par</term><term name="producer" form="verb">produit par</term><term name="script-writer" form="verb">sc\xE9nario de</term><term name="series-creator" form="verb">cr\xE9\xE9 par</term><term name="container-author" form="verb">par</term><term name="director" form="verb">r\xE9alis\xE9 par</term><term name="editor" form="verb">\xE9dit\xE9 par</term><term name="editorial-director" form="verb">sous la direction de</term><term name="illustrator" form="verb">illustr\xE9 par</term><term name="interviewer" form="verb">entretien r\xE9alis\xE9 par</term><term name="recipient" form="verb">\xE0</term><term name="reviewed-author" form="verb">par</term><term name="translator" form="verb">traduit par</term><term name="editortranslator" form="verb">\xE9dit\xE9 et traduit par</term>
<!-- SHORT VERB ROLE FORMS --><term name="compiler" form="verb-short">compil. par</term><term name="contributor" form="verb-short">ac</term><term name="curator" form="verb-short">org. par</term><term name="executive-producer" form="verb-short">prod. ex\xE9. par</term><term name="guest" form="verb-short">ac pr inv.</term><term name="host" form="verb-short">anim. par</term><term name="narrator" form="verb-short">lu par</term><term name="organizer" form="verb-short">org. par</term><term name="performer" form="verb-short">interpr. par</term><term name="producer" form="verb-short">prod. par</term><term name="script-writer" form="verb-short">sc\xE9nar. de</term><term name="series-creator" form="verb-short">cr\xE9\xE9 par</term><term name="director" form="verb-short">r\xE9al. par</term><term name="editor" form="verb-short">\xE9d. par</term><term name="editorial-director" form="verb-short">ss la dir. de</term><term name="illustrator" form="verb-short">ill. par</term><term name="translator" form="verb-short">trad. par</term><term name="editortranslator" form="verb-short">\xE9d. et trad. par</term>
<!-- LONG MONTH FORMS --><term name="month-01" gender="masculine">janvier</term><term name="month-02" gender="masculine">f\xE9vrier</term><term name="month-03" gender="masculine">mars</term><term name="month-04" gender="masculine">avril</term><term name="month-05" gender="masculine">mai</term><term name="month-06" gender="masculine">juin</term><term name="month-07" gender="masculine">juillet</term><term name="month-08" gender="masculine">ao\xFBt</term><term name="month-09" gender="masculine">septembre</term><term name="month-10" gender="masculine">octobre</term><term name="month-11" gender="masculine">novembre</term><term name="month-12" gender="masculine">d\xE9cembre</term>
<!-- SHORT MONTH FORMS --><term name="month-01" form="short">janv.</term><term name="month-02" form="short">f\xE9vr.</term><term name="month-03" form="short">mars</term><term name="month-04" form="short">avr.</term><term name="month-05" form="short">mai</term><term name="month-06" form="short">juin</term><term name="month-07" form="short">juill.</term><term name="month-08" form="short">ao\xFBt</term><term name="month-09" form="short">sept.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">d\xE9c.</term>
<!-- SEASONS --><term name="season-01">printemps</term><term name="season-02">\xE9t\xE9</term><term name="season-03">automne</term><term name="season-04">hiver</term></terms>
</locale>
`,"de-DE":`<?xml version="1.0" encoding="utf-8"?>
<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="de-DE"><info><translator><name>Till A. Heilmann</name></translator><translator><name>Ulrich</name></translator><translator><name>Rintze M. Zelle</name></translator><translator><name>Sebastian Karcher</name></translator><translator><name>jakov</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" form="ordinal" suffix=" "/><date-part name="month" suffix=" "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="."/><date-part name="month" form="numeric-leading-zeros" suffix="."/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> <!-- sine nomine --><term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="original-work-published">original work published</term><term name="personal-communication">pers\xF6nliche Kommunikation</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">zugegriffen</term><term name="and">und</term><term name="and others">und andere</term><term name="anonymous">ohne Autor</term><term name="anonymous" form="short">o.&#160;A.</term><term name="at">auf</term><term name="available at">verf\xFCgbar unter</term><term name="by">von</term><term name="circa">circa</term><term name="circa" form="short">ca.</term><term name="cited">zitiert</term><term name="edition"><single>Auflage</single><multiple>Auflagen</multiple></term><term name="edition" form="short">Aufl.</term><term name="et-al">u.&#160;a.</term><term name="forthcoming">i.&#160;E.</term><term name="from">von</term><term name="ibid">ebd.</term><term name="in">in</term><term name="in press">im Druck</term><term name="internet">Internet</term><term name="interview">Interview</term><term name="letter">Brief</term><term name="no date">ohne Datum</term><term name="no date" form="short">o.&#160;J.</term><term name="online">online</term><term name="presented at">gehalten auf der</term><term name="reference"><single>Referenz</single><multiple>Referenzen</multiple></term><term name="reference" form="short"><single>Ref.</single><multiple>Ref.</multiple></term><term name="retrieved">abgerufen</term><term name="scale">Ma\xDFstab</term><term name="version">Version</term>
<!-- LONG ITEM TYPE FORMS --><term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term><!-- figure is in the list of locator terms --><term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">pers\xF6nliche Kommunikation</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>
<!-- SHORT ITEM TYPE FORMS --><term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term><!-- figure is in the list of locator terms --><term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>
<!-- HISTORICAL ERA TERMS --><term name="ad">&#160;n.&#160;Chr.</term><term name="bc">&#160;v.&#160;Chr.</term><term name="bce">BCE</term><term name="ce">CE</term>
<!-- PUNCTUATION --><term name="open-quote">\u201E</term><term name="close-quote">\u201C</term><term name="open-inner-quote">\u201A</term><term name="close-inner-quote">\u2018</term><term name="page-range-delimiter">\u2013</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>
<!-- ORDINALS --><term name="ordinal">.</term>
<!-- LONG ORDINALS --><term name="long-ordinal-01">erster</term><term name="long-ordinal-02">zweiter</term><term name="long-ordinal-03">dritter</term><term name="long-ordinal-04">vierter</term><term name="long-ordinal-05">f\xFCnfter</term><term name="long-ordinal-06">sechster</term><term name="long-ordinal-07">siebter</term><term name="long-ordinal-08">achter</term><term name="long-ordinal-09">neunter</term><term name="long-ordinal-10">zehnter</term>
<!-- LONG LOCATOR FORMS --><term name="act">			 <single>act</single><multiple>acts</multiple>						 </term><term name="appendix">			 <single>appendix</single><multiple>appendices</multiple>						 </term><term name="article-locator">			 <single>article</single><multiple>articles</multiple>						 </term><term name="canon">			 <single>canon</single><multiple>canons</multiple>						 </term><term name="elocation">			 <single>location</single><multiple>locations</multiple>						 </term><term name="equation">			 <single>equation</single><multiple>equations</multiple>						 </term><term name="rule">			 <single>rule</single><multiple>rules</multiple>						 </term><term name="scene">			 <single>scene</single><multiple>scenes</multiple>						 </term><term name="table">			 <single>table</single><multiple>tables</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>title</single><multiple>titles</multiple>						 </term><term name="book"><single>Buch</single><multiple>B\xFCcher</multiple></term><term name="chapter"><single>Kapitel</single><multiple>Kapitel</multiple></term><term name="column"><single>Spalte</single><multiple>Spalten</multiple></term><term name="figure"><single>Abbildung</single><multiple>Abbildungen</multiple></term><term name="folio"><single>Blatt</single><multiple>Bl\xE4tter</multiple></term><term name="issue"><single>Nummer</single><multiple>Nummern</multiple></term><term name="line"><single>Zeile</single><multiple>Zeilen</multiple></term><term name="note"><single>Note</single><multiple>Noten</multiple></term><term name="opus"><single>Opus</single><multiple>Opera</multiple></term><term name="page"><single>Seite</single><multiple>Seiten</multiple></term><term name="number-of-pages"><single>Seite</single><multiple>Seiten</multiple></term><term name="paragraph"><single>Absatz</single><multiple>Abs\xE4tze</multiple></term><term name="part"><single>Teil</single><multiple>Teile</multiple></term><term name="section"><single>Abschnitt</single><multiple>Abschnitte</multiple></term><term name="sub-verbo"><single>sub verbo</single><multiple>sub verbis</multiple></term><term name="verse"><single>Vers</single><multiple>Verse</multiple></term><term name="volume"><single>Band</single><multiple>B\xE4nde</multiple></term>
<!-- SHORT LOCATOR FORMS --><term name="appendix">			 <single>app.</single><multiple>apps.</multiple>						 </term><term name="article-locator">			 <single>art.</single><multiple>arts.</multiple></term><term name="elocation">			 <single>loc.</single><multiple>locs.</multiple></term><term name="equation">			 <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">			 <single>r.</single><multiple>rr.</multiple>						 </term><term name="scene">			 <single>sc.</single><multiple>scs.</multiple>						 </term><term name="table">			 <single>tbl.</single><multiple>tbls.</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">B.</term><term name="chapter" form="short">Kap.</term><term name="column" form="short">Sp.</term><term name="figure" form="short">Abb.</term><term name="folio" form="short">Fol.</term><term name="issue" form="short">Nr.</term><term name="line" form="short">Z.</term><term name="note" form="short">N.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>S.</single><multiple>S.</multiple></term><term name="number-of-pages" form="short"><single>S.</single><multiple>S.</multiple></term><term name="paragraph" form="short">Abs.</term><term name="part" form="short">Teil</term><term name="section" form="short">Abschn.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>V.</single><multiple>V.</multiple></term><term name="volume" form="short"><single>Bd.</single><multiple>Bde.</multiple></term>
<!-- SYMBOL LOCATOR FORMS --><term name="paragraph" form="symbol"><single>\xB6</single><multiple>\xB6\xB6</multiple></term><term name="section" form="symbol"><single>\xA7</single><multiple>\xA7\xA7</multiple></term>
<!-- LONG ROLE FORMS --><term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>Regisseur</single><multiple>Regisseure</multiple></term><term name="editor"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="collection-editor"><single>Reihenherausgeber</single><multiple>Reihenherausgeber</multiple></term><term name="editorial-director"><single>Herausgeber</single><multiple>Herausgeber</multiple></term><term name="illustrator"><single>Illustrator</single><multiple>Illustratoren</multiple></term><term name="translator"><single>\xDCbersetzer</single><multiple>\xDCbersetzer</multiple></term><term name="editortranslator"><single>Herausgeber&#160;&amp; \xDCbersetzer</single><multiple>Herausgeber&#160;&amp; \xDCbersetzer</multiple></term>
<!-- SHORT ROLE FORMS --><term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>Reg.</single><multiple>Reg.</multiple></term><term name="editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="collection-editor" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="editorial-director" form="short"><single>Hrsg.</single><multiple>Hrsg.</multiple></term><term name="illustrator" form="short"><single>Ill.</single><multiple>Ill.</multiple></term><term name="translator" form="short"><single>\xDCbers.</single><multiple>\xDCbers.</multiple></term><term name="editortranslator" form="short"><single>Hrsg.&#160;&amp; \xDCbers.</single><multiple>Hrsg.&#160;&amp; \xDCbers.</multiple></term>
<!-- VERB ROLE FORMS --><term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">von</term><term name="director" form="verb">Regie von</term><term name="editor" form="verb">herausgegeben von</term><term name="collection-editor" form="verb">herausgegeben von</term><term name="editorial-director" form="verb">herausgegeben von</term><term name="illustrator" form="verb">illustriert von</term><term name="interviewer" form="verb">interviewt von</term><term name="recipient" form="verb">an</term><term name="reviewed-author" form="verb">von</term><term name="translator" form="verb">\xFCbersetzt von</term><term name="editortranslator" form="verb">herausgegeben und \xFCbersetzt von</term>
<!-- SHORT VERB ROLE FORMS --><term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">Reg.</term><term name="editor" form="verb-short">hg. von</term><term name="collection-editor" form="verb-short">hg. von</term><term name="editorial-director" form="verb-short">hg. von</term><term name="illustrator" form="verb-short">illus. von</term><term name="translator" form="verb-short">\xFCbers. von</term><term name="editortranslator" form="verb-short">hg.&#160;&amp; \xFCbers. von</term>
<!-- LONG MONTH FORMS --><term name="month-01">Januar</term><term name="month-02">Februar</term><term name="month-03">M\xE4rz</term><term name="month-04">April</term><term name="month-05">Mai</term><term name="month-06">Juni</term><term name="month-07">Juli</term><term name="month-08">August</term><term name="month-09">September</term><term name="month-10">Oktober</term><term name="month-11">November</term><term name="month-12">Dezember</term>
<!-- SHORT MONTH FORMS --><term name="month-01" form="short">Jan.</term><term name="month-02" form="short">Feb.</term><term name="month-03" form="short">M\xE4rz</term><term name="month-04" form="short">Apr.</term><term name="month-05" form="short">Mai</term><term name="month-06" form="short">Juni</term><term name="month-07" form="short">Juli</term><term name="month-08" form="short">Aug.</term><term name="month-09" form="short">Sep.</term><term name="month-10" form="short">Okt.</term><term name="month-11" form="short">Nov.</term><term name="month-12" form="short">Dez.</term>
<!-- SEASONS --><term name="season-01">Fr\xFChjahr</term><term name="season-02">Sommer</term><term name="season-03">Herbst</term><term name="season-04">Winter</term></terms>
</locale>
`,"es-ES":`<?xml version="1.0" encoding="utf-8"?>
<locale xmlns="http://purl.org/net/xbiblio/csl" version="1.0" xml:lang="es-ES"><info><translator><name>javimat</name></translator><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights><updated>2012-07-04T23:31:02+00:00</updated></info><style-options punctuation-in-quote="false"/><date form="text"><date-part name="day" suffix=" de "/><date-part name="month" suffix=" de "/><date-part name="year"/></date><date form="numeric"><date-part name="day" form="numeric-leading-zeros" suffix="/"/><date-part name="month" form="numeric-leading-zeros" suffix="/"/><date-part name="year"/></date><terms><term name="advance-online-publication">advance online publication</term><term name="album">album</term><term name="audio-recording">audio recording</term><term name="film">film</term><term name="henceforth">henceforth</term><term name="loc-cit">loc. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="no-place">no place</term><term name="no-place" form="short">n.p.</term><term name="no-publisher">no publisher</term> <!-- sine nomine --><term name="no-publisher" form="short">n.p.</term><term name="on">on</term><term name="op-cit">op. cit.</term> <!-- like ibid., the abbreviated form is the regular form  --><term name="original-work-published">original work published</term><term name="personal-communication">comunicaci\xF3n personal</term><term name="podcast">podcast</term><term name="podcast-episode">podcast episode</term><term name="preprint">preprint</term><term name="radio-broadcast">radio broadcast</term><term name="radio-series">radio series</term><term name="radio-series-episode">radio series episode</term><term name="special-issue">special issue</term><term name="special-section">special section</term><term name="television-broadcast">television broadcast</term><term name="television-series">television series</term><term name="television-series-episode">television series episode</term><term name="video">video</term><term name="working-paper">working paper</term><term name="accessed">accedido</term><term name="and">y</term><term name="and others">y otros</term><term name="anonymous">an\xF3nimo</term><term name="anonymous" form="short">an\xF3n.</term><term name="at">en</term><term name="available at">disponible en</term><term name="by">de</term><term name="circa">circa</term><term name="circa" form="short">c.</term><term name="cited">citado</term><term name="edition"><single>edici\xF3n</single><multiple>ediciones</multiple></term><term name="edition" form="short">ed.</term><term name="et-al">et&#160;al.</term><term name="forthcoming">previsto</term><term name="from">a partir de</term><term name="ibid">ibid.</term><term name="in">en</term><term name="in press">en imprenta</term><term name="internet">internet</term><term name="interview">entrevista</term><term name="letter">carta</term><term name="no date">sin fecha</term><term name="no date" form="short">s.&#160;f.</term><term name="online">en l\xEDnea</term><term name="presented at">presentado en</term><term name="reference"><single>referencia</single><multiple>referencias</multiple></term><term name="reference" form="short"><single>ref.</single><multiple>refs.</multiple></term><term name="retrieved">recuperado</term><term name="scale">escala</term><term name="version">versi\xF3n</term>
<!-- LONG ITEM TYPE FORMS --><term name="article">preprint</term><term name="article-journal">journal article</term><term name="article-magazine">magazine article</term><term name="article-newspaper">newspaper article</term><term name="bill">bill</term><term name="book">book</term><term name="broadcast">broadcast</term><term name="chapter">book chapter</term><term name="classic">classic</term><term name="collection">collection</term><term name="dataset">dataset</term><term name="document">document</term><term name="entry">entry</term><term name="entry-dictionary">dictionary entry</term><term name="entry-encyclopedia">encyclopedia entry</term><term name="event">event</term><!-- figure is in the list of locator terms --><term name="graphic">graphic</term><term name="hearing">hearing</term><term name="interview">interview</term><term name="legal_case">legal case</term><term name="legislation">legislation</term><term name="manuscript">manuscript</term><term name="map">map</term><term name="motion_picture">video recording</term><term name="musical_score">musical score</term><term name="pamphlet">pamphlet</term><term name="paper-conference">conference paper</term><term name="patent">patent</term><term name="performance">performance</term><term name="periodical">periodical</term><term name="personal_communication">comunicaci\xF3n personal</term><term name="post">post</term><term name="post-weblog">blog post</term><term name="regulation">regulation</term><term name="report">report</term><term name="review">review</term><term name="review-book">book review</term><term name="software">software</term><term name="song">audio recording</term><term name="speech">presentation</term><term name="standard">standard</term><term name="thesis">thesis</term><term name="treaty">treaty</term><term name="webpage">webpage</term>
<!-- SHORT ITEM TYPE FORMS --><term name="article-journal" form="short">journal art.</term><term name="article-magazine" form="short">mag. art.</term><term name="article-newspaper" form="short">newspaper art.</term><term name="book" form="short">bk.</term><term name="chapter" form="short">bk. chap.</term><term name="document" form="short">doc.</term><!-- figure is in the list of locator terms --><term name="graphic" form="short">graph.</term><term name="interview" form="short">interv.</term><term name="manuscript" form="short">MS</term><term name="motion_picture" form="short">video rec.</term><term name="report" form="short">rep.</term><term name="review" form="short">rev.</term><term name="review-book" form="short">bk. rev.</term><term name="song" form="short">audio rec.</term>
<!-- HISTORICAL ERA TERMS --><term name="ad">d.&#160;C.</term><term name="bc">a.&#160;C.</term><term name="bce">BCE</term><term name="ce">CE</term>
<!-- PUNCTUATION --><term name="open-quote">\xAB</term><term name="close-quote">\xBB</term><term name="open-inner-quote">\u201C</term><term name="close-inner-quote">\u201D</term><term name="page-range-delimiter">-</term><term name="colon">:</term><term name="comma">,</term><term name="semicolon">;</term>
<!-- ORDINALS --><term name="ordinal">.\xAA</term>
<!-- LONG ORDINALS --><term name="long-ordinal-01">primera</term><term name="long-ordinal-02">segunda</term><term name="long-ordinal-03">tercera</term><term name="long-ordinal-04">cuarta</term><term name="long-ordinal-05">quinta</term><term name="long-ordinal-06">sexta</term><term name="long-ordinal-07">s\xE9ptima</term><term name="long-ordinal-08">octava</term><term name="long-ordinal-09">novena</term><term name="long-ordinal-10">d\xE9cima</term>
<!-- LONG LOCATOR FORMS --><term name="act">			 <single>act</single><multiple>acts</multiple>						 </term><term name="appendix">			 <single>appendix</single><multiple>appendices</multiple>						 </term><term name="article-locator">			 <single>article</single><multiple>articles</multiple>						 </term><term name="canon">			 <single>canon</single><multiple>canons</multiple>						 </term><term name="elocation">			 <single>location</single><multiple>locations</multiple>						 </term><term name="equation">			 <single>equation</single><multiple>equations</multiple>						 </term><term name="rule">			 <single>rule</single><multiple>rules</multiple>						 </term><term name="scene">			 <single>scene</single><multiple>scenes</multiple>						 </term><term name="table">			 <single>table</single><multiple>tables</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>title</single><multiple>titles</multiple>						 </term><term name="book"><single>libro</single><multiple>libros</multiple></term><term name="chapter"><single>cap\xEDtulo</single><multiple>cap\xEDtulos</multiple></term><term name="column"><single>columna</single><multiple>columnas</multiple></term><term name="figure"><single>figura</single><multiple>figuras</multiple></term><term name="folio"><single>folio</single><multiple>folios</multiple></term><term name="issue"><single>n\xFAmero</single><multiple>n\xFAmeros</multiple></term><term name="line"><single>l\xEDnea</single><multiple>l\xEDneas</multiple></term><term name="note"><single>nota</single><multiple>notas</multiple></term><term name="opus"><single>opus</single><multiple>opera</multiple></term><term name="page"><single>p\xE1gina</single><multiple>p\xE1ginas</multiple></term><term name="number-of-pages"><single>p\xE1gina</single><multiple>p\xE1ginas</multiple></term><term name="paragraph"><single>p\xE1rrafo</single><multiple>p\xE1rrafos</multiple></term><term name="part"><single>parte</single><multiple>partes</multiple></term><term name="section"><single>secci\xF3n</single><multiple>secciones</multiple></term><term name="sub-verbo"><single>sub voce</single><multiple>sub vocibus</multiple></term><term name="verse"><single>verso</single><multiple>versos</multiple></term><term name="volume"><single>volumen</single><multiple>vol\xFAmenes</multiple></term>
<!-- SHORT LOCATOR FORMS --><term name="appendix">			 <single>app.</single><multiple>apps.</multiple>						 </term><term name="article-locator">			 <single>art.</single><multiple>arts.</multiple></term><term name="elocation">			 <single>loc.</single><multiple>locs.</multiple></term><term name="equation">			 <single>eq.</single><multiple>eqs.</multiple></term><term name="rule">			 <single>r.</single><multiple>rr.</multiple>						 </term><term name="scene">			 <single>sc.</single><multiple>scs.</multiple>						 </term><term name="table">			 <single>tbl.</single><multiple>tbls.</multiple>						 </term><term name="timestamp"> <!-- generally blank --><single></single><multiple></multiple>						 </term><term name="title-locator">			 <single>tit.</single><multiple>tits.</multiple></term><term name="book" form="short">lib.</term><term name="chapter" form="short">cap.</term><term name="column" form="short">col.</term><term name="figure" form="short">fig.</term><term name="folio" form="short">f.</term><term name="issue" form="short">n.\xBA</term><term name="line" form="short">l.</term><term name="note" form="short">n.</term><term name="opus" form="short">op.</term><term name="page" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="number-of-pages" form="short"><single>p.</single><multiple>pp.</multiple></term><term name="paragraph" form="short">p\xE1rr.</term><term name="part" form="short">pt.</term><term name="section" form="short">sec.</term><term name="sub-verbo" form="short"><single>s.&#160;v.</single><multiple>s.&#160;vv.</multiple></term><term name="verse" form="short"><single>v.</single><multiple>vv.</multiple></term><term name="volume" form="short"><single>vol.</single><multiple>vols.</multiple></term>
<!-- SYMBOL LOCATOR FORMS --><term name="paragraph" form="symbol"><single>\xA7</single><multiple>\xA7</multiple></term><term name="section" form="symbol"><single>\xA7</single><multiple>\xA7</multiple></term>
<!-- LONG ROLE FORMS --><term name="chair"><single>chair</single><multiple>chairs</multiple></term><term name="compiler"><single>compiler</single><multiple>compilers</multiple></term><term name="contributor"><single>contributor</single><multiple>contributors</multiple></term><term name="curator"><single>curator</single><multiple>curators</multiple></term><term name="executive-producer"><single>executive producer</single><multiple>executive producers</multiple></term><term name="guest"><single>guest</single><multiple>guests</multiple></term><term name="host"><single>host</single><multiple>hosts</multiple></term><term name="narrator"><single>narrator</single><multiple>narrators</multiple></term><term name="organizer"><single>organizer</single><multiple>organizers</multiple></term><term name="performer"><single>performer</single><multiple>performers</multiple></term><term name="producer"><single>producer</single><multiple>producers</multiple></term><term name="script-writer"><single>writer</single><multiple>writers</multiple></term><term name="series-creator"><single>series creator</single><multiple>series creators</multiple></term><term name="director"><single>director</single><multiple>directores</multiple></term><term name="editor"><single>editor</single><multiple>editores</multiple></term><term name="editorial-director"><single>editor</single><multiple>editores</multiple></term><term name="illustrator"><single>ilustrador</single><multiple>ilustradores</multiple></term><term name="translator"><single>traductor</single><multiple>traductores</multiple></term><term name="editortranslator"><single>editor y traductor</single><multiple>editores y traductores</multiple></term>
<!-- SHORT ROLE FORMS --><term name="compiler" form="short"><single>comp.</single><multiple>comps.</multiple></term><term name="contributor" form="short"><single>contrib.</single><multiple>contribs.</multiple></term><term name="curator" form="short"><single>cur.</single><multiple>curs.</multiple></term><term name="executive-producer" form="short"><single>exec. prod.</single><multiple>exec. prods.</multiple></term><term name="narrator" form="short"><single>narr.</single><multiple>narrs.</multiple></term><term name="organizer" form="short"><single>org.</single><multiple>orgs.</multiple></term><term name="performer" form="short"><single>perf.</single><multiple>perfs.</multiple></term><term name="producer" form="short"><single>prod.</single><multiple>prods.</multiple></term><term name="script-writer" form="short"><single>writ.</single><multiple>writs.</multiple></term><term name="series-creator" form="short"><single>cre.</single><multiple>cres.</multiple></term><term name="director" form="short"><single>dir.</single><multiple>dirs.</multiple></term><term name="editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="editorial-director" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="illustrator" form="short"><single>ilust.</single><multiple>ilusts.</multiple></term><term name="translator" form="short"><single>trad.</single><multiple>trads.</multiple></term><term name="editortranslator" form="short"><single>ed. y trad.</single><multiple>eds. y trads.</multiple></term>
<!-- VERB ROLE FORMS --><term name="chair" form="verb">chaired by</term><term name="compiler" form="verb">compiled by</term><term name="contributor" form="verb">with</term><term name="curator" form="verb">curated by</term><term name="executive-producer" form="verb">executive produced by</term><term name="guest" form="verb">with guest</term><term name="host" form="verb">hosted by</term><term name="narrator" form="verb">narrated by</term><term name="organizer" form="verb">organized by</term><term name="performer" form="verb">performed by</term><term name="producer" form="verb">produced by</term><term name="script-writer" form="verb">written by</term><term name="series-creator" form="verb">created by</term><term name="container-author" form="verb">de</term><term name="director" form="verb">dirigido por</term><term name="editor" form="verb">editado por</term><term name="editorial-director" form="verb">editado por</term><term name="illustrator" form="verb">ilustrado por</term><term name="interviewer" form="verb">entrevistado por</term><term name="recipient" form="verb">a</term><term name="reviewed-author" form="verb">por</term><term name="translator" form="verb">traducido por</term><term name="editortranslator" form="verb">editado y traducido por</term>
<!-- SHORT VERB ROLE FORMS --><term name="compiler" form="verb-short">comp. by</term><term name="contributor" form="verb-short">w.</term><term name="curator" form="verb-short">cur. by</term><term name="executive-producer" form="verb-short">exec. prod. by</term><term name="guest" form="verb-short">w. guest</term><term name="host" form="verb-short">hosted by</term><term name="narrator" form="verb-short">narr. by</term><term name="organizer" form="verb-short">org. by</term><term name="performer" form="verb-short">perf. by</term><term name="producer" form="verb-short">prod. by</term><term name="script-writer" form="verb-short">writ. by</term><term name="series-creator" form="verb-short">cre. by</term><term name="director" form="verb-short">dir.</term><term name="editor" form="verb-short">ed.</term><term name="editorial-director" form="verb-short">ed.</term><term name="illustrator" form="verb-short">ilust.</term><term name="translator" form="verb-short">trad.</term><term name="editortranslator" form="verb-short">ed. y trad.</term>
<!-- LONG MONTH FORMS --><term name="month-01">enero</term><term name="month-02">febrero</term><term name="month-03">marzo</term><term name="month-04">abril</term><term name="month-05">mayo</term><term name="month-06">junio</term><term name="month-07">julio</term><term name="month-08">agosto</term><term name="month-09">septiembre</term><term name="month-10">octubre</term><term name="month-11">noviembre</term><term name="month-12">diciembre</term>
<!-- SHORT MONTH FORMS --><term name="month-01" form="short">ene.</term><term name="month-02" form="short">feb.</term><term name="month-03" form="short">mar.</term><term name="month-04" form="short">abr.</term><term name="month-05" form="short">may</term><term name="month-06" form="short">jun.</term><term name="month-07" form="short">jul.</term><term name="month-08" form="short">ago.</term><term name="month-09" form="short">sep.</term><term name="month-10" form="short">oct.</term><term name="month-11" form="short">nov.</term><term name="month-12" form="short">dic.</term>
<!-- SEASONS --><term name="season-01">primavera</term><term name="season-02">verano</term><term name="season-03">oto\xF1o</term><term name="season-04">invierno</term></terms>
</locale>
`};var We=new ae.Register(_o);var xo={apa:`<?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="never" page-range-format="expanded"><info><title>American Psychological Association 7th edition</title><title-short>APA</title-short><id>http://www.zotero.org/styles/apa</id><link href="http://www.zotero.org/styles/apa" rel="self"/><link href="http://www.zotero.org/styles/apa-6th-edition" rel="template"/><link href="https://apastyle.apa.org/style-grammar-guidelines/references/examples" rel="documentation"/><author><name>Brenton M. Wiernik</name><email>zotero@wiernik.org</email></author><category citation-format="author-date"/><category field="psychology"/><category field="generic-base"/><updated>2022-01-31T14:43:56+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><terms><term name="editortranslator" form="short"><single>ed. &amp; trans.</single><multiple>eds. &amp; trans.</multiple></term><term name="translator" form="short">trans.</term><term name="interviewer" form="short"><single>interviewer</single><multiple>interviewers</multiple></term><term name="collection-editor" form="short"><single>ed.</single><multiple>eds.</multiple></term><term name="circa" form="short">ca.</term><term name="bc"> B.C.E.</term><term name="ad"> C.E.</term><term name="letter">personal communication</term><term name="letter" form="short">letter</term><term name="issue" form="long"><single>issue</single><multiple>issues</multiple></term></terms></locale><locale xml:lang="af"><terms><term name="letter">persoonlike kommunikasie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="ar"><terms><term name="letter">\u0627\u062A\u0635\u0627\u0644 \u0634\u062E\u0635\u064A</term><term name="letter" form="short">\u062E\u0637\u0627\u0628</term></terms></locale><locale xml:lang="bg"><terms><term name="letter">\u043B\u0438\u0447\u043D\u0430 \u043A\u043E\u043C\u0443\u043D\u0438\u043A\u0430\u0446\u0438\u044F</term><term name="letter" form="short">\u043F\u0438\u0441\u043C\u043E</term></terms></locale><locale xml:lang="ca"><terms><term name="letter">comunicaci\xF3 personal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="cs"><terms><term name="letter">osobn\xED komunikace</term><term name="letter" form="short">dopis</term></terms></locale><locale xml:lang="cy"><terms><term name="letter">cyfathrebu personol</term><term name="letter" form="short">llythyr</term></terms></locale><locale xml:lang="da"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikation</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="de"><terms><term name="et-al">et al.</term><term name="letter">pers\xF6nliche Kommunikation</term><term name="letter" form="short">Brief</term></terms></locale><locale xml:lang="el"><terms><term name="letter">\u03C0\u03C1\u03BF\u03C3\u03C9\u03C0\u03B9\u03BA\u03AE \u03B5\u03C0\u03B9\u03BA\u03BF\u03B9\u03BD\u03C9\u03BD\u03AF\u03B1</term><term name="letter" form="short">\u03B5\u03C0\u03B9\u03C3\u03C4\u03BF\u03BB\u03AE</term></terms></locale><locale xml:lang="es"><terms><term name="from">de</term><term name="letter">comunicaci\xF3n personal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="et"><terms><term name="letter">isiklik suhtlus</term><term name="letter" form="short">kiri</term></terms></locale><locale xml:lang="eu"><terms><term name="letter">komunikazio pertsonala</term><term name="letter" form="short">gutuna</term></terms></locale><locale xml:lang="fa"><terms><term name="letter">\u0627\u0631\u062A\u0628\u0627\u0637 \u0634\u062E\u0635\u06CC</term><term name="letter" form="short">\u0646\u0627\u0645\u0647</term></terms></locale><locale xml:lang="fi"><terms><term name="letter">henkil\xF6kohtainen viestint\xE4</term><term name="letter" form="short">kirje</term></terms></locale><locale xml:lang="fr"><terms><term name="letter">communication personnelle</term><term name="letter" form="short">lettre</term><term name="editor" form="short"><single>\xE9d.</single><multiple>\xE9ds.</multiple></term></terms></locale><locale xml:lang="he"><terms><term name="letter">\u05EA\u05E7\u05E9\u05D5\u05E8\u05EA \u05D0\u05D9\u05E9\u05D9\u05EA</term><term name="letter" form="short">\u05DE\u05DB\u05EA\u05D1</term></terms></locale><locale xml:lang="hr"><terms><term name="letter">osobna komunikacija</term><term name="letter" form="short">pismo</term></terms></locale><locale xml:lang="hu"><terms><term name="letter">szem\xE9lyes kommunik\xE1ci\xF3</term><term name="letter" form="short">lev\xE9l</term></terms></locale><locale xml:lang="id"><terms><term name="letter">komunikasi pribadi</term><term name="letter" form="short">surat</term></terms></locale><locale xml:lang="is"><terms><term name="letter">pers\xF3nuleg samskipti</term><term name="letter" form="short">br\xE9f</term></terms></locale><locale xml:lang="it"><terms><term name="letter">comunicazione personale</term><term name="letter" form="short">lettera</term></terms></locale><locale xml:lang="ja"><terms><term name="letter">\u500B\u4EBA\u7684\u306A\u3084\u308A\u53D6\u308A</term><term name="letter" form="short">\u624B\u7D19</term></terms></locale><locale xml:lang="ko"><terms><term name="letter">\uAC1C\uC778 \uC11C\uC2E0</term><term name="letter" form="short">\uD3B8\uC9C0</term></terms></locale><locale xml:lang="la"><terms><term name="letter"/><term name="letter" form="short">epistula</term></terms></locale><locale xml:lang="lt"><terms><term name="letter">communicationis personalis</term><term name="letter" form="short"/></terms></locale><locale xml:lang="lv"><terms><term name="letter">person\u012Bga komunik\u0101cija</term><term name="letter" form="short">v\u0113stule</term></terms></locale><locale xml:lang="mn"><terms><term name="letter">\u0445\u0443\u0432\u0438\u0439\u043D \u0445\u0430\u0440\u0438\u043B\u0446\u0430\u0430 \u0445\u043E\u043B\u0431\u043E\u043E</term><term name="letter" form="short">\u0437\u0430\u0445\u0438\u0430</term></terms></locale><locale xml:lang="nb"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="nl"><terms><term name="et-al">et al.</term><term name="letter">persoonlijke communicatie</term><term name="letter" form="short">brief</term></terms></locale><locale xml:lang="nn"><terms><term name="et-al">et al.</term><term name="letter">personlig kommunikasjon</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="pl"><terms><term name="letter">osobista komunikacja</term><term name="letter" form="short">list</term></terms></locale><locale xml:lang="pt"><terms><term name="letter">comunica\xE7\xE3o pessoal</term><term name="letter" form="short">carta</term></terms></locale><locale xml:lang="ro"><terms><term name="letter">comunicare personal\u0103</term><term name="letter" form="short">scrisoare</term></terms></locale><locale xml:lang="ru"><terms><term name="letter">\u043B\u0438\u0447\u043D\u0430\u044F \u043F\u0435\u0440\u0435\u043F\u0438\u0441\u043A\u0430</term><term name="letter" form="short">\u043F\u0438\u0441\u044C\u043C\u043E</term></terms></locale><locale xml:lang="sk"><terms><term name="letter">osobn\xE1 komunik\xE1cia</term><term name="letter" form="short">list</term></terms></locale><locale xml:lang="sl"><terms><term name="letter">osebna komunikacija</term><term name="letter" form="short">pismo</term></terms></locale><locale xml:lang="sr"><terms><term name="letter">\u043B\u0438\u0447\u043D\u0430 \u043A\u043E\u043C\u0443\u043D\u0438\u043A\u0430\u0446\u0438\u0458\u0430</term><term name="letter" form="short">\u043F\u0438\u0441\u043C\u043E</term></terms></locale><locale xml:lang="sv"><terms><term name="letter">personlig kommunikation</term><term name="letter" form="short">brev</term></terms></locale><locale xml:lang="th"><terms><term name="letter">\u0E01\u0E32\u0E23\u0E2A\u0E37\u0E48\u0E2D\u0E2A\u0E32\u0E23\u0E2A\u0E48\u0E27\u0E19\u0E1A\u0E38\u0E04\u0E04\u0E25</term><term name="letter" form="short">\u0E08\u0E14\u0E2B\u0E21\u0E32\u0E22</term></terms></locale><locale xml:lang="tr"><terms><term name="letter">ki\u015Fisel ileti\u015Fim</term><term name="letter" form="short">mektup</term></terms></locale><locale xml:lang="uk"><terms><term name="letter">\u043E\u0441\u043E\u0431\u0438\u0441\u0442\u0435 \u0441\u043F\u0456\u043B\u043A\u0443\u0432\u0430\u043D\u043D\u044F</term><term name="letter" form="short">\u043B\u0438\u0441\u0442</term></terms></locale><locale xml:lang="vi"><terms><term name="letter">giao ti\u1EBFp c\xE1 nh\xE2n</term><term name="letter" form="short">th\u01B0</term></terms></locale><locale xml:lang="zh-CN"><terms><term name="letter">\u7684\u79C1\u4EBA\u4EA4\u6D41</term><term name="letter" form="short">\u4FE1\u51FD</term></terms></locale><locale xml:lang="zh-TW"><terms><term name="letter">\u79C1\u4EBA\u901A\u8A0A</term><term name="letter" form="short">\u4FE1\u51FD</term></terms></locale><!-- General categories of item types:Periodical: article-journal article-magazine article-newspaper post-weblog review review-bookPeriodical or Booklike: paper-conferenceBooklike: article book broadcast chapter dataset entry entry-dictionary entry-encyclopedia figure graphic interview manuscript map motion_picture musical_score pamphlet patent personal_communication report song speech thesis post webpageLegal: bill legal_case legislation treaty--><!-- APA references contain four parts: author, date, title, source --><macro name="author-bib"><names variable="composer" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></if></choose></if></choose><!-- Test for editortranslator and put that first as that becomes available --><names variable="editor" delimiter=", "><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="editorial-director"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><names variable="collection-editor"><name name-as-sort-order="all" and="symbol" sort-separator=", " initialize-with=". " delimiter=", " delimiter-precedes-last="always"/><label form="short" prefix=" (" suffix=")" text-case="title"/></names><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/></group></if><else><text macro="title-and-descriptions"/></else></choose></substitute></names></macro><macro name="author-intext"><choose><if type="bill legal_case legislation treaty" match="any"><text macro="title-intext"/></if><else-if type="interview personal_communication" match="any"><choose><!-- These variables indicate that the letter is retrievable by the reader. If not, then use the APA in-text-only personal communication format --><if variable="archive container-title DOI publisher URL" match="none"><group delimiter=", "><names variable="author"><name and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names><!-- Replace with term="personal-communication" if that becomes available --><text term="letter"/></group></if><else><names variable="author" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><text macro="title-intext"/></substitute></names></else></choose></else-if><else><names variable="composer" delimiter=", "><name form="short" and="symbol" delimiter=", " initialize-with=". "/><substitute><names variable="author"/><names variable="illustrator"/><names variable="director"/><choose><if variable="container-title"><choose><if type="book entry entry-dictionary entry-encyclopedia" match="any"><text macro="title-intext"/></if></choose></if></choose><names variable="editor"/><names variable="editorial-director"/><text macro="title-intext"/></substitute></names></else></choose></macro><macro name="date-bib"><group delimiter=" " prefix="(" suffix=")"><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/><choose><if type="article-magazine article-newspaper broadcast interview motion_picture pamphlet personal_communication post post-weblog song speech webpage" match="any"><!-- Many video and audio examples in manual give full dates. Err on the side of too much information. --><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if><else-if type="paper-conference"><!-- Capture 'speech' stored as 'paper-conference' --><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><date variable="issued"><date-part prefix=", " name="month"/><date-part prefix=" " name="day"/></date></if></choose></else-if><!-- Only year: article article-journal book chapter entry entry-dictionary entry-encyclopedia dataset figure graphic manuscript map musical_score paper-conference[published] patent report review review-book thesis --></choose></if><else-if variable="status"><group><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></group></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></group></group></macro><macro name="date-sort-group"><!-- APA sorts 1. no-date items, 2. items with dates, 3. in-press (status) items --><choose><if variable="issued"><text value="1"/></if><else-if variable="status"><text value="2"/></else-if><else><text value="0"/></else></choose></macro><macro name="date-sort-date"><date variable="issued" form="numeric"/></macro><macro name="date-intext"><choose><if variable="issued"><group delimiter="/"><group delimiter=" "><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group><group delimiter=" "><choose><if is-uncertain-date="issued"><text term="circa" form="short"/></if></choose><group><choose><if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><!-- These variables indicate that the communication is retrievable by the reader. If not, then use the in-text-only personal communication format --><date variable="issued" form="text"/></if><else><date variable="issued"><date-part name="year"/></date></else></choose></if><else><date variable="issued"><date-part name="year"/></date></else></choose><text variable="year-suffix"/></group></group></group></if><else-if variable="status"><text variable="status" text-case="lowercase"/><text variable="year-suffix" prefix="-"/></else-if><else><text term="no date" form="short"/><text variable="year-suffix" prefix="-"/></else></choose></macro><!-- APA has two description elements following the title:title (parenthetical) [bracketed]  --><macro name="title-and-descriptions"><choose><if variable="title"><group delimiter=" "><text macro="title"/><text macro="parenthetical"/><text macro="bracketed"/></group></if><else><group delimiter=" "><text macro="bracketed"/><text macro="parenthetical"/></group></else></choose></macro><macro name="title"><choose><if type="post webpage" match="any"><!-- Webpages are always italicized --><text variable="title" font-style="italic"/></if><else-if variable="container-title" match="any"><!-- Other types are italicized based on presence of container-title.Assume that review and review-book are published in periodicals/blogs,not just on a web page (ex. 69) --><text variable="title"/></else-if><else><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text variable="title" font-style="italic"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=": " font-style="italic"><text variable="title"/><!-- Replace with volume-title as that becomes available --><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></if><else><text variable="title" font-style="italic"/></else></choose></else-if><else><group delimiter=": " font-style="italic"><text variable="title"/><!-- Replace with volume-title as that becomes available --><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></else></choose></else></choose></macro><macro name="title-intext"><choose><if variable="title" match="none"><text macro="bracketed-intext" prefix="[" suffix="]"/></if><else-if type="bill"><!-- If a bill has no number or container-title, assume it is a hearing; italic --><choose><if variable="number container-title" match="none"><text variable="title" form="short" font-style="italic" text-case="title"/></if><else-if variable="title"><text variable="title" form="short" text-case="title"/></else-if><else><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none"><!-- Replace with label variable="number" as that becomes available --><text term="issue" form="short"/></if></choose><text variable="number"/></group></group></else></choose></else-if><else-if type="legal_case" match="any"><!-- Cases are italicized --><text variable="title" font-style="italic"/></else-if><else-if type="legislation treaty" match="any"><!-- Legislation and treaties not italicized or quoted --><text variable="title" form="short" text-case="title"/></else-if><else-if type="post webpage" match="any"><!-- Webpages are always italicized --><text variable="title" form="short" font-style="italic" text-case="title"/></else-if><else-if variable="container-title" match="any"><!-- Other types are italicized or quoted based on presence of container-title. As in title macro. --><text variable="title" form="short" quotes="true" text-case="title"/></else-if><else><text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="parenthetical"><!-- (Secondary contributors; Database location; Genre no. 123; Report Series 123, Version, Edition, Volume, Page) --><group prefix="(" suffix=")"><choose><if type="patent"><!-- authority: U.S. ; genre: patent ; number: 123,445 --><group delimiter=" "><text variable="authority" form="short"/><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else><!-- This should be localized --><text value="patent" text-case="capitalize-first"/></else></choose><group delimiter=" "><!-- Replace with label variable="number" if that becomes available --><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></group></if><else-if type="post webpage" match="any"><!-- For post webpage, container-title is treated as publisher --><group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else-if><else-if variable="container-title"><group delimiter="; "><text macro="secondary-contributors"/><choose><if type="broadcast graphic map motion_picture song" match="any"><!-- For audiovisual media, number information comes after title, not container-title --><text macro="number"/></if></choose></group></else-if><else><group delimiter="; "><text macro="secondary-contributors"/><text macro="database-location"/><text macro="number"/><text macro="locators-booklike"/></group></else></choose></group></macro><macro name="parenthetical-container"><choose><if variable="container-title" match="any"><group prefix="(" suffix=")"><group delimiter="; "><text macro="database-location"/><choose><if type="broadcast graphic map motion_picture song" match="none"><!-- For audiovisual media, number information comes after title, not container-title --><text macro="number"/></if></choose><text macro="locators-booklike"/></group></group></if></choose></macro><macro name="bracketed"><!-- [Descriptive information] --><!-- If there is a number, genre is already printed in macro="number" --><group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any"><!-- Reviewed item --><group delimiter="; "><group delimiter=", "><group delimiter=" "><!-- Assume that genre is entered as 'Review of the book' or similar --><choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else><!-- Replace with term="review" as that becomes available --><text value="Review of"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else><!-- Replace with term="review" as that becomes available --><text value="Review of"/></else></choose></else></choose><text macro="reviewed-title"/></group><names variable="reviewed-author"><label form="verb-short" suffix=" "/><name and="symbol" initialize-with=". " delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else-if type="thesis"><!-- Thesis type and institution --><group delimiter="; "><choose><if variable="number" match="none"><group delimiter=", "><text variable="genre" text-case="capitalize-first"/><choose><if variable="archive DOI URL" match="any"><!-- Include the university in brackets if thesis is published --><text variable="publisher"/></if></choose></group></if></choose><text variable="medium" text-case="capitalize-first"/></group></else-if><else-if variable="interviewer" type="interview" match="any"><!-- Interview information --><choose><if variable="title"><text macro="format"/></if><else-if variable="genre"><group delimiter="; "><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><group delimiter=" "><text term="author" form="verb"/><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/></names></group></group></group></else-if><else-if variable="interviewer"><group delimiter="; "><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/></names><text variable="medium" text-case="capitalize-first"/></group></else-if><else><text macro="format"/></else></choose></else-if><else-if type="personal_communication"><!-- Letter information --><choose><if variable="recipient"><group delimiter="; "><group delimiter=" "><choose><if variable="number" match="none"><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></if><else><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></if><else><text macro="format"/></else></choose></else-if><else-if variable="composer" type="song" match="all"><!-- Performer of classical music works --><group delimiter="; "><choose><if variable="number" match="none"><group delimiter=" "><choose><if variable="genre"><text variable="genre" text-case="capitalize-first"/><!-- Replace prefix with performer label as that becomes available --><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/><!-- Replace prefix with performer label as that becomes available --><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else-if><else><!-- Replace prefix with performer label as that becomes available --><names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></if><else><group delimiter=" "><choose><if variable="medium"><text variable="medium" text-case="capitalize-first"/><!-- Replace prefix with performer label as that becomes available --><names variable="author" prefix="recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></if><else><!-- Replace prefix with performer label as that becomes available --><names variable="author" prefix="Recorded by "><name and="symbol" initialize-with=". " delimiter=", "/></names></else></choose></group></else></choose><choose><if variable="genre" match="any"><choose><if variable="number" match="none"><text variable="medium" text-case="capitalize-first"/></if></choose></if></choose></group></else-if><else-if variable="container-title" match="none"><!-- Other description --><text macro="format"/></else-if><else><!-- For conference presentations, chapters in reports, software, place bracketed after the container title --><choose><if type="paper-conference speech" match="any"><choose><if variable="collection-editor editor editorial-director issue page volume" match="any"><text macro="format"/></if></choose></if><else-if type="book"><choose><if variable="version" match="none"><text macro="format"/></if></choose></else-if><else-if type="report" match="none"><text macro="format"/></else-if></choose></else></choose></group></macro><macro name="bracketed-intext"><group prefix="[" suffix="]"><choose><if variable="reviewed-author reviewed-title" type="review review-book" match="any"><!-- This should be localized --><text macro="reviewed-title-intext" prefix="Review of "/></if><else-if variable="interviewer" type="interview" match="any"><names variable="interviewer"><label form="verb" suffix=" " text-case="capitalize-first"/><name and="symbol" initialize-with=". " delimiter=", "/><substitute><text macro="format-intext"/></substitute></names></else-if><else-if type="personal_communication"><!-- Letter information --><choose><if variable="recipient"><group delimiter=" "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if><else><text term="letter" form="short" text-case="capitalize-first"/></else></choose><names variable="recipient" delimiter=", "><label form="verb" suffix=" "/><name and="symbol" delimiter=", "/></names></group></if><else><text macro="format-intext"/></else></choose></else-if><else><text macro="format-intext"/></else></choose></group></macro><macro name="bracketed-container"><group prefix="[" suffix="]"><choose><if type="paper-conference speech" match="any"><!-- Conference presentations should describe the session [container] in bracketed unless published in a proceedings --><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><text macro="format"/></if></choose></if><else-if type="book" variable="version" match="all"><!-- For entries in mobile app reference works, place bracketed after the container-title --><text macro="format"/></else-if><else-if type="report"><!-- For chapters in reports, place bracketed after the container title --><text macro="format"/></else-if></choose></group></macro><macro name="secondary-contributors"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><text macro="secondary-contributors-periodical"/></if><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><text macro="secondary-contributors-booklike"/></if><else><text macro="secondary-contributors-periodical"/></else></choose></else-if><else><text macro="secondary-contributors-booklike"/></else></choose></macro><macro name="secondary-contributors-periodical"><group delimiter="; "><choose><if variable="title"><names variable="interviewer" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose><names variable="translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></macro><macro name="secondary-contributors-booklike"><group delimiter="; "><choose><if variable="title"><names variable="interviewer"><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></if></choose><!-- When editortranslator becomes available, add a test: variable="editortranslator" match="none"; then print translator --><choose><if type="post webpage" match="none"><!-- Webpages treat container-title like publisher --><choose><if variable="container-title" match="none"><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></if></choose></if><else><group delimiter="; "><names variable="container-author"><label form="verb-short" suffix=" " text-case="title"/><name and="symbol" initialize-with=". " delimiter=", "/></names><names variable="editor translator" delimiter="; "><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" prefix=", " text-case="title"/></names></group></else></choose></group></macro><macro name="database-location"><choose><if variable="archive-place" match="none"><!-- With \`archive-place\`: physical archives. Without: online archives. --><!-- Add archive_collection as that becomes available --><text variable="archive_location"/></if></choose></macro><macro name="number"><choose><if variable="number"><group delimiter=", "><group delimiter=" "><text variable="genre" text-case="title"/><choose><if is-numeric="number"><!-- Replace with label variable="number" if that becomes available --><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></if><else><text variable="number"/></else></choose></group><choose><if type="thesis"><choose><!-- Include the university in brackets if thesis is published --><if variable="archive DOI URL" match="any"><text variable="publisher"/></if></choose></if></choose></group></if></choose></macro><macro name="locators-booklike"><choose><if type="article-journal article-magazine article-newspaper broadcast interview patent post post-weblog review review-book speech webpage" match="any"/><else-if type="paper-conference"><choose><if variable="collection-editor editor editorial-director" match="any"><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></if></choose></else-if><else><group delimiter=", "><text macro="version"/><text macro="edition"/><text macro="volume-booklike"/></group></else></choose></macro><macro name="version"><choose><if is-numeric="version"><group delimiter=" "><!-- replace with label variable="version" if that becomes available --><text term="version" text-case="capitalize-first"/><text variable="version"/></group></if><else><text variable="version"/></else></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><label variable="edition" form="short"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="volume-booklike"><group delimiter=", "><!-- Report series [ex. 52] --><choose><if type="report"><group delimiter=" "><text variable="collection-title" text-case="title"/><text variable="collection-number"/></group></if></choose><choose><if variable="volume" match="any"><choose><!-- Non-numeric volumes are already printed as part of the book title --><if is-numeric="volume" match="none"/><else><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><number variable="volume" form="numeric"/></group></else></choose></if><else><group><!-- Replace with label variable="number-of-volumes" if that becomes available --><text term="volume" form="short" text-case="capitalize-first" suffix=" "/><text term="page-range-delimiter" prefix="1"/><number variable="number-of-volumes" form="numeric"/></group></else></choose><group delimiter=" "><label variable="issue" text-case="capitalize-first"/><text variable="issue"/></group><group delimiter=" "><label variable="page" form="short" suffix=" "/><text variable="page"/></group></group></macro><macro name="reviewed-title"><choose><if variable="reviewed-title"><!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --><text variable="reviewed-title" font-style="italic"/></if><else><!-- Assume title is title of reviewed work --><text variable="title" font-style="italic"/></else></choose></macro><macro name="reviewed-title-intext"><choose><if variable="reviewed-title"><!-- Not possible to distinguish TV series episode from other reviewed works [Ex. 69] --><text variable="reviewed-title" form="short" font-style="italic" text-case="title"/></if><else><!-- Assume title is title of reviewed work --><text variable="title" form="short" font-style="italic" text-case="title"/></else></choose></macro><macro name="format"><choose><if variable="genre medium" match="any"><group delimiter="; "><choose><if variable="number" match="none"><text variable="genre" text-case="capitalize-first"/></if></choose><text variable="medium" text-case="capitalize-first"/></group></if><!-- Generic labels for specific types --><!-- These should be localized when possible --><else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all"><!-- Replace with type="software" and term="software" as that becomes available --><text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro><macro name="format-intext"><choose><if variable="genre" match="any"><text variable="genre" text-case="capitalize-first"/></if><else-if variable="medium"><text variable="medium" text-case="capitalize-first"/></else-if><!-- Generic labels for specific types --><!-- These should be localized when possible --><else-if type="dataset"><text value="Data set"/></else-if><else-if type="book" variable="version" match="all"><!-- Replace with type="software" and term="software" as that becomes available --><text value="Computer software"/></else-if><else-if type="interview personal_communication" match="any"><choose><if variable="archive container-title DOI publisher URL" match="none"><text term="letter" text-case="capitalize-first"/></if><else-if type="interview"><text term="interview" text-case="capitalize-first"/></else-if></choose></else-if><else-if type="map"><text value="Map"/></else-if></choose></macro><!-- APA 'source' element contains four parts:container, event, publisher, access --><macro name="container"><choose><if type="article-journal article-magazine article-newspaper post-weblog review review-book" match="any"><!-- Periodical items --><text macro="container-periodical"/></if><else-if type="paper-conference"><!-- Determine if paper-conference is a periodical or booklike --><choose><if variable="editor editorial-director collection-editor container-author" match="any"><text macro="container-booklike"/></if><else><text macro="container-periodical"/></else></choose></else-if><else-if type="post webpage" match="none"><!-- post and webpage treat container-title like publisher --><text macro="container-booklike"/></else-if></choose></macro><macro name="container-periodical"><group delimiter=". "><group delimiter=", "><text variable="container-title" font-style="italic" text-case="title"/><choose><if variable="volume"><group><text variable="volume" font-style="italic"/><text variable="issue" prefix="(" suffix=")"/></group></if><else><text variable="issue" font-style="italic"/></else></choose><choose><if variable="page"><text variable="page"/></if><else><!-- Ex. 6: Journal article with article number or eLocator --><!-- This should be localized --><text variable="number" prefix="Article "/></else></choose></group><choose><if variable="issued"><choose><if variable="issue page volume" match="none"><text variable="status" text-case="capitalize-first"/></if></choose></if></choose></group></macro><macro name="container-booklike"><choose><if variable="container-title" match="any"><group delimiter=" "><text term="in" text-case="capitalize-first"/><group delimiter=", "><names variable="editor translator" delimiter=", &amp; "><!-- Change to editortranslator and move editor to substitute as that becomes available --><name and="symbol" initialize-with=". " delimiter=", "/><label form="short" text-case="title" prefix=" (" suffix=")"/><substitute><names variable="editorial-director"/><names variable="collection-editor"/><names variable="container-author"/></substitute></names><group delimiter=": " font-style="italic"><text variable="container-title"/><!-- Replace with volume-title as that becomes available --><choose><if is-numeric="volume" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose></group></group><text macro="parenthetical-container"/><text macro="bracketed-container"/></group></if></choose></macro><macro name="publisher"><group delimiter="; "><choose><if type="thesis"><choose><if variable="archive DOI URL" match="none"><text variable="publisher"/></if></choose></if><else-if type="post webpage" match="any"><!-- For websites, treat container title like publisher --><group delimiter="; "><text variable="container-title" text-case="title"/><text variable="publisher"/></group></else-if><else-if type="paper-conference"><!-- For paper-conference, don't print publisher if in a journal-like proceedings --><choose><if variable="collection-editor editor editorial-director" match="any"><text variable="publisher"/></if></choose></else-if><else-if type="article-journal article-magazine article-newspaper post-weblog" match="none"><text variable="publisher"/></else-if></choose><group delimiter=", "><choose><if variable="archive-place"><!-- With \`archive-place\`: physical archives. Without: online archives. --><!-- For physical archives, print the location before the archive name.For electronic archives, these are printed in macro="description". --><!-- Split "archive_location" into "archive_collection" and "archive_location" as that becomes available --><!-- Must test for archive_collection:With collection: archive_collection (archive_location), archive, archive-placeNo collection: archive (archive_location), archive-place--><text variable="archive_location"/></if></choose><text variable="archive"/><text variable="archive-place"/></group></group></macro><macro name="access"><choose><if variable="DOI" match="any"><text variable="DOI" prefix="https://doi.org/"/></if><else-if variable="URL"><group delimiter=" "><choose><if variable="issued status" match="none"><group delimiter=" "><text term="retrieved" text-case="capitalize-first"/><date variable="accessed" form="text" suffix=","/><text term="from"/></group></if></choose><text variable="URL"/></group></else-if></choose></macro><macro name="event"><choose><if variable="event"><!-- To prevent Zotero from printing event-place due to its double-mapping of all 'place' toboth publisher-place and event-place. Remove this 'choose' when that is changed. --><choose><if variable="collection-editor editor editorial-director issue page volume" match="none"><!-- Don't print event info if published in a proceedings --><group delimiter=", "><text variable="event"/><text variable="event-place"/></group></if></choose></if></choose></macro><!-- After 'source', APA also prints publication history (original publication, reprint info, retraction info) --><macro name="publication-history"><choose><if type="patent" match="none"><group prefix="(" suffix=")"><choose><if variable="references"><!-- This provides the option for more elaborate description of publication history, such as full "reprinted" references(examples 11, 43, 44) or retracted references --><text variable="references"/></if><else><group delimiter=" "><text value="Original work published"/><choose><if is-uncertain-date="original-date"><text term="circa" form="short"/></if></choose><date variable="original-date"><date-part name="year"/></date></group></else></choose></group></if><else><text variable="references" prefix="(" suffix=")"/></else></choose></macro><!-- Legal citations have their own rules --><macro name="legal-cites"><choose><if type="legal_case"><group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/></group><text variable="references"/></group><text macro="access"/></group></if><else-if type="bill"><!-- Currently designed to handle bills, resolutions, hearings, rederal reports. --><group delimiter=". "><group delimiter=", "><choose><if variable="number container-title" match="none"><!-- If no number or container-title, then assume it is a hearing --><text variable="title" font-style="italic"/></if><else><text variable="title"/></else></choose><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><choose><if variable="number container-title" match="none"><!-- If no number or container-title, then assume it is a hearing --><names variable="author" prefix="(testimony of " suffix=")"><name and="symbol" delimiter=", "/></names></if><else><text variable="status" prefix="(" suffix=")"/></else></choose></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="legislation"><!-- Currently designed to handle statutes, codified regulations, executive orders.For uncodified regulations, assume future code section is in status. --><group delimiter=". "><group delimiter=", "><text variable="title"/><group delimiter=" "><text macro="container-legal"/><text macro="date-legal"/><text variable="status" prefix="(" suffix=")"/></group><text variable="references"/></group><text macro="access"/></group></else-if><else-if type="treaty"><!-- APA generally defers to Bluebook for legal citations, but diverges withoutexplanation for treaty items. The Bluebook format that was used in APA 6thed. is used here. --><group delimiter=", "><text variable="title" text-case="title"/><names variable="author"><name initialize-with="." form="short" delimiter="-"/></names><text macro="date-legal"/><text macro="container-legal"/><text macro="access"/></group></else-if></choose></macro><macro name="date-legal"><choose><if type="legal_case"><group prefix="(" suffix=")" delimiter=" "><text variable="authority"/><choose><if variable="container-title" match="any"><!-- Print only year for cases published in reporters--><date variable="issued" form="numeric" date-parts="year"/></if><else><date variable="issued" form="text"/></else></choose></group></if><else-if type="bill legislation" match="any"><group prefix="(" suffix=")" delimiter=" "><group delimiter=" "><date variable="original-date"><date-part name="year"/></date><text term="and" form="symbol"/></group><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="treaty"><date variable="issued" form="text"/></else-if></choose></macro><macro name="container-legal"><!-- Expect legal item container-titles to be stored in short form --><choose><if type="legal_case"><group delimiter=" "><choose><if variable="container-title"><group delimiter=" "><text variable="volume"/><text variable="container-title"/><group delimiter=" "><!-- Change to label variable="section" as that becomes available --><text term="section" form="symbol"/><text variable="section"/></group><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><text value="___"/></else></choose></group></if><else><group delimiter=" "><choose><if is-numeric="number"><!-- Replace with label variable="number" if that becomes available --><text term="issue" form="short" text-case="capitalize-first"/></if></choose><text variable="number"/></group></else></choose></group></if><else-if type="bill"><group delimiter=", "><group delimiter=" "><text variable="genre"/><group delimiter=" "><choose><if variable="chapter-number container-title" match="none"><!-- Replace with label variable="number" as that becomes available --><text term="issue" form="short"/></if></choose><text variable="number"/></group></group><text variable="authority"/><text variable="chapter-number"/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></else-if><else-if type="legislation"><choose><if variable="number"><!--There's a public law number--><group delimiter=", "><text variable="number" prefix="Pub. L. No. "/><group delimiter=" "><text variable="volume"/><text variable="container-title"/><text variable="page-first"/></group></group></if><else><group delimiter=" "><text variable="volume"/><text variable="container-title"/><choose><if variable="section"><group delimiter=" "><!-- Change to label variable="section" as that becomes available --><text term="section" form="symbol"/><text variable="section"/></group></if><else><text variable="page-first"/></else></choose></group></else></choose></else-if><else-if type="treaty"><group delimiter=" "><number variable="volume"/><text variable="container-title"/><choose><if variable="page page-first" match="any"><text variable="page-first"/></if><else><group delimiter=" "><!-- Replace with label variable="number" if that becomes available --><text term="issue" form="short" text-case="capitalize-first"/><text variable="number"/></group></else></choose></group></else-if></choose></macro><macro name="citation-locator"><group delimiter=" "><choose><if locator="chapter"><label variable="locator" text-case="capitalize-first"/></if><else><label variable="locator" form="short"/></else></choose><text variable="locator"/></group></macro><citation et-al-min="3" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year" givenname-disambiguation-rule="primary-name-with-initials"><sort><key macro="author-bib" names-min="3" names-use-first="1"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><text macro="author-intext"/><text macro="date-intext"/><text macro="citation-locator"/></group></layout></citation><bibliography hanging-indent="true" et-al-min="21" et-al-use-first="19" et-al-use-last="true" entry-spacing="0" line-spacing="2"><sort><key macro="author-bib"/><key macro="date-sort-group"/><key macro="date-sort-date" sort="ascending"/><key variable="status"/><key macro="title"/></sort><layout><choose><if type="bill legal_case legislation treaty" match="any"><!-- Legal items have different orders and delimiters --><choose><if variable="DOI URL" match="any"><text macro="legal-cites"/></if><else><text macro="legal-cites" suffix="."/></else></choose></if><else><group delimiter=" "><group delimiter=". " suffix="."><text macro="author-bib"/><text macro="date-bib"/><text macro="title-and-descriptions"/><text macro="container"/><text macro="event"/><text macro="publisher"/></group><text macro="access"/><text macro="publication-history"/></group></else></choose></layout></bibliography>
</style>
`,vancouver:`<?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" initialize-with-hyphen="false" page-range-format="minimal"><info><title>Vancouver</title><id>http://www.zotero.org/styles/vancouver</id><link href="http://www.zotero.org/styles/vancouver" rel="self"/><link href="http://www.nlm.nih.gov/bsd/uniform_requirements.html" rel="documentation"/><author><name>Michael Berkowitz</name><email>mberkowi@gmu.edu</email></author><contributor><name>Sean Takats</name><email>stakats@gmu.edu</email></contributor><contributor><name>Sebastian Karcher</name></contributor><category citation-format="numeric"/><category field="medicine"/><summary>Vancouver style as outlined by International Committee of Medical Journal Editors Uniform Requirements for Manuscripts Submitted to Biomedical Journals: Sample References</summary><updated>2022-04-14T13:48:43+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en"><date form="text" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><terms><term name="collection-editor" form="long"><single>editor</single><multiple>editors</multiple></term><term name="presented at">presented at</term><term name="available at">available from</term><term name="section" form="short">sect.</term></terms></locale><locale xml:lang="fr"><date form="text" delimiter=" "><date-part name="day"/><date-part name="month" form="short" strip-periods="true"/><date-part name="year"/></date></locale><macro name="author"><names variable="author"><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/><substitute><names variable="editor"/></substitute></names></macro><macro name="editor"><names variable="editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names></macro><macro name="chapter-marker"><choose><if type="chapter paper-conference entry-dictionary entry-encyclopedia" match="any"><text term="in" text-case="capitalize-first"/></if></choose></macro><macro name="publisher"><choose><!--discard publisher info for articles--><if type="article-journal article-magazine article-newspaper" match="none"><group delimiter=": " suffix=";"><choose><if type="thesis"><text variable="publisher-place" prefix="[" suffix="]"/></if><else-if type="speech"/><else><text variable="publisher-place"/></else></choose><text variable="publisher"/></group></if></choose></macro><macro name="access"><choose><if variable="URL"><group delimiter=": "><text term="available at" text-case="capitalize-first"/><text variable="URL"/></group></if></choose></macro><macro name="accessed-date"><choose><if variable="URL"><group prefix="[" suffix="]" delimiter=" "><text term="cited" text-case="lowercase"/><date variable="accessed" form="text"/></group></if></choose></macro><macro name="container-title"><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="any"><group suffix="." delimiter=" "><choose><if type="article-journal review review-book" match="any"><text variable="container-title" form="short" strip-periods="true"/></if><else><text variable="container-title" strip-periods="true"/></else></choose><choose><if variable="URL"><text term="internet" prefix="[" suffix="]" text-case="capitalize-first"/></if></choose></group><text macro="edition" prefix=" "/></if><!--add event-name and event-place once they become available--><else-if type="bill legislation" match="any"><group delimiter=", "><group delimiter=". "><text variable="container-title"/><group delimiter=" "><text term="section" form="short" text-case="capitalize-first"/><text variable="section"/></group></group><text variable="number"/></group></else-if><else-if type="speech"><group delimiter=": " suffix=";"><group delimiter=" "><text variable="genre" text-case="capitalize-first"/><text term="presented at"/></group><text variable="event"/></group></else-if><else><group delimiter=", " suffix="."><choose><if variable="collection-title" match="none"><group delimiter=" "><label variable="volume" form="short" text-case="capitalize-first"/><text variable="volume"/></group></if></choose><text variable="container-title"/></group></else></choose></macro><macro name="title"><text variable="title"/><choose><if type="article-journal article-magazine chapter paper-conference article-newspaper review review-book entry-dictionary entry-encyclopedia" match="none"><choose><if variable="URL"><text term="internet" prefix=" [" suffix="]" text-case="capitalize-first"/></if></choose><text macro="edition" prefix=". "/></if></choose><choose><if type="thesis"><text variable="genre" prefix=" [" suffix="]"/></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short"/></group></if><else><text variable="edition" suffix="."/></else></choose></macro><macro name="date"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><group suffix=";" delimiter=" "><date variable="issued" form="text"/><text macro="accessed-date"/></group></if><else-if type="bill legislation" match="any"><group delimiter=", "><date variable="issued" delimiter=" "><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><date variable="issued"><date-part name="year"/></date></group></else-if><else-if type="report"><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/></date><text macro="accessed-date" prefix=" "/></else-if><else-if type="patent"><group suffix="."><group delimiter=", "><text variable="number"/><date variable="issued"><date-part name="year"/></date></group><text macro="accessed-date" prefix=" "/></group></else-if><else-if type="speech"><group delimiter="; "><group delimiter=" "><date variable="issued" delimiter=" "><date-part name="year"/><date-part name="month" form="short" strip-periods="true"/><date-part name="day"/></date><text macro="accessed-date"/></group><text variable="event-place"/></group></else-if><else><group suffix="."><date variable="issued"><date-part name="year"/></date><text macro="accessed-date" prefix=" "/></group></else></choose></macro><macro name="pages"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="any"><text variable="page" prefix=":"/></if><else-if type="book" match="any"><text variable="number-of-pages" prefix=" "/><choose><if is-numeric="number-of-pages"><label variable="number-of-pages" form="short" prefix=" " plural="never"/></if></choose></else-if><else><group prefix=" " delimiter=" "><label variable="page" form="short" plural="never"/><text variable="page"/></group></else></choose></macro><macro name="journal-location"><choose><if type="article-journal article-magazine review review-book" match="any"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="collection-details"><choose><if type="article-journal article-magazine article-newspaper review review-book" match="none"><choose><if variable="collection-title"><group delimiter=" " prefix="(" suffix=")"><names variable="collection-editor" suffix="."><name sort-separator=" " initialize-with="" name-as-sort-order="all" delimiter=", " delimiter-precedes-last="always"/><label form="long" prefix=", "/></names><group delimiter="; "><text variable="collection-title"/><group delimiter=" "><label variable="volume" form="short"/><text variable="volume"/></group></group></group></if></choose></if></choose></macro><macro name="report-details"><choose><if type="report"><text variable="number" prefix="Report No.: "/></if></choose></macro><citation collapse="citation-number"><sort><key variable="citation-number"/></sort><layout prefix="(" suffix=")" delimiter=","><text variable="citation-number"/></layout></citation><bibliography et-al-min="7" et-al-use-first="6" second-field-align="flush"><layout><text variable="citation-number" suffix=". "/><group delimiter=". " suffix=". "><text macro="author"/><text macro="title"/></group><group delimiter=" " suffix=". "><group delimiter=": "><text macro="chapter-marker"/><group delimiter=" "><text macro="editor"/><text macro="container-title"/></group></group><text macro="publisher"/><group><text macro="date"/><text macro="journal-location"/><text macro="pages"/></group></group><text macro="collection-details" suffix=". "/><text macro="report-details" suffix=". "/><text macro="access"/></layout></bibliography>
</style>
`,harvard1:`<?xml version="1.0" encoding="utf-8"?>
<style xmlns="http://purl.org/net/xbiblio/csl" class="in-text" version="1.0" demote-non-dropping-particle="sort-only" default-locale="en-GB"><info><title>Cite Them Right 11th edition - Harvard</title><id>http://www.zotero.org/styles/harvard-cite-them-right</id><link href="http://www.zotero.org/styles/harvard-cite-them-right" rel="self"/><link href="http://www.zotero.org/styles/harvard-cite-them-right-10th-edition" rel="template"/><link href="http://www.citethemrightonline.com/" rel="documentation"/><author><name>Patrick O'Brien</name></author><category citation-format="author-date"/><category field="generic-base"/><summary>Harvard according to Cite Them Right, 11th edition.</summary><updated>2021-09-01T10:12:20+00:00</updated><rights license="http://creativecommons.org/licenses/by-sa/3.0/">This work is licensed under a Creative Commons Attribution-ShareAlike 3.0 License</rights></info><locale xml:lang="en-GB"><terms><term name="editor" form="short"><single>ed.</single><multiple>eds</multiple></term><term name="editortranslator" form="verb">edited and translated by</term><term name="edition" form="short">edn.</term></terms></locale><macro name="editor"><choose><if type="chapter paper-conference" match="any"><names variable="container-author" delimiter=", " suffix=", "><name and="text" initialize-with=". " delimiter=", " sort-separator=", " name-as-sort-order="all"/></names><choose><if variable="container-author" match="none"><names variable="editor translator" delimiter=", "><name and="text" initialize-with="." name-as-sort-order="all"/><label form="short" prefix=" (" suffix=")"/></names></if></choose></if></choose></macro><macro name="secondary-contributors"><choose><if type="chapter paper-conference" match="none"><names variable="editor translator" delimiter=". "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" initialize-with="."/></names></if><else-if variable="container-author" match="any"><names variable="editor translator" delimiter=". "><label form="verb" text-case="capitalize-first" suffix=" "/><name and="text" initialize-with=". " delimiter=", "/></names></else-if></choose></macro><macro name="author"><names variable="author"><name and="text" delimiter-precedes-last="never" initialize-with="." name-as-sort-order="all"/><label form="short" prefix=" (" suffix=")"/><et-al font-style="italic"/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="article-newspaper article-magazine" match="any"><text variable="container-title" text-case="title" font-style="italic"/></if><else><text macro="title"/></else></choose></substitute></names></macro><macro name="author-short"><names variable="author"><name form="short" and="text" delimiter=", " delimiter-precedes-last="never" initialize-with=". "/><et-al font-style="italic"/><substitute><names variable="editor"/><names variable="translator"/><choose><if type="article-newspaper article-magazine" match="any"><text variable="container-title" text-case="title" font-style="italic"/></if><else><text macro="title"/></else></choose></substitute></names></macro><macro name="access"><choose><if variable="DOI"><text variable="DOI" prefix="doi:"/></if><else-if variable="URL"><text term="available at" suffix=": " text-case="capitalize-first"/><text variable="URL"/><group prefix=" (" delimiter=": " suffix=")"><text term="accessed" text-case="capitalize-first"/><date form="text" variable="accessed"><date-part name="day"/><date-part name="month"/><date-part name="year"/></date></group></else-if></choose></macro><macro name="number-volumes"><choose><if variable="volume" match="none"><group delimiter=" " prefix="(" suffix=")"><text variable="number-of-volumes"/><label variable="volume" form="short" strip-periods="true"/></group></if></choose></macro><macro name="title"><choose><if type="bill book legal_case legislation motion_picture report song thesis webpage graphic" match="any"><group delimiter=". "><group delimiter=" "><group delimiter=" "><text variable="title" font-style="italic"/><text variable="medium" prefix="[" suffix="]"/></group><text macro="number-volumes"/></group><text macro="edition"/></group></if><else><text variable="title" form="long" quotes="true"/></else></choose></macro><macro name="publisher"><choose><if type="thesis"><group delimiter=". "><text variable="genre"/><text variable="publisher"/></group></if><else-if type="report"><group delimiter=". "><group delimiter=" "><text variable="genre"/><text variable="number"/></group><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></group></else-if><else-if type="article-journal article-newspaper article-magazine" match="none"><group delimiter=" "><group delimiter=", "><choose><if type="speech" variable="event" match="any"><text variable="event" font-style="italic"/></if></choose><group delimiter=": "><text variable="publisher-place"/><text variable="publisher"/></group></group><group prefix="(" suffix=")" delimiter=", "><text variable="collection-title"/><text variable="collection-number"/></group></group></else-if></choose></macro><macro name="year-date"><choose><if variable="issued"><date variable="issued"><date-part name="year"/></date><text variable="year-suffix"/></if><else><text term="no date"/><text variable="year-suffix" prefix=" "/></else></choose></macro><macro name="locator"><choose><if type="article-journal"><text variable="volume"/><text variable="issue" prefix="(" suffix=")"/></if></choose></macro><macro name="published-date"><choose><if type="article-newspaper article-magazine post-weblog speech" match="any"><date variable="issued"><date-part name="day" suffix=" "/><date-part name="month" form="long"/></date></if></choose></macro><macro name="pages"><choose><if type="chapter paper-conference article-journal article article-magazine article-newspaper book review review-book report" match="any"><group delimiter=" "><label variable="page" form="short"/><text variable="page"/></group></if></choose></macro><macro name="container-title"><choose><if variable="container-title"><group delimiter=". "><group delimiter=" "><text variable="container-title" font-style="italic"/><choose><if type="article article-journal" match="any"><choose><if match="none" variable="page volume"><text value="Preprint" prefix="[" suffix="]"/></if></choose></if></choose></group><text macro="edition"/></group></if></choose></macro><macro name="edition"><choose><if is-numeric="edition"><group delimiter=" "><number variable="edition" form="ordinal"/><text term="edition" form="short" strip-periods="true"/></group></if><else><text variable="edition"/></else></choose></macro><macro name="container-prefix"><choose><if type="chapter paper-conference" match="any"><text term="in"/></if></choose></macro><citation et-al-min="4" et-al-use-first="1" disambiguate-add-year-suffix="true" disambiguate-add-names="true" disambiguate-add-givenname="true" collapse="year"><sort><key macro="year-date"/></sort><layout prefix="(" suffix=")" delimiter="; "><group delimiter=", "><group delimiter=", "><text macro="author-short"/><text macro="year-date"/></group><group><label variable="locator" form="short" suffix=" "/><text variable="locator"/></group></group></layout></citation><bibliography and="text" et-al-min="4" et-al-use-first="1"><sort><key macro="author"/><key macro="year-date"/><key variable="title"/></sort><layout suffix="."><group delimiter=". "><group delimiter=" "><text macro="author"/><text macro="year-date" prefix="(" suffix=")"/><group delimiter=", "><text macro="title"/><group delimiter=" "><text macro="container-prefix"/><text macro="editor"/><text macro="container-title"/></group></group></group><text macro="secondary-contributors"/><text macro="publisher"/></group><group delimiter=", " prefix=", "><text macro="locator"/><text macro="published-date"/><text macro="pages"/></group><text macro="access" prefix=". "/></layout></bibliography>
</style>
`};var tr=new ae.Register(xo);var Je=Oe(Ns());var wo=Symbol.for("proxied"),bc=function(e){let t=function(r,i){if(r.sys.wrapBibliographyEntry){let[s,n]=r.sys.wrapBibliographyEntry(this.system_id);i=[s,i,n].join("")}return e.call(this,r,i)};return t[wo]=!0,t};for(let e in Je.default.Output.Formats){let t=Je.default.Output.Formats[e]["@bibliography/entry"];!t||t[wo]||(Je.default.Output.Formats[e]["@bibliography/entry"]=bc(t))}function vc(e){if(We.has(e))return We.get(e);let t=e.replace("-","_");return We.has(t)?We.get(t):{}}var Cs={},yc=function(e,t,r,i,s){let n=`${e}|${t}`,o;return Cs[n]instanceof Je.default.Engine?(o=Cs[n],o.sys.retrieveItem=i,o.sys.wrapBibliographyEntry=void 0,o.updateItems([])):o=Cs[n]=new Je.default.Engine({retrieveLocale:s,retrieveItem:i},r,t,!0),o},_c=function(e,t,r,i){if(!Je.default.Output.Formats[i]||!Je.default.Output.Formats[i]["@bibliography/entry"])throw new TypeError(`Cannot find format '${i}'`);let s=e.reduce((u,m)=>(u[m.id]=m,u),{}),n=tr.get(tr.has(t)?t:"apa");r=We.has(r)?r:void 0;let l=yc(t,r,n,function(u){if(Object.prototype.hasOwnProperty.call(s,u))return s[u];throw new Error(`Cannot find entry with id '${u}'`)},vc);return l.setOutputFormat(i),l.opt.development_extensions.wrap_url_and_doi=!1,l},Rt=_c;var xc=(e,t,r)=>e.replace(/^\s*<[a-z]+/i,`$& data-${t}="${r}"`),Ao=(e,t)=>xc(e,"csl-entry-id",t);var To=(e,t)=>typeof t=="function"?t(e):t||"";function Ds(e,t={}){let{template:r="apa",lang:i,format:s="text",nosort:n=!1}=t,o=t.entry?[].concat(t.entry):e.map(({id:v})=>v);e=ae.downgradeCsl(e);let l=Rt(e,r,i,s),u=l.updateItems(o,n);if(t.append||t.prepend){let v=e.reduce((f,y)=>(f[y.id]=y,f),{});l.sys.wrapBibliographyEntry=function(f){let y=v[f];return[To(y,t.prepend),To(y,t.append)]}}t.hyperlinks&&(l.opt.development_extensions.wrap_url_and_doi=!0);let m=l.makeBibliography(),[{bibstart:c,bibend:h},p]=m,d=p.map((v,f)=>Ao(v,u[f]));return t.asEntryArray?d.map((v,f)=>[u[f],v]):c+d.join("")+h}function Ec(e){return typeof e=="object"?e:{id:e}}function So(e){return e.citationItems?e:{citationItems:[].concat(e).map(Ec),properties:{noteIndex:0}}}function Oo(e){return e?e.map(So):[]}function Rs(e,t={}){let{template:r="apa",lang:i,format:s="text"}=t,n=e.map(({id:p})=>p),o=t.entry?t.entry:n;e=ae.downgradeCsl(e);let l=Rt(e,r,i,s),u=Oo(t.citationsPre),m=So(o),c=Oo(t.citationsPost);return l.rebuildProcessorState([...u,m,...c],s,[])[u.length][2]}Ae.add("@csl",{output:{bibliography:Ds,citation:Rs},config:{engine:Rt,locales:We,templates:tr}});var ri=Oe(Ns(),1);function ko(e){let t=document.createElement("template");return t.innerHTML=e,document.importNode(t.content,!0)}function No(e){let t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e,t}var ce=Object.assign(Yr(ko,e=>{if(e.firstChild===null)return null;if(e.firstChild===e.lastChild)return e.removeChild(e.firstChild);let t=document.createElement("span");return t.appendChild(e),t}),{fragment:Yr(ko,e=>e)}),_g=Object.assign(Yr(No,e=>e.firstChild===null?null:e.firstChild===e.lastChild?e.removeChild(e.firstChild):e),{fragment:Yr(No,e=>{let t=document.createDocumentFragment();for(;e.firstChild;)t.appendChild(e.firstChild);return t})}),wc=9,Ac=10,Tc=12,Oc=13,Sc=32,kc=65,Nc=90,Cc=97,Dc=122,Xr=60,be=62,Ke=47,De=45,Is=33,Bs=61,Co=34,Do=39,Rc=63,fe=1,Ro=2,Io=3,Fs=4,Vr=5,Qe=6,Ps=7,Hr=8,Wr=9,Ls=10,js=11,Jr=12,Us=13,rr=14,Bo=15,Fo=16,Ue=17,Po=18,Lo=19,jo=20,Uo=21,Ms=22,ir=23,Mo=24,zo=25,Re=26,$o=27,qo=28,Go=29,Ic=128,Xo=1,Bc=8,Fc=1,Ko="http://www.w3.org/2000/svg",ht="http://www.w3.org/1999/xlink",Vo="http://www.w3.org/XML/1998/namespace",Ho="http://www.w3.org/2000/xmlns/",Qo=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Qr=new Map([["xlink:actuate",ht],["xlink:arcrole",ht],["xlink:href",ht],["xlink:role",ht],["xlink:show",ht],["xlink:title",ht],["xlink:type",ht],["xml:lang",Vo],["xml:space",Vo],["xmlns",Ho],["xmlns:xlink",Ho]]);function Yr(e,t){return function({raw:r}){let i=fe,s="",n,o,l,u,m=0;for(let d=0,v=arguments.length;d<v;++d){let f=r[d];if(d>0){let y=arguments[d];switch(i){case Re:{if(y!=null){let b=`${y}`;if(Yo(o))s+=b.replace(/[<]/g,It);else{if(new RegExp(`</${o}[\\s>/]`,"i").test(s.slice(-o.length-2)+b))throw new Error("unsafe raw text");s+=b}}break}case fe:{y==null||(y instanceof Node||typeof y!="string"&&y[Symbol.iterator]||/(?:^|>)$/.test(r[d-1])&&/^(?:<|$)/.test(f)?(s+="<!--::"+d+"-->",m|=Ic):s+=`${y}`.replace(/[<&]/g,It));break}case Wr:{i=Jr;let b;if(/^[\s>]/.test(f)){if(y==null||y===!1){s=s.slice(0,l-r[d-1].length);break}if(y===!0||(b=`${y}`)==""){s+="''";break}if(r[d-1].slice(l,u)==="style"&&zs(y)||typeof y=="function"){s+="::"+d,m|=Xo;break}}if(b===void 0&&(b=`${y}`),b==="")throw new Error("unsafe unquoted empty string");s+=b.replace(/^['"]|[\s>&]/g,It);break}case Jr:{s+=`${y}`.replace(/[\s>&]/g,It);break}case js:{s+=`${y}`.replace(/['&]/g,It);break}case Ls:{s+=`${y}`.replace(/["&]/g,It);break}case Qe:{if(zs(y)){s+="::"+d+"=''",m|=Xo;break}throw new Error("invalid binding")}case Ue:break;default:throw new Error("invalid binding")}}for(let y=0,b=f.length;y<b;++y){let g=f.charCodeAt(y);switch(i){case fe:{g===Xr&&(i=Ro);break}case Ro:{g===Is?i=zo:g===Ke?i=Io:Kr(g)?(n=y,o=void 0,i=Fs,--y):g===Rc?(i=Vr,--y):(i=fe,--y);break}case Io:{Kr(g)?(i=Fs,--y):g===be?i=fe:(i=Vr,--y);break}case Fs:{Ye(g)?(i=Qe,o=nr(f,n,y)):g===Ke?i=rr:g===be&&(o=nr(f,n,y),i=sr(o)?Re:fe);break}case Qe:{Ye(g)||(g===Ke||g===be?(i=Ps,--y):g===Bs?(i=Hr,l=y+1,u=void 0):(i=Hr,--y,l=y+1,u=void 0));break}case Hr:{Ye(g)||g===Ke||g===be?(i=Ps,--y,u=y):g===Bs&&(i=Wr,u=y);break}case Ps:{Ye(g)||(g===Ke?i=rr:g===Bs?i=Wr:g===be?i=sr(o)?Re:fe:(i=Hr,--y,l=y+1,u=void 0));break}case Wr:{Ye(g)||(g===Co?i=Ls:g===Do?i=js:g===be?i=sr(o)?Re:fe:(i=Jr,--y));break}case Ls:{g===Co&&(i=Us);break}case js:{g===Do&&(i=Us);break}case Jr:{Ye(g)?i=Qe:g===be&&(i=sr(o)?Re:fe);break}case Us:{Ye(g)?i=Qe:g===Ke?i=rr:g===be?i=sr(o)?Re:fe:(i=Qe,--y);break}case rr:{g===be?i=fe:(i=Qe,--y);break}case Vr:{g===be&&(i=fe);break}case Bo:{g===De?i=Fo:g===be?i=fe:(i=Ue,--y);break}case Fo:{g===De?i=ir:g===be?i=fe:(i=Ue,--y);break}case Ue:{g===Xr?i=Po:g===De&&(i=Ms);break}case Po:{g===Is?i=Lo:g!==Xr&&(i=Ue,--y);break}case Lo:{g===De?i=jo:(i=Ue,--y);break}case jo:{g===De?i=Uo:(i=ir,--y);break}case Uo:{i=ir,--y;break}case Ms:{g===De?i=ir:(i=Ue,--y);break}case ir:{g===be?i=fe:g===Is?i=Mo:g!==De&&(i=Ue,--y);break}case Mo:{g===De?i=Ms:g===be?i=fe:(i=Ue,--y);break}case zo:{g===De&&f.charCodeAt(y+1)===De?(i=Bo,++y):(i=Vr,--y);break}case Re:{g===Xr&&(i=$o);break}case $o:{g===Ke?i=qo:(i=Re,--y);break}case qo:{Kr(g)?(n=y,i=Go,--y):(i=Re,--y);break}case Go:{Ye(g)&&o===nr(f,n,y)?i=Qe:g===Ke&&o===nr(f,n,y)?i=rr:g===be&&o===nr(f,n,y)?i=fe:Kr(g)||(i=Re,--y);break}default:{i=void 0;break}}}s+=f}let c=e(s),h=document.createTreeWalker(c,m,null,!1),p=[];for(;h.nextNode();){let d=h.currentNode;switch(d.nodeType){case Fc:{let v=d.attributes;for(let f=0,y=v.length;f<y;++f){let{name:b,value:g}=v[f];if(/^::/.test(b)){let A=arguments[+b.slice(2)];Wo(d,b),--f,--y;for(let E in A){let S=A[E];S==null||S===!1||(typeof S=="function"?d[E]=S:E==="style"&&zs(S)?Jo(d[E],S):Pc(d,E,S===!0?"":S))}}else if(/^::/.test(g)){let A=arguments[+g.slice(2)];Wo(d,b),--f,--y,typeof A=="function"?d[b]=A:Jo(d[b],A)}}break}case Bc:{if(/^::/.test(d.data)){let v=d.parentNode,f=arguments[+d.data.slice(2)];if(f instanceof Node)v.insertBefore(f,d);else if(typeof f!="string"&&f[Symbol.iterator])if(f instanceof NodeList||f instanceof HTMLCollection)for(let y=f.length-1,b=d;y>=0;--y)b=v.insertBefore(f[y],b);else for(let y of f)y!=null&&v.insertBefore(y instanceof Node?y:document.createTextNode(y),d);else v.insertBefore(document.createTextNode(f),d);p.push(d)}break}}}for(let d of p)d.parentNode.removeChild(d);return t(c)}}function It(e){return`&#${e.charCodeAt(0).toString()};`}function Kr(e){return kc<=e&&e<=Nc||Cc<=e&&e<=Dc}function Ye(e){return e===wc||e===Ac||e===Tc||e===Sc||e===Oc}function zs(e){return e&&e.toString===Object.prototype.toString}function sr(e){return e==="script"||e==="style"||Yo(e)}function Yo(e){return e==="textarea"||e==="title"}function nr(e,t,r){return e.slice(t,r).toLowerCase()}function Pc(e,t,r){if(e.namespaceURI===Ko&&(t=t.toLowerCase(),t=Qo.get(t)||t,Qr.has(t))){e.setAttributeNS(Qr.get(t),t,r);return}e.setAttribute(t,r)}function Wo(e,t){if(e.namespaceURI===Ko&&(t=t.toLowerCase(),t=Qo.get(t)||t,Qr.has(t))){e.removeAttributeNS(Qr.get(t),t);return}e.removeAttribute(t)}function Jo(e,t){for(let r in t){let i=t[r];r.startsWith("--")?e.setProperty(r,i):e[r]=i}}function Zr(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return typeof t=="function"?t(e):t;let r=e.getUTCHours(),i=e.getUTCMinutes(),s=e.getUTCSeconds(),n=e.getUTCMilliseconds();return`${Lc(e.getUTCFullYear(),4)}-${Me(e.getUTCMonth()+1,2)}-${Me(e.getUTCDate(),2)}${r||i||s||n?`T${Me(r,2)}:${Me(i,2)}${s||n?`:${Me(s,2)}${n?`.${Me(n,3)}`:""}`:""}Z`:""}`}function Lc(e){return e<0?`-${Me(-e,6)}`:e>9999?`+${Me(e,6)}`:Me(e,4)}function Me(e,t){return`${e}`.padStart(t,"0")}function Bt(e){return e==null?null:typeof e=="number"?`${e}px`:`${e}`}function jc(e){return{"--input-width":Bt(e)}}var Uc={bubbles:!0};function Mc(e){e.preventDefault()}function Zo({currentTarget:e}){(e.form||e).dispatchEvent(new Event("input",Uc))}function qs(e){return e}var zc=0;function il(){return`inputs-3a86ea-${++zc}`}function sl(e,t){if(e)return e=ce`<label>${e}`,t!==void 0&&(e.htmlFor=t.id=il()),e}function or(e){return Array.isArray(e)?e:Array.from(e)}function el(e){return e?typeof e[Symbol.iterator]=="function":!1}function $c(e){if(el(e.columns))return e.columns;if(e.schema&&el(e.schema.fields))return Array.from(e.schema.fields,t=>t.name);if(typeof e.columnNames=="function")return e.columnNames()}function Ws(e){return e==null?"":`${e}`}var Js=ti(e=>{let t=ei(e);return r=>r==null?"":typeof r=="number"?t(r):r instanceof Date?nl(r):`${r}`}),ei=ti(e=>t=>t===0?"0":t.toLocaleString(e)),kg=Js(),Ng=ei();function nl(e){return Zr(e,"Invalid Date")}function ti(e){let t=ti,r;return(i="en")=>i===t?r:r=e(t=i)}function Gs(e,t){return lr(t)-lr(e)||(e<t?-1:e>t?1:e>=t?0:NaN)}function al(e,t){return lr(t)-lr(e)||(t<e?-1:t>e?1:t>=e?0:NaN)}function lr(e){return e!=null&&!Number.isNaN(e)}var qc=([e])=>e,tl=([,e])=>e;function ol({multiple:e,render:t,selectedIndexes:r,select:i}){return function(n,{locale:o,keyof:l=n instanceof Map?qc:qs,valueof:u=n instanceof Map?tl:qs,format:m=(b=>(g,A,E)=>b(l(g,A,E)))(Js(o)),multiple:c,key:h,value:p,disabled:d=!1,sort:v,unique:f,...y}={}){if(typeof l!="function")throw new TypeError("keyof is not a function");if(typeof u!="function")throw new TypeError("valueof is not a function");if(typeof m!="function")throw new TypeError("format is not a function");e!==void 0&&(c=e),v=Vc(v);let b=+c;p===void 0&&(p=h!==void 0&&n instanceof Map?b>0?Array.from(h,I=>n.get(I)):n.get(h):void 0),f=!!f,n=or(n);let g=n.map((I,O)=>[l(I,O,n),O]);v!==void 0&&g.sort(([I],[O])=>v(I,O)),f&&(g=[...new Map(g.map(I=>[Wc(I[0]),I])).values()]);let A=g.map(tl);c===!0?b=Math.max(1,Math.min(10,A.length)):b>0?c=!0:(c=!1,b=void 0);let[E,S]=t(n,A,Gc(n,A,p,c,u),Xc(n,A,d,u),{...y,format:m,multiple:c,size:b});E.addEventListener("input",w),E.addEventListener("change",Zo),E.addEventListener("submit",Mc);function w(I){if(I&&I.isTrusted&&E.removeEventListener("change",Zo),c)p=r(S).map(O=>u(n[O],O,n));else{let O=Hc(S);p=O<0?null:u(n[O],O,n)}}return w(),Object.defineProperty(E,"value",{get(){return p},set(I){if(c){let O=new Set(I);for(let D of S){let _=+D.value;i(D,O.has(u(n[_],_,n)))}}else S.value=A.find(O=>I===u(n[O],O,n));w()}})}}function Gc(e,t,r,i,s){let n=new Set(r===void 0?[]:i?or(r):[r]);if(!n.size)return()=>!1;let o=new Set;for(let l of t)n.has(s(e[l],l,e))&&o.add(l);return l=>o.has(l)}function Xc(e,t,r,i){if(typeof r=="boolean")return r;let s=new Set(or(r)),n=new Set;for(let o of t)s.has(i(e[o],o,e))&&n.add(o);return o=>n.has(o)}function Vc(e){if(!(e===void 0||e===!1)){if(e===!0||e==="ascending")return Gs;if(e==="descending")return al;if(typeof e=="function")return e;throw new TypeError("sort is not a function")}}function Hc(e){return e.value?+e.value:-1}function Wc(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ll(e,t){return ol({multiple:e,render(r,i,s,n,{format:o,label:l}){let u=ce`<form class="inputs-3a86ea inputs-3a86ea-checkbox">
      ${sl(l)}<div>
        ${i.map(m=>ce`<label><input type=${t} disabled=${typeof n=="function"?n(m):n} name=input value=${m} checked=${s(m)}>${o(r[m],m,r)}`)}
      </div>
    </form>`;return[u,Jc(u.elements.input,e)]},selectedIndexes(r){return Array.from(r).filter(i=>i.checked).map(i=>+i.value)},select(r,i){r.checked=i}})}var Cg=ll(!1,"radio"),Dg=ll(!0,"checkbox");function Jc(e,t){return e===void 0?new Xs(t?[]:null):typeof e.length>"u"?new(t?Hs:Vs)(e):e}var Xs=class{constructor(t){this._value=t}get value(){return this._value}set value(t){}*[Symbol.iterator](){}},Vs=class{constructor(t){this._input=t}get value(){let{_input:t}=this;return t.checked?t.value:""}set value(t){let{_input:r}=this;r.checked||(r.checked=Ws(t)===r.value)}*[Symbol.iterator](){yield this._input}},Hs=class{constructor(t){this._input=t,this._value=t.checked?[t.value]:[]}get value(){return this._value}set value(t){let{_input:r}=this;r.checked||(r.checked=Ws(t)===r.value,this._value=r.checked?[r.value]:[])}*[Symbol.iterator](){yield this._input}};var Rg=ti(e=>{let t=ei(e);return r=>`${t(r)} result${r===1?"":"s"}`}),Ig=ol({render(e,t,r,i,{format:s,multiple:n,size:o,label:l,width:u}){let m=ce`<select class=inputs-3a86ea-input disabled=${i===!0} multiple=${n} size=${o} name=input>
      ${t.map(h=>ce`<option value=${h} disabled=${typeof i=="function"?i(h):!1} selected=${r(h)}>${Ws(s(e[h],h,e))}`)}
    </select>`;return[ce`<form class=inputs-3a86ea style=${jc(u)}>${sl(l,m)}${m}`,m]},selectedIndexes(e){return Array.from(e.selectedOptions,t=>+t.value)},select(e,t){e.selected=t}}),ul=22;function ml(e,t={}){let{rows:r=11.5,height:i,maxHeight:s=i===void 0?(r+1)*ul-1:void 0,width:n={},maxWidth:o}=t,l=il(),u=ce`<form class="inputs-3a86ea inputs-3a86ea-table" id=${l} style=${{height:Bt(i),maxHeight:Bt(s),width:typeof n=="string"||typeof n=="number"?Bt(n):void 0,maxWidth:Bt(o)}}>`;return e&&typeof e.then=="function"?(Object.defineProperty(u,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(e).then(m=>rl({root:u,id:l},m,t))):rl({root:u,id:l},e,t),u}function rl({root:e,id:t},r,{columns:i=$c(r),value:s,required:n=!0,sort:o,reverse:l=!1,format:u,locale:m,align:c,header:h,rows:p=11.5,width:d={},multiple:v=!0,select:f=!0,layout:y}={}){i=i===void 0?tf(r):or(i),y===void 0&&(y=i.length>=12?"auto":"fixed"),u=Kc(u,r,i,m),c=Qc(c,r,i);let b=[],g=[],A=r[Symbol.iterator](),E=0,S=ef(r),w=O(p*2);function I(){E>=0&&(E=A=void 0,g=Uint32Array.from(b=or(r),(P,$)=>$),S=g.length)}function O(P){if(P=Math.floor(P),S!==void 0)return Math.min(S,P);if(P<=E)return P;for(;P>E;){let{done:$,value:V}=A.next();if($)return S=E;g.push(E++),b.push(V)}return E}let D=null,_=!1,x=new Set,k=null,R=null,N=ce`<tbody>`,T=ce`<tr><td>${f?ce`<input type=${v?"checkbox":"radio"} name=${v?null:"radio"}>`:null}</td>${i.map(()=>ce`<td>`)}`,C=ce`<tr><th>${f?ce`<input type=checkbox onclick=${z} disabled=${!v}>`:null}</th>${i.map(P=>ce`<th title=${P} onclick=${$=>G($,P)}><span></span>${h&&P in h?h[P]:P}</th>`)}</tr>`;e.appendChild(ce.fragment`<table style=${{tableLayout:y}}>
  <thead>${O(1)||i.length?C:null}</thead>
  ${N}
</table>
<style>${i.map((P,$)=>{let V=[];if(c[P]!=null&&V.push(`text-align:${c[P]}`),d[P]!=null&&V.push(`width:${Bt(d[P])}`),V.length)return`#${t} tr>:nth-child(${$+2}){${V.join(";")}}`}).filter(qs).join(`
`)}</style>`);function j(P,$){if(E===P){for(;P<$;++P)F(A.next().value,P);E=$}else for(let V;P<$;++P)V=g[P],F(b[V],V)}function F(P,$){let V=T.cloneNode(!0),J=ar(V);if(J!=null&&(J.onclick=H,J.checked=x.has($),J.value=$),P!=null)for(let ee=0;ee<i.length;++ee){let Q=i[ee],W=P[Q];lr(W)&&(W=u[Q](W,$,r),W instanceof Node||(W=document.createTextNode(W)),V.childNodes[ee+1].appendChild(W))}N.append(V)}function M(P){I();let $=g.indexOf(P);if($<N.childNodes.length){let V=N.childNodes[$];ar(V).checked=!1}x.delete(P)}function U(P){I();let $=g.indexOf(P);if($<N.childNodes.length){let V=N.childNodes[$];ar(V).checked=!0}x.add(P)}function*B(P,$){if(I(),P=g.indexOf(P),$=g.indexOf($),P<$)for(;P<=$;)yield g[P++];else for(;$<=P;)yield g[$++]}function L(P){return P[Symbol.iterator]().next().value}function z(P){if(I(),this.checked){x=new Set(g);for(let $ of N.childNodes)ar($).checked=!0}else{for(let $ of x)M($);k=R=null,P.detail&&P.currentTarget.blur()}X()}function H(P){I();let $=+this.value;if(v)if(P.shiftKey){if(k===null)k=x.size?L(x):g[0];else for(let V of B(k,R))M(V);R=$;for(let V of B(k,R))U(V)}else k=R=$,x.has($)?(M($),k=R=null,P.detail&&P.currentTarget.blur()):U($);else{for(let V of x)M(V);U($)}X()}function G(P,$){I();let V=P.currentTarget,J;if(D===V&&P.metaKey)$s(D).textContent="",D=null,_=!1,J=Gs;else{D===V?_=!_:(D&&($s(D).textContent=""),D=V,_=P.altKey);let ee=_?al:Gs;J=(Q,W)=>ee(b[Q][$],b[W][$]),$s(V).textContent=_?"\u25BE":"\u25B4"}for(g.sort(J),x=new Set(Array.from(x).sort(J)),e.scrollTo(e.scrollLeft,0);N.firstChild;)N.firstChild.remove();j(0,w=O(p*2)),k=R=null,X()}function X(){let P=ar(C);P!=null&&(P.disabled=!v&&!x.size,P.indeterminate=v&&x.size&&x.size!==S,P.checked=x.size,s=void 0)}if(e.addEventListener("scroll",()=>{e.scrollHeight-e.scrollTop<p*ul*1.5&&w<O(w+1)&&j(w,w=O(w+p))}),o===void 0&&l&&(I(),g.reverse()),s!==void 0){if(I(),v){let P=new Set(s);x=new Set(g.filter($=>P.has(b[$])))}else{let P=b.indexOf(s);x=P<0?new Set:new Set([P])}X()}if(O(1)?j(0,w):N.append(ce`<tr>${i.length?ce`<td>`:null}<td rowspan=${i.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),o!==void 0){let P=i.indexOf(o);P>=0&&(l&&(D=C.childNodes[P+1]),G({currentTarget:C.childNodes[P+1]},i[P]))}return Object.defineProperty(e,"value",{get(){if(s===void 0)if(I(),v)s=Array.from(n&&x.size===0?g:x,P=>b[P]),s.columns=i;else if(x.size){let[P]=x;s=b[P]}else s=null;return s},set(P){if(I(),v){let $=new Set(P),V=new Set(g.filter(J=>$.has(b[J])));for(let J of x)V.has(J)||M(J);for(let J of V)x.has(J)||U(J)}else{let $=b.indexOf(P);x=$<0?new Set:new Set([$])}s=void 0}})}function ar(e){return e.firstChild.firstChild}function $s(e){return e.firstChild}function Kc(e={},t,r,i){let s=Object.create(null);for(let n of r){if(n in e){s[n]=e[n];continue}switch(pl(t,n)){case"number":s[n]=ei(i);break;case"date":s[n]=nl;break;default:s[n]=Js(i);break}}return s}function Qc(e={},t,r){let i=Object.create(null);for(let s of r)s in e?i[s]=e[s]:pl(t,s)==="number"&&(i[s]="right");return i}function pl(e,t){if(Yc(e))return Zc(e,t);for(let r of e){if(r==null)continue;let i=r[t];if(i!=null)return typeof i=="number"?"number":i instanceof Date?"date":void 0}}function Yc(e){return typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function Zc(e,t){let r=e.schema.fields.find(i=>i.name===t);switch(r?.type.typeId){case 8:case 10:return r.type.unit===1?"date":"number";case 2:case 3:case 7:case 9:return"number"}}function ef(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.numRows=="function")return e.numRows()}function tf(e){let t=new Set;for(let r of e)for(let i in r)t.add(i);return Array.from(t)}var dt,cl,Qs,Ys=class Ys{constructor(t,r){ln(this,dt);this.refObject=cr(this,dt,cl).call(this,t),this.citeFac=r}static async create(t,{cslLocale:r="en-GB",cslStyle:i="apa",linkCitations:s=!0,linkBibliography:n=!0}={}){let o=await sf(i),l=await nf(r),u=await af(t,{cslLocale:l,cslStyle:o,linkCitations:s,linkBibliography:n});return new Ys(t,u)}refTableRaw(){return this.refObject}refTable(){return ml(this.refTableRaw(),{layout:"auto"})}cite(...t){return cr(this,dt,Qs).call(this,"mode","composite",...t)}citep(...t){return this.citeFac(...t)}citeeg(...t){return cr(this,dt,Qs).call(this,"prefix","e.g. ",...t)}bibliography(t={}){let{showAll:r=!1,showNone:i=!1}=t,s=document.createElement("div"),[n,o]=["",null],l=()=>{o=null;let d=this.citeFac.bibliographyRaw({showAll:r,showNone:i});d!==n&&(n=d,s.innerHTML=d)},u=()=>{o===null&&(o=requestAnimationFrame(l))},m=d=>{u()};document.addEventListener("citation-updated",m);let c=new WeakMap,h=d=>{if(c.has(d))return;let v=new MutationObserver(()=>{u()});v.observe(d,{childList:!0,subtree:!0,characterData:!0}),c.set(d,v)};document.querySelectorAll("span.csl-citation-cluster").forEach(h);let p=new MutationObserver(d=>{for(let v of d)for(let f of v.addedNodes)f instanceof Element&&f.matches("span.csl-citation-cluster")&&h(f)});return p.observe(document.body,{childList:!0,subtree:!0}),l(),s.dispose=()=>{document.removeEventListener("citation-updated",m),p.disconnect();for(let d of c.values())d.disconnect()},s}dispose(){typeof this.citeFac.dispose=="function"&&this.citeFac.dispose()}};dt=new WeakSet,cl=function(t){let r=[],i=/@(\w+)\s*{\s*([^,]+),[^@]*?title\s*=\s*[{"]([^"}]+)[}"]/g,s;for(;(s=i.exec(t))!==null;){let[n,o,l]=s.slice(1,4).map(u=>u.trim());r.push({name:o,title:l.replace(/[{}]/g,""),type:n})}return r.sort((n,o)=>n.name.localeCompare(o.name)),r},Qs=function(t,r,...i){if(i.length&&typeof i[i.length-1]=="object"&&!i[i.length-1].hasOwnProperty("id")){let s=i.pop();return this.citeFac(...i,{...s,[t]:r})}return this.citeFac(...i,{[t]:r})};var Ks=Ys,sf=async function(e){let t=await fetch(`https://raw.githubusercontent.com/citation-style-language/styles/master/${e}.csl`);if(!t.ok)throw new Error(`Failed to fetch CSL style ${e}: ${t.statusText}`);return await t.text()},nf=async function(e){let t=await fetch(`https://raw.githubusercontent.com/citation-style-language/locales/master/locales-${e}.xml`);if(!t.ok)throw new Error(`Failed to fetch CSL locale ${e}: ${t.statusText}`);return await t.text()},af=async function(e="",{cslStyle:t,cslLocale:r,linkCitations:i=!0,linkBibliography:s=!0}={}){let n=Math.random().toString(36).substr(2,5),o=null,l=d=>{let v=d.target;if(v instanceof HTMLAnchorElement&&v.classList.contains("csl-link")&&v.getAttribute("href")?.match(/^#/)){let f=document.querySelector(`.csl-entry${v.hash}[data-citation-engine-id="${v.dataset.citationEngineId}"]`);f&&(d.preventDefault(),f.scrollIntoView())}};i&&(document.addEventListener("click",l),o=()=>{document.removeEventListener("click",l)});let u=(await ns.async(e,{generateGraph:!1})).format("data",{format:"object"}).reduce((d,v)=>d.set(v.id,v),new Map),m=Array.from(u.keys()),c={retrieveLocale:()=>r,retrieveItem:d=>u.get(d)},h=new ri.Engine(c,t);h.updateItems(m);function p(...d){try{let v=d.length&&typeof d[d.length-1]=="object"&&!d[d.length-1].hasOwnProperty("id")?d.pop():{};v.noteIndex=0,d=d.map(g=>(g=typeof g=="string"?{id:g}:g,g.prefix=`<span class="csl-citation-item" data-citation-engine-id="${n}" data-citation-item-id="${g.id}">${g.prefix?g.prefix:""}${i?`<a class="csl-link" href="#${g.id}" data-citation-engine-id="${n}">`:""}`,g.suffix=`${i?"</a>":""}${g.suffix?g.suffix:""}</span>`,g));let f={citationItems:d,properties:v},y=h.previewCitationCluster(f,[],[],"html").replace(/&#60;/g,"<").replace(/&#62;/g,">"),b=document.createElement("span");return b.className="csl-citation-cluster",b.dataset.citationEngineId=n,b.innerHTML=y,b.citationCluster=f,typeof window<"u"&&document.dispatchEvent(new CustomEvent("citation-updated",{detail:{engine:n}})),b}catch(v){let f=document.createElement("span");return f.style.padding="0 5px",f.style.backgroundColor="red",f.style.color="white",f.innerHTML=`<span style="font-weight:bold;">Citation error:</span> ${v}`,f}}return p.bibliographyRaw=function({showAll:d=!1,showNone:v=!1}={}){let f=Array.from(document.querySelectorAll(`span.csl-citation-item[data-citation-engine-id="${n}"]`)),y=Array.from(document.querySelectorAll(`span.csl-citation-cluster[data-citation-engine-id="${n}"]`)),b=f.length>0;if(!m.length)return"<b>No references?</b>";if(v)return"";let g,A;if(d)g=new ri.Engine(c,t),g.opt.development_extensions.wrap_url_and_doi=s,g.updateUncitedItems(m);else{if(!b)return"<b>No citations!</b>";A=new ri.Engine(c,t),A.opt.development_extensions.wrap_url_and_doi=s,A.updateItems(m);let O=[],D=new Map;y.forEach(_=>{A.processCitationCluster(_.citationCluster,O,[])[1].forEach(k=>{D.set(k[2],k[1].replace(/&#60;/g,"<").replace(/&#62;/g,">"))}),O.push([_.citationCluster.citationID,0])}),y.forEach(_=>{let x=_.citationCluster.citationID,k=D.get(x);k!=null&&(_.innerHTML=k)}),g=A}let E=g.makeBibliography(),S=E[1].map((O,D)=>O.replace("<div",`<div id="${E[0].entry_ids[D]}" data-citation-engine-id="${n}"`)),w=E[0].bibstart+S.reduce((O,D)=>O+D,"")+E[0].bibend,I=`
  <style>
    .csl-entry[data-citation-engine-id="${n}"] {
      line-height: ${E[0].linespacing*.8};
      ${E[0].hangingindent?`
        padding-left: 1rem;
        text-indent: -1rem;
      `:""};

    }
  </style>
  `;return`<div data-citation-engine-id="${n}">${I}${w}</div>`},p.dispose=function(){o&&(o(),o=null)},p};return Tl(of);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)
*/
//# sourceMappingURL=references.umd.js.map
